{"version":3,"file":"index.js","sources":["../src/components/codeBlock/index.ts","../src/createElement.ts","../../srender/dist/index.js","../src/utils/view.ts","../src/components/taskList/index.ts","../src/components/tables/tableMap.ts","../src/components/tables/schema.ts","../src/components/tables/utils.ts","../src/components/tables/cellSelection.ts","../src/components/tables/fixtables.ts","../src/components/tables/commands.ts","../src/components/tables/tableView.ts","../src/components/tables/columnresizing.ts","../src/components/tables/copypaste.ts","../src/components/tables/input.ts","../src/components/tables/index.ts","../src/components/katex/index.ts","../src/model.ts","../src/components/codeBlock/codeBlockView.ts","../src/components/codeBlock/highlightRenderer.ts","../src/components/codeBlock/highlightCodePlugin.ts","../src/utils/index.ts","../src/components/outline/index.ts","../src/commands/inputRules.ts","../src/commands/keymap.ts","../src/components/toolBar/menuItem.ts","../src/components/toolBar/menuGroup.ts","../src/components/toolBar/commands.ts","../src/components/toolBar/floatBar.ts","../src/components/tooltip/index.ts","../src/components/toolBar/index.ts","../../srender/jsx-runtime/index.js","../../Icons/vars.js","../../Icons/svg/ArrowRight.js","../../Icons/index.js","../src/components/heading/Heading.tsx","../src/components/heading/index.ts","../src/view.ts","../src/index.ts"],"sourcesContent":["import { NodeSpec } from 'prosemirror-model';\nimport { Command } from 'prosemirror-state';\n\nexport const codeBlock: NodeSpec = {\n  content: 'text*',\n  group: 'block',\n  marks: '',\n  code: true,\n  defining: true,\n  draggable: false,\n  selectable: true,\n  isolating: true,\n\n  attrs: {\n    language: {\n      default: 'plaintext',\n    },\n    theme: {\n      default: 'dark',\n    },\n    showLineNumber: {\n      default: true,\n    },\n  },\n\n  toDOM(node) {\n    return [\n      'pre',\n      {\n        'data-lanaguage': node.attrs.language,\n        'data-theme': node.attrs.theme,\n        'data-show-line-number': node.attrs.showLineNumber,\n        'data-node-type': 'code_block',\n      },\n      ['code', 0],\n    ];\n  },\n  parseDOM: [\n    {\n      tag: 'pre',\n      preserveWhitespace: 'full',\n      getAttrs(domNode: HTMLElement) {\n        return {\n          language: domNode.getAttribute('data-language'),\n          theme: domNode.getAttribute('data-theme'),\n          showLineNumber: domNode.getAttribute('data-show-line-number'),\n        };\n      },\n    },\n  ],\n};\n\nexport const createCodeBlockCmd: Command = (state, dispatch, view) => {\n  const lastLanguage = state.schema.cached.lastLanguage || 'plaintext';\n  const { codeBlock } = state.schema.nodes;\n  const codeBlockNode = codeBlock.create({ language: lastLanguage });\n  let tr = state.tr;\n  tr.replaceSelectionWith(codeBlockNode);\n  tr.scrollIntoView();\n\n  if (dispatch) {\n    dispatch(tr);\n    return true;\n  }\n\n  return false;\n};\n","interface Spec {\n  [key: string]: undefined | null | boolean | string | ((e: Event) => void);\n}\ntype DOMNode = HTMLElement | string;\ntype TagName = keyof HTMLElementTagNameMap;\n\nfunction createElement<T extends TagName>(\n  tag: T,\n  options: Spec = {},\n  arg?: DOMNode | DOMNode[],\n  ...rest: DOMNode[]\n): HTMLElementTagNameMap[T] {\n  let children: DOMNode[] = [];\n  if (Array.isArray(arg)) children = arg;\n  else children = arg ? [arg, ...rest] : [];\n\n  const dom = document.createElement(tag);\n  for (const key of Object.keys(options)) {\n    const val = options[key];\n    if (val === null || val === undefined) continue;\n    if (typeof val === 'function') {\n      dom.addEventListener(key.replace('on', ''), val);\n    } else {\n      dom.setAttribute(key, val + '');\n    }\n  }\n  const fragment = document.createDocumentFragment();\n  for (const child of children) {\n    fragment.append(child);\n  }\n  dom.appendChild(fragment);\n  return dom;\n}\n\nexport default createElement;\n\nexport const updateElement = (\n  dom: HTMLElement,\n  attrs: Record<string, string>\n) => {\n  for (const key of Object.keys(attrs)) {\n    dom.setAttribute(key, attrs[key]);\n  }\n};\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.srender = {}));\n})(this, (function (exports) { 'use strict';\n\n  function _arrayLikeToArray(r, a) {\n    (null == a || a > r.length) && (a = r.length);\n    for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n    return n;\n  }\n  function _arrayWithHoles(r) {\n    if (Array.isArray(r)) return r;\n  }\n  function _classCallCheck(a, n) {\n    if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n  function _defineProperties(e, r) {\n    for (var t = 0; t < r.length; t++) {\n      var o = r[t];\n      o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n    }\n  }\n  function _createClass(e, r, t) {\n    return r && _defineProperties(e.prototype, r), Object.defineProperty(e, \"prototype\", {\n      writable: !1\n    }), e;\n  }\n  function _createForOfIteratorHelper(r, e) {\n    var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n    if (!t) {\n      if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e  ) {\n        t && (r = t);\n        var n = 0,\n          F = function () {};\n        return {\n          s: F,\n          n: function () {\n            return n >= r.length ? {\n              done: !0\n            } : {\n              done: !1,\n              value: r[n++]\n            };\n          },\n          e: function (r) {\n            throw r;\n          },\n          f: F\n        };\n      }\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n    var o,\n      a = !0,\n      u = !1;\n    return {\n      s: function () {\n        t = t.call(r);\n      },\n      n: function () {\n        var r = t.next();\n        return a = r.done, r;\n      },\n      e: function (r) {\n        u = !0, o = r;\n      },\n      f: function () {\n        try {\n          a || null == t.return || t.return();\n        } finally {\n          if (u) throw o;\n        }\n      }\n    };\n  }\n  function _defineProperty(e, r, t) {\n    return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n      value: t,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[r] = t, e;\n  }\n  function _iterableToArrayLimit(r, l) {\n    var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n    if (null != t) {\n      var e,\n        n,\n        i,\n        u,\n        a = [],\n        f = !0,\n        o = !1;\n      try {\n        if (i = (t = t.call(r)).next, 0 === l) ; else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n      } catch (r) {\n        o = !0, n = r;\n      } finally {\n        try {\n          if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;\n        } finally {\n          if (o) throw n;\n        }\n      }\n      return a;\n    }\n  }\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  function _slicedToArray(r, e) {\n    return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _unsupportedIterableToArray(r, a) {\n    if (r) {\n      if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n      var t = {}.toString.call(r).slice(8, -1);\n      return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n    }\n  }\n\n  var Component = /*#__PURE__*/function () {\n    function Component(props, context) {\n      _classCallCheck(this, Component);\n      _defineProperty(this, \"props\", void 0);\n      _defineProperty(this, \"state\", void 0);\n      _defineProperty(this, \"context\", void 0);\n      _defineProperty(this, \"__fiber\", void 0);\n      _defineProperty(this, \"_snapshot\", void 0);\n      this.props = props || {};\n      this.context = context;\n    }\n    return _createClass(Component, [{\n      key: \"shouldComponentUpdate\",\n      value: function shouldComponentUpdate(props, state, nextContext) {\n        return true;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {}\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(props, state, snapshot) {}\n    }, {\n      key: \"getSnapshotBeforeUpdate\",\n      value: function getSnapshotBeforeUpdate(prevProps, prevState) {}\n    }, {\n      key: \"componentDidCatch\",\n      value: function componentDidCatch(error, errorInfo) {}\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {}\n    }, {\n      key: \"destory\",\n      value: function destory() {\n        this.componentWillUnmount();\n      }\n    }, {\n      key: \"setState\",\n      value: function setState(state) {\n        // this.__fiber!.partialState = state;\n        // batchUpdate({ from: ITag.CLASS_COMPONENT, fiber: this.__fiber! });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        throw new Error('render method should be implemented');\n      }\n    }]);\n  }();\n  function createInstance(fiber) {\n    var _Ctor$contextType;\n    var Ctor = fiber.type;\n    var instance = new Ctor(fiber.pendingProps, (_Ctor$contextType = Ctor.contextType) === null || _Ctor$contextType === void 0 ? void 0 : _Ctor$contextType.currentValue);\n    instance.__fiber = fiber;\n    return instance;\n  }\n\n  var FiberTag;\n  (function (FiberTag) {\n    FiberTag[\"HostComponent\"] = \"Host\";\n    FiberTag[\"HostText\"] = \"HostText\";\n    FiberTag[\"ClassComponent\"] = \"Class\";\n    FiberTag[\"FunctionComponent\"] = \"Function\";\n    FiberTag[\"HostRoot\"] = \"Root\";\n    FiberTag[\"Fragment\"] = \"Fragment\";\n    FiberTag[\"Suspense\"] = \"Suspense\";\n    FiberTag[\"Offscreen\"] = \"Offscreen\";\n    FiberTag[\"ContextProvider\"] = \"ContextProvider\";\n    FiberTag[\"Unknown\"] = \"Unknown\";\n  })(FiberTag || (FiberTag = {}));\n  var FiberFlags;\n  (function (FiberFlags) {\n    FiberFlags[FiberFlags[\"NONE\"] = 0] = \"NONE\";\n    FiberFlags[FiberFlags[\"ShouldCapture\"] = 1] = \"ShouldCapture\";\n    FiberFlags[FiberFlags[\"DidCapture\"] = 2] = \"DidCapture\";\n    FiberFlags[FiberFlags[\"PerformWork\"] = 4] = \"PerformWork\";\n    FiberFlags[FiberFlags[\"Placement\"] = 8] = \"Placement\";\n    FiberFlags[FiberFlags[\"Deletion\"] = 16] = \"Deletion\";\n    FiberFlags[FiberFlags[\"Update\"] = 32] = \"Update\";\n  })(FiberFlags || (FiberFlags = {}));\n  var UpdateState;\n  (function (UpdateState) {\n    UpdateState[UpdateState[\"replaceState\"] = 1] = \"replaceState\";\n    UpdateState[UpdateState[\"updateState\"] = 2] = \"updateState\";\n    UpdateState[UpdateState[\"forceUpdate\"] = 3] = \"forceUpdate\";\n    UpdateState[UpdateState[\"captureState\"] = 4] = \"captureState\";\n  })(UpdateState || (UpdateState = {}));\n  var Mode;\n  (function (Mode) {\n    Mode[Mode[\"NoMode\"] = 0] = \"NoMode\";\n    Mode[Mode[\"Concurrent\"] = 1] = \"Concurrent\";\n  })(Mode || (Mode = {}));\n\n  var ITag;\n  (function (ITag) {\n    ITag[\"HOST_COMPONENT\"] = \"Host\";\n    ITag[\"HOST_TEXT\"] = \"HostText\";\n    ITag[\"CLASS_COMPONENT\"] = \"Class\";\n    ITag[\"FUNCTION_COMPONENT\"] = \"Function\";\n    ITag[\"HOST_ROOT\"] = \"Root\";\n    ITag[\"FRAGMENT\"] = \"Fragment\";\n    ITag[\"SUSPENSE\"] = \"Suspense\";\n    ITag[\"OFFSCREEN\"] = \"Offscreen\";\n    ITag[\"CONTEXT_PROVIDER\"] = \"ContextProvider\";\n    ITag[\"UNKNOWN\"] = \"Unknown\";\n  })(ITag || (ITag = {}));\n  var Effect;\n  (function (Effect) {\n    Effect[Effect[\"NOTHING\"] = 0] = \"NOTHING\";\n    Effect[Effect[\"PLACEMENT\"] = 1] = \"PLACEMENT\";\n    Effect[Effect[\"DELETION\"] = 2] = \"DELETION\";\n    Effect[Effect[\"UPDATE\"] = 4] = \"UPDATE\";\n  })(Effect || (Effect = {}));\n  var Flags;\n  (function (Flags) {\n    Flags[Flags[\"NONE\"] = 0] = \"NONE\";\n    Flags[Flags[\"ShouldCapture\"] = 1] = \"ShouldCapture\";\n    Flags[Flags[\"DidCapture\"] = 2] = \"DidCapture\";\n  })(Flags || (Flags = {}));\n\n  function adjustHeap(list, parent, end, compare) {\n    if (parent < 0) return;\n    for (var i = 2 * parent + 1; i < end; i = i * 2 + 1) {\n      if (i + 1 < end && compare(list[i], list[i + 1]) <= 0) i++;\n      if (compare(list[i], list[parent]) > 0) swap(list, i, parent);\n      parent = i;\n    }\n  }\n  function swap(list, left, right) {\n    var tmp = list[left];\n    list[left] = list[right];\n    list[right] = tmp;\n  }\n  function heapify(list, compare) {\n    var len = list.length;\n    var index = Math.floor(len / 2) - 1;\n    for (var i = index; i >= 0; i--) adjustHeap(list, i, len, compare);\n    return list;\n  }\n  var TaskQueue = /*#__PURE__*/function () {\n    function TaskQueue() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        compare = _ref.compare;\n      _classCallCheck(this, TaskQueue);\n      _defineProperty(this, \"list\", void 0);\n      _defineProperty(this, \"compare\", void 0);\n      this.list = [];\n      this.compare = compare || TaskQueue.defaultCompareFn;\n    }\n    return _createClass(TaskQueue, [{\n      key: \"push\",\n      value: function push(item) {\n        var list = this.list,\n          compare = this.compare;\n        list.push(item);\n        var len = list.length;\n        var i = len - 1;\n        do {\n          i = Math.floor((i + 1) / 2) - 1;\n          adjustHeap(list, i, len, compare);\n        } while (i > 0);\n      }\n    }, {\n      key: \"shift\",\n      value: function shift() {\n        var list = this.list,\n          compare = this.compare;\n        var item = list.shift();\n        heapify(list, compare);\n        return item;\n      }\n    }, {\n      key: \"pop\",\n      value: function pop() {\n        return this.list.pop();\n      }\n    }, {\n      key: \"peek\",\n      value: function peek() {\n        return this.list[0];\n      }\n    }]);\n  }();\n  _defineProperty(TaskQueue, \"defaultCompareFn\", function (a, b) {\n    return b.sortIndex - a.sortIndex;\n  });\n\n  var ImmediatePriority = 1;\n  var UserBlockingPriority = 2;\n  var NormalPriority = 3;\n  var LowPriority = 4;\n  var IdlePriority = 5;\n  var maxSigned31BitInt = 1073741823;\n  var IMMEDIATE_PRIORITY_TIMEOUT = -1;\n  var USER_BLOCKING_PRIORITY_TIMEOUT = 250;\n  var NORMAL_PRIORITY_TIMEOUT = 5000;\n  var LOW_PRIORITY_TIMEOUT = 10000;\n  var IDLE_PRIORITY_TIMEOUT = maxSigned31BitInt;\n  var taskQueue = new TaskQueue();\n  var timerQueue = new TaskQueue();\n  var currentTask = null;\n  var isPerformingWork = false;\n  var isHostCallbackScheduled = false;\n  var isHostTimeoutScheduled = false;\n  var taskIdCounter = 0;\n  var deadline = 0;\n  var yieldInterval = 5;\n  var requestHostCallback;\n  var scheduledHostCallback = null;\n  function timeoutForPriorityLevel(priorityLevel) {\n    switch (priorityLevel) {\n      case ImmediatePriority:\n        return IMMEDIATE_PRIORITY_TIMEOUT;\n      case UserBlockingPriority:\n        return USER_BLOCKING_PRIORITY_TIMEOUT;\n      case IdlePriority:\n        return IDLE_PRIORITY_TIMEOUT;\n      case LowPriority:\n        return LOW_PRIORITY_TIMEOUT;\n      case NormalPriority:\n      default:\n        return NORMAL_PRIORITY_TIMEOUT;\n    }\n  }\n  var getCurrentTime = function () {\n    var initialTime = Date.now();\n    var hasPerformanceNow = (typeof performance === \"undefined\" ? \"undefined\" : _typeof(performance)) === 'object' && typeof performance.now === 'function';\n    if (hasPerformanceNow) return function () {\n      return performance.now();\n    };else return function () {\n      return Date.now() - initialTime;\n    };\n  }();\n  function push(queue, task) {\n    queue.push(task);\n  }\n  function peek(queue) {\n    return queue.peek();\n  }\n  function shift(queue) {\n    return queue.shift();\n  }\n  function workLoop$1(hasTimeRemaining, initialTime) {\n    var currentTime = getCurrentTime();\n    advanceTimers(currentTime);\n    currentTask = peek(taskQueue);\n    while (currentTask) {\n      var _currentTask = currentTask,\n        callback = _currentTask.callback;\n      if (callback) {\n        currentTask.callback = null;\n        currentTask.priorityLevel;\n        var didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n        var continuationCallback = callback(didUserCallbackTimeout);\n        currentTime = getCurrentTime();\n        if (typeof continuationCallback === 'function') {\n          currentTask.callback = continuationCallback;\n          return true;\n        } else if (currentTask === peek(taskQueue)) shift(taskQueue);\n        advanceTimers(currentTime);\n      } else {\n        shift(taskQueue);\n      }\n      currentTask = peek(taskQueue);\n    }\n    if (currentTask) return true;else {\n      var firstTimer = peek(timerQueue);\n      if (firstTimer) requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n      return false;\n    }\n  }\n  function flushWork(hasTimeRemaining, initialTime) {\n    isHostCallbackScheduled = false;\n    if (isHostTimeoutScheduled) {\n      isHostTimeoutScheduled = false;\n      cancelHostTimeout();\n    }\n    isPerformingWork = true;\n    var res = workLoop$1();\n    currentTask = null;\n    isPerformingWork = false;\n    return res;\n  }\n  function scheduleCallback(priorityLevel, callback, options) {\n    var currentTime = getCurrentTime();\n    var startTime,\n      delay = 0;\n    if (_typeof(options) === 'object' && options !== null && typeof delay === 'number' && delay > 0) {\n      delay = options.delay;\n    }\n    startTime = currentTime + delay;\n    var timeout = timeoutForPriorityLevel(priorityLevel);\n    var expirationTime = startTime + timeout;\n    var newTask = {\n      id: taskIdCounter++,\n      callback: callback,\n      priorityLevel: priorityLevel,\n      startTime: startTime,\n      expirationTime: expirationTime,\n      sortIndex: -1\n    };\n    if (startTime > currentTime) {\n      newTask.sortIndex = startTime;\n      push(timerQueue, newTask);\n      if (!peek(taskQueue) && newTask === peek(timerQueue)) {\n        if (isHostTimeoutScheduled) cancelHostTimeout();else isHostTimeoutScheduled = true;\n        requestHostTimeout(handleTimeout, startTime - currentTime);\n      }\n    } else {\n      newTask.sortIndex = expirationTime;\n      push(taskQueue, newTask);\n      if (!isHostCallbackScheduled && !isPerformingWork) {\n        isHostCallbackScheduled = true;\n        requestHostCallback(flushWork);\n      }\n    }\n    return newTask;\n  }\n  function shouldYieldToHost() {\n    var res = getCurrentTime() - deadline > 0;\n    return res;\n  }\n  var shouldYield = shouldYieldToHost;\n  var channel = new MessageChannel();\n  var port = channel.port2;\n  var performWorkUntilDeadline = function performWorkUntilDeadline() {\n    if (scheduledHostCallback) {\n      var currentTime = getCurrentTime();\n      deadline = currentTime + yieldInterval;\n      var hasTimeRemaining = true;\n      var hasMoreWork = scheduledHostCallback(hasTimeRemaining, currentTime);\n      if (!hasMoreWork) {\n        isMessageLoopRunning = false;\n        scheduledHostCallback = null;\n      } else {\n        port.postMessage(null);\n      }\n    } else {\n      isMessageLoopRunning = false;\n    }\n  };\n  channel.port1.onmessage = performWorkUntilDeadline;\n  var isMessageLoopRunning = false;\n  requestHostCallback = function requestHostCallback(callback) {\n    scheduledHostCallback = callback;\n    if (!isMessageLoopRunning) {\n      isMessageLoopRunning = true;\n      port.postMessage(null);\n    }\n  };\n  var taskTimeoutID;\n  function requestHostTimeout(callback, ms) {\n    taskTimeoutID = setTimeout(function () {\n      return callback(getCurrentTime());\n    }, ms);\n  }\n  function cancelHostTimeout() {\n    clearTimeout(taskTimeoutID);\n    taskTimeoutID = -1;\n  }\n  function handleTimeout(currentTime) {\n    isHostTimeoutScheduled = false;\n    advanceTimers(currentTime);\n    if (!isHostCallbackScheduled) {\n      if (peek(taskQueue)) {\n        isHostCallbackScheduled = true;\n        requestHostCallback(flushWork);\n      } else {\n        var firstTimer = peek(timerQueue);\n        if (firstTimer) requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n      }\n    }\n  }\n  function advanceTimers(currentTime) {\n    var timer = peek(timerQueue);\n    while (timer) {\n      if (!timer.callback) {\n        shift(timerQueue);\n      } else if (timer.startTime <= currentTime) {\n        shift(timerQueue);\n        timer.sortIndex = timer.expirationTime;\n        push(taskQueue, timer);\n      } else return;\n      timer = peek(timerQueue);\n    }\n  }\n\n  // lane使用31位二进制来表示优先级车道共31条, 位数越小（1的位置越靠右）表示优先级越高\n  // 没有优先级\n  var NoLanes = /*                        */0;\n  var NoLane = /*                          */0;\n  // 同步优先级，表示同步的任务一次只能执行一个，例如：用户的交互事件产生的更新任务\n  var SyncLane = /*                        */1;\n  var InputContinuousLane = /*            */4;\n  var TransitionLanes = /*                       */4194240;\n  var TransitionLane1 = /*                        */64;\n  var NonIdleLanes = /*                                 */134217727;\n  var PingLane = /*                             */268435456;\n  var DiscreteEventPriority = SyncLane;\n  var ContinuousEventPriority = InputContinuousLane;\n\n  function isSubsetOfLanes(set, subset) {\n    return (set & subset) === subset;\n  }\n  function mergeLanes(a, b) {\n    return a | b;\n  }\n  function intersectLanes(a, b) {\n    return a & b;\n  }\n  function getHighestPriorityLane(lanes) {\n    return lanes & -lanes;\n  }\n  var currentIndex = 0;\n  var batchTransitionLane = NoLane;\n  function getTransitionLane() {\n    var res = TransitionLane1 << currentIndex;\n    currentIndex = (currentIndex + 1) % 16;\n    return res;\n  }\n  function requestUpdateLane() {\n    if (currentBatchConfig.transition) {\n      batchTransitionLane = batchTransitionLane === NoLane || !isBatchingUpdates ? getTransitionLane() : batchTransitionLane;\n      return batchTransitionLane;\n    }\n    return SyncLane;\n  }\n  function LaneToPriority(lane) {\n    if (lane <= DiscreteEventPriority) return ImmediatePriority;\n    if (lane <= ContinuousEventPriority) return UserBlockingPriority;\n    if (lane & NonIdleLanes) return NormalPriority;\n    return IdlePriority;\n  }\n\n  function createFiberNode(tag, pendingProps, options) {\n    var key = pendingProps.key,\n      ref = pendingProps.ref;\n    var parent = options === null || options === void 0 ? void 0 : options.parent;\n    var base = {\n      tag: tag,\n      key: key,\n      mode: parent ? parent.mode : Mode.NoMode,\n      pendingProps: pendingProps,\n      type: null,\n      stateNode: null,\n      parent: null,\n      child: null,\n      sibling: null,\n      index: 0,\n      ref: ref,\n      memoizedProps: null,\n      memoizedState: null,\n      updateQueue: null,\n      flags: FiberFlags.Placement,\n      lanes: NoLanes,\n      childLanes: NoLanes,\n      alternate: null,\n      effects: null\n    };\n    return Object.assign(base, {}, options);\n  }\n  function cloneFiberNode(oldFiber, pendingProps) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var key = pendingProps.key,\n      ref = pendingProps.ref;\n    var child = options.child,\n      sibling = options.sibling;\n    if (!child) options.child = null;\n    if (!sibling) options.sibling = null;\n    var fiber = Object.assign({\n      key: key,\n      ref: ref\n    }, oldFiber, options, pendingProps ? {\n      pendingProps: pendingProps\n    } : {});\n    fiber.effects = [];\n    fiber.flags = FiberFlags.Update;\n    return fiber;\n  }\n\n  var resetHandlers = [];\n  function resetContext() {\n    var _iterator = _createForOfIteratorHelper(resetHandlers),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var fn = _step.value;\n        fn();\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  var createContext = function createContext(initialValue) {\n    var $currentValue = createRef(initialValue);\n    var stackValue = [initialValue];\n    var Provider = function Provider(_ref) {\n      var value = _ref.value,\n        children = _ref.children;\n      stackValue.push(value);\n      return children;\n    };\n    resetHandlers.push(function () {\n      return stackValue.length = 1;\n    });\n    var context = {\n      get currentValue() {\n        return stackValue[stackValue.length - 1];\n      },\n      pop: function pop() {\n        stackValue.pop();\n      },\n      Provider: Provider,\n      Consumer: function Consumer(_ref2) {\n        var children = _ref2.children;\n        return children($currentValue.current);\n      }\n    };\n    Provider._context = context;\n    Provider.displayType = ContextProvider;\n    return context;\n  };\n  function popProvider(context) {\n    context.pop();\n  }\n\n  function markCurrentFiber(wip, old) {\n    if (wip) wip.flags |= FiberFlags.PerformWork;\n    if (old) old.flags &= ~FiberFlags.PerformWork;\n  }\n  function cloneChildren(wipFiber) {\n    var oldFiber = wipFiber.alternate;\n    if (!oldFiber.child) return;\n    var oldChild = oldFiber.child;\n    var prevChild = null;\n    for (var i = 0; oldChild; i++, oldChild = oldChild.sibling) {\n      var newChild = cloneFiberNode(oldChild, oldChild.pendingProps, {\n        parent: wipFiber,\n        index: i,\n        alternate: oldChild\n      });\n      markCurrentFiber(newChild, oldChild);\n      if (prevChild) prevChild.sibling = newChild;else wipFiber.child = newChild;\n      prevChild = newChild;\n      oldChild.alternate = null;\n    }\n  }\n  function reconcileChildrenArray(wipFiber, newChildElements, lanes) {\n    var elements = arrify(newChildElements);\n    var needUpdate = !!intersectLanes(wipFiber.lanes, lanes);\n    var oldFiber = wipFiber.alternate ? wipFiber.alternate.child : null;\n    var newFiber = null;\n    var map = new Map();\n    for (var node = oldFiber, i = 0; node; node = node.sibling, i++) {\n      var key = node.key || node.index;\n      map.set(key, node);\n    }\n    for (var index = 0; index < elements.length; index++) {\n      var prevFiber = newFiber;\n      var element = elements[index];\n      var _key = element ? element.props.key || index : null;\n      var _oldFiber = map.get(_key);\n      if (_oldFiber && _oldFiber.type === element.type) {\n        newFiber = cloneFiberNode(_oldFiber, element.props, {\n          parent: wipFiber,\n          alternate: _oldFiber,\n          memoizedProps: _oldFiber.pendingProps,\n          index: index,\n          lanes: needUpdate ? mergeLanes(lanes, _oldFiber.lanes) : _oldFiber.lanes\n        });\n        map.delete(_key);\n      } else {\n        newFiber = createFiberNode(getTag(element), element.props, {\n          parent: wipFiber,\n          index: index,\n          memoizedProps: element.props,\n          type: element.type,\n          lanes: lanes\n        });\n      }\n      // markCurrentFiber(newFiber, oldFiber || null);\n      if (index === 0) {\n        wipFiber.child = newFiber;\n      } else if (prevFiber) prevFiber.sibling = newFiber;\n    }\n    var _iterator = _createForOfIteratorHelper(map.values()),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _node = _step.value;\n        deleteChild(_node, wipFiber);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    map.clear();\n  }\n  function deleteChild(fiber, parent) {\n    fiber.flags |= FiberFlags.Deletion;\n    parent = parent || fiber.parent;\n    if (parent) {\n      parent.effects = parent.effects || [];\n      parent.effects.push(fiber);\n    }\n  }\n  var suspenseHandlers = [];\n  function getSuspenseHander() {\n    return suspenseHandlers[suspenseHandlers.length - 1];\n  }\n  function popSuspenseHander() {\n    suspenseHandlers.pop();\n  }\n  function pushSuspenseHander(fiber) {\n    suspenseHandlers.push(fiber);\n  }\n  function clearSuspenseHander() {\n    suspenseHandlers.length = 0;\n  }\n  function hideAllChildren(fiber) {\n    var node = fiber.child;\n    while (node) {\n      console.log(node.stateNode, 'node');\n      if (node.tag === FiberTag.HostComponent) {\n        node.stateNode.style.display = 'none';\n      } else {\n        hideAllChildren(node);\n      }\n      node = node.sibling;\n    }\n  }\n  function unhideAllChildren(fiber) {\n    var node = fiber.child;\n    while (node) {\n      if (node.tag === FiberTag.HostComponent) {\n        node.stateNode.style.display = '';\n      } else {\n        unhideAllChildren(node);\n      }\n      node = node.sibling;\n    }\n  }\n  function unwindWork(fiber, lanes) {\n    var flags = fiber.flags;\n    if (lanes || lanes === NoLanes) {\n      unwindWorks.push(fiber);\n      if (fiber.parent) {\n        var childEffects = fiber.effects || [];\n        var thisEffect = fiber.flags > FiberFlags.PerformWork ? [fiber] : [];\n        var parentEffects = fiber.parent.effects || [];\n        fiber.parent.effects = parentEffects.concat(childEffects, thisEffect);\n      } else {\n        var root = fiber.stateNode;\n        root.finishedWork = fiber;\n      }\n    }\n    switch (fiber.tag) {\n      case FiberTag.Suspense:\n        popSuspenseHander();\n        if (flags & Flags.ShouldCapture && !(flags & Flags.DidCapture)) {\n          fiber.flags = flags & ~Flags.ShouldCapture | Flags.DidCapture;\n        }\n        return fiber;\n      case FiberTag.ContextProvider:\n        var ctx = fiber.type._context;\n        popProvider(ctx);\n        return;\n    }\n  }\n  function unwindUnit(fiber, lanes) {\n    fiber.lanes &= ~lanes;\n    fiber.childLanes &= ~lanes;\n    var oldFiber = fiber.alternate;\n    if (oldFiber) oldFiber.alternate = fiber;\n    markCurrentFiber(fiber, oldFiber);\n    switch (fiber.tag) {\n      case FiberTag.Offscreen:\n        return fiber.pendingProps.mode === 'hidden' ? hideAllChildren(fiber) : unhideAllChildren(fiber);\n    }\n  }\n  function _cloneChildren(firstChild, parent) {\n    var next = firstChild;\n    parent.child = firstChild;\n    while (next) {\n      next.parent = parent;\n      next = next.sibling;\n    }\n  }\n  function cloneFiberChildren(firstChild, parent) {\n    cloneChildrenHandlers.push(function () {\n      return _cloneChildren(firstChild, parent);\n    });\n  }\n  function getLatestFiber(fiber) {\n    var node = fiber;\n    while (node.alternate) {\n      if (node.alternate.alternate === node) {\n        if (node.alternate.flags & FiberFlags.PerformWork) node = node.alternate;\n        break;\n      }\n      node = node.alternate;\n    }\n    return node;\n  }\n\n  function createUpdate(payload, eventTime, lane) {\n    var tag = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : UpdateState.updateState;\n    return {\n      eventTime: eventTime,\n      lane: lane,\n      tag: tag,\n      payload: payload,\n      next: null\n    };\n  }\n  function enqueueUpdate(queue, update) {\n    var sharedQueue = queue.shared;\n    var pending = sharedQueue.pending;\n    if (!pending) {\n      update.next = update;\n    } else {\n      update.next = pending.next;\n      pending.next = update;\n    }\n    sharedQueue.pending = update;\n  }\n  function getStateFromUpdate(update, prevState, nextProps) {\n    switch (update.tag) {\n      case UpdateState.replaceState:\n      case UpdateState.updateState:\n        {\n          var payload = update.payload;\n          var partialState = typeof payload === 'function' ? payload(prevState, nextProps) : payload;\n          return update.tag === UpdateState.replaceState ? partialState : Object.assign({}, prevState, partialState);\n        }\n      default:\n        return prevState;\n    }\n  }\n  function initializeUpdateQueue(memoizedState) {\n    return {\n      baseState: memoizedState,\n      firstBaseUpdate: null,\n      lastBaseUpdate: null,\n      shared: {\n        pending: null\n      },\n      effects: []\n    };\n  }\n  function processUpdateQueue(wip, hooks, queue, renderLanes) {\n    if (!queue) return;\n    var firstBaseUpdate = queue.firstBaseUpdate,\n      lastBaseUpdate = queue.lastBaseUpdate,\n      shared = queue.shared;\n    var pendingQueue = shared.pending;\n    if (pendingQueue) {\n      shared.pending = null;\n      var lastPendingUpdate = pendingQueue;\n      var firstPendingUpdate = lastPendingUpdate.next;\n      lastPendingUpdate.next = null;\n      if (lastBaseUpdate) {\n        lastBaseUpdate.next = firstPendingUpdate;\n      } else {\n        firstBaseUpdate = firstPendingUpdate;\n      }\n      lastBaseUpdate = lastPendingUpdate;\n    }\n    if (firstBaseUpdate) {\n      var newState = queue.baseState;\n      var newBaseState = null;\n      var newFirstBaseUpdate = null;\n      var newLastBaseUpdate = null;\n      var update = firstBaseUpdate;\n      do {\n        var updateLane = update.lane;\n        if (!isSubsetOfLanes(renderLanes, updateLane)) {\n          var clone = {\n            eventTime: update.eventTime,\n            lane: updateLane,\n            tag: update.tag,\n            payload: update.payload,\n            next: null\n          };\n          if (!newLastBaseUpdate) {\n            newFirstBaseUpdate = newLastBaseUpdate = clone;\n            newBaseState = newState;\n          } else {\n            newLastBaseUpdate.next = clone;\n            newLastBaseUpdate = newLastBaseUpdate.next;\n          }\n        } else {\n          newState = getStateFromUpdate(update, newState, wip.pendingProps);\n        }\n        update = update.next;\n      } while (update);\n      if (!newLastBaseUpdate) {\n        newBaseState = newState;\n      }\n      if (hooks) {\n        hooks.state = newBaseState;\n      } else {\n        wip.memoizedState = newBaseState;\n      }\n      queue.baseState = newBaseState;\n      queue.firstBaseUpdate = newFirstBaseUpdate;\n      queue.lastBaseUpdate = newLastBaseUpdate;\n    }\n  }\n  function markUpdateFromFiberToRoot(fiber) {\n    var parent = fiber.parent,\n      node = fiber;\n    while (parent) {\n      parent.childLanes |= mergeLanes(node.lanes, node.childLanes);\n      node = parent;\n      parent = parent.parent;\n    }\n    if (node.tag !== FiberTag.HostRoot) {\n      return null;\n    }\n    var root = node.stateNode;\n    root.pendingLanes = mergeLanes(node.lanes, node.childLanes);\n    return root;\n  }\n  var isBatchingUpdates = false;\n  function batchedUpdates(fn, a) {\n    var previousIsBatchingUpdates = isBatchingUpdates;\n    isBatchingUpdates = true;\n    try {\n      return fn(a);\n    } finally {\n      isBatchingUpdates = previousIsBatchingUpdates;\n      if (!isBatchingUpdates) {\n        workInProgressRoot && ensureRootIsScheduled(workInProgressRoot);\n      }\n    }\n  }\n  function updateClassComponent(wipFiber, lanes) {\n    var _Ctor$contextType;\n    var instance = wipFiber.stateNode;\n    var Ctor = wipFiber.type;\n    processUpdateQueue(wipFiber, null, wipFiber.updateQueue, lanes);\n    var nextState = wipFiber.memoizedState;\n    var nextContext = (_Ctor$contextType = Ctor.contextType) === null || _Ctor$contextType === void 0 ? void 0 : _Ctor$contextType.currentValue;\n    if (!instance.shouldComponentUpdate(wipFiber.pendingProps, nextState, nextContext)) {\n      return cloneChildren(wipFiber);\n    }\n    if (Ctor.getDerivedStateFromProps) {\n      nextState = Ctor.getDerivedStateFromProps(wipFiber.pendingProps, nextState);\n    }\n    var prevState = instance.state;\n    var prevProps = instance.props;\n    instance.context = nextContext;\n    instance.props = wipFiber.pendingProps;\n    instance.state = nextState;\n    wipFiber.memoizedState = nextState;\n    reconcileChildrenArray(wipFiber, instance.render(), lanes);\n    if (instance.getSnapshotBeforeUpdate) {\n      instance._snapshot = instance.getSnapshotBeforeUpdate(prevProps, prevState);\n    }\n  }\n  function updateSuspenseFallbackChildren(fiber, primaryChildren, fallbackChildren, lanes) {\n    var _fiber$alternate;\n    var oldFiber = (_fiber$alternate = fiber.alternate) === null || _fiber$alternate === void 0 ? void 0 : _fiber$alternate.child;\n    var offscreen = cloneFiberNode(oldFiber, {\n      mode: 'hidden',\n      children: primaryChildren\n    }, {\n      parent: fiber,\n      index: 0,\n      lanes: lanes,\n      alternate: oldFiber\n    });\n    oldFiber.alternate = offscreen;\n    var fallback = oldFiber.sibling ? cloneFiberNode(oldFiber.sibling, {\n      children: fallbackChildren\n    }, {\n      parent: fiber,\n      index: 1,\n      lanes: mergeLanes(oldFiber.lanes, lanes)\n    }) : createFiberNode(FiberTag.Fragment, {\n      children: fallbackChildren\n    }, {\n      parent: fiber,\n      index: 1,\n      lanes: lanes\n    });\n    if (oldFiber.sibling) deleteChild(oldFiber.sibling, fiber);\n    offscreen.sibling = fallback;\n    fiber.child = offscreen;\n  }\n  function updateSuspensePrimaryChildren(fiber, primaryChildren, lanes) {\n    var _fiber$alternate2;\n    var oldFiber = (_fiber$alternate2 = fiber.alternate) === null || _fiber$alternate2 === void 0 ? void 0 : _fiber$alternate2.child;\n    var offscreen = cloneFiberNode(oldFiber, {\n      mode: 'visible',\n      children: primaryChildren\n    }, {\n      parent: fiber,\n      index: 0,\n      lanes: lanes,\n      alternate: oldFiber\n    });\n    oldFiber.alternate = offscreen;\n    oldFiber.sibling && deleteChild(oldFiber.sibling, fiber);\n    fiber.child = offscreen;\n  }\n\n  var events = ['onCopy', 'onCopyCapture', 'onCutCapture', 'onPaste', 'onPasteCapture', 'onCompositionEnd', 'onCompositionEndCapture', 'onCompositionStart', 'onCompositionStartCapture', 'onCompositionUpdate', 'onCompositionUpdateCapture', 'onFocus', 'onCut', 'onFocusCapture', 'onBlur', 'onBlurCapture', 'onChange', 'onChangeCapture', 'onBeforeInput', 'onBeforeInputCapture', 'onInput', 'onInputCapture', 'onReset', 'onResetCapture', 'onSubmit', 'onSubmitCapture', 'onInvalid', 'onInvalidCapture', 'onLoad', 'onLoadCapture', 'onError', 'onErrorCapture', 'onKeyDown', 'onKeyDownCapture', 'onKeyPress', 'onKeyPressCapture', 'onKeyUp', 'onKeyUpCapture', 'onAbort', 'onAbortCapture', 'onCanPlay', 'onCanPlayCapture', 'onCanPlayThrough', 'onCanPlayThroughCapture', 'onDurationChange', 'onDurationChangeCapture', 'onEmptied', 'onEmptiedCapture', 'onEncrypted', 'onEncryptedCapture', 'onEnded', 'onEndedCapture', 'onLoadedData', 'onLoadedDataCapture', 'onLoadedMetadata', 'onLoadedMetadataCapture', 'onLoadStart', 'onLoadStartCapture', 'onPause', 'onPauseCapture', 'onPlay', 'onPlayCapture', 'onPlaying', 'onPlayingCapture', 'onProgress', 'onProgressCapture', 'onRateChange', 'onRateChangeCapture', 'onResize', 'onResizeCapture', 'onSeeked', 'onSeekedCapture', 'onSeeking', 'onSeekingCapture', 'onStalled', 'onStalledCapture', 'onSuspend', 'onSuspendCapture', 'onTimeUpdate', 'onTimeUpdateCapture', 'onVolumeChange', 'onVolumeChangeCapture', 'onWaiting', 'onWaitingCapture', 'onAuxClick', 'onAuxClickCapture', 'onClick', 'onClickCapture', 'onContextMenu', 'onContextMenuCapture', 'onDoubleClick', 'onDoubleClickCapture', 'onDrag', 'onDragCapture', 'onDragEnd', 'onDragEndCapture', 'onDragEnter', 'onDragEnterCapture', 'onDragExit', 'onDragExitCapture', 'onDragLeave', 'onDragLeaveCapture', 'onDragOver', 'onDragOverCapture', 'onDragStart', 'onDragStartCapture', 'onDrop', 'onDropCapture', 'onMouseDown', 'onMouseDownCapture', 'onMouseEnter', 'onMouseLeave', 'onMouseMove', 'onMouseMoveCapture', 'onMouseOut', 'onMouseOutCapture', 'onMouseOver', 'onMouseOverCapture', 'onMouseUp', 'onMouseUpCapture', 'onSelect', 'onSelectCapture', 'onTouchCancel', 'onTouchCancelCapture', 'onTouchEnd', 'onTouchEndCapture', 'onTouchMove', 'onTouchMoveCapture', 'onTouchStart', 'onTouchStartCapture', 'onPointerDown', 'onPointerDownCapture', 'onPointerMove', 'onPointerMoveCapture', 'onPointerUp', 'onPointerUpCapture', 'onPointerCancel', 'onPointerCancelCapture', 'onPointerEnter', 'onPointerLeave', 'onPointerOver', 'onPointerOverCapture', 'onPointerOut', 'onPointerOutCapture', 'onGotPointerCapture', 'onGotPointerCaptureCapture', 'onLostPointerCapture', 'onLostPointerCaptureCapture', 'onScroll', 'onScrollCapture', 'onWheel', 'onWheelCapture', 'onAnimationStart', 'onAnimationStartCapture', 'onAnimationEnd', 'onAnimationEndCapture', 'onAnimationIteration', 'onAnimationIterationCapture', 'onTransitionEnd', 'onTransitionEndCapture'];\n  var domMap = new WeakMap();\n  var registerEvent = function registerEvent(root) {\n    var listener = function listener(eventName) {\n      return function (e) {\n        var fiber = domMap.get(e.target);\n        var current = fiber;\n        while (current) {\n          if (current.tag === FiberTag.HostComponent) {\n            var handler = current.pendingProps[eventName];\n            handler && batchedUpdates(handler, e);\n          }\n          current = current.parent;\n        }\n      };\n    };\n    for (var _i = 0, _events = events; _i < _events.length; _i++) {\n      var eventName = _events[_i];\n      var event = eventName.toLowerCase().slice(2);\n      root.addEventListener(event, listener(eventName), false);\n    }\n  };\n\n  var blacklist = ['children', 'style', 'ref'];\n  var isEvent = function isEvent(name) {\n    return name.startsWith('on');\n  };\n  var isAttribute = function isAttribute(name) {\n    return !(isEvent(name) || blacklist.includes(name));\n  };\n  // !isEvent(name) && name !== 'children' && name !== 'style';\n  var isNew = function isNew(prev, next) {\n    return function (key) {\n      return prev[key] !== next[key];\n    };\n  };\n  var isGone = function isGone(next) {\n    return function (key) {\n      return !(key in next);\n    };\n  };\n  function convertName(name) {\n    return name === 'className' ? 'class' : name;\n  }\n  function updateDomProperties(dom, prevProps, nextProps) {\n    Object.keys(prevProps).filter(isAttribute).filter(isGone(nextProps)).forEach(function (name) {\n      // (dom as IState)[name] = null;\n      dom.removeAttribute(convertName(name));\n    });\n    Object.keys(nextProps).filter(isAttribute).filter(isNew(prevProps, nextProps)).forEach(function (name) {\n      if (dom.setAttribute) dom.setAttribute(convertName(name), nextProps[name]);else dom[name] = nextProps[name];\n    });\n    prevProps.style = prevProps.style || {};\n    nextProps.style = nextProps.style || {};\n    Object.keys(nextProps.style).filter(isNew(prevProps.style, nextProps.style)).forEach(function (key) {\n      dom.style[key] = nextProps.style[key];\n    });\n    Object.keys(prevProps.style).filter(isGone(nextProps.style)).forEach(function (key) {\n      dom.style[key] = '';\n    });\n  }\n  function createDomElement(fiber) {\n    var isTextElement = fiber.type === TEXT_ELEMENT;\n    var dom = isTextElement ? document.createTextNode('') : document.createElement(fiber.type);\n    updateDomProperties(dom, {}, fiber.pendingProps);\n    return dom;\n  }\n\n  function getHostParent(fiber) {\n    var domParentFiber = fiber.parent;\n    while (domParentFiber && domParentFiber.parent && domParentFiber.tag !== FiberTag.HostComponent && domParentFiber.tag !== FiberTag.HostText) {\n      domParentFiber = domParentFiber.parent;\n    }\n    if (!domParentFiber) return fiber.stateNode;\n    return domParentFiber.parent ? domParentFiber.stateNode : domParentFiber.stateNode.container;\n  }\n  function getHostSibling(fiber) {\n    var node = fiber;\n    siblings: while (true) {\n      while (!node.sibling) {\n        if (!node.parent || node.parent.tag === FiberTag.HostComponent) return null;\n        node = node.parent;\n      }\n      node.sibling.parent = node.parent;\n      node = node.sibling;\n      while (node.tag !== FiberTag.HostComponent && node.tag !== FiberTag.HostText) {\n        if (node.flags & FiberFlags.Placement || !node.child) continue siblings;\n        node.child.parent = node;\n        node = node.child;\n      }\n      if (!(node.flags & FiberFlags.Placement)) {\n        return node.stateNode;\n      }\n    }\n  }\n  function callEffect(fiber) {\n    var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'create';\n    var hook = fiber.memoizedState;\n    while (hook) {\n      var create = hook.state[key];\n      if (typeof create === 'function') create();\n      hook = hook.next;\n    }\n  }\n  function commitPlacement(fiber) {\n    var domParent = getHostParent(fiber);\n    if ((fiber.tag === FiberTag.HostComponent || fiber.tag === FiberTag.HostText) && domParent) {\n      var before = getHostSibling(fiber);\n      var node = fiber.stateNode;\n      if (before) domParent.insertBefore(node, before);else domParent.appendChild(node);\n      if (fiber.ref) fiber.ref.current = fiber.stateNode;\n    } else if (fiber.tag === FiberTag.ClassComponent) {\n      fiber.stateNode.componentDidMount();\n    } else if (fiber.tag === FiberTag.FunctionComponent) {\n      callEffect(fiber);\n    }\n    fiber.flags &= ~FiberFlags.Placement;\n  }\n  function commitUpdate(fiber) {\n    if (fiber.tag === FiberTag.HostComponent || fiber.tag === FiberTag.HostText) {\n      updateDomProperties(fiber.stateNode, fiber.alternate.pendingProps, fiber.pendingProps);\n    } else if (fiber.tag === FiberTag.FunctionComponent) {\n      callEffect(fiber);\n    } else if (fiber.tag === FiberTag.ClassComponent && fiber.stateNode instanceof Component) {\n      var oldFiber = fiber.alternate;\n      if (oldFiber) {\n        fiber.stateNode.componentDidUpdate(oldFiber.pendingProps, oldFiber.stateNode.state);\n      }\n    }\n    fiber.flags &= ~FiberFlags.Update;\n  }\n  function commitDeletion(fiber) {\n    var node = fiber;\n    var domParent = getHostParent(fiber);\n    while (domParent) {\n      if (!node) break;\n      if (node.tag !== FiberTag.HostComponent && node.tag !== FiberTag.HostText) {\n        node = node.child;\n        continue;\n      }\n      domParent.removeChild(node.stateNode);\n      while (node !== fiber && !node.sibling) node = node.parent;\n      if (node === fiber) break;\n      node = node.sibling;\n    }\n    var goStep = function goStep(node) {\n      if (node.child) return node.child;\n      var cursor = node;\n      while (cursor && cursor != fiber) {\n        if (cursor.tag === FiberTag.FunctionComponent) callEffect(cursor, 'destroy');\n        if (cursor.stateNode instanceof Component) cursor.stateNode.destory();\n        if (cursor.sibling) return cursor.sibling;\n        cursor = cursor.parent;\n      }\n    };\n    while (node) node = goStep(node);\n    fiber.flags &= ~FiberFlags.Deletion;\n  }\n  function commitWork(fiber) {\n    if (fiber.tag === FiberTag.HostRoot) return;\n    if (fiber.flags & FiberFlags.Placement) commitPlacement(fiber);\n    if (fiber.flags & FiberFlags.Update) commitUpdate(fiber);\n    if (fiber.flags & FiberFlags.Deletion) commitDeletion(fiber);\n    fiber.effects = [];\n  }\n\n  var workInProgressHook = null;\n  var firstWorkInProgressHook = null;\n  var lastWorkInProgressHook = null;\n  var workInProgress = null;\n  function createWorkInProgress(wip) {\n    workInProgressHook = firstWorkInProgressHook = wip.memoizedState;\n    workInProgress = wip;\n  }\n  function createHooks(state) {\n    return {\n      state: state,\n      baseState: null,\n      baseUpdate: null,\n      queue: null,\n      next: null\n    };\n  }\n  function createWorkInProgressHook(state) {\n    if (!firstWorkInProgressHook) {\n      firstWorkInProgressHook = workInProgressHook = createHooks(state);\n      workInProgress.memoizedState = firstWorkInProgressHook;\n    } else if (!workInProgressHook) {\n      lastWorkInProgressHook.next = workInProgressHook = createHooks(state);\n    }\n    lastWorkInProgressHook = workInProgressHook;\n    workInProgressHook = workInProgressHook.next;\n    return lastWorkInProgressHook;\n  }\n  function processHookState(hook) {\n    if (workInProgress.alternate) processUpdateQueue(workInProgress, hook, hook.queue, workInProgressRootRenderLanes);\n  }\n  function createUpdateQueue(hook) {\n    hook.queue = initializeUpdateQueue(hook.state);\n    hook.queue.dispatch = dispatchState.bind(null, workInProgress, hook);\n  }\n  function dispatchState(fiber, hook, state) {\n    if (!fiber) return;\n    var current = getLatestFiber(fiber);\n    var lane = requestUpdateLane();\n    current.lanes |= lane;\n    var update = createUpdate(state, getCurrentTime(), lane, UpdateState.replaceState);\n    enqueueUpdate(hook.queue, update);\n    scheduleUpdateOnFiber(current);\n  }\n\n  function mountClassComponent(wipFiber, lanes) {\n    var _Ctor$contextType;\n    var instance = wipFiber.stateNode = createInstance(wipFiber);\n    var Ctor = wipFiber.type;\n    var nextState = Object.assign({}, instance.state);\n    var nextContext = (_Ctor$contextType = Ctor.contextType) === null || _Ctor$contextType === void 0 ? void 0 : _Ctor$contextType.currentValue;\n    if (Ctor.getDerivedStateFromProps) nextState = Ctor.getDerivedStateFromProps(wipFiber.pendingProps, nextState);\n    instance.context = nextContext;\n    instance.props = wipFiber.pendingProps;\n    instance.state = nextState;\n    wipFiber.memoizedState = nextState;\n    reconcileChildrenArray(wipFiber, instance.render(), lanes);\n  }\n  function mountSuspenseFallbackChildren(fiber, primaryChildren, fallbackChildren, lanes) {\n    var offscreen = createFiberNode(FiberTag.Offscreen, {\n      mode: 'hidden',\n      children: primaryChildren\n    }, {\n      parent: fiber,\n      index: 0,\n      lanes: lanes\n    });\n    var fallback = createFiberNode(FiberTag.Fragment, {\n      children: fallbackChildren\n    }, {\n      parent: fiber,\n      index: 1,\n      lanes: lanes\n    });\n    offscreen.sibling = fallback;\n    fiber.child = offscreen;\n  }\n  function mountSuspensePrimaryChildren(fiber, primaryChildren, lanes) {\n    var offscreen = createFiberNode(FiberTag.Offscreen, {\n      mode: 'visible',\n      children: primaryChildren\n    }, {\n      parent: fiber,\n      lanes: lanes\n    });\n    fiber.child = offscreen;\n  }\n\n  function beginWork(wipFiber, renderLanes) {\n    var _wipFiber$pendingProp;\n    createWorkInProgress(wipFiber);\n    if (!intersectLanes(wipFiber.lanes, renderLanes) && !intersectLanes(wipFiber.childLanes, renderLanes)) {\n      var _wipFiber$alternate;\n      cloneFiberChildren(((_wipFiber$alternate = wipFiber.alternate) === null || _wipFiber$alternate === void 0 ? void 0 : _wipFiber$alternate.child) || null, wipFiber);\n      return true;\n    }\n    switch (wipFiber.tag) {\n      case FiberTag.FunctionComponent:\n      case FiberTag.ContextProvider:\n        processFunctionComponent(wipFiber, renderLanes);\n        break;\n      case FiberTag.ClassComponent:\n        processClassComponent(wipFiber, renderLanes);\n        break;\n      case FiberTag.Suspense:\n        if (processSuspenseComponent(wipFiber, renderLanes)) return true;\n        break;\n      case FiberTag.Offscreen:\n        if (processOffscreenComponent(wipFiber, renderLanes)) return true;\n        break;\n      case FiberTag.Fragment:\n        reconcileChildrenArray(wipFiber, (_wipFiber$pendingProp = wipFiber.pendingProps) === null || _wipFiber$pendingProp === void 0 ? void 0 : _wipFiber$pendingProp.children, renderLanes);\n        break;\n      case FiberTag.HostRoot:\n      case FiberTag.HostComponent:\n      case FiberTag.HostText:\n        processHostComponent(wipFiber, renderLanes);\n        break;\n    }\n    return false;\n  }\n  var flag = false;\n  function processOffscreenComponent(fiber, lanes) {\n    var children = fiber.pendingProps.children;\n    if (fiber.pendingProps.mode === 'hidden') {\n      var _fiber$alternate;\n      fiber.lanes |= PingLane;\n      cloneFiberChildren(((_fiber$alternate = fiber.alternate) === null || _fiber$alternate === void 0 ? void 0 : _fiber$alternate.child) || null, fiber);\n      return true;\n    }\n    if (intersectLanes(fiber.lanes, TransitionLanes) && flag) {\n      var _fiber$alternate2;\n      flag = false;\n      cloneFiberChildren(((_fiber$alternate2 = fiber.alternate) === null || _fiber$alternate2 === void 0 ? void 0 : _fiber$alternate2.child) || null, fiber);\n      return true;\n    }\n    reconcileChildrenArray(fiber, children, lanes);\n  }\n  function processSuspenseComponent(wipFiber, lanes) {\n    var current = wipFiber.alternate;\n    var nextPrimaryChildren = wipFiber.pendingProps.children;\n    var nextFallbackChildren = wipFiber.pendingProps.fallback;\n    var showFallback = false;\n    var DidCapture = (wipFiber.flags & Flags.DidCapture) !== Flags.NONE;\n    if (DidCapture) {\n      if (intersectLanes(wipFiber.childLanes, TransitionLanes) && wipFiber.alternate) {\n        var _wipFiber$alternate2;\n        cloneFiberChildren((_wipFiber$alternate2 = wipFiber.alternate) === null || _wipFiber$alternate2 === void 0 ? void 0 : _wipFiber$alternate2.child, wipFiber);\n        return true;\n      }\n      showFallback = true;\n      wipFiber.flags &= ~FiberFlags.DidCapture;\n    }\n    pushSuspenseHander(wipFiber);\n    if (current) {\n      if (showFallback) updateSuspenseFallbackChildren(wipFiber, nextPrimaryChildren, nextFallbackChildren, lanes);else updateSuspensePrimaryChildren(wipFiber, nextPrimaryChildren, lanes);\n    } else {\n      if (showFallback) mountSuspenseFallbackChildren(wipFiber, nextPrimaryChildren, nextFallbackChildren, lanes);else mountSuspensePrimaryChildren(wipFiber, nextPrimaryChildren, lanes);\n    }\n    return false;\n  }\n  function processFunctionComponent(wipFiber, lanes) {\n    var newChildElements = wipFiber.type(wipFiber.pendingProps);\n    reconcileChildrenArray(wipFiber, newChildElements, lanes);\n  }\n  function processClassComponent(wipFiber, lanes) {\n    if (wipFiber.alternate) updateClassComponent(wipFiber, lanes);else mountClassComponent(wipFiber, lanes);\n  }\n  function processHostComponent(wipFiber, lanes) {\n    if (!wipFiber.stateNode) {\n      wipFiber.stateNode = createDomElement(wipFiber);\n      if (wipFiber.ref) wipFiber.ref.current = wipFiber.stateNode;\n    }\n    domMap.set(wipFiber.stateNode, wipFiber);\n    var newChildElements = wipFiber.pendingProps.children;\n    reconcileChildrenArray(wipFiber, newChildElements, lanes);\n  }\n\n  var nextUnitOfWork = null;\n  var workInProgressRoot = null;\n  var workInProgressRootRenderLanes = NoLanes;\n  var currentBatchConfig = {\n    transition: null\n  };\n  var unwindWorks = [];\n  var cloneChildrenHandlers = [];\n  if (typeof window !== 'undefined') registerEvent(document.body);\n  function render(children, containerDom) {\n    if (!containerDom) containerDom = document.createElement('div');\n    var _containerDom = containerDom,\n      rootFiberNode = _containerDom.__rootFiber;\n    if (!rootFiberNode) rootFiberNode = containerDom.__rootFiber = createRootFiber(containerDom, Mode.NoMode);\n    renderOnRootFiber(children, containerDom, rootFiberNode);\n    return containerDom;\n  }\n  function createRoot() {\n    var rootFiberNode = createRootFiber(null, Mode.Concurrent);\n    return {\n      render: function render(children, dom) {\n        return renderOnRootFiber(children, dom, rootFiberNode);\n      },\n      unmount: function unmount() {}\n    };\n  }\n  function createRootFiber(container, mode) {\n    return {\n      container: container,\n      mode: mode,\n      pendingLanes: NoLanes,\n      expiredLanes: NoLanes,\n      renderLanes: NoLanes,\n      finishedWork: null,\n      callbackNode: null,\n      callbackId: NoLanes\n    };\n  }\n  function renderOnRootFiber(children) {\n    var dom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var rootFiberNode = arguments.length > 2 ? arguments[2] : undefined;\n    var container = rootFiberNode.container,\n      current = rootFiberNode.current,\n      mode = rootFiberNode.mode;\n    if (!container) rootFiberNode.container = dom;\n    var pendingProps = {\n      children: children\n    };\n    var root = current ? cloneFiberNode(current, pendingProps, {\n      child: current.child,\n      sibling: current.sibling\n    }) : createFiberNode(FiberTag.HostRoot, pendingProps, {\n      stateNode: rootFiberNode,\n      mode: mode\n    });\n    rootFiberNode.current = root;\n    rootFiberNode.pendingLanes |= SyncLane;\n    root.lanes |= SyncLane;\n    workInProgressRoot = rootFiberNode;\n    scheduleOnRoot(rootFiberNode);\n  }\n  function scheduleOnRoot(root) {\n    ensureRootIsScheduled(root);\n  }\n  function scheduleUpdateOnFiber(fiber) {\n    var root = markUpdateFromFiberToRoot(fiber);\n    workInProgressRoot = root;\n    if (!root) return;\n    if (!isBatchingUpdates) ensureRootIsScheduled(root);\n  }\n  function ensureRootIsScheduled(root) {\n    var lanes = getNextLanes(root);\n    workInProgressRootRenderLanes = lanes;\n    root.pendingLanes &= ~lanes;\n    if (root.callbackNode && lanes < root.callbackId) {\n      root.callbackNode.callback = null;\n      root.callbackNode = null;\n      root.pendingLanes |= root.callbackId;\n      root.callbackId = NoLanes;\n      resetContext();\n    }\n    var priority = LaneToPriority(lanes);\n    if (lanes === NoLanes) {\n      return;\n    } else if (lanes === SyncLane) {\n      return performSyncWorkOnRoot(root);\n    } else {\n      root.callbackNode = scheduleCallback(priority, performConcurrentWorkOnRoot.bind(null, root));\n      root.callbackId = lanes;\n    }\n  }\n  function getNextLanes(root) {\n    var pendingLanes = root.pendingLanes;\n    return getHighestPriorityLane(pendingLanes);\n  }\n  function performSyncWorkOnRoot(root) {\n    performWork(root, workLoopSync);\n  }\n  function performConcurrentWorkOnRoot(root) {\n    return performWork(root, workLoop);\n  }\n  function prepareStack() {\n    clearSuspenseHander();\n    unwindWorks = [];\n    cloneChildrenHandlers.length = 0;\n  }\n  function performWork(root, workLoop) {\n    var current = root.current;\n    if (!current) return;\n    prepareStack();\n    nextUnitOfWork = cloneFiberNode(current, current.pendingProps, {\n      alternate: current\n    });\n    while (nextUnitOfWork) {\n      try {\n        return workLoop(root);\n      } catch (error) {\n        nextUnitOfWork = catchError(error, nextUnitOfWork);\n      }\n    }\n  }\n  function workLoopSync(root) {\n    while (nextUnitOfWork) {\n      nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n    }\n    var finishedWork = root.finishedWork;\n    if (finishedWork) {\n      commitAllWork(finishedWork);\n    }\n  }\n  function workLoop(root) {\n    while (nextUnitOfWork && !shouldYield()) {\n      nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n    }\n    var finishedWork = root.finishedWork;\n    if (finishedWork) {\n      commitAllWork(finishedWork);\n    } else {\n      var prevWork = nextUnitOfWork;\n      return function () {\n        nextUnitOfWork = prevWork;\n        return workLoop(root);\n      };\n    }\n  }\n  function performUnitOfWork(wipFiber) {\n    var skip = beginWork(wipFiber, workInProgressRootRenderLanes);\n    wipFiber.memoizedProps = wipFiber.pendingProps;\n    if (wipFiber.child && !skip) {\n      return wipFiber.child;\n    }\n    var uow = wipFiber;\n    while (uow) {\n      completeWork(uow);\n      if (uow.sibling) {\n        return uow.sibling;\n      }\n      uow = uow.parent;\n    }\n  }\n  function completeWork(fiber) {\n    unwindWork(fiber, workInProgressRootRenderLanes);\n  }\n  function beforeCommit() {\n    var _iterator = _createForOfIteratorHelper(cloneChildrenHandlers),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var fn = _step.value;\n        fn();\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    var _iterator2 = _createForOfIteratorHelper(unwindWorks),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var f = _step2.value;\n        unwindUnit(f, workInProgressRootRenderLanes);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n  function commitAllWork(fiber) {\n    beforeCommit();\n    (fiber.effects || []).forEach(function (f) {\n      return commitWork(f);\n    });\n    var root = fiber.stateNode;\n    root.current = fiber;\n    root.finishedWork = null;\n    nextUnitOfWork = null;\n    ensureRootIsScheduled(root);\n  }\n\n  function getNearestSuspense(fiber) {\n    var node = fiber;\n    while (node && node.tag !== FiberTag.Suspense) node = node.parent;\n    return node ? getLatestFiber(node) : null;\n  }\n  function attachPingListener(fiber, promise) {\n    var ping = function ping() {\n      var suspense = getNearestSuspense(fiber);\n      if (suspense) suspense.lanes |= fiber.lanes;\n      var root = suspense ? markUpdateFromFiberToRoot(suspense) : null;\n      root && ensureRootIsScheduled(root);\n    };\n    promise.then(ping, ping);\n  }\n  function catchError(error, fiber, lanes, errorInfo) {\n    var component, ctor, handled;\n    var needPing = true;\n    if (error instanceof SuspenseException) {\n      error = error.promise;\n      var suspenseBoundary = getSuspenseHander();\n      if (suspenseBoundary) {\n        suspenseBoundary.flags |= Flags.ShouldCapture;\n        if (suspenseBoundary.memoizedState === error) needPing = false;\n        suspenseBoundary.memoizedState = error;\n      }\n    }\n    if (error instanceof Promise && needPing) {\n      attachPingListener(fiber, error);\n    }\n    for (var current = fiber; current; current = current.parent) {\n      current.effects = []; // reset effect\n      var next = unwindWork(current);\n      if (next) return next;\n      if ((component = fiber.stateNode) && component instanceof Component) {\n        try {\n          ctor = fiber.type;\n          if (ctor && ctor.getDerivedStateFromError) {\n            component.setState(ctor.getDerivedStateFromError(error));\n            handled = true;\n          }\n          if (component.componentDidCatch) {\n            component.componentDidCatch(error, errorInfo || {});\n            handled = true;\n          }\n          if (handled) {\n            return;\n          }\n        } catch (e) {\n          error = e;\n        }\n      }\n    }\n    throw error;\n  }\n  var SuspenseException = /*#__PURE__*/_createClass(function SuspenseException(promise) {\n    _classCallCheck(this, SuspenseException);\n    _defineProperty(this, \"promise\", void 0);\n    this.promise = promise;\n  });\n\n  function isSubclassOf(subClass, superClass) {\n    var prototype = subClass.prototype ? Object.getPrototypeOf(subClass.prototype) : void 0;\n    while (prototype) {\n      if (prototype === superClass.prototype) {\n        return true;\n      }\n      prototype = Object.getPrototypeOf(prototype);\n    }\n    return false;\n  }\n  var wait = function wait(fn, time) {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return new Promise(function (resolve) {\n        setTimeout(function () {\n          return resolve(fn.apply(void 0, args));\n        }, time);\n      });\n    };\n  };\n  var createRef = function createRef(initialVal) {\n    return {\n      current: initialVal\n    };\n  };\n  var forwardRef = function forwardRef(render) {\n    return function (props) {\n      return render(props, props.ref);\n    };\n  };\n  var wrapPromise = function wrapPromise(promise) {\n    var status = 'pending',\n      result;\n    var next = promise.then(function (res) {\n      status = 'fulfilled';\n      result = res;\n    }, function (reason) {\n      status = 'rejected';\n      result = reason;\n    });\n    return {\n      read: function read() {\n        switch (status) {\n          case 'pending':\n            throw new SuspenseException(next);\n          case 'fulfilled':\n            return result;\n          case 'rejected':\n          default:\n            throw result;\n        }\n      }\n    };\n  };\n  var lazy = function lazy(load) {\n    var p = load();\n    var _wrapPromise = wrapPromise(p),\n      read = _wrapPromise.read;\n    return function (props) {\n      return createElement(read().default, props);\n    };\n  };\n\n  var TEXT_ELEMENT = 'TEXT_ELEMENT';\n  var FRAGMENT = Symbol.for('srender.Fragment');\n  var ELEMENT = Symbol.for('srender.Element');\n  var SUSPENSE = Symbol.for('srender.Suspense');\n  var OFFSCREEN = Symbol.for('srender.Offscreen');\n  var ContextProvider = Symbol.for('srender.ContextProvider');\n  var getTag = function getTag(_ref) {\n    var type = _ref.type,\n      $$typeof = _ref.$$typeof;\n    switch ($$typeof) {\n      case FRAGMENT:\n        return FiberTag.Fragment;\n      case SUSPENSE:\n        return FiberTag.Suspense;\n      case OFFSCREEN:\n        return FiberTag.Offscreen;\n      case ContextProvider:\n        return FiberTag.ContextProvider;\n    }\n    if (typeof type === 'string') return type === TEXT_ELEMENT ? FiberTag.HostText : FiberTag.HostComponent;\n    if (typeof type === 'function') return isSubclassOf(type, Component) ? FiberTag.ClassComponent : FiberTag.FunctionComponent;\n    return FiberTag.Unknown;\n  };\n  function createElement(type) {\n    var _config, _config2;\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var children = [];\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n    if (_typeof(config) !== 'object' || (_config = config) !== null && _config !== void 0 && _config.$$typeof) {\n      children = [config].concat(args);\n      config = {};\n    } else if (Array.isArray(config)) {\n      children = config;\n      config = {};\n    } else if (Array.isArray(args[0])) {\n      children = args[0];\n    } else if ((_config2 = config) !== null && _config2 !== void 0 && _config2.children) {\n      config.key = config.key ? config.key : args[0] || void 0;\n    } else {\n      children = [].concat(args);\n    }\n    if (config && (config.children || config.children === 0)) children = children.concat(config.children);\n    var props = Object.assign({\n      children: null\n    }, config);\n    // if (props.className) props.class = props.className;\n    props.children = children.filter(function (c) {\n      return c != undefined && c != null && c !== false;\n    }).map(function (c) {\n      return c !== null && c !== void 0 && c.$$typeof ? c : createTextElement(c);\n    });\n    var node = {\n      $$typeof: ELEMENT,\n      props: props,\n      type: type\n    };\n    if (_typeof(type) === 'symbol') node.$$typeof = type;\n    if (typeof type === 'function' && type.displayType === ContextProvider) node.$$typeof = ContextProvider;\n    return node;\n  }\n  function arrify(val) {\n    return val == null ? [] : Array.isArray(val) ? val : [val];\n  }\n  function createTextElement(value) {\n    return createElement(TEXT_ELEMENT, {\n      nodeValue: value\n    });\n  }\n  var forEach = function forEach(children, callback) {\n    children = arrify(children);\n    for (var i = 0; i < children.length; i++) {\n      callback(children[i], i);\n    }\n  };\n  var map = function map(children, callback) {\n    children = arrify(children);\n    var newChildren = [];\n    for (var i = 0; i < children.length; i++) {\n      newChildren.push(callback(children[i], i));\n    }\n    return newChildren;\n  };\n  var isValidElement = function isValidElement(val) {\n    if (_typeof(val) !== 'object') return false;\n    if (val.$$typeof) return true;\n    return false;\n  };\n\n  var useRef = function useRef(initValue) {\n    var hook = createWorkInProgressHook({\n      current: initValue\n    });\n    return hook.state;\n  };\n  var useState = function useState(initialState) {\n    var hook = createWorkInProgressHook(typeof initialState === 'function' ? initialState() : initialState);\n    if (!hook.queue) createUpdateQueue(hook);\n    processHookState(hook);\n    return [hook.state, hook.queue.dispatch];\n  };\n  function areDependenciesEqual(prevDeps, deps) {\n    if (prevDeps === null) return false;\n    if (!prevDeps && !deps) return false;\n    if (!(Array.isArray(prevDeps) && Array.isArray(deps))) return false;\n    for (var i = 0; i < deps.length; i++) {\n      if (deps[i] !== prevDeps[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  function callbackWrapper(callback, effectHook, deps) {\n    var sync = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var res = areDependenciesEqual(effectHook.deps, deps) ? function () {} : sync ? function () {\n      effectHook.destroy = callback();\n    } : wait(function () {\n      return effectHook.destroy = callback();\n    }, 17);\n    effectHook.deps = deps;\n    return res;\n  }\n  var useLayoutEffect = function useLayoutEffect(callback, deps) {\n    var effectHook = {\n      create: callback\n    };\n    var hook = createWorkInProgressHook(effectHook);\n    hook.state.create = callbackWrapper(callback, hook.state, deps);\n  };\n  var useEffect = function useEffect(callback, deps) {\n    var effectHook = {\n      create: callback\n    };\n    var hook = createWorkInProgressHook(effectHook);\n    hook.state.create = callbackWrapper(callback, hook.state, deps, false);\n  };\n  var useMemo = function useMemo(callback, deps) {\n    var effectHook = {\n      value: null\n    };\n    var hook = createWorkInProgressHook(effectHook);\n    if (!areDependenciesEqual(hook.state.deps, deps)) {\n      hook.state.value = callback();\n    }\n    hook.state.deps = deps;\n    return hook.state.value;\n  };\n  var useCallback = function useCallback(callback, deps) {\n    return useMemo(function () {\n      return callback;\n    }, deps);\n  };\n  var useContext = function useContext(context) {\n    return context.currentValue;\n  };\n  function _startTransition(setPending, fn) {\n    setPending(true);\n    var prevTransition = currentBatchConfig.transition;\n    currentBatchConfig.transition = 1;\n    setPending(false);\n    fn();\n    currentBatchConfig.transition = prevTransition;\n  }\n  function startTransition(fn) {\n    _startTransition(function () {}, fn);\n  }\n  var useTransition = function useTransition() {\n    var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isPending = _useState2[0],\n      setPending = _useState2[1];\n    return [isPending, _startTransition.bind(null, setPending)];\n  };\n\n  // export * from './interface';\n  var Children = {\n    map: map,\n    forEach: forEach\n  };\n  var index = {\n    createElement: createElement,\n    render: render,\n    createRoot: createRoot,\n    Fragment: FRAGMENT,\n    Component: Component,\n    forwardRef: forwardRef,\n    Children: Children,\n    isValidElement: isValidElement,\n    createRef: createRef,\n    useEffect: useEffect,\n    useLayoutEffect: useLayoutEffect,\n    useState: useState,\n    useMemo: useMemo,\n    useCallback: useCallback,\n    useRef: useRef,\n    useContext: useContext,\n    useTransition: useTransition,\n    startTransition: startTransition,\n    createContext: createContext,\n    Offscreen: OFFSCREEN,\n    Suspense: SUSPENSE,\n    lazy: lazy\n  };\n\n  exports.Children = Children;\n  exports.Component = Component;\n  exports.Fragment = FRAGMENT;\n  exports.Offscreen = OFFSCREEN;\n  exports.Suspense = SUSPENSE;\n  exports.createContext = createContext;\n  exports.createElement = createElement;\n  exports.createRef = createRef;\n  exports.createRoot = createRoot;\n  exports.default = index;\n  exports.forwardRef = forwardRef;\n  exports.isValidElement = isValidElement;\n  exports.lazy = lazy;\n  exports.render = render;\n  exports.startTransition = startTransition;\n  exports.useCallback = useCallback;\n  exports.useContext = useContext;\n  exports.useEffect = useEffect;\n  exports.useLayoutEffect = useLayoutEffect;\n  exports.useMemo = useMemo;\n  exports.useRef = useRef;\n  exports.useState = useState;\n  exports.useTransition = useTransition;\n  exports.wrapPromise = wrapPromise;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=index.js.map\n","import { Node } from 'prosemirror-model';\nimport {\n\tDecoration,\n\tDecorationSource,\n\tEditorView,\n\tNodeView\n} from 'prosemirror-view';\nimport createElement from '../createElement';\nimport {\n\tComponentType,\n\tcreateElement as h,\n\tcreateRoot,\n\tRootRender\n} from '@docucraft/srender';\nexport class BaseNodeView implements NodeView {\n\tdom: HTMLElement;\n\tcontentDOM?: HTMLElement | null | undefined;\n\tcontainer?: HTMLElement;\n\trootRender: RootRender;\n\tcomponent: ComponentType<any> = () => '';\n\tconstructor(\n\t\tpublic node: Node,\n\t\tpublic view: EditorView\n\t) {\n\t\tthis.dom = createElement('div');\n\t\tthis.rootRender = createRoot();\n\t}\n\n\trender(props: any) {\n\t\tthis.rootRender.render(h(this.component, props));\n\t}\n\n\tignoreMutation(mutation: MutationRecord) {\n\t\tif (this.contentDOM && mutation.target !== this.contentDOM) return true;\n\t\treturn false;\n\t}\n\n\tupdate(\n\t\tnode: Node,\n\t\tdecorations?: readonly Decoration[],\n\t\tinnerDecorations?: DecorationSource\n\t) {\n\t\tif (node.type !== this.node.type) return false;\n\t\tif (node.attrs.hidden !== this.node.attrs.hidden) {\n\t\t\tif (node.attrs.hidden) {\n\t\t\t\tthis.dom.classList.add('hidden');\n\t\t\t} else {\n\t\t\t\tthis.dom.classList.remove('hidden');\n\t\t\t}\n\t\t}\n\t\tthis.node = node;\n\t\treturn true;\n\t}\n}\n","import { Fragment, Node, NodeSpec } from 'prosemirror-model';\nimport { Command, EditorState } from 'prosemirror-state';\nimport {\n\tDecoration,\n\tDecorationSource,\n\tEditorView,\n\tNodeView,\n\tNodeViewConstructor\n} from 'prosemirror-view';\nimport './style.scss';\nimport createElement, { updateElement } from '../../createElement';\nimport { BaseNodeView } from '../../utils/view';\n\nexport const taskItem: NodeSpec = {\n\tcontent: 'paragraph block*',\n\tgroup: 'block',\n\tattrs: {\n\t\tchecked: { default: false }\n\t},\n\ttoDOM(node) {\n\t\treturn [\n\t\t\t'li',\n\t\t\t{ class: 'task-item' },\n\t\t\t[\n\t\t\t\t'div',\n\t\t\t\t{ class: 'task-item-checkbox' },\n\t\t\t\t[\n\t\t\t\t\t'input',\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\t\tchecked: node.attrs.checked ? 'checked' : null,\n\t\t\t\t\t\tcontenteditable: 'false',\n\t\t\t\t\t\ttabindex: '-1'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t],\n\t\t\t['p', { class: 'task-item-content' }, 0]\n\t\t];\n\t},\n\tparseDOM: [\n\t\t{\n\t\t\ttag: 'li.task-list-item',\n\t\t\tgetAttrs: (dom) => ({\n\t\t\t\tchecked: dom.querySelector<HTMLInputElement>('input[type=checkbox]')\n\t\t\t\t\t?.checked\n\t\t\t})\n\t\t}\n\t]\n};\n\nexport const taskList: NodeSpec = {\n\tcontent: 'taskItem+',\n\tgroup: 'block',\n\ttoDOM: () => ['ul', { class: 'task-list' }, 0],\n\tparseDOM: [{ tag: 'ul.task-list' }]\n};\n\nexport const createTaskList: Command = (state, dispatch) => {\n\tconst { taskList, taskItem } = state.schema.nodes;\n\tif (dispatch) {\n\t\tdispatch(\n\t\t\tstate.tr\n\t\t\t\t.replaceSelectionWith(taskList.create(null, taskItem.createAndFill()))\n\t\t\t\t.scrollIntoView()\n\t\t);\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport class TaskItemView extends BaseNodeView {\n\tcontentDOM?: HTMLElement | null | undefined;\n\tconstructor(...args: Parameters<NodeViewConstructor>) {\n\t\tconst [node, view, getPos] = args;\n\t\tsuper(node, view);\n\t\tthis.contentDOM = createElement('div', { class: 'task-item-content' });\n\t\tthis.view = view;\n\t\tthis.dom = createElement(\n\t\t\t'li',\n\t\t\t{ class: 'task-item' },\n\t\t\tcreateElement(\n\t\t\t\t'div',\n\t\t\t\t{ class: 'task-item-checkbox' },\n\t\t\t\tcreateElement('input', {\n\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\tchecked: node.attrs.checked ? 'true' : void 0,\n\t\t\t\t\tonchange: (e) => {\n\t\t\t\t\t\tconst val = (e.target as HTMLInputElement)?.checked;\n\t\t\t\t\t\tlet tr = view.state.tr;\n\t\t\t\t\t\tview.dispatch(\n\t\t\t\t\t\t\ttr.setNodeAttribute(getPos() as number, 'checked', !!val)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t),\n\t\t\tthis.contentDOM\n\t\t);\n\t}\n\tupdate(node: Node) {\n\t\tif (!super.update(node)) return false;\n\t\tupdateElement(this.dom, {\n\t\t\tclass: `task-item${node.attrs.checked ? ' checked' : ''}`\n\t\t});\n\t\treturn true;\n\t}\n}\n\nexport const TaskItemViewConstructor = (\n\t...args: Parameters<NodeViewConstructor>\n) => new TaskItemView(...args);\nexport default () => {};\n","import { Attrs, Node } from 'prosemirror-model';\nimport { CellAttrs } from './utils';\n\nlet readFromCache: (key: Node) => TableMap | undefined;\nlet addToCache: (key: Node, value: TableMap) => TableMap;\n\nif (typeof WeakMap !== 'undefined') {\n\tlet cache = new WeakMap<Node, TableMap>();\n\treadFromCache = (key) => cache.get(key);\n\taddToCache = (key, value) => {\n\t\tcache.set(key, value);\n\t\treturn value;\n\t};\n} else {\n\tconst cache: (Node | TableMap)[] = [];\n\tconst cacheSize = 10;\n\tlet cachePos = 0;\n\treadFromCache = (key) => {\n\t\tfor (let i = 0; i < cache.length; i += 2) {\n\t\t\tif (cache[i] == key) return cache[i + 1] as TableMap;\n\t\t}\n\t};\n\n\taddToCache = (key, value) => {\n\t\tif (cachePos == cacheSize) cachePos = 0;\n\t\tcache[cachePos++] = key;\n\t\treturn (cache[cachePos++] = value);\n\t};\n}\n\nexport interface Rect {\n\tleft: number;\n\ttop: number;\n\tright: number;\n\tbottom: number;\n}\n\nexport type Problem =\n\t| {\n\t\t\ttype: 'colwidth mismatch';\n\t\t\tpos: number;\n\t\t\tcolwidth: ColWidths;\n\t  }\n\t| {\n\t\t\ttype: 'collision';\n\t\t\tpos: number;\n\t\t\trow: number;\n\t\t\tn: number;\n\t  }\n\t| {\n\t\t\ttype: 'missing';\n\t\t\trow: number;\n\t\t\tn: number;\n\t  }\n\t| {\n\t\t\ttype: 'overlong_rowspan';\n\t\t\tpos: number;\n\t\t\tn: number;\n\t  };\n\nexport class TableMap {\n\tconstructor(\n\t\tpublic width: number,\n\t\tpublic height: number,\n\t\tpublic map: number[],\n\t\tpublic problems: Problem[] = []\n\t) {}\n\n\trectBetween(a: number, b: number): Rect {\n\t\tconst {\n\t\t\tleft: leftA,\n\t\t\ttop: topA,\n\t\t\tright: rightA,\n\t\t\tbottom: bottomA\n\t\t} = this.findCell(a);\n\n\t\tconst {\n\t\t\tleft: leftB,\n\t\t\ttop: topB,\n\t\t\tright: rightB,\n\t\t\tbottom: bottomB\n\t\t} = this.findCell(b);\n\n\t\treturn {\n\t\t\tleft: Math.min(leftA, leftB),\n\t\t\ttop: Math.min(topA, topB),\n\t\t\tright: Math.max(rightA, rightB),\n\t\t\tbottom: Math.max(bottomA, bottomB)\n\t\t};\n\t}\n\n\tfindCell(pos: number): Rect {\n\t\tfor (let i = 0; i < this.map.length; i++) {\n\t\t\tconst curPos = this.map[i];\n\t\t\tif (curPos != pos) continue;\n\t\t\tconst left = i % this.width;\n\t\t\tconst top = Math.floor(i / this.width);\n\t\t\tlet right = left + 1;\n\t\t\tlet bottom = top + 1;\n\n\t\t\tfor (let j = 1; right < this.width && this.map[i + j] == curPos; j++)\n\t\t\t\tright++;\n\t\t\tfor (\n\t\t\t\tlet j = 1;\n\t\t\t\tbottom < this.height && this.map[i + this.width * j] == curPos;\n\t\t\t\tj++\n\t\t\t)\n\t\t\t\tbottom++;\n\t\t\treturn { left, top, right, bottom };\n\t\t}\n\t\tthrow new RangeError(`No cell with offset ${pos} found`);\n\t}\n\n\tnextCell(pos: number, axis: 'horiz' | 'vert', dir: number): number | null {\n\t\tconst { left, top, right, bottom } = this.findCell(pos);\n\t\tif (axis === 'horiz') {\n\t\t\tif (dir < 0 ? left === 0 : right == this.width) return null;\n\t\t\treturn this.map[top * this.width + (dir < 0 ? left - 1 : right)];\n\t\t} else {\n\t\t\tif (dir < 0 ? top == 0 : bottom == this.height) return null;\n\t\t\treturn this.map[left + this.width * (dir < 0 ? top - 1 : bottom)];\n\t\t}\n\t}\n\n\tcolCount(pos: number): number {\n\t\tfor (let i = 0; i < this.map.length; i++) {\n\t\t\tif (this.map[i] == pos) {\n\t\t\t\treturn i % this.width;\n\t\t\t}\n\t\t}\n\t\tthrow new RangeError(`No cell width offset ${pos} found`);\n\t}\n\n\tcellsInRect(rect: Rect): number[] {\n\t\tconst result: number[] = [];\n\t\tconst seen: Record<number, boolean> = {};\n\n\t\tfor (let row = rect.top; row < rect.bottom; row++) {\n\t\t\tfor (let col = rect.left; col < rect.right; col++) {\n\t\t\t\tconst index = row * this.width + col;\n\t\t\t\tconst pos = this.map[index];\n\n\t\t\t\tif (seen[pos]) continue;\n\n\t\t\t\tseen[pos] = true;\n\n\t\t\t\tif (\n\t\t\t\t\t(col == rect.left && col && this.map[index - 1] == pos) ||\n\t\t\t\t\t(row == rect.top && row && this.map[index - this.width] == pos)\n\t\t\t\t)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tresult.push(pos);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpositionAt(row: number, col: number, table: Node): number {\n\t\tfor (let i = 0, rowStart = 0; ; i++) {\n\t\t\tconst rowEnd = rowStart + table.child(i).nodeSize;\n\t\t\tif (i == row) {\n\t\t\t\tlet index = col + row * this.width;\n\t\t\t\tconst rowEndIndex = (row + 1) * this.width;\n\t\t\t\twhile (index < rowEndIndex && this.map[index] < rowStart) index++;\n\t\t\t\treturn index == rowEndIndex ? rowEnd - 1 : this.map[index];\n\t\t\t}\n\t\t\trowStart = rowEnd;\n\t\t}\n\t}\n\tstatic get(table: Node): TableMap {\n\t\treturn readFromCache(table) || addToCache(table, computeMap(table));\n\t}\n}\nexport type ColWidths = number[];\nfunction computeMap(table: Node): TableMap {\n\tif (table.type.spec.tableRole != 'table')\n\t\tthrow new RangeError('Not a table node: ' + table.type.name);\n\n\tconst width = findWidth(table),\n\t\theight = table.childCount;\n\tconst map = Array(width * height).fill(0);\n\tlet mapPos = 0;\n\tlet problems: Problem[] | undefined;\n\tconst colWidths: ColWidths = [];\n\tfor (let row = 0, pos = 0; row < height; row++) {\n\t\tconst rowNode = table.child(row);\n\t\tpos++;\n\t\tfor (let i = 0; ; i++) {\n\t\t\twhile (mapPos < map.length && map[mapPos] != 0) mapPos++;\n\t\t\tif (i == rowNode.childCount) break;\n\t\t\tconst cellNode = rowNode.child(i);\n\t\t\tconst { colspan, rowspan, colwidth } = cellNode.attrs;\n\t\t\tfor (let h = 0; h < rowspan; h++) {\n\t\t\t\tif (h + row >= height) {\n\t\t\t\t\t(problems || (problems = [])).push({\n\t\t\t\t\t\ttype: 'overlong_rowspan',\n\t\t\t\t\t\tpos,\n\t\t\t\t\t\tn: rowspan - h\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst start = mapPos + h * width;\n\t\t\t\tfor (let w = 0; w < colspan; w++) {\n\t\t\t\t\tif (map[start + w] == 0) map[start + w] = pos;\n\t\t\t\t\telse {\n\t\t\t\t\t\t(problems || (problems = [])).push({\n\t\t\t\t\t\t\ttype: 'collision',\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tpos,\n\t\t\t\t\t\t\tn: colspan - w\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst colW = colwidth && colwidth[w];\n\t\t\t\t\tif (colW) {\n\t\t\t\t\t\tconst widthIndex = ((start + w) % width) * 2,\n\t\t\t\t\t\t\tprev = colWidths[widthIndex];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tprev == null ||\n\t\t\t\t\t\t\t(prev != colW && colWidths[widthIndex + 1] == 1)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tcolWidths[widthIndex] = colW;\n\t\t\t\t\t\t\tcolWidths[widthIndex + 1] = 1;\n\t\t\t\t\t\t} else if (prev == colW) {\n\t\t\t\t\t\t\tcolWidths[widthIndex + 1]++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmapPos += colspan;\n\t\t\tpos += cellNode.nodeSize;\n\t\t}\n\t\tconst expectedPos = (row + 1) * width;\n\t\tlet missing = 0;\n\t\twhile (mapPos < expectedPos) if (map[mapPos++] == 0) missing++;\n\t\tif (missing) {\n\t\t\t(problems || (problems = [])).push({ type: 'missing', row, n: missing });\n\t\t}\n\t\tpos++;\n\t}\n\n\tconst tableMap = new TableMap(width, height, map);\n\tlet badWidths = false;\n\n\tfor (let i = 0; !badWidths && i < colWidths.length; i += 2)\n\t\tif (colWidths[i] != null && colWidths[i + 1] < height) badWidths = true;\n\n\tif (badWidths) findBadColWidths(tableMap, colWidths, table);\n\n\treturn tableMap;\n}\n\nfunction findWidth(table: Node): number {\n\tlet width = -1;\n\tlet hasRowSpan = false;\n\tfor (let row = 0; row < table.childCount; row++) {\n\t\tconst rowNode = table.child(row);\n\t\tlet rowWidth = 0;\n\t\tif (hasRowSpan)\n\t\t\tfor (let j = 0; j < row; j++) {\n\t\t\t\tconst prevRow = table.child(j);\n\t\t\t\tfor (let i = 0; i < prevRow.childCount; i++) {\n\t\t\t\t\tconst cell = prevRow.child(i);\n\t\t\t\t\tif (j + cell.attrs.rowspan > row) rowWidth += cell.attrs.colspan;\n\t\t\t\t}\n\t\t\t}\n\t\tfor (let i = 0; i < rowNode.childCount; i++) {\n\t\t\tconst cell = rowNode.child(i);\n\t\t\trowWidth += cell.attrs.colspan;\n\t\t\tif (cell.attrs.rowspan > 1) hasRowSpan = true;\n\t\t}\n\t\tif (width == -1) width = rowWidth;\n\t\twidth = Math.max(width, rowWidth);\n\t}\n\treturn width;\n}\n\nfunction findBadColWidths(\n\tmap: TableMap,\n\tcolWidths: ColWidths,\n\ttable: Node\n): void {\n\tif (!map.problems) map.problems = [];\n\tconst seen: Record<number, boolean> = {};\n\tfor (let i = 0; i < map.map.length; i++) {\n\t\tconst pos = map.map[i];\n\t\tif (seen[pos]) continue;\n\t\tseen[pos] = true;\n\t\tconst node = table.nodeAt(pos);\n\t\tif (!node) {\n\t\t\tthrow new RangeError(`No cell with offset ${pos} found`);\n\t\t}\n\n\t\tlet updated = null;\n\t\tconst attrs = node.attrs as CellAttrs;\n\t\tfor (let j = 0; j < attrs.colspan; j++) {\n\t\t\tconst col = (i + j) % map.width;\n\t\t\tconst colWidth = colWidths[col * 2];\n\t\t\tif (\n\t\t\t\tcolWidth != null &&\n\t\t\t\t(!attrs.colwidth || attrs.colwidth[j] != colWidth)\n\t\t\t)\n\t\t\t\t(updated || (updated = freshColWidth(attrs)))[j] = colWidth;\n\t\t}\n\t\tif (updated)\n\t\t\tmap.problems.unshift({\n\t\t\t\ttype: 'colwidth mismatch',\n\t\t\t\tpos,\n\t\t\t\tcolwidth: updated\n\t\t\t});\n\t}\n}\n\nfunction freshColWidth(attrs: Attrs): ColWidths {\n\tif (attrs.colwidth) return attrs.colwidth.slice();\n\tconst result: ColWidths = [];\n\tfor (let i = 0; i < attrs.colspan; i++) result.push(0);\n\n\treturn result;\n}\n","import {\n\tAttributeSpec,\n\tAttrs,\n\tNodeSpec,\n\tNode,\n\tNodeType,\n\tSchema\n} from 'prosemirror-model';\nimport { CellAttrs, MutableAttrs } from './utils';\n\nexport type getFromDOM = (dom: HTMLElement) => unknown;\nexport type setDOMAttr = (value: unknown, attrs: MutableAttrs) => void;\n\nexport interface CellAttributes {\n\tdefault: unknown;\n\tgetFromDOM?: getFromDOM;\n\tsetDOMAttr?: setDOMAttr;\n}\n\nexport interface TableNodesOptions {\n\ttableGroup?: string;\n\tcellContent: string;\n\tcellAttributes: { [k: string]: CellAttributes };\n}\n\nexport type TableNodes = Record<\n\t'table' | 'tableRow' | 'tableCell' | 'tableHeader',\n\tNodeSpec\n>;\n\nconst getCellAttrs = (dom: HTMLElement | string, extraAttrs: Attrs): Attrs => {\n\tif (typeof dom === 'string') return {} as Attrs;\n\n\tconst widthAttr = dom.getAttribute('data-colwidth');\n\tconst widths =\n\t\twidthAttr && /^\\d+(,\\d+)*$/.test(widthAttr)\n\t\t\t? widthAttr.split(',').map(Number)\n\t\t\t: null;\n\tconst colspan = Number(dom.getAttribute('colspan') || 1);\n\tconst rowspan = Number(dom.getAttribute('rowspan') || 1);\n\tconst result: MutableAttrs = {\n\t\tcolspan,\n\t\trowspan,\n\t\tcolwidth: widths && widths.length == colspan ? widths : null\n\t} satisfies CellAttrs;\n\n\tfor (const prop of Object.keys(extraAttrs)) {\n\t\tconst getter = extraAttrs[prop].getFromDOM;\n\t\tconst value = getter && getter(dom);\n\t\tif (value !== null) result[prop] = value;\n\t}\n\treturn result;\n};\n\nconst setCellAttrs = (node: Node, extraAttrs: Attrs): Attrs => {\n\tconst attrs: MutableAttrs = {};\n\tif (node.attrs.colspan != 1) attrs.colspan = node.attrs.colspan;\n\tif (node.attrs.rowspan != 1) attrs.rowspan = node.attrs.rowspan;\n\tif (node.attrs.colwidth)\n\t\tattrs['data-colwidth'] = node.attrs.colwidth.join(',');\n\n\tfor (const prop in extraAttrs) {\n\t\tconst setter = extraAttrs[prop].setDOMAttr;\n\t\tif (setter) setter(node.attrs[prop], attrs);\n\t}\n\treturn attrs;\n};\n\nexport const tableNodes = (options: TableNodesOptions): TableNodes => {\n\tconst extraAttrs = options.cellAttributes || {};\n\tconst cellAttrs: Record<string, AttributeSpec> = {\n\t\tcolspan: { default: 1 },\n\t\trowspan: { default: 1 },\n\t\tcolwidth: { default: null }\n\t};\n\n\tfor (const prop of Object.keys(extraAttrs))\n\t\tcellAttrs[prop] = { default: extraAttrs[prop].default };\n\treturn {\n\t\ttable: {\n\t\t\tattrs: { class: { default: '' }, hidden: { default: false } },\n\t\t\tcontent: 'tableRow+',\n\t\t\ttableRole: 'table',\n\t\t\tisolating: true,\n\t\t\tgroup: options.tableGroup,\n\t\t\tparseDOM: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'table',\n\t\t\t\t\tgetAttrs(dom) {\n\t\t\t\t\t\treturn { class: dom.getAttribute('class') };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\ttoDOM(node) {\n\t\t\t\treturn ['table', { class: node.attrs.class }, ['tbody', 0]];\n\t\t\t}\n\t\t},\n\t\ttableRow: {\n\t\t\tcontent: '(tableCell | tableHeader)*',\n\t\t\ttableRole: 'row',\n\t\t\tparseDOM: [{ tag: 'tr' }],\n\t\t\ttoDOM() {\n\t\t\t\treturn ['tr', 0];\n\t\t\t}\n\t\t},\n\t\ttableCell: {\n\t\t\tcontent: options.cellContent,\n\t\t\tattrs: cellAttrs,\n\t\t\ttableRole: 'cell',\n\t\t\tisolating: true,\n\t\t\tparseDOM: [\n\t\t\t\t{ tag: 'td', getAttrs: (dom) => getCellAttrs(dom, extraAttrs) }\n\t\t\t],\n\t\t\ttoDOM(node) {\n\t\t\t\treturn ['td', setCellAttrs(node, extraAttrs), 0];\n\t\t\t}\n\t\t},\n\t\ttableHeader: {\n\t\t\tcontent: options.cellContent,\n\t\t\tattrs: cellAttrs,\n\t\t\ttableRole: 'headerCell',\n\t\t\tisolating: true,\n\t\t\tparseDOM: [\n\t\t\t\t{ tag: 'th', getAttrs: (dom) => getCellAttrs(dom, extraAttrs) }\n\t\t\t],\n\t\t\ttoDOM(node) {\n\t\t\t\treturn ['th', setCellAttrs(node, extraAttrs), 0];\n\t\t\t}\n\t\t}\n\t};\n};\n\nexport type TableRole = 'table' | 'row' | 'cell' | 'headerCell';\n\nexport function tableNodeTypes(schema: Schema): Record<TableRole, NodeType> {\n\tlet result = schema.cached.tableNodeTypes;\n\tif (!result) {\n\t\tresult = schema.cached.tableNodeTypes = {};\n\t\tfor (const name in schema.nodes) {\n\t\t\tconst type = schema.nodes[name];\n\t\t\tlet role = type.spec.tableRole;\n\t\t\tif (role) result[role] = type;\n\t\t}\n\t}\n\treturn result;\n}\n","import { Attrs, Node, ResolvedPos } from 'prosemirror-model';\nimport { TableMap } from './tableMap';\nimport { tableNodeTypes } from './schema';\nimport { EditorState, NodeSelection, PluginKey } from 'prosemirror-state';\nimport { CellSelection } from './cellSelection';\nimport { Decoration, DecorationSet, DecorationSource } from 'prosemirror-view';\n\nexport interface TableState {\n\tdecorations: DecorationSet;\n\tset: number | null;\n\thoverDecos?: Decoration[];\n}\nexport const tableEditingKey = new PluginKey<TableState>('selectingCells');\n\nexport interface CellAttrs {\n\tcolspan: number;\n\trowspan: number;\n\tcolwidth: number[] | null;\n}\n\nexport type MutableAttrs = Record<string, unknown>;\n\nexport const addColspan = (attrs: CellAttrs, pos: number, n = 1): Attrs => {\n\tconst result = { ...attrs, colspan: attrs.colspan + n };\n\tif (result.colwidth) {\n\t\tresult.colwidth = result.colwidth.slice();\n\t\tfor (let i = 0; i < n; i++) result.colwidth.splice(pos, 0, 0);\n\t}\n\treturn result;\n};\n\nexport function columnIsHeader(\n\tmap: TableMap,\n\ttable: Node,\n\tcol: number\n): boolean {\n\tconst headerCell = tableNodeTypes(table.type.schema).headerCell;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tif (table.nodeAt(map.map[col + row * map.width])!.type != headerCell)\n\t\t\treturn false;\n\t}\n\treturn true;\n}\n\nexport function isInTable(state: EditorState): boolean {\n\tconst $head = state.selection.$head;\n\tfor (let d = $head.depth; d > 0; d--)\n\t\tif ($head.node(d).type.spec.tableRole == 'row') return true;\n\n\treturn false;\n}\n\nexport function pointsAtCell($pos: ResolvedPos): boolean {\n\treturn $pos.parent.type.spec.tableRole == 'row' && !!$pos.nodeAfter;\n}\n\nexport function inSameTable($cellA: ResolvedPos, $cellB: ResolvedPos): boolean {\n\treturn (\n\t\t$cellA.depth == $cellB.depth &&\n\t\t$cellA.pos >= $cellB.start(-1) &&\n\t\t$cellA.pos <= $cellB.end(-1)\n\t);\n}\n\nexport function colCount($pos: ResolvedPos): number {\n\treturn TableMap.get($pos.node(-1)).colCount($pos.pos - $pos.start(-1));\n}\n\nexport function nextCell(\n\t$pos: ResolvedPos,\n\taxis: 'horiz' | 'vert',\n\tdir: number\n): ResolvedPos | null {\n\tconst table = $pos.node(-1);\n\tconst map = TableMap.get(table);\n\tconst tableStart = $pos.start(-1);\n\tconst moved = map.nextCell($pos.pos - tableStart, axis, dir);\n\treturn moved == null ? null : $pos.node(0).resolve(tableStart + moved);\n}\n\nexport function removeColSpan(attrs: CellAttrs, pos: number, n = 1): CellAttrs {\n\tconst result: CellAttrs = { ...attrs, colspan: attrs.colspan - n };\n\n\tif (result.colwidth) {\n\t\tresult.colwidth = result.colwidth.slice();\n\t\tresult.colwidth.splice(pos, n);\n\t\tif (!result.colwidth.some((w) => w > 0)) result.colwidth = null;\n\t}\n\treturn result;\n}\n\nexport function cellAround($pos: ResolvedPos): ResolvedPos | null {\n\tfor (let d = $pos.depth - 1; d > 0; d--)\n\t\tif ($pos.node(d).type.spec.tableRole == 'row')\n\t\t\treturn $pos.node(0).resolve($pos.before(d + 1));\n\n\treturn null;\n}\n\nexport function moveCellForward($pos: ResolvedPos): ResolvedPos {\n\treturn $pos.node(0).resolve($pos.pos + $pos.nodeAfter!.nodeSize);\n}\n\nexport function cellNear($pos: ResolvedPos): ResolvedPos | undefined {\n\tfor (\n\t\tlet after = $pos.nodeAfter, pos = $pos.pos;\n\t\tafter;\n\t\tafter = after.firstChild, pos++\n\t) {\n\t\tconst role = after.type.spec.tableRole;\n\t\tif (role == 'cell' || role == 'headerCell') return $pos.doc.resolve(pos);\n\t}\n\n\tfor (\n\t\tlet before = $pos.nodeBefore, pos = $pos.pos;\n\t\tbefore;\n\t\tbefore = before.lastChild, pos--\n\t) {\n\t\tconst role = before.type.spec.tableRole;\n\t\tif (role == 'cell' || role == 'headerCell') {\n\t\t\treturn $pos.doc.resolve(pos - before.nodeSize);\n\t\t}\n\t}\n}\n\nexport function selectionCell(state: EditorState): ResolvedPos {\n\tconst sel = state.selection as CellSelection | NodeSelection;\n\tif ('$anchorCell' in sel && sel.$anchorCell) {\n\t\treturn sel.$anchorCell.pos > sel.$headCell.pos\n\t\t\t? sel.$anchorCell\n\t\t\t: sel.$headCell;\n\t} else if (\n\t\t'node' in sel &&\n\t\tsel.node &&\n\t\tsel.node.type.spec.tableRole == 'cell'\n\t) {\n\t\treturn sel.$anchor;\n\t}\n\tconst $cell = cellAround(sel.$head) || cellNear(sel.$head);\n\tif ($cell) return $cell;\n\n\tthrow new RangeError(`No cell found around position ${sel.head}`);\n}\n\nexport const isEmpty = (val: unknown) =>\n\tval === null || val === undefined || Number.isNaN(val);\n","import { Fragment, Node, ResolvedPos, Slice } from 'prosemirror-model';\nimport {\n\tEditorState,\n\tNodeSelection,\n\tSelection,\n\tSelectionRange,\n\tTextSelection,\n\tTransaction\n} from 'prosemirror-state';\nimport { Mappable } from 'prosemirror-transform';\nimport { TableMap } from './tableMap';\nimport { CellAttrs, inSameTable, pointsAtCell, removeColSpan } from './utils';\nimport { Decoration, DecorationSet, DecorationSource } from 'prosemirror-view';\n\nexport interface CellSelectionJSON {\n\ttype: string;\n\tanchor: number;\n\thead: number;\n}\n\nexport class CellSelection extends Selection {\n\t$anchorCell: ResolvedPos;\n\t$headCell: ResolvedPos;\n\n\tconstructor($anchorCell: ResolvedPos, $headCell: ResolvedPos = $anchorCell) {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\t\tconst rect = map.rectBetween(\n\t\t\t$anchorCell.pos - tableStart,\n\t\t\t$headCell.pos - tableStart\n\t\t);\n\t\tconst doc = $anchorCell.node(0);\n\t\tconst cells = map\n\t\t\t.cellsInRect(rect)\n\t\t\t.filter((p) => p != $headCell.pos - tableStart);\n\n\t\tcells.unshift($headCell.pos - tableStart);\n\t\tconst ranges = cells.map((pos) => {\n\t\t\tconst cell = table.nodeAt(pos);\n\t\t\tif (!cell) {\n\t\t\t\tthrow new RangeError(`No cell with offset ${pos} found`);\n\t\t\t}\n\t\t\tconst from = tableStart + pos + 1;\n\t\t\treturn new SelectionRange(\n\t\t\t\tdoc.resolve(from),\n\t\t\t\tdoc.resolve(from + cell.content.size)\n\t\t\t);\n\t\t});\n\t\tsuper(ranges[0].$from, ranges[0].$to, ranges);\n\t\tthis.$anchorCell = $anchorCell;\n\t\tthis.$headCell = $headCell;\n\t}\n\teq(selection: unknown): boolean {\n\t\treturn (\n\t\t\tselection instanceof CellSelection &&\n\t\t\tselection.$anchorCell.pos == this.$anchorCell.pos &&\n\t\t\tselection.$headCell.pos == this.$headCell.pos\n\t\t);\n\t}\n\tmap(doc: Node, mapping: Mappable): CellSelection | Selection {\n\t\tconst $anchorCell = doc.resolve(mapping.map(this.$anchorCell.pos));\n\t\tconst $headCell = doc.resolve(mapping.map(this.$headCell.pos));\n\n\t\tif (\n\t\t\tpointsAtCell($anchorCell) &&\n\t\t\tpointsAtCell($headCell) &&\n\t\t\tinSameTable($anchorCell, $headCell)\n\t\t) {\n\t\t\tconst tableChanged = this.$anchorCell.node(-1) != $anchorCell.node(-1);\n\t\t\tif (tableChanged && this.isRowSelection())\n\t\t\t\treturn CellSelection.rowSelection($anchorCell, $headCell);\n\t\t\telse if (tableChanged && this.isColSelection())\n\t\t\t\treturn CellSelection.colSelection($anchorCell, $headCell);\n\t\t\telse return new CellSelection($anchorCell, $headCell);\n\t\t}\n\n\t\treturn TextSelection.between($anchorCell, $headCell);\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\ttype: 'cell',\n\t\t\tanchor: this.$anchorCell.pos,\n\t\t\thead: this.$headCell.pos\n\t\t};\n\t}\n\n\tpublic isRowSelection(): boolean {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\n\t\tconst anchorLeft = map.colCount(this.$anchorCell.pos - tableStart);\n\t\tconst headLeft = map.colCount(this.$headCell.pos - tableStart);\n\t\tif (Math.min(anchorLeft, headLeft) > 0) return false;\n\t\tconst anchorRight = anchorLeft + this.$anchorCell.nodeAfter!.attrs.colspan;\n\t\tconst headRight = headLeft + this.$headCell.nodeAfter!.attrs.colspan;\n\t\treturn Math.max(anchorRight, headRight) == map.width;\n\t}\n\n\tpublic isColSelection(): boolean {\n\t\tconst anchorTop = this.$anchorCell.index(-1);\n\t\tconst headTop = this.$headCell.index(-1);\n\t\tif (Math.min(anchorTop, headTop) > 0) return false;\n\n\t\tconst anchorBottom = anchorTop + this.$anchorCell.nodeAfter!.attrs.rowspan;\n\t\tconst headBottom = headTop + this.$headCell.nodeAfter!.attrs.rowspan;\n\n\t\treturn (\n\t\t\tMath.max(anchorBottom, headBottom) == this.$headCell.node(-1).childCount\n\t\t);\n\t}\n\n\tpublic static colSelection(\n\t\t$anchorCell: ResolvedPos,\n\t\t$headCell: ResolvedPos = $anchorCell\n\t): CellSelection {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\n\t\tconst anchorRect = map.findCell($anchorCell.pos - tableStart);\n\t\tconst headRect = map.findCell($headCell.pos - tableStart);\n\t\tconst doc = $anchorCell.node(0);\n\n\t\tif (anchorRect.top <= headRect.top) {\n\t\t\tif (anchorRect.top > 0)\n\t\t\t\t$anchorCell = doc.resolve(tableStart + map.map[anchorRect.left]);\n\t\t\tif (headRect.bottom < map.height)\n\t\t\t\t$headCell = doc.resolve(\n\t\t\t\t\ttableStart +\n\t\t\t\t\t\tmap.map[map.width * (map.height - 1) + headRect.right - 1]\n\t\t\t\t);\n\t\t} else {\n\t\t\tif (headRect.top > 0)\n\t\t\t\t$headCell = doc.resolve(tableStart + map.map[headRect.left]);\n\t\t\tif (anchorRect.bottom < map.height)\n\t\t\t\t$anchorCell = doc.resolve(\n\t\t\t\t\ttableStart +\n\t\t\t\t\t\tmap.map[map.width * (map.height - 1) + anchorRect.right - 1]\n\t\t\t\t);\n\t\t}\n\t\treturn new CellSelection($anchorCell, $headCell);\n\t}\n\n\tpublic forEachCell(f: (node: Node, pos: number) => void) {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\n\t\tconst cells = map.cellsInRect(\n\t\t\tmap.rectBetween(\n\t\t\t\tthis.$anchorCell.pos - tableStart,\n\t\t\t\tthis.$headCell.pos - tableStart\n\t\t\t)\n\t\t);\n\t\tfor (let i = 0; i < cells.length; i++) {\n\t\t\tf(table.nodeAt(cells[i])!, tableStart + cells[i]);\n\t\t}\n\t}\n\n\tpublic content(): Slice {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\n\t\tconst rect = map.rectBetween(\n\t\t\tthis.$anchorCell.pos - tableStart,\n\t\t\tthis.$headCell.pos - tableStart\n\t\t);\n\t\tconst seen: Record<number, boolean> = {};\n\t\tconst rows = [];\n\t\tfor (let row = rect.top; row < rect.bottom; row++) {\n\t\t\tconst rowContent = [];\n\t\t\tfor (\n\t\t\t\tlet index = row * map.width + rect.left, col = rect.left;\n\t\t\t\tcol < rect.right;\n\t\t\t\tcol++, index++\n\t\t\t) {\n\t\t\t\tconst pos = map.map[index];\n\t\t\t\tif (seen[pos]) continue;\n\t\t\t\tseen[pos] = true;\n\n\t\t\t\tconst cellRect = map.findCell(pos);\n\t\t\t\tlet cell = table.nodeAt(pos);\n\t\t\t\tif (!cell) {\n\t\t\t\t\tthrow RangeError(`No cell with offset ${pos} found`);\n\t\t\t\t}\n\n\t\t\t\tconst extraLeft = rect.left - cellRect.left;\n\t\t\t\tconst extraRight = cellRect.right - rect.right;\n\n\t\t\t\tif (extraLeft > 0 || extraRight > 0) {\n\t\t\t\t\tlet attrs = cell.attrs as CellAttrs;\n\t\t\t\t\tif (extraLeft > 0) {\n\t\t\t\t\t\tattrs = removeColSpan(attrs, 0, extraLeft);\n\t\t\t\t\t}\n\t\t\t\t\tif (extraRight > 0) {\n\t\t\t\t\t\tattrs = removeColSpan(\n\t\t\t\t\t\t\tattrs,\n\t\t\t\t\t\t\tattrs.colspan - extraRight,\n\t\t\t\t\t\t\textraRight\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (cellRect.left < rect.left) {\n\t\t\t\t\t\tcell = cell.type.createAndFill(attrs);\n\t\t\t\t\t\tif (!cell) {\n\t\t\t\t\t\t\tthrow RangeError(\n\t\t\t\t\t\t\t\t`Could not create cell with attrs ${JSON.stringify(attrs)}`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcell = cell.type.create(attrs, cell.content);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (cellRect.top < rect.top || cellRect.bottom > rect.bottom) {\n\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t...cell.attrs,\n\t\t\t\t\t\trowspan:\n\t\t\t\t\t\t\tMath.min(cellRect.bottom, rect.bottom) -\n\t\t\t\t\t\t\tMath.max(cellRect.top, rect.top)\n\t\t\t\t\t};\n\t\t\t\t\tif (cellRect.top < rect.top) {\n\t\t\t\t\t\tcell = cell.type.createAndFill(attrs)!;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcell = cell.type.create(attrs, cell.content);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trowContent.push(cell);\n\t\t\t}\n\t\t\trows.push(table.child(row).copy(Fragment.from(rowContent)));\n\t\t}\n\n\t\tconst fragment =\n\t\t\tthis.isColSelection() && this.isRowSelection() ? table : rows;\n\t\treturn new Slice(Fragment.from(fragment), 1, 1);\n\t}\n\n\tpublic static rowSelection(\n\t\t$anchorCell: ResolvedPos,\n\t\t$headCell: ResolvedPos = $anchorCell\n\t): CellSelection {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\n\t\tconst anchorRect = map.findCell($anchorCell.pos - tableStart);\n\t\tconst headRect = map.findCell($headCell.pos - tableStart);\n\t\tconst doc = $anchorCell.node(0);\n\n\t\tif (anchorRect.left <= headRect.left) {\n\t\t\tif (anchorRect.left > 0)\n\t\t\t\t$anchorCell = doc.resolve(\n\t\t\t\t\ttableStart + map.map[anchorRect.top * map.width]\n\t\t\t\t);\n\t\t\tif (headRect.right < map.width)\n\t\t\t\t$headCell = doc.resolve(\n\t\t\t\t\ttableStart + map.map[map.width * (headRect.top + 1) - 1]\n\t\t\t\t);\n\t\t} else {\n\t\t\tif (headRect.left > 0)\n\t\t\t\t$headCell = doc.resolve(tableStart + map.map[headRect.top * map.width]);\n\t\t\tif (anchorRect.right < map.width)\n\t\t\t\t$anchorCell = doc.resolve(\n\t\t\t\t\ttableStart + map.map[map.width * (anchorRect.top + 1) - 1]\n\t\t\t\t);\n\t\t}\n\t\treturn new CellSelection($anchorCell, $headCell);\n\t}\n\tstatic fromJSON(doc: Node, json: CellSelectionJSON): CellSelection {\n\t\treturn new CellSelection(doc.resolve(json.anchor), doc.resolve(json.head));\n\t}\n\n\tstatic create(\n\t\tdoc: Node,\n\t\tanchorCell: number,\n\t\theadCell: number = anchorCell\n\t): CellSelection {\n\t\treturn new CellSelection(doc.resolve(anchorCell), doc.resolve(headCell));\n\t}\n\n\tgetBookmark(): CellBookmark {\n\t\treturn new CellBookmark(this.$anchorCell.pos, this.$headCell.pos);\n\t}\n}\nCellSelection.prototype.visible = false;\n\nSelection.jsonID('cell', CellSelection);\n\nexport class CellBookmark {\n\tconstructor(\n\t\tpublic anchor: number,\n\t\tpublic head: number\n\t) {}\n\n\tmap(mapping: Mappable): CellBookmark {\n\t\treturn new CellBookmark(mapping.map(this.anchor), mapping.map(this.head));\n\t}\n\n\tresolve(doc: Node): CellSelection | Selection {\n\t\tconst $anchorCell = doc.resolve(this.anchor),\n\t\t\t$headCell = doc.resolve(this.head);\n\t\tif (\n\t\t\t$anchorCell.parent.type.spec.tableRole == 'row' &&\n\t\t\t$headCell.parent.type.spec.tableRole == 'row' &&\n\t\t\t$anchorCell.index() < $anchorCell.parent.childCount &&\n\t\t\t$headCell.index() < $headCell.parent.childCount &&\n\t\t\tinSameTable($anchorCell, $headCell)\n\t\t)\n\t\t\treturn new CellSelection($anchorCell, $headCell);\n\t\telse return Selection.near($headCell, 1);\n\t}\n}\n\nexport function drawCellSelection(state: EditorState): Decoration[] {\n\tconst cells: Decoration[] = [];\n\tif (!(state.selection instanceof CellSelection)) return cells;\n\tstate.selection.forEachCell((node, pos) => {\n\t\tcells.push(\n\t\t\tDecoration.node(pos, pos + node.nodeSize, { class: 'selectedCell' })\n\t\t);\n\t});\n\n\treturn cells;\n}\n\nfunction isCellBoundarySelection({ $from, $to }: TextSelection) {\n\tif ($from.pos == $to.pos || $from.pos < $from.pos - 6) return false; // Cheap elimination\n\tlet afterFrom = $from.pos;\n\tlet beforeTo = $to.pos;\n\tlet depth = $from.depth;\n\tfor (; depth >= 0; depth--, afterFrom++)\n\t\tif ($from.after(depth + 1) < $from.end(depth)) break;\n\tfor (let d = $to.depth; d >= 0; d--, beforeTo--)\n\t\tif ($to.before(d + 1) > $to.start(d)) break;\n\treturn (\n\t\tafterFrom == beforeTo &&\n\t\t/row|table/.test($from.node(depth).type.spec.tableRole)\n\t);\n}\n\nfunction isTextSelectionAcrossCells({ $from, $to }: TextSelection) {\n\tlet fromCellBoundaryNode: Node | undefined;\n\tlet toCellBoundaryNode: Node | undefined;\n\n\tfor (let i = $from.depth; i > 0; i--) {\n\t\tconst node = $from.node(i);\n\t\tif (\n\t\t\tnode.type.spec.tableRole === 'cell' ||\n\t\t\tnode.type.spec.tableRole === 'headerCell'\n\t\t) {\n\t\t\tfromCellBoundaryNode = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tfor (let i = $to.depth; i > 0; i--) {\n\t\tconst node = $to.node(i);\n\t\tif (\n\t\t\tnode.type.spec.tableRole === 'cell' ||\n\t\t\tnode.type.spec.tableRole === 'headerCell'\n\t\t) {\n\t\t\ttoCellBoundaryNode = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn fromCellBoundaryNode !== toCellBoundaryNode && $to.parentOffset === 0;\n}\n\nexport function normalizeSelection(\n\tstate: EditorState,\n\ttr: Transaction | undefined,\n\tallowTableNodeSelection: boolean\n) {\n\tconst sel = (tr || state).selection;\n\tconst doc = (tr || state).doc;\n\tlet normalize: Selection | undefined;\n\tlet role: string | undefined;\n\tif (sel instanceof NodeSelection && (role = sel.node.type.spec.tableRole)) {\n\t\tif (role == 'cell' || role == 'headerCell') {\n\t\t\tnormalize = CellSelection.create(doc, sel.from);\n\t\t} else if (role == 'row') {\n\t\t\tconst $cell = doc.resolve(sel.from + 1);\n\t\t\tnormalize = CellSelection.rowSelection($cell);\n\t\t} else if (!allowTableNodeSelection) {\n\t\t\tconst map = TableMap.get(sel.node);\n\t\t\tconst start = sel.from + 1;\n\t\t\tconst lastCell = start + map.map[map.width * map.height - 1];\n\t\t\tnormalize = CellSelection.create(doc, start + 1, lastCell);\n\t\t}\n\t} else if (sel instanceof TextSelection && isCellBoundarySelection(sel)) {\n\t\tnormalize = TextSelection.create(doc, sel.from);\n\t} else if (sel instanceof TextSelection && isTextSelectionAcrossCells(sel)) {\n\t\tnormalize = TextSelection.create(doc, sel.$from.start(), sel.$from.end());\n\t}\n\tif (normalize) (tr || (tr = state.tr)).setSelection(normalize);\n\treturn tr;\n}\n","import { Node } from 'prosemirror-model';\nimport { EditorState, PluginKey, Transaction } from 'prosemirror-state';\nimport { TableRole, tableNodeTypes } from './schema';\nimport { TableMap } from './tableMap';\nimport { CellAttrs, removeColSpan } from './utils';\n\nexport const fixTablesKey = new PluginKey<{ fixTables: boolean }>('fix-tables');\nfunction changedDescendants(\n  old: Node,\n  cur: Node,\n  offset: number,\n  f: (node: Node, pos: number) => void\n): void {\n  const oldSize = old.childCount,\n    curSize = cur.childCount;\n  outer: for (let i = 0, j = 0; i < curSize; i++) {\n    const child = cur.child(i);\n    for (let scan = j, e = Math.min(oldSize, i + 3); scan < e; scan++) {\n      if (old.child(scan) == child) {\n        j = scan + 1;\n        offset += child.nodeSize;\n        continue outer;\n      }\n    }\n    f(child, offset);\n    if (j < oldSize && old.child(j).sameMarkup(child))\n      changedDescendants(old.child(j), child, offset + 1, f);\n    else child.nodesBetween(0, child.content.size, f, offset + 1);\n    offset += child.nodeSize;\n  }\n}\n\nexport function fixTables(\n  state: EditorState,\n  oldState?: EditorState\n): Transaction | undefined {\n  let tr: Transaction | undefined;\n  const check = (node: Node, pos: number) => {\n    if (node.type.spec.tableRole == 'table')\n      tr = fixTable(state, node, pos, tr);\n  };\n  if (!oldState) state.doc.descendants(check);\n  else if (oldState.doc != state.doc)\n    changedDescendants(oldState.doc, state.doc, 0, check);\n  return tr;\n}\n\nexport function fixTable(\n  state: EditorState,\n  table: Node,\n  tablePos: number,\n  tr: Transaction | undefined\n): Transaction | undefined {\n  const map = TableMap.get(table);\n  if (!map.problems) return tr;\n  if (!tr) tr = state.tr;\n\n  // Track which rows we must add cells to, so that we can adjust that\n  // when fixing collisions.\n  const mustAdd: number[] = [];\n  for (let i = 0; i < map.height; i++) mustAdd.push(0);\n  for (let i = 0; i < map.problems.length; i++) {\n    const prob = map.problems[i];\n    if (prob.type == 'collision') {\n      const cell = table.nodeAt(prob.pos);\n      if (!cell) continue;\n      const attrs = cell.attrs as CellAttrs;\n      for (let j = 0; j < attrs.rowspan; j++) mustAdd[prob.row + j] += prob.n;\n      tr.setNodeMarkup(\n        tr.mapping.map(tablePos + 1 + prob.pos),\n        null,\n        removeColSpan(attrs, attrs.colspan - prob.n, prob.n)\n      );\n    } else if (prob.type == 'missing') {\n      mustAdd[prob.row] += prob.n;\n    } else if (prob.type == 'overlong_rowspan') {\n      const cell = table.nodeAt(prob.pos);\n      if (!cell) continue;\n      tr.setNodeMarkup(tr.mapping.map(tablePos + 1 + prob.pos), null, {\n        ...cell.attrs,\n        rowspan: cell.attrs.rowspan - prob.n,\n      });\n    } else if (prob.type == 'colwidth mismatch') {\n      const cell = table.nodeAt(prob.pos);\n      if (!cell) continue;\n      tr.setNodeMarkup(tr.mapping.map(tablePos + 1 + prob.pos), null, {\n        ...cell.attrs,\n        colwidth: prob.colwidth,\n      });\n    }\n  }\n  let first, last;\n  for (let i = 0; i < mustAdd.length; i++)\n    if (mustAdd[i]) {\n      if (first == null) first = i;\n      last = i;\n    }\n\n  for (let i = 0, pos = tablePos + 1; i < map.height; i++) {\n    const row = table.child(i);\n    const end = pos + row.nodeSize;\n    const add = mustAdd[i];\n    if (add > 0) {\n      let role: TableRole = 'cell';\n      if (row.firstChild) {\n        role = row.firstChild.type.spec.tableRole;\n      }\n      const nodes: Node[] = [];\n      for (let j = 0; j < add; j++) {\n        const node = tableNodeTypes(state.schema)[role].createAndFill();\n\n        if (node) nodes.push(node);\n      }\n      const side = (i == 0 || first == i - 1) && last == i ? pos + 1 : end - 1;\n      tr.insert(tr.mapping.map(side), nodes);\n    }\n    pos = end;\n  }\n  return tr.setMeta(fixTablesKey, { fixTables: true });\n}\n","import {\n\tCommand,\n\tEditorState,\n\tTextSelection,\n\tTransaction\n} from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Rect, TableMap } from './tableMap';\nimport { Fragment, Node, NodeType, ResolvedPos } from 'prosemirror-model';\nimport {\n\tCellAttrs,\n\taddColspan,\n\tcolumnIsHeader,\n\tisInTable,\n\tmoveCellForward,\n\tremoveColSpan,\n\tselectionCell\n} from './utils';\nimport { CellAttributes, tableNodeTypes } from './schema';\nimport { CellSelection } from './cellSelection';\nimport { Direction } from './input';\nexport const createTable: (rows: number, columns: number) => Command =\n\t(rows, columns) => (state, dispatch, view) => {\n\t\tconst { table, tableRow, tableHeader, tableCell, paragraph } =\n\t\t\tstate.schema.nodes;\n\n\t\tconst tableNode = table.create(\n\t\t\tnull,\n\t\t\tArray(rows + 1)\n\t\t\t\t.fill(null)\n\t\t\t\t.map((_, row) =>\n\t\t\t\t\ttableRow.create(\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tArray(columns)\n\t\t\t\t\t\t\t.fill(null)\n\t\t\t\t\t\t\t.map((_, col) =>\n\t\t\t\t\t\t\t\t(row === 0 ? tableHeader : tableCell).create(\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tparagraph.create(\n\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t\t// state.schema.text('cell row ' + row + ', col ' + col)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t);\n\t\tTableMap.get(tableNode);\n\t\tif (dispatch) {\n\t\t\tdispatch(state.tr.replaceSelectionWith(tableNode).scrollIntoView());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\nexport function insertTable(\n\tstate: EditorState,\n\tdispatch: EditorView['dispatch']\n) {\n\tconst { schema } = state;\n\tconst table = schema.nodes.table;\n\tconst row = schema.nodes.table_row;\n\tconst cell = schema.nodes.table_cell;\n\tconst paragraph = schema.nodes.paragraph;\n\tconst tableNode = table.create(\n\t\tnull,\n\t\tArray(3)\n\t\t\t.fill(null)\n\t\t\t.map((_, r) =>\n\t\t\t\trow.create(\n\t\t\t\t\tnull,\n\t\t\t\t\tArray(3)\n\t\t\t\t\t\t.fill(null)\n\t\t\t\t\t\t.map((_, col) =>\n\t\t\t\t\t\t\tcell.create(\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tparagraph.create(\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tschema.text(`hello row ${r + 1} col ${col + 1}`)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t);\n\tdispatch(state.tr.replaceSelectionWith(tableNode).scrollIntoView());\n}\n\nexport interface TableCtx {\n\ttableStart: number;\n\tmap: TableMap;\n\ttable: Node;\n}\nexport type TableRect = Rect & TableCtx;\n\nexport function selectedRect(state: EditorState): TableRect {\n\tconst sel = state.selection;\n\tconst $pos = selectionCell(state);\n\tconst table = $pos.node(-1);\n\tconst tableStart = $pos.start(-1);\n\tconst map = TableMap.get(table);\n\n\tconst rect =\n\t\tsel instanceof CellSelection\n\t\t\t? map.rectBetween(\n\t\t\t\t\tsel.$anchorCell.pos - tableStart,\n\t\t\t\t\tsel.$headCell.pos - tableStart\n\t\t\t\t)\n\t\t\t: map.findCell($pos.pos - tableStart);\n\n\treturn { ...rect, tableStart, map, table };\n}\n\nexport function addColumn(\n\ttr: Transaction,\n\t{ map, table, tableStart }: TableCtx,\n\tcol: number\n) {\n\tlet refColumn: number | null = col > 0 ? -1 : 0;\n\tif (columnIsHeader(map, table, col + refColumn)) {\n\t\trefColumn = col == 0 || col == map.width ? null : 0;\n\t}\n\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst index = row * map.width + col;\n\t\tif (col > 0 && col < map.width && map.map[index - 1] == map.map[index]) {\n\t\t\tconst pos = map.map[index];\n\t\t\tconst cell = table.nodeAt(pos)!;\n\t\t\ttr.setNodeMarkup(\n\t\t\t\ttr.mapping.map(tableStart + pos),\n\t\t\t\tnull,\n\t\t\t\taddColspan(cell.attrs as CellAttrs, col - map.colCount(pos))\n\t\t\t);\n\t\t\trow += cell.attrs.rowspan - 1;\n\t\t} else {\n\t\t\tconst type =\n\t\t\t\trefColumn == null\n\t\t\t\t\t? tableNodeTypes(table.type.schema).cell\n\t\t\t\t\t: table.nodeAt(map.map[index + refColumn])!.type;\n\t\t\tconst pos = map.positionAt(row, col, table);\n\t\t\ttr.insert(tr.mapping.map(tableStart + pos), type.createAndFill()!);\n\t\t}\n\t}\n\treturn tr;\n}\n\nexport const addColumnBefore: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addColumn(state.tr, rect, rect.left));\n\t}\n\treturn true;\n};\n\nexport const addColumnAfter: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addColumn(state.tr, rect, rect.right));\n\t}\n\treturn true;\n};\n\nexport const addColumnAtEnd = (pos: number, view: EditorView) => {\n\tconst { state, dispatch } = view;\n\tlet tr = state.tr;\n\tconst tableStart = tr.mapping.map(pos);\n\tconst $start = state.doc.resolve(tableStart);\n\tconst table = $start.nodeAfter!;\n\t// console.log($start);\n\t// console.log($start.node($start.depth), 'nn');\n\n\tconst map = TableMap.get(table);\n\tdispatch(addColumn(tr, { map, table, tableStart: pos + 1 }, map.width));\n};\n\nexport const removeColumn = (\n\ttr: Transaction,\n\t{ map, table, tableStart }: TableCtx,\n\tcol: number\n): Transaction => {\n\tconst mapStart = tr.mapping.maps.length;\n\tfor (let row = 0; row < map.height; ) {\n\t\tconst index = row * map.width + col;\n\t\tconst pos = map.map[index];\n\t\tconst cell = table.nodeAt(pos)!;\n\t\tconst attrs = cell.attrs as CellAttrs;\n\n\t\tif (\n\t\t\t(col > 0 && map.map[index - 1] == pos) ||\n\t\t\t(col < map.width - 1 && map.map[index + 1] == pos)\n\t\t) {\n\t\t\ttr.setNodeMarkup(\n\t\t\t\ttr.mapping.slice(mapStart).map(tableStart + pos),\n\t\t\t\tnull,\n\t\t\t\tremoveColSpan(attrs, col - map.colCount(pos))\n\t\t\t);\n\t\t} else {\n\t\t\tconst start = tr.mapping.slice(mapStart).map(tableStart + pos);\n\t\t\ttr.delete(start, start + cell.nodeSize);\n\t\t}\n\t\trow += attrs.rowspan;\n\t}\n\treturn tr;\n};\n\nexport const deleteColumn: Command = (state, dispatch) => {\n\tif (isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tconst tr = state.tr;\n\t\tif (rect.left == 0 && rect.right == rect.map.width) return false;\n\t\tfor (let i = rect.right - 1; ; i--) {\n\t\t\tremoveColumn(tr, rect, i);\n\t\t\tif (i == rect.left) break;\n\t\t\tconst table = rect.tableStart\n\t\t\t\t? tr.doc.nodeAt(rect.tableStart - 1)\n\t\t\t\t: tr.doc;\n\t\t\tif (!table) throw new RangeError('No table found');\n\t\t\trect.table = table;\n\t\t\trect.map = TableMap.get(table);\n\t\t}\n\t\tdispatch(tr);\n\t}\n\treturn true;\n};\n\nexport const rowIsHeader = (\n\tmap: TableMap,\n\ttable: Node,\n\trow: number\n): boolean => {\n\tconst headerCell = tableNodeTypes(table.type.schema).headerCell;\n\tfor (let col = 0; col < map.width; col++)\n\t\tif (table.nodeAt(map.map[col + row * map.width])?.type != headerCell)\n\t\t\treturn false;\n\n\treturn true;\n};\n\nexport const addRow = (\n\ttr: Transaction,\n\t{ map, table, tableStart }: TableCtx,\n\trow: number\n): Transaction => {\n\tlet rowPos = tableStart;\n\tfor (let i = 0; i < row; i++) rowPos += table.child(i).nodeSize;\n\tconst cells = [];\n\tlet refRow: number | null = row > 0 ? -1 : 0;\n\n\tif (rowIsHeader(map, table, row + refRow))\n\t\trefRow = row == 0 || row == map.height ? null : 0;\n\n\tfor (let col = 0, index = map.width * row; col < map.width; col++, index++) {\n\t\tif (\n\t\t\trow > 0 &&\n\t\t\trow < map.height &&\n\t\t\tmap.map[index] == map.map[index - map.width]\n\t\t) {\n\t\t\tconst pos = map.map[index];\n\t\t\tconst attrs = table.nodeAt(pos)!.attrs;\n\t\t\ttr.setNodeMarkup(tableStart + pos, null, {\n\t\t\t\t...attrs,\n\t\t\t\trowspan: attrs.rowspan + 1\n\t\t\t});\n\t\t\tcol += attrs.colspan - 1;\n\t\t} else {\n\t\t\tconst type =\n\t\t\t\trefRow === null\n\t\t\t\t\t? tableNodeTypes(table.type.schema).cell\n\t\t\t\t\t: table.nodeAt(map.map[index + refRow * map.width])?.type;\n\t\t\tconst node = type?.createAndFill();\n\t\t\tif (node) cells.push(node);\n\t\t}\n\t}\n\ttr.insert(rowPos, tableNodeTypes(table.type.schema).row.create(null, cells));\n\treturn tr;\n};\n\nexport const addRowBefore: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addRow(state.tr, rect, rect.top));\n\t}\n\treturn true;\n};\n\nexport const addRowAfter: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addRow(state.tr, rect, rect.bottom));\n\t}\n\treturn true;\n};\n\nexport const addRowAtEnd = (pos: number, view: EditorView) => {\n\tconst $pos = view.state.doc.resolve(pos);\n\tconst table = $pos.nodeAfter!;\n\tconst map = TableMap.get(table);\n\tview.dispatch(\n\t\taddRow(view.state.tr, { map, table, tableStart: pos + 1 }, map.height)\n\t);\n};\n\nexport const removeRow = (\n\ttr: Transaction,\n\t{ map, table, tableStart }: TableCtx,\n\trow: number\n) => {\n\tlet rowPos = 0;\n\tfor (let i = 0; i < row; i++) rowPos += table.child(i).nodeSize;\n\tconst nextRow = rowPos + table.child(row).nodeSize;\n\tconst mapFrom = tr.mapping.maps.length;\n\ttr.delete(rowPos + tableStart, nextRow + tableStart);\n\n\tconst seen = new Set<number>();\n\n\tfor (let col = 0, index = row * map.width; col < map.width; col++, index++) {\n\t\tconst pos = map.map[index];\n\n\t\tif (seen.has(pos)) continue;\n\n\t\tseen.add(pos);\n\t\tif (row > 0 && pos == map.map[index - map.width]) {\n\t\t\tconst attrs = table.nodeAt(pos)?.attrs as CellAttrs;\n\t\t\ttr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos + tableStart), null, {\n\t\t\t\t...attrs,\n\t\t\t\trowspan: attrs.rowspan - 1\n\t\t\t});\n\t\t\tcol += attrs.colspan - 1;\n\t\t} else if (row < map.height && pos == map.map[index + map.width]) {\n\t\t\tconst cell = table.nodeAt(pos)!;\n\t\t\tconst attrs = cell?.attrs as CellAttrs;\n\t\t\tconst copy = cell.type.create(\n\t\t\t\t{ ...attrs, rowspan: cell.attrs.rowspan - 1 },\n\t\t\t\tcell.content\n\t\t\t);\n\t\t\tconst newPos = map.positionAt(row + 1, col, table);\n\t\t\ttr.insert(tr.mapping.slice(mapFrom).map(tableStart + newPos), copy);\n\t\t\tcol += attrs.colspan - 1;\n\t\t}\n\t}\n\treturn tr;\n};\n\nexport const deleteRow: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state),\n\t\t\ttr = state.tr;\n\t\tif (rect.top == 0 && rect.bottom == rect.map.height) return false;\n\t\tfor (let i = rect.bottom - 1; ; i--) {\n\t\t\tremoveRow(tr, rect, i);\n\t\t\tif (i == rect.top) break;\n\t\t\tconst table = rect.tableStart\n\t\t\t\t? tr.doc.nodeAt(rect.tableStart - 1)\n\t\t\t\t: tr.doc;\n\t\t\tif (!table) throw new RangeError('No table found');\n\t\t\trect.table = table;\n\t\t\trect.map = TableMap.get(table);\n\t\t}\n\t\tdispatch(tr);\n\t}\n\treturn true;\n};\n\nconst cellsOverlapRectangle = (\n\t{ width, height, map }: TableMap,\n\trect: Rect\n): boolean => {\n\tlet indexTop = rect.top * width + rect.left,\n\t\tindexLeft = indexTop;\n\n\tlet indexBottom = (rect.bottom - 1) * width + rect.left,\n\t\tindexRight = indexTop + (rect.right - rect.left - 1);\n\n\tfor (let i = rect.top; i < rect.bottom; i++) {\n\t\tif (\n\t\t\t(rect.left > 0 && map[indexLeft] == map[indexLeft - 1]) ||\n\t\t\t(rect.right < width && map[indexRight] == map[indexRight + 1])\n\t\t)\n\t\t\treturn true;\n\t\tindexLeft += width;\n\t\tindexRight += width;\n\t}\n\tfor (let i = rect.left; i < rect.right; i++) {\n\t\tif (\n\t\t\t(rect.top > 0 && map[indexTop] == map[indexTop - width]) ||\n\t\t\t(rect.bottom < height && map[indexBottom] == map[indexBottom + width])\n\t\t)\n\t\t\treturn true;\n\n\t\tindexTop++;\n\t\tindexBottom++;\n\t}\n\treturn false;\n};\n\nconst isEmpty = (cell: Node): Boolean => {\n\tconst c = cell.content;\n\treturn (\n\t\tc.childCount == 1 && c.child(0).isTextblock && c.child(0).childCount == 0\n\t);\n};\n\nexport const mergeCells: Command = (state, dispatch) => {\n\tconst sel = state.selection;\n\tif (\n\t\t!(sel instanceof CellSelection) ||\n\t\tsel.$anchorCell.pos == sel.$headCell.pos\n\t)\n\t\treturn false;\n\n\tconst rect = selectedRect(state),\n\t\t{ map } = rect;\n\tif (cellsOverlapRectangle(map, rect)) return false;\n\n\tif (dispatch) {\n\t\tconst tr = state.tr;\n\t\tconst seen: Record<number, boolean> = {};\n\t\tlet content = Fragment.empty;\n\t\tlet mergedPos: number | undefined;\n\t\tlet mergedCell: Node | undefined;\n\t\tfor (let row = rect.top; row < rect.bottom; row++) {\n\t\t\tfor (let col = rect.left; col < rect.right; col++) {\n\t\t\t\tconst cellPos = map.map[row * map.width + col];\n\t\t\t\tconst cell = rect.table.nodeAt(cellPos);\n\t\t\t\tif (seen[cellPos] || !cell) continue;\n\t\t\t\tseen[cellPos] = true;\n\t\t\t\tif (mergedPos == null) {\n\t\t\t\t\tmergedPos = cellPos;\n\t\t\t\t\tmergedCell = cell;\n\t\t\t\t} else {\n\t\t\t\t\tif (!isEmpty(cell)) content = content.append(cell.content);\n\t\t\t\t\tconst mapped = tr.mapping.map(cellPos + rect.tableStart);\n\t\t\t\t\ttr.delete(mapped, mapped + cell.nodeSize);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (mergedPos == null || mergedCell == null) return true;\n\n\t\ttr.setNodeMarkup(mergedPos + rect.tableStart, null, {\n\t\t\t...addColspan(\n\t\t\t\tmergedCell.attrs as CellAttrs,\n\t\t\t\tmergedCell.attrs.colspan,\n\t\t\t\trect.right - rect.left - mergedCell.attrs.colspan\n\t\t\t),\n\t\t\trowspan: rect.bottom - rect.top\n\t\t});\n\t\tif (content.size) {\n\t\t\tconst end = mergedPos + 1 + mergedCell.content.size;\n\t\t\tconst start = isEmpty(mergedCell) ? mergedPos + 1 : end;\n\t\t\ttr.replaceWith(start + rect.tableStart, end + rect.tableStart, content);\n\t\t}\n\t\ttr.setSelection(\n\t\t\tnew CellSelection(tr.doc.resolve(mergedPos + rect.tableStart))\n\t\t);\n\t\tdispatch(tr);\n\t}\n\n\treturn true;\n};\n\nexport const setCellAttrs =\n\t(name: string, value: unknown): Command =>\n\t(state, dispatch) => {\n\t\tif (!isInTable(state)) return false;\n\t\tconst $cell = selectionCell(state);\n\t\tif ($cell.nodeAfter!.attrs[name] === value) return false;\n\t\tif (dispatch) {\n\t\t\tconst tr = state.tr;\n\t\t\tif (state.selection instanceof CellSelection)\n\t\t\t\tstate.selection.forEachCell((node, pos) => {\n\t\t\t\t\tif (node.attrs[name] !== value)\n\t\t\t\t\t\ttr.setNodeMarkup(pos, null, {\n\t\t\t\t\t\t\t...node.attrs,\n\t\t\t\t\t\t\t[name]: value\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\telse\n\t\t\t\ttr.setNodeMarkup($cell.pos, null, {\n\t\t\t\t\t...$cell.nodeAfter!.attrs,\n\t\t\t\t\t[name]: value\n\t\t\t\t});\n\t\t\tdispatch(tr);\n\t\t}\n\n\t\treturn true;\n\t};\n\nfunction isHeaderEnabledByType(\n\ttype: 'row' | 'column',\n\trect: TableRect,\n\ttypes: Record<string, NodeType>\n): boolean {\n\t// Get cell positions for first row or first column\n\tconst cellPositions = rect.map.cellsInRect({\n\t\tleft: 0,\n\t\ttop: 0,\n\t\tright: type == 'row' ? rect.map.width : 1,\n\t\tbottom: type == 'column' ? rect.map.height : 1\n\t});\n\n\tfor (let i = 0; i < cellPositions.length; i++) {\n\t\tconst cell = rect.table.nodeAt(cellPositions[i]);\n\t\tif (cell && cell.type !== types.header_cell) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport type ToggleHeaderType = 'column' | 'row' | 'cell';\n\nexport function toggleHeader(\n\ttype: ToggleHeaderType,\n\toptions?: { useDeprecatedLogic: boolean } | undefined\n): Command {\n\toptions = options || { useDeprecatedLogic: false };\n\n\t// if (options.useDeprecatedLogic) return deprecated_toggleHeader(type);\n\n\treturn function (state, dispatch) {\n\t\tif (!isInTable(state)) return false;\n\t\tif (dispatch) {\n\t\t\tconst types = tableNodeTypes(state.schema);\n\t\t\tconst rect = selectedRect(state),\n\t\t\t\ttr = state.tr;\n\n\t\t\tconst isHeaderRowEnabled = isHeaderEnabledByType('row', rect, types);\n\t\t\tconst isHeaderColumnEnabled = isHeaderEnabledByType(\n\t\t\t\t'column',\n\t\t\t\trect,\n\t\t\t\ttypes\n\t\t\t);\n\n\t\t\tconst isHeaderEnabled =\n\t\t\t\ttype === 'column'\n\t\t\t\t\t? isHeaderRowEnabled\n\t\t\t\t\t: type === 'row'\n\t\t\t\t\t\t? isHeaderColumnEnabled\n\t\t\t\t\t\t: false;\n\n\t\t\tconst selectionStartsAt = isHeaderEnabled ? 1 : 0;\n\n\t\t\tconst cellsRect =\n\t\t\t\ttype == 'column'\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: selectionStartsAt,\n\t\t\t\t\t\t\tright: 1,\n\t\t\t\t\t\t\tbottom: rect.map.height\n\t\t\t\t\t\t}\n\t\t\t\t\t: type == 'row'\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tleft: selectionStartsAt,\n\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\tright: rect.map.width,\n\t\t\t\t\t\t\t\tbottom: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: rect;\n\n\t\t\tconst newType =\n\t\t\t\ttype == 'column'\n\t\t\t\t\t? isHeaderColumnEnabled\n\t\t\t\t\t\t? types.cell\n\t\t\t\t\t\t: types.headerCell\n\t\t\t\t\t: type == 'row'\n\t\t\t\t\t\t? isHeaderRowEnabled\n\t\t\t\t\t\t\t? types.cell\n\t\t\t\t\t\t\t: types.headerCell\n\t\t\t\t\t\t: types.cell;\n\n\t\t\trect.map.cellsInRect(cellsRect).forEach((relativeCellPos) => {\n\t\t\t\tconst cellPos = relativeCellPos + rect.tableStart;\n\t\t\t\tconst cell = tr.doc.nodeAt(cellPos);\n\n\t\t\t\tif (cell) {\n\t\t\t\t\ttr.setNodeMarkup(cellPos, newType, cell.attrs);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdispatch(tr);\n\t\t}\n\t\treturn true;\n\t};\n}\n\nfunction findNextCell($cell: ResolvedPos, dir: Direction): number | null {\n\tif (dir < 0) {\n\t\tconst before = $cell.nodeBefore;\n\t\tif (before) return $cell.pos - before.nodeSize;\n\t\tfor (\n\t\t\tlet row = $cell.index(-1) - 1, rowEnd = $cell.before();\n\t\t\trow >= 0;\n\t\t\trow--\n\t\t) {\n\t\t\tconst rowNode = $cell.node(-1).child(row);\n\t\t\tconst lastChild = rowNode.lastChild;\n\t\t\tif (lastChild) return rowEnd - 1 - lastChild.nodeSize;\n\t\t\treturn (rowEnd -= rowNode.nodeSize);\n\t\t}\n\t} else {\n\t\tif ($cell.index() < $cell.parent.childCount - 1)\n\t\t\treturn $cell.pos + $cell.nodeAfter!.nodeSize;\n\t\tconst table = $cell.node(-1);\n\t\tfor (\n\t\t\tlet row = $cell.indexAfter(-1), rowStart = $cell.after();\n\t\t\trow < table.childCount;\n\t\t\trow++\n\t\t) {\n\t\t\tconst rowNode = table.child(row);\n\t\t\tif (rowNode.childCount) return rowStart + 1;\n\t\t\trowStart += rowNode.nodeSize;\n\t\t}\n\t}\n\n\treturn null;\n}\n\nexport const goToNextCell =\n\t(direction: Direction): Command =>\n\t(state, dispatch) => {\n\t\tif (!isInTable(state)) return false;\n\t\tconst cell = findNextCell(selectionCell(state), direction);\n\t\tif (cell == null) return false;\n\t\tif (dispatch) {\n\t\t\tconst $cell = state.doc.resolve(cell);\n\t\t\tdispatch(\n\t\t\t\tstate.tr\n\t\t\t\t\t.setSelection(TextSelection.between($cell, moveCellForward($cell)))\n\t\t\t\t\t.scrollIntoView()\n\t\t\t);\n\t\t}\n\t\treturn true;\n\t};\n\nexport const deleteTable: Command = (state, dispatch) => {\n\tconst $pos = state.selection.$anchor;\n\tfor (let d = $pos.depth; d > 0; d--) {\n\t\tconst node = $pos.node(d);\n\t\tif (node.type.spec.tableRole == 'table') {\n\t\t\tif (dispatch) {\n\t\t\t\tdispatch(\n\t\t\t\t\tstate.tr.delete($pos.before(d), $pos.after(d)).scrollIntoView()\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n","import { Node, ResolvedPos } from 'prosemirror-model';\nimport {\n\tDecoration,\n\tDecorationSet,\n\tDecorationSource,\n\tEditorView,\n\tNodeView,\n\tNodeViewConstructor\n} from 'prosemirror-view';\nimport createElement, { updateElement } from '../../createElement';\nimport { CellAttrs, cellAround, tableEditingKey } from './utils';\nimport { EditorState } from 'prosemirror-state';\nimport { TableMap } from './tableMap';\nimport {\n\taddColumnAtEnd,\n\taddRowAtEnd,\n\tremoveColumn,\n\tremoveRow\n} from './commands';\nimport { getView } from '../../utils';\nimport { BaseNodeView } from '../../utils/view';\n\nconst tableClassName = 'tableWrapper dc-block scrollbar';\nexport class TableView extends BaseNodeView {\n\tdom: HTMLDivElement;\n\ttable: HTMLTableElement;\n\tcolgroup: HTMLTableColElement;\n\tcontentDOM: HTMLTableSectionElement;\n\tprivate $cell?: ResolvedPos;\n\n\tconstructor(\n\t\tpublic node: Node,\n\t\tpublic view: EditorView,\n\t\tprivate getPos: () => number | undefined,\n\t\tpublic cellMinWidth: number\n\t) {\n\t\tconsole.log('table create');\n\t\tsuper(node, view);\n\t\tthis.dom = createElement('div', {\n\t\t\tclass: tableClassName\n\t\t});\n\t\tthis.dom.appendChild(\n\t\t\tcreateElement('div', { tabindex: '0', class: 'hiddenfocus' })\n\t\t);\n\t\tthis.table = this.dom.appendChild(\n\t\t\tcreateElement(\n\t\t\t\t'table'\n\t\t\t\t// {},\n\t\t\t\t// createElement('div', { class: 'rowBar' }),\n\t\t\t\t// createElement('div', { class: 'colBar' })\n\t\t\t)\n\t\t);\n\t\tthis.colgroup = this.table.appendChild(createElement('colgroup'));\n\t\tupdateColumnsOnResize(\n\t\t\tthis.node,\n\t\t\tthis.colgroup,\n\t\t\tthis.table,\n\t\t\tthis.cellMinWidth\n\t\t);\n\t\tthis.contentDOM = this.table.appendChild(createElement('tbody'));\n\t\tthis.dom.addEventListener('mouseover', this.handleMouseOver);\n\t\tthis.dom.addEventListener('mouseleave', this.handleMouseLeave);\n\t}\n\n\thandleMouseOver = (event: MouseEvent) => {\n\t\tconst { clientX, clientY } = event;\n\t\tconst mousePos = this.view.posAtCoords({ left: clientX, top: clientY });\n\t\tif (!mousePos) return;\n\t\tconst $cell = cellAround(this.view.state.doc.resolve(mousePos.pos));\n\t\tif (!$cell) return;\n\t\t// this.$cell = $cell;\n\t\tconst tableStart = $cell.start(-1);\n\t\tconst map = TableMap.get(this.node);\n\t\tconst { left, top, right, bottom } = map.findCell($cell.pos - tableStart);\n\t\t// console.log(left, top, right, bottom, 'o');\n\t\tconst decs: Decoration[] = [];\n\t\tfor (let i = top; i < bottom; i++) {\n\t\t\tconst pos = map.map[i * map.width] + tableStart;\n\t\t\tconst $pos = this.view.state.doc.resolve(pos);\n\t\t\tdecs.push(\n\t\t\t\tDecoration.node(pos, pos + $pos.nodeAfter!.nodeSize, {\n\t\t\t\t\tclass: 'row-active'\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tfor (let i = left; i < right; i++) {\n\t\t\tconst pos = map.map[i] + tableStart;\n\t\t\tconst $pos = this.view.state.doc.resolve(pos);\n\t\t\tdecs.push(\n\t\t\t\tDecoration.node(pos, pos + $pos.nodeAfter!.nodeSize, {\n\t\t\t\t\tclass: 'col-active'\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tlet tr = this.view.state.tr;\n\t\tconst classList = [];\n\t\tif (bottom == map.height) classList.push('row-active');\n\t\tif (right == map.width) classList.push('col-active');\n\t\tconst pos = this.getPos()!;\n\t\t// decs.push(\n\t\t//   Decoration.node(pos, pos + this.node.nodeSize, {\n\t\t//     class: classList.join(' '),\n\t\t//   })\n\t\t// );\n\t\t// console.log(pos, 'pos');\n\t\ttr.setNodeMarkup(pos!, null, {\n\t\t\t...this.node.attrs,\n\t\t\tclass: tableClassName + ' ' + classList.join(' ')\n\t\t});\n\n\t\tif (decs.length) {\n\t\t\ttr.setMeta(tableEditingKey, { hoverDecos: decs });\n\t\t}\n\t\tthis.view.dispatch(tr);\n\t};\n\n\thandleMouseLeave = () => {\n\t\tlet tr = this.view.state.tr;\n\t\ttr.setMeta(tableEditingKey, { hoverDecos: [] });\n\t\ttr.setNodeMarkup(this.getPos()!, null, {\n\t\t\tclass: tableClassName\n\t\t});\n\t\tthis.view.dispatch(tr);\n\t};\n\n\tdestroy() {\n\t\tconsole.log('table destroy');\n\n\t\tthis.dom.removeEventListener('mouseover', this.handleMouseOver);\n\t\tthis.dom.removeEventListener('mouseleave', this.handleMouseLeave);\n\t}\n\n\tupdate(node: Node): boolean {\n\t\tif (!super.update(node)) return false;\n\t\tthis.node = node;\n\n\t\tthis.dom.className = node.attrs.class || tableClassName;\n\t\tupdateColumnsOnResize(\n\t\t\tthis.node,\n\t\t\tthis.colgroup,\n\t\t\tthis.table,\n\t\t\tthis.cellMinWidth\n\t\t);\n\t\treturn true;\n\t}\n\n\tignoreMutation(record: MutationRecord): boolean {\n\t\treturn (\n\t\t\trecord.type == 'attributes' &&\n\t\t\t(record.target == this.table || this.colgroup.contains(record.target))\n\t\t);\n\t}\n\tselectNode() {\n\t\tconsole.log('select', this);\n\t}\n}\n\nexport function updateColumnsOnResize(\n\tnode: Node,\n\tcolgroup: HTMLTableColElement,\n\ttable: HTMLTableElement,\n\tcellMinWidth: number,\n\toverrideCol?: number,\n\toverrideValue?: number\n) {\n\tlet totalWidth = 0,\n\t\tfixedWidth = true,\n\t\tnextDOM = colgroup.firstChild as HTMLElement;\n\tconst row = node.firstChild;\n\tif (!row) return;\n\n\tfor (let i = 0, col = 0; i < row.childCount; i++) {\n\t\tconst { colspan, colwidth } = row.child(i).attrs as CellAttrs;\n\n\t\tfor (let j = 0; j < colspan; j++, col++) {\n\t\t\tconst hasWidth =\n\t\t\t\toverrideCol == col ? overrideValue : colwidth && colwidth[j];\n\t\t\tconst cssWidth = hasWidth ? hasWidth + 'px' : '';\n\t\t\ttotalWidth += hasWidth || cellMinWidth;\n\t\t\tif (!hasWidth) fixedWidth = false;\n\t\t\tif (!nextDOM) {\n\t\t\t\tcolgroup.appendChild(createElement('col')).style.width = cssWidth;\n\t\t\t} else {\n\t\t\t\tif (nextDOM.style.width != cssWidth) nextDOM.style.width = cssWidth;\n\t\t\t\tnextDOM = nextDOM.nextSibling as HTMLElement;\n\t\t\t}\n\t\t}\n\t}\n\n\twhile (nextDOM) {\n\t\tconst after = nextDOM.nextSibling;\n\t\tnextDOM.parentNode?.removeChild(nextDOM);\n\t\tnextDOM = after as HTMLElement;\n\n\t\tif (fixedWidth) {\n\t\t\ttable.style.width = totalWidth + 'px';\n\t\t\ttable.style.minWidth = '';\n\t\t} else {\n\t\t\ttable.style.width = '';\n\t\t\ttable.style.minWidth = totalWidth + 'px';\n\t\t}\n\t}\n}\n\nexport const TableViewConstructor: NodeViewConstructor = (node, view, getPos) =>\n\tnew TableView(node, view, getPos, 80);\n\nexport const addToolkit = (table: Node, start: number): Decoration[] => {\n\tconst map = TableMap.get(table);\n\tlet seen: Record<number, boolean> = {};\n\tconst { width, height } = map;\n\tconst result: Decoration[] = [];\n\n\tfor (let i = 0; i < width * height; i += width) {\n\t\tif (seen[i]) continue;\n\t\tseen[i] = true;\n\t\tresult.push(\n\t\t\tDecoration.widget(start + map.map[i] + 2, (view) =>\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tclass: 'rowBtn',\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tconst { dispatch, state } = view;\n\t\t\t\t\t\tconst row = i / width;\n\t\t\t\t\t\tconst table = state.doc.nodeAt(start)!;\n\t\t\t\t\t\tconst map = TableMap.get(table);\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\tremoveRow(state.tr, { map, table, tableStart: start + 1 }, row)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t}\n\n\tseen = {};\n\tfor (let i = 0; i < width; i++) {\n\t\tif (seen[i]) continue;\n\t\tseen[i] = true;\n\t\tresult.push(\n\t\t\tDecoration.widget(start + map.map[i] + 2, (view) =>\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tclass: 'colBtn',\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tconst { state, dispatch } = view;\n\t\t\t\t\t\tconst table = state.doc.nodeAt(start)!;\n\t\t\t\t\t\tconst map = TableMap.get(table);\n\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\tremoveColumn(state.tr, { map, table, tableStart: start + 1 }, i)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t}\n\n\tresult.push(\n\t\tDecoration.widget(start + 1, (view) =>\n\t\t\tcreateElement(\n\t\t\t\t'div',\n\t\t\t\t{ class: 'tools' },\n\t\t\t\tcreateElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ class: 'rowBar', onclick: () => addRowAtEnd(start, view) },\n\t\t\t\t\t'+'\n\t\t\t\t),\n\t\t\t\tcreateElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{\n\t\t\t\t\t\tclass: 'colBar',\n\t\t\t\t\t\tonclick: () => addColumnAtEnd(start, view)\n\t\t\t\t\t},\n\t\t\t\t\t'+'\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t);\n\treturn result;\n};\n","import { Attrs, Node as ProsemirrorNode } from 'prosemirror-model';\nimport { EditorState, Plugin, PluginKey, Transaction } from 'prosemirror-state';\nimport {\n\tDecoration,\n\tDecorationSet,\n\tEditorView,\n\tNodeView\n} from 'prosemirror-view';\nimport { tableNodeTypes } from './schema';\nimport { TableMap } from './tableMap';\nimport {\n\tTableView,\n\tupdateColumnsOnResize,\n\tTableViewConstructor\n} from './tableView';\nimport { cellAround, CellAttrs, pointsAtCell } from './utils';\n\n/**\n * @public\n */\nexport const columnResizingPluginKey = new PluginKey<ResizeState>(\n\t'tableColumnResizing'\n);\n\n/**\n * @public\n */\nexport type ColumnResizingOptions = {\n\thandleWidth?: number;\n\tcellMinWidth?: number;\n\tlastColumnResizable?: boolean;\n\tView?: typeof TableView;\n};\n\n/**\n * @public\n */\nexport type Dragging = { startX: number; startWidth: number };\n\n/**\n * @public\n */\nexport function columnResizing({\n\thandleWidth = 5,\n\tcellMinWidth = 25,\n\tView = TableView,\n\tlastColumnResizable = true\n}: ColumnResizingOptions = {}): Plugin {\n\tconst plugin = new Plugin<ResizeState>({\n\t\tkey: columnResizingPluginKey,\n\t\tstate: {\n\t\t\tinit(_, state) {\n\t\t\t\tplugin.spec!.props!.nodeViews![\n\t\t\t\t\ttableNodeTypes(state.schema).table.name\n\t\t\t\t] = (node, view, getPos) => new View(node, view, getPos, cellMinWidth);\n\t\t\t\treturn new ResizeState(-1, false);\n\t\t\t},\n\t\t\tapply(tr, prev) {\n\t\t\t\treturn prev.apply(tr);\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tattributes: (state): Record<string, string> => {\n\t\t\t\tconst pluginState = columnResizingPluginKey.getState(state);\n\t\t\t\treturn pluginState && pluginState.activeHandle > -1\n\t\t\t\t\t? { class: 'resize-cursor' }\n\t\t\t\t\t: {};\n\t\t\t},\n\n\t\t\thandleDOMEvents: {\n\t\t\t\tmousemove: (view, event) => {\n\t\t\t\t\thandleMouseMove(\n\t\t\t\t\t\tview,\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\thandleWidth,\n\t\t\t\t\t\tcellMinWidth,\n\t\t\t\t\t\tlastColumnResizable\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tmouseleave: (view) => {\n\t\t\t\t\thandleMouseLeave(view);\n\t\t\t\t},\n\t\t\t\tmousedown: (view, event) => {\n\t\t\t\t\thandleMouseDown(view, event, cellMinWidth);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdecorations: (state) => {\n\t\t\t\tconst pluginState = columnResizingPluginKey.getState(state);\n\t\t\t\tif (pluginState && pluginState.activeHandle > -1) {\n\t\t\t\t\treturn handleDecorations(state, pluginState.activeHandle);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tnodeViews: {}\n\t\t}\n\t});\n\treturn plugin;\n}\n\n/**\n * @public\n */\nexport class ResizeState {\n\tconstructor(\n\t\tpublic activeHandle: number,\n\t\tpublic dragging: Dragging | false\n\t) {}\n\n\tapply(tr: Transaction): ResizeState {\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\tconst state = this;\n\t\tconst action = tr.getMeta(columnResizingPluginKey);\n\t\tif (action && action.setHandle != null)\n\t\t\treturn new ResizeState(action.setHandle, false);\n\t\tif (action && action.setDragging !== undefined)\n\t\t\treturn new ResizeState(state.activeHandle, action.setDragging);\n\t\tif (state.activeHandle > -1 && tr.docChanged) {\n\t\t\tlet handle = tr.mapping.map(state.activeHandle, -1);\n\t\t\tif (!pointsAtCell(tr.doc.resolve(handle))) {\n\t\t\t\thandle = -1;\n\t\t\t}\n\t\t\treturn new ResizeState(handle, state.dragging);\n\t\t}\n\t\treturn state;\n\t}\n}\n\nfunction handleMouseMove(\n\tview: EditorView,\n\tevent: MouseEvent,\n\thandleWidth: number,\n\tcellMinWidth: number,\n\tlastColumnResizable: boolean\n): void {\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (!pluginState) return;\n\n\tif (!pluginState.dragging) {\n\t\tconst target = domCellAround(event.target as HTMLElement);\n\t\tlet cell = -1;\n\t\tif (target) {\n\t\t\tconst { left, right } = target.getBoundingClientRect();\n\t\t\tif (event.clientX - left <= handleWidth)\n\t\t\t\tcell = edgeCell(view, event, 'left', handleWidth);\n\t\t\telse if (right - event.clientX <= handleWidth)\n\t\t\t\tcell = edgeCell(view, event, 'right', handleWidth);\n\t\t}\n\n\t\tif (cell != pluginState.activeHandle) {\n\t\t\tif (!lastColumnResizable && cell !== -1) {\n\t\t\t\tconst $cell = view.state.doc.resolve(cell);\n\t\t\t\tconst table = $cell.node(-1);\n\t\t\t\tconst map = TableMap.get(table);\n\t\t\t\tconst tableStart = $cell.start(-1);\n\t\t\t\tconst col =\n\t\t\t\t\tmap.colCount($cell.pos - tableStart) +\n\t\t\t\t\t$cell.nodeAfter!.attrs.colspan -\n\t\t\t\t\t1;\n\n\t\t\t\tif (col == map.width - 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tupdateHandle(view, cell);\n\t\t}\n\t}\n}\n\nfunction handleMouseLeave(view: EditorView): void {\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (pluginState && pluginState.activeHandle > -1 && !pluginState.dragging)\n\t\tupdateHandle(view, -1);\n}\n\nfunction handleMouseDown(\n\tview: EditorView,\n\tevent: MouseEvent,\n\tcellMinWidth: number\n): boolean {\n\tconst win = view.dom.ownerDocument.defaultView ?? window;\n\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (!pluginState || pluginState.activeHandle == -1 || pluginState.dragging)\n\t\treturn false;\n\n\tconst cell = view.state.doc.nodeAt(pluginState.activeHandle)!;\n\tconst width = currentColWidth(view, pluginState.activeHandle, cell.attrs);\n\tview.dispatch(\n\t\tview.state.tr.setMeta(columnResizingPluginKey, {\n\t\t\tsetDragging: { startX: event.clientX, startWidth: width }\n\t\t})\n\t);\n\n\tfunction finish(event: MouseEvent) {\n\t\twin.removeEventListener('mouseup', finish);\n\t\twin.removeEventListener('mousemove', move);\n\t\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\t\tif (pluginState?.dragging) {\n\t\t\tupdateColumnWidth(\n\t\t\t\tview,\n\t\t\t\tpluginState.activeHandle,\n\t\t\t\tdraggedWidth(pluginState.dragging, event, cellMinWidth)\n\t\t\t);\n\t\t\tview.dispatch(\n\t\t\t\tview.state.tr.setMeta(columnResizingPluginKey, { setDragging: null })\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction move(event: MouseEvent): void {\n\t\tif (!event.which) return finish(event);\n\t\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\t\tif (!pluginState) return;\n\t\tif (pluginState.dragging) {\n\t\t\tconst dragged = draggedWidth(pluginState.dragging, event, cellMinWidth);\n\t\t\tdisplayColumnWidth(view, pluginState.activeHandle, dragged, cellMinWidth);\n\t\t}\n\t}\n\n\twin.addEventListener('mouseup', finish);\n\twin.addEventListener('mousemove', move);\n\tevent.preventDefault();\n\treturn true;\n}\n\nfunction currentColWidth(\n\tview: EditorView,\n\tcellPos: number,\n\t{ colspan, colwidth }: Attrs\n): number {\n\tconst width = colwidth && colwidth[colwidth.length - 1];\n\tif (width) return width;\n\tconst dom = view.domAtPos(cellPos);\n\tconst node = dom.node.childNodes[dom.offset] as HTMLElement;\n\tlet domWidth = node.offsetWidth,\n\t\tparts = colspan;\n\tif (colwidth)\n\t\tfor (let i = 0; i < colspan; i++)\n\t\t\tif (colwidth[i]) {\n\t\t\t\tdomWidth -= colwidth[i];\n\t\t\t\tparts--;\n\t\t\t}\n\treturn domWidth / parts;\n}\n\nfunction domCellAround(target: HTMLElement | null): HTMLElement | null {\n\twhile (target && target.nodeName != 'TD' && target.nodeName != 'TH')\n\t\ttarget =\n\t\t\ttarget.classList && target.classList.contains('ProseMirror')\n\t\t\t\t? null\n\t\t\t\t: (target.parentNode as HTMLElement);\n\treturn target;\n}\n\nfunction edgeCell(\n\tview: EditorView,\n\tevent: MouseEvent,\n\tside: 'left' | 'right',\n\thandleWidth: number\n): number {\n\t// posAtCoords returns inconsistent positions when cursor is moving\n\t// across a collapsed table border. Use an offset to adjust the\n\t// target viewport coordinates away from the table border.\n\tconst offset = side == 'right' ? -handleWidth : handleWidth;\n\tconst found = view.posAtCoords({\n\t\tleft: event.clientX + offset,\n\t\ttop: event.clientY\n\t});\n\tif (!found) return -1;\n\tconst { pos } = found;\n\tconst $cell = cellAround(view.state.doc.resolve(pos));\n\tif (!$cell) return -1;\n\tif (side == 'right') return $cell.pos;\n\tconst map = TableMap.get($cell.node(-1)),\n\t\tstart = $cell.start(-1);\n\tconst index = map.map.indexOf($cell.pos - start);\n\treturn index % map.width == 0 ? -1 : start + map.map[index - 1];\n}\n\nfunction draggedWidth(\n\tdragging: Dragging,\n\tevent: MouseEvent,\n\tcellMinWidth: number\n): number {\n\tconst offset = event.clientX - dragging.startX;\n\treturn Math.max(cellMinWidth, dragging.startWidth + offset);\n}\n\nfunction updateHandle(view: EditorView, value: number): void {\n\tview.dispatch(\n\t\tview.state.tr.setMeta(columnResizingPluginKey, { setHandle: value })\n\t);\n}\n\nfunction updateColumnWidth(\n\tview: EditorView,\n\tcell: number,\n\twidth: number\n): void {\n\tconst $cell = view.state.doc.resolve(cell);\n\tconst table = $cell.node(-1),\n\t\tmap = TableMap.get(table),\n\t\tstart = $cell.start(-1);\n\tconst col =\n\t\tmap.colCount($cell.pos - start) + $cell.nodeAfter!.attrs.colspan - 1;\n\tconst tr = view.state.tr;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst mapIndex = row * map.width + col;\n\t\t// Rowspanning cell that has already been handled\n\t\tif (row && map.map[mapIndex] == map.map[mapIndex - map.width]) continue;\n\t\tconst pos = map.map[mapIndex];\n\t\tconst attrs = table.nodeAt(pos)!.attrs as CellAttrs;\n\t\tconst index = attrs.colspan == 1 ? 0 : col - map.colCount(pos);\n\t\tif (attrs.colwidth && attrs.colwidth[index] == width) continue;\n\t\tconst colwidth = attrs.colwidth\n\t\t\t? attrs.colwidth.slice()\n\t\t\t: zeroes(attrs.colspan);\n\t\tcolwidth[index] = width;\n\t\ttr.setNodeMarkup(start + pos, null, { ...attrs, colwidth: colwidth });\n\t}\n\tif (tr.docChanged) view.dispatch(tr);\n}\n\nfunction displayColumnWidth(\n\tview: EditorView,\n\tcell: number,\n\twidth: number,\n\tcellMinWidth: number\n): void {\n\tconst $cell = view.state.doc.resolve(cell);\n\tconst table = $cell.node(-1),\n\t\tstart = $cell.start(-1);\n\tconst col =\n\t\tTableMap.get(table).colCount($cell.pos - start) +\n\t\t$cell.nodeAfter!.attrs.colspan -\n\t\t1;\n\tlet dom: Node | null = view.domAtPos($cell.start(-1)).node;\n\twhile (dom && dom.nodeName != 'TABLE') {\n\t\tdom = dom.parentNode;\n\t}\n\tif (!dom) return;\n\tupdateColumnsOnResize(\n\t\ttable,\n\t\tdom.firstChild as HTMLTableColElement,\n\t\tdom as HTMLTableElement,\n\t\tcellMinWidth,\n\t\tcol,\n\t\twidth\n\t);\n}\n\nfunction zeroes(n: number): 0[] {\n\treturn Array(n).fill(0);\n}\n\nexport function handleDecorations(\n\tstate: EditorState,\n\tcell: number\n): DecorationSet {\n\tconst decorations = [];\n\tconst $cell = state.doc.resolve(cell);\n\tconst table = $cell.node(-1);\n\tif (!table) {\n\t\treturn DecorationSet.empty;\n\t}\n\tconst map = TableMap.get(table);\n\tconst start = $cell.start(-1);\n\tconst col = map.colCount($cell.pos - start) + $cell.nodeAfter!.attrs.colspan;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst index = col + row * map.width - 1;\n\t\t// For positions that have either a different cell or the end\n\t\t// of the table to their right, and either the top of the table or\n\t\t// a different cell above them, add a decoration\n\t\tif (\n\t\t\t(col == map.width || map.map[index] != map.map[index + 1]) &&\n\t\t\t(row == 0 || map.map[index] != map.map[index - map.width])\n\t\t) {\n\t\t\tconst cellPos = map.map[index];\n\t\t\tconst pos = start + cellPos + table.nodeAt(cellPos)!.nodeSize - 1;\n\t\t\tconst dom = document.createElement('div');\n\t\t\tdom.className = 'column-resize-handle';\n\t\t\tdecorations.push(Decoration.widget(pos, dom));\n\t\t}\n\t}\n\treturn DecorationSet.create(state.doc, decorations);\n}\n","import { Fragment, Node, NodeType, Schema, Slice } from 'prosemirror-model';\nimport { Transform } from 'prosemirror-transform';\nimport { CellAttrs, removeColSpan } from './utils';\nimport { tableNodeTypes } from './schema';\nimport { ColWidths, Rect, TableMap } from './tableMap';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { CellSelection } from './cellSelection';\n\nexport type Area = { width: number; height: number; rows: Fragment[] };\nexport const pastedCells = (slice: Slice): Area | null => {\n\tif (!slice.size) return null;\n\tlet { content, openStart, openEnd } = slice;\n\n\twhile (\n\t\tcontent.childCount == 1 &&\n\t\t((openStart > 0 && openEnd > 0) ||\n\t\t\tcontent.child(0).type.spec.tableRole == 'table')\n\t) {\n\t\topenStart--;\n\t\topenEnd--;\n\t\tcontent = content.child(0).content;\n\t}\n\tconst first = content.child(0);\n\tconst role = first.type.spec.tableRole;\n\tconst schema = first.type.schema,\n\t\trows = [];\n\n\tif (role == 'row') {\n\t\tfor (let i = 0; i < content.childCount; i++) {\n\t\t\tlet cells = content.child(i).content;\n\t\t\tconst left = i ? 0 : Math.max(0, openStart - 1);\n\t\t\tconst right = i < content.childCount - 1 ? 0 : Math.max(0, openEnd - 1);\n\t\t\tif (left || right)\n\t\t\t\tcells = fitSlice(\n\t\t\t\t\ttableNodeTypes(schema).row,\n\t\t\t\t\tnew Slice(cells, left, right)\n\t\t\t\t).content;\n\t\t\trows.push(cells);\n\t\t}\n\t} else if (role == 'cell' || role == 'headerCell') {\n\t\trows.push(\n\t\t\topenStart || openEnd\n\t\t\t\t? fitSlice(\n\t\t\t\t\t\ttableNodeTypes(schema).row,\n\t\t\t\t\t\tnew Slice(content, openStart, openEnd)\n\t\t\t\t\t).content\n\t\t\t\t: content\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n\treturn ensureRectangular(schema, rows);\n};\n\nfunction ensureRectangular(schema: Schema, rows: Fragment[]): Area {\n\tconst widths: ColWidths = [];\n\tfor (let i = 0; i < rows.length; i++) {\n\t\tconst row = rows[i];\n\t\tfor (let j = row.childCount - 1; j >= 0; j--) {\n\t\t\tconst { rowspan, colspan } = row.child(j).attrs;\n\t\t\tfor (let r = i; r < i + rowspan; r++)\n\t\t\t\twidths[r] = (widths[r] || 0) + colspan;\n\t\t}\n\t}\n\tlet width = 0;\n\tfor (let r = 0; r < widths.length; r++) width = Math.max(width, widths[r]);\n\tfor (let r = 0; r < widths.length; r++) {\n\t\tif (r > rows.length) rows.push(Fragment.empty);\n\t\tif (widths[r] < width) {\n\t\t\tconst empty = tableNodeTypes(schema).cell.createAndFill()!;\n\t\t\tconst cells = [];\n\t\t\tfor (let i = widths[r]; i < width; i++) {\n\t\t\t\tcells.push(empty);\n\t\t\t}\n\t\t\trows[r] = rows[r].append(Fragment.from(cells));\n\t\t}\n\t}\n\treturn { height: rows.length, width, rows };\n}\n\nexport const fitSlice = (nodeType: NodeType, slice: Slice): Node => {\n\tconst node = nodeType.createAndFill()!;\n\tconst tr = new Transform(node).replace(0, node.content.size, slice);\n\treturn tr.doc;\n};\n\nexport const clipCells = (\n\t{ width, height, rows }: Area,\n\tnewWidth: number,\n\tnewHeight: number\n): Area => {\n\tif (width != newWidth) {\n\t\tconst added: number[] = [];\n\t\tconst newRows: Fragment[] = [];\n\t\tfor (let row = 0; row < rows.length; row++) {\n\t\t\tconst frag = rows[row],\n\t\t\t\tcells = [];\n\t\t\tfor (let col = added[row] || 0, i = 0; col < newWidth; i++) {\n\t\t\t\tlet cell = frag.child(i % frag.childCount);\n\t\t\t\tif (col + cell.attrs.colspan > newWidth)\n\t\t\t\t\tcell = cell.type.createChecked(\n\t\t\t\t\t\tremoveColSpan(\n\t\t\t\t\t\t\tcell.attrs as CellAttrs,\n\t\t\t\t\t\t\tcell.attrs.colspan,\n\t\t\t\t\t\t\tcol + cell.attrs.colspan - newWidth\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcell.content\n\t\t\t\t\t);\n\t\t\t\tcells.push(cell);\n\t\t\t\tcol += cell.attrs.colspan;\n\t\t\t\tfor (let j = 1; j < cell.attrs.rowspan; j++)\n\t\t\t\t\tadded[row + j] = (added[row + j] || 0) + cell.attrs.colspan;\n\t\t\t}\n\t\t\tnewRows.push(Fragment.from(cells));\n\t\t}\n\t\trows = newRows;\n\t\twidth = newWidth;\n\t}\n\tif (height != newHeight) {\n\t\tconst newRows = [];\n\t\tfor (let row = 0, i = 0; row < newHeight; row++, i++) {\n\t\t\tconst cells = [],\n\t\t\t\tsource = rows[i % height];\n\t\t\tfor (let j = 0; j < source.childCount; j++) {\n\t\t\t\tlet cell = source.child(j);\n\t\t\t\tif (row + cell.attrs.rowspan > newHeight)\n\t\t\t\t\tcell = cell.type.create(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...cell.attrs,\n\t\t\t\t\t\t\trowspan: Math.max(1, newHeight - cell.attrs.rowspan)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcell.content\n\t\t\t\t\t);\n\t\t\t\tcells.push(cell);\n\t\t\t}\n\t\t\tnewRows.push(Fragment.from(cells));\n\t\t}\n\t\trows = newRows;\n\t\theight = newHeight;\n\t}\n\n\treturn { width, height, rows };\n};\n\nfunction growTable(\n\ttr: Transaction,\n\tmap: TableMap,\n\ttable: Node,\n\tstart: number,\n\twidth: number,\n\theight: number,\n\tmapFrom: number\n): boolean {\n\tconst schema = tr.doc.type.schema;\n\tconst types = tableNodeTypes(schema);\n\tlet empty;\n\tlet emptyHead;\n\tif (width > map.width) {\n\t\tfor (let row = 0, rowEnd = 0; row < map.height; row++) {\n\t\t\tconst rowNode = table.child(row);\n\t\t\trowEnd += rowNode.nodeSize;\n\t\t\tconst cells: Node[] = [];\n\t\t\tlet add: Node;\n\t\t\tif (rowNode.lastChild == null || rowNode.lastChild.type == types.cell)\n\t\t\t\tadd = empty || (empty = types.cell.createAndFill()!);\n\t\t\telse add = emptyHead || (emptyHead = types.headerCell.createAndFill()!);\n\t\t\tfor (let i = map.width; i < width; i++) cells.push(add);\n\t\t\ttr.insert(tr.mapping.slice(mapFrom).map(rowEnd - 1 + start), cells);\n\t\t}\n\t}\n\tif (height > map.height) {\n\t\tconst cells = [];\n\t\tfor (\n\t\t\tlet i = 0, start = (map.height - 1) * map.width;\n\t\t\ti < Math.max(map.width, width);\n\t\t\ti++\n\t\t) {\n\t\t\tconst header =\n\t\t\t\ti >= map.width\n\t\t\t\t\t? false\n\t\t\t\t\t: table.nodeAt(map.map[start + i])!.type == types.headerCell;\n\t\t\tcells.push(\n\t\t\t\theader\n\t\t\t\t\t? emptyHead || (emptyHead = types.headerCell.createAndFill()!)\n\t\t\t\t\t: empty || (empty = types.cell.createAndFill()!)\n\t\t\t);\n\t\t}\n\n\t\tconst emptyRow = types.row.create(null, Fragment.from(cells)),\n\t\t\trows = [];\n\t\tfor (let i = map.height; i < height; i++) rows.push(emptyRow);\n\t\ttr.insert(tr.mapping.slice(mapFrom).map(start + table.nodeSize - 2), rows);\n\t}\n\treturn !!(empty || emptyHead);\n}\n\nfunction isolateHorizontal(\n\ttr: Transaction,\n\tmap: TableMap,\n\ttable: Node,\n\tstart: number,\n\tleft: number,\n\tright: number,\n\ttop: number,\n\tmapFrom: number\n): boolean {\n\tif (top == 0 || top == map.height) return false;\n\tlet found = false;\n\tfor (let col = left; col < right; col++) {\n\t\tconst index = top * map.width + col,\n\t\t\tpos = map.map[index];\n\t\tif (map.map[index - map.width] == pos) {\n\t\t\tfound = true;\n\t\t\tconst cell = table.nodeAt(pos)!;\n\t\t\tconst { top: cellTop, left: cellLeft } = map.findCell(pos);\n\t\t\ttr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos + start), null, {\n\t\t\t\t...cell.attrs,\n\t\t\t\trowspan: top - cellTop\n\t\t\t});\n\t\t\ttr.insert(\n\t\t\t\ttr.mapping.slice(mapFrom).map(map.positionAt(top, cellLeft, table)),\n\t\t\t\tcell.type.createAndFill({\n\t\t\t\t\t...cell.attrs,\n\t\t\t\t\trowspan: cellTop + cell.attrs.rowspan - top\n\t\t\t\t})!\n\t\t\t);\n\t\t\tcol += cell.attrs.colspan - 1;\n\t\t}\n\t}\n\treturn found;\n}\n\nfunction isolateVertical(\n\ttr: Transaction,\n\tmap: TableMap,\n\ttable: Node,\n\tstart: number,\n\ttop: number,\n\tbottom: number,\n\tleft: number,\n\tmapFrom: number\n): boolean {\n\tif (left == 0 || left == map.width) return false;\n\tlet found = false;\n\tfor (let row = top; row < bottom; row++) {\n\t\tconst index = row * map.width + left,\n\t\t\tpos = map.map[index];\n\t\tif (map.map[index - 1] == pos) {\n\t\t\tfound = true;\n\t\t\tconst cell = table.nodeAt(pos)!;\n\t\t\tconst cellLeft = map.colCount(pos);\n\t\t\tconst updatePos = tr.mapping.slice(mapFrom).map(pos + start);\n\t\t\ttr.setNodeMarkup(\n\t\t\t\tupdatePos,\n\t\t\t\tnull,\n\t\t\t\tremoveColSpan(\n\t\t\t\t\tcell.attrs as CellAttrs,\n\t\t\t\t\tleft - cellLeft,\n\t\t\t\t\tcell.attrs.colspan - (left - cellLeft)\n\t\t\t\t)\n\t\t\t);\n\t\t\ttr.insert(\n\t\t\t\tupdatePos + cell.nodeSize,\n\t\t\t\tcell.type.createAndFill(\n\t\t\t\t\tremoveColSpan(cell.attrs as CellAttrs, 0, left - cellLeft)\n\t\t\t\t)!\n\t\t\t);\n\t\t\trow += cell.attrs.rowspan - 1;\n\t\t}\n\t}\n\treturn found;\n}\n\nexport const insertCells = (\n\tstate: EditorState,\n\tdispatch: EditorView['dispatch'],\n\ttableStart: number,\n\trect: Rect,\n\tcells: Area\n) => {\n\tlet table = tableStart ? state.doc.nodeAt(tableStart - 1) : state.doc;\n\tif (!table) throw new Error('No table found');\n\tlet map = TableMap.get(table);\n\tconst { top, left } = rect;\n\tconst right = left + cells.width,\n\t\tbottom = top + cells.height;\n\tconst tr = state.tr;\n\tlet mapFrom = 0;\n\tfunction recomp() {\n\t\ttable = tableStart ? tr.doc.nodeAt(tableStart - 1) : tr.doc;\n\t\tif (!table) throw new Error('No table found');\n\t\tmap = TableMap.get(table);\n\t\tmapFrom = tr.mapping.maps.length;\n\t}\n\n\tif (growTable(tr, map, table, tableStart, right, bottom, mapFrom)) recomp();\n\tif (isolateHorizontal(tr, map, table, tableStart, left, right, top, mapFrom))\n\t\trecomp();\n\tif (\n\t\tisolateHorizontal(tr, map, table, tableStart, left, right, bottom, mapFrom)\n\t)\n\t\trecomp();\n\tif (isolateVertical(tr, map, table, tableStart, top, bottom, left, mapFrom))\n\t\trecomp();\n\tif (isolateVertical(tr, map, table, tableStart, top, bottom, right, mapFrom))\n\t\trecomp();\n\n\tfor (let row = top; row < bottom; row++) {\n\t\tconst from = map.positionAt(row, left, table),\n\t\t\tto = map.positionAt(row, right, table);\n\t\ttr.replace(\n\t\t\ttr.mapping.slice(mapFrom).map(from + tableStart),\n\t\t\ttr.mapping.slice(mapFrom).map(to + tableStart),\n\t\t\tnew Slice(cells.rows[row - top], 0, 0)\n\t\t);\n\t}\n\trecomp();\n\n\ttr.setSelection(\n\t\tnew CellSelection(\n\t\t\ttr.doc.resolve(tableStart + map.positionAt(top, left, table)),\n\t\t\ttr.doc.resolve(tableStart + map.positionAt(bottom - 1, right - 1, table))\n\t\t)\n\t);\n\tdispatch(tr);\n};\n","import { EditorView } from 'prosemirror-view';\nimport {\n\tcellAround,\n\tinSameTable,\n\tisEmpty,\n\tisInTable,\n\tnextCell,\n\tselectionCell,\n\ttableEditingKey\n} from './utils';\nimport { CellSelection } from './cellSelection';\nimport { Fragment, ResolvedPos, Slice } from 'prosemirror-model';\nimport { keydownHandler } from 'prosemirror-keymap';\nimport {\n\tCommand,\n\tEditorState,\n\tSelection,\n\tTextSelection\n} from 'prosemirror-state';\nimport { tableNodeTypes } from './schema';\nimport { clipCells, fitSlice, insertCells, pastedCells } from './copypaste';\nimport { TableMap } from './tableMap';\n\ntype Axis = 'horiz' | 'vert';\n\nexport type Direction = -1 | 1;\n\nconst deleteCellSelection: Command = (state, dispatch) => {\n\tconst sel = state.selection;\n\tif (!(sel instanceof CellSelection)) return false;\n\tif (dispatch) {\n\t\tconst tr = state.tr;\n\t\tconst baseContent = tableNodeTypes(state.schema).cell.createAndFill()!\n\t\t\t.content;\n\t\tsel.forEachCell((cell, pos) => {\n\t\t\tif (!cell.content.eq(baseContent))\n\t\t\t\ttr.replace(\n\t\t\t\t\ttr.mapping.map(pos + 1),\n\t\t\t\t\ttr.mapping.map(pos + cell.nodeSize - 1),\n\t\t\t\t\tnew Slice(baseContent, 0, 0)\n\t\t\t\t);\n\t\t});\n\t\tif (tr.docChanged) dispatch(tr);\n\t}\n\treturn true;\n};\n\nexport const handleKeyDown = keydownHandler({\n\tArrowLeft: arrow('horiz', -1),\n\tArrowRight: arrow('horiz', 1),\n\tArrowUp: arrow('vert', -1),\n\tArrowDown: arrow('vert', 1),\n\t'Shift-ArrowLeft': shiftArrow('horiz', -1),\n\t'Shift-ArrowRight': shiftArrow('horiz', 1),\n\t'Shift-ArrowUp': shiftArrow('vert', -1),\n\t'Shift-ArrowDown': shiftArrow('vert', 1),\n\tBackspace: deleteCellSelection,\n\t'Mod-Backspace': deleteCellSelection,\n\tDelete: deleteCellSelection,\n\t'Mod-Delete': deleteCellSelection\n});\n\nfunction maybeSetSelection(\n\tstate: EditorState,\n\tdispatch: undefined | EditorView['dispatch'],\n\tselection: Selection\n): boolean {\n\tif (selection.eq(state.selection)) return false;\n\tif (dispatch) dispatch(state.tr.setSelection(selection).scrollIntoView());\n\treturn true;\n}\n\nexport function arrow(axis: Axis, dir: Direction): Command {\n\treturn (state, dispatch, view) => {\n\t\tif (!view) return false;\n\t\tconst sel = state.selection;\n\t\tif (sel instanceof CellSelection) {\n\t\t\treturn maybeSetSelection(\n\t\t\t\tstate,\n\t\t\t\tdispatch,\n\t\t\t\tSelection.near(sel.$headCell, dir)\n\t\t\t);\n\t\t}\n\t\tif (axis != 'horiz' && !sel.empty) return false;\n\t\tconst end = atEndOfCell(view, axis, dir);\n\t\tif (end == null) return false;\n\t\tif (axis == 'horiz') {\n\t\t\treturn maybeSetSelection(\n\t\t\t\tstate,\n\t\t\t\tdispatch,\n\t\t\t\tSelection.near(state.doc.resolve(sel.head + dir), dir)\n\t\t\t);\n\t\t} else {\n\t\t\tconst $cell = state.doc.resolve(end);\n\t\t\tconst $next = nextCell($cell, axis, dir);\n\t\t\tlet newSel;\n\t\t\tif ($next) newSel = Selection.near($next, 1);\n\t\t\telse if (dir < 0)\n\t\t\t\tnewSel = Selection.near(state.doc.resolve($cell.before(-1)), -1);\n\t\t\telse newSel = Selection.near(state.doc.resolve($cell.after(-1)), 1);\n\t\t\treturn maybeSetSelection(state, dispatch, newSel);\n\t\t}\n\t};\n}\n\nfunction shiftArrow(axis: Axis, dir: Direction): Command {\n\treturn (state, dispatch, view) => {\n\t\tif (!view) return false;\n\t\tlet cellSel: CellSelection;\n\t\tconst sel = state.selection;\n\t\tif (sel instanceof CellSelection) {\n\t\t\tcellSel = sel;\n\t\t} else {\n\t\t\tconst end = atEndOfCell(view, axis, dir);\n\t\t\tif (end == null) return false;\n\t\t\tcellSel = new CellSelection(state.doc.resolve(end));\n\t\t}\n\t\tconst $head = nextCell(cellSel.$headCell, axis, dir);\n\t\tif (!$head) return false;\n\t\treturn maybeSetSelection(\n\t\t\tstate,\n\t\t\tdispatch,\n\t\t\tnew CellSelection(cellSel.$anchorCell, $head)\n\t\t);\n\t};\n}\n\nexport const handlePaste = (\n\tview: EditorView,\n\te: ClipboardEvent,\n\tslice: Slice\n): boolean => {\n\tif (!isInTable(view.state)) return false;\n\tlet cells = pastedCells(slice);\n\tconst sel = view.state.selection;\n\tif (sel instanceof CellSelection) {\n\t\tif (!cells)\n\t\t\tcells = {\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1,\n\t\t\t\trows: [\n\t\t\t\t\tFragment.from(fitSlice(tableNodeTypes(view.state.schema).cell, slice))\n\t\t\t\t]\n\t\t\t};\n\t\tconst table = sel.$anchorCell.node(-1);\n\t\tconst start = sel.$anchorCell.start(-1);\n\t\tconst rect = TableMap.get(table).rectBetween(\n\t\t\tsel.$anchorCell.pos - start,\n\t\t\tsel.$headCell.pos - start\n\t\t);\n\t\tcells = clipCells(cells, rect.right - rect.left, rect.bottom - rect.top);\n\t\tinsertCells(view.state, view.dispatch, start, rect, cells);\n\t\treturn true;\n\t} else if (cells) {\n\t\tconst $cell = selectionCell(view.state);\n\t\tconst start = $cell.start(-1);\n\t\tinsertCells(\n\t\t\tview.state,\n\t\t\tview.dispatch,\n\t\t\tstart,\n\t\t\tTableMap.get($cell.node(-1)).findCell($cell.pos - start),\n\t\t\tcells\n\t\t);\n\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nexport function handleMouseDown(\n\tview: EditorView,\n\tstartEvent: MouseEvent\n): void {\n\tif (startEvent.ctrlKey || startEvent.metaKey) return;\n\n\tconst startDOMCell = domInCell(view, startEvent.target as Node);\n\tconst $cell = cellUnderMouse(view, startEvent);\n\tif (startDOMCell) {\n\t\tstartEvent.preventDefault();\n\t}\n\tlet $anchor;\n\tif (startEvent.shiftKey && view.state.selection instanceof CellSelection) {\n\t\t// Adding to an existing cell selection\n\t\tsetCellSelection(view.state.selection.$anchorCell, startEvent);\n\t\tstartEvent.preventDefault();\n\t} else if (\n\t\tstartEvent.shiftKey &&\n\t\tstartDOMCell &&\n\t\t($anchor = cellAround(view.state.selection.$anchor)) != null &&\n\t\tcellUnderMouse(view, startEvent)?.pos != $anchor.pos\n\t) {\n\t\tsetCellSelection($anchor, startEvent);\n\t\tstartEvent.preventDefault();\n\t} else if (!startDOMCell) {\n\t\treturn;\n\t}\n\n\tfunction setCellSelection($anchor: ResolvedPos, event: MouseEvent): void {\n\t\tlet $head = cellUnderMouse(view, event);\n\t\tconst starting = tableEditingKey.getState(view.state)?.set == null;\n\t\tif (!$head || !inSameTable($anchor, $head)) {\n\t\t\tif (starting) $head = $anchor;\n\t\t\telse return;\n\t\t}\n\t\tconst selection = new CellSelection($anchor, $head);\n\t\tif (starting || !view.state.selection.eq(selection)) {\n\t\t\tconst tr = view.state.tr.setSelection(selection);\n\n\t\t\tif (starting) tr.setMeta(tableEditingKey, { set: $anchor.pos });\n\t\t\tview.dispatch(tr);\n\t\t}\n\t}\n\tconst { clientX: x1, clientY: y1 } = startEvent;\n\tfunction stop(e?: Event): void {\n\t\tif (e?.type == 'mouseup') {\n\t\t\tconst _event: MouseEvent = e as MouseEvent;\n\t\t\tconst { clientX: x2, clientY: y2 } = _event;\n\t\t\tif (Math.abs(x1 - x2) < 4 && Math.abs(y1 - y2) < 4) {\n\t\t\t\tconst pos = view.posAtCoords({\n\t\t\t\t\tleft: x2,\n\t\t\t\t\ttop: y2\n\t\t\t\t});\n\t\t\t\tif (pos) {\n\t\t\t\t\tconst newSelection = TextSelection.create(\n\t\t\t\t\t\tview.state.doc,\n\t\t\t\t\t\tpos.pos,\n\t\t\t\t\t\tpos.pos\n\t\t\t\t\t);\n\t\t\t\t\tconst tr = view.state.tr.setSelection(newSelection);\n\t\t\t\t\tview.dispatch(tr);\n\t\t\t\t\tview.focus();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst tableDOM = view.nodeDOM($cell!.start(-2));\n\t\t\t\t(tableDOM?.firstChild as HTMLDivElement)?.focus();\n\n\t\t\t\t// document.querySelector<HTMLElement>('.hiddenfocus')?.focus();\n\t\t\t}\n\t\t}\n\n\t\tview.root.removeEventListener('mouseup', stop);\n\t\tview.root.removeEventListener('dragstart', stop);\n\t\tview.root.removeEventListener('mousemove', move);\n\t\tif (!isEmpty(tableEditingKey.getState(view.state)?.set))\n\t\t\tview.dispatch(view.state.tr.setMeta(tableEditingKey, { set: -1 }));\n\t}\n\n\tlet startPos = view.posAtCoords({ left: x1, top: y1 });\n\n\tfunction move(_event: Event): void {\n\t\tconst event = _event as MouseEvent;\n\n\t\tconst anchor = tableEditingKey.getState(view.state)?.set;\n\t\tlet $anchor;\n\t\tif (anchor || anchor == 0) {\n\t\t\t$anchor = view.state.doc.resolve(anchor);\n\t\t} else if (domInCell(view, event.target as Node) != startDOMCell) {\n\t\t\t$anchor = cellUnderMouse(view, startEvent);\n\t\t\tif (!$anchor) return stop();\n\t\t\tview.dom.blur();\n\t\t} else {\n\t\t\tconst head = view.posAtCoords({\n\t\t\t\tleft: event.clientX,\n\t\t\t\ttop: event.clientY\n\t\t\t});\n\t\t\tview.dispatch(\n\t\t\t\tview.state.tr.setSelection(\n\t\t\t\t\tTextSelection.create(view.state.doc, startPos!.pos, head!.pos)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ($anchor) setCellSelection($anchor, event);\n\t}\n\n\tview.root.addEventListener('mouseup', stop);\n\tview.root.addEventListener('dragstart', stop);\n\tview.root.addEventListener('mousemove', move);\n}\n\nexport function domInCell(view: EditorView, dom: Node | null): Node | null {\n\tfor (; dom && dom != view.dom; dom = dom.parentNode) {\n\t\tif (dom.nodeName == 'TD' || dom.nodeName == 'TH') {\n\t\t\treturn dom;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction cellUnderMouse(\n\tview: EditorView,\n\tevent: MouseEvent\n): ResolvedPos | null {\n\tconst mousePos = view.posAtCoords({\n\t\tleft: event.clientX,\n\t\ttop: event.clientY\n\t});\n\tif (!mousePos) return null;\n\treturn mousePos ? cellAround(view.state.doc.resolve(mousePos.pos)) : null;\n}\n\nfunction atEndOfCell(view: EditorView, axis: Axis, dir: number): null | number {\n\tif (!(view.state.selection instanceof TextSelection)) return null;\n\tconst { $head } = view.state.selection;\n\tfor (let d = $head.depth - 1; d >= 0; d--) {\n\t\tconst parent = $head.node(d),\n\t\t\tindex = dir < 0 ? $head.index(d) : $head.indexAfter(d);\n\n\t\tif (index != (dir < 0 ? 0 : parent.childCount)) return null;\n\n\t\tif (\n\t\t\tparent.type.spec.tableRole == 'cell' ||\n\t\t\tparent.type.spec.tableRole == 'headerCell'\n\t\t) {\n\t\t\tconst cellPos = $head.before(d);\n\t\t\tconst dirStr: 'up' | 'down' | 'left' | 'right' =\n\t\t\t\taxis == 'vert' ? (dir > 0 ? 'down' : 'up') : dir > 0 ? 'right' : 'left';\n\t\t\treturn view.endOfTextblock(dirStr) ? cellPos : null;\n\t\t}\n\t}\n\treturn null;\n}\n\nexport const handleTripleClick = (view: EditorView, pos: number): boolean => {\n\tconst doc = view.state.doc,\n\t\t$cell = cellAround(doc.resolve(pos));\n\tif (!$cell) return false;\n\tview.dispatch(\n\t\tview.state.tr\n\t\t\t.setSelection(new CellSelection($cell))\n\t\t\t.setMeta(tableEditingKey, { set: $cell.pos })\n\t);\n\treturn true;\n};\n","import { EditorState, Plugin } from 'prosemirror-state';\nimport { TableState, cellAround, isEmpty, tableEditingKey } from './utils';\nimport {\n\tCellSelection,\n\tdrawCellSelection,\n\tnormalizeSelection\n} from './cellSelection';\nimport { fixTables } from './fixtables';\n\nexport { tableNodeTypes, tableNodes } from './schema';\nexport { TableView } from './tableView';\nexport { columnResizing } from './columnresizing';\nimport './style.scss';\nimport {\n\tdomInCell,\n\thandleKeyDown,\n\thandleMouseDown,\n\thandlePaste,\n\thandleTripleClick\n} from './input';\nimport { Decoration, DecorationSet, EditorView } from 'prosemirror-view';\nimport { TableView, TableViewConstructor, addToolkit } from './tableView';\n\nexport type TableEditingOptions = {\n\tallowTableNodeSelection?: boolean;\n};\n\nexport function tableEditing({\n\tallowTableNodeSelection = false\n}: TableEditingOptions): Plugin {\n\tconst getDecorations = (state: EditorState) => {\n\t\tlet decs: Decoration[] = [];\n\t\tdecs = decs.concat(drawCellSelection(state));\n\t\tstate.doc.descendants((node, pos) => {\n\t\t\tif (node.type.name !== 'table') return;\n\t\t\tdecs = decs.concat(addToolkit(node, pos));\n\t\t});\n\t\treturn decs;\n\t};\n\n\treturn new Plugin<TableState>({\n\t\tkey: tableEditingKey,\n\t\tstate: {\n\t\t\tinit(_, state) {\n\t\t\t\treturn {\n\t\t\t\t\tdecorations: DecorationSet.create(state.doc, getDecorations(state)),\n\t\t\t\t\tset: null\n\t\t\t\t};\n\t\t\t},\n\t\t\tapply(tr, value, _, state) {\n\t\t\t\tconst st = tr.getMeta(tableEditingKey);\n\t\t\t\tlet { set = null, hoverDecos } = st || {};\n\t\t\t\tconst decorations = DecorationSet.create(\n\t\t\t\t\tstate.doc,\n\t\t\t\t\tgetDecorations(state).concat(\n\t\t\t\t\t\thoverDecos ? hoverDecos : value.hoverDecos || []\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\tif (!isEmpty(value.set) && isEmpty(set)) {\n\t\t\t\t\tconst { deleted, pos } = tr.mapping.mapResult(value.set!);\n\t\t\t\t\tset = deleted ? null : pos;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tset: isEmpty(set) || set == -1 ? null : set,\n\t\t\t\t\tdecorations,\n\t\t\t\t\thoverDecos\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tnodeViews: {\n\t\t\t\ttable: TableViewConstructor\n\t\t\t},\n\t\t\tdecorations(state) {\n\t\t\t\treturn this.getState(state)?.decorations;\n\t\t\t},\n\t\t\thandleDOMEvents: {\n\t\t\t\tmousedown: handleMouseDown\n\t\t\t},\n\t\t\thandlePaste,\n\t\t\thandleTripleClick,\n\t\t\thandleKeyDown\n\t\t\t// createSelectionBetween(view) {\n\t\t\t// \tconsole.log('cre');\n\n\t\t\t// \tconst set = tableEditingKey.getState(view.state)?.set;\n\t\t\t// \tconsole.log(set, 'selection');\n\n\t\t\t// \treturn !isEmpty(set) ? view.state.selection : null;\n\t\t\t// }\n\t\t},\n\t\tappendTransaction(_, oldState, newState) {\n\t\t\treturn normalizeSelection(\n\t\t\t\tnewState,\n\t\t\t\t// newState.tr,\n\t\t\t\tfixTables(newState, oldState),\n\t\t\t\tallowTableNodeSelection\n\t\t\t);\n\t\t}\n\t});\n}\n","import katex from 'katex';\nimport { NodeSpec } from 'prosemirror-model';\nimport { Plugin } from 'prosemirror-state';\nimport createElement from '../../createElement';\nimport { EditorView } from 'prosemirror-view';\n\nexport const mathNodeSpec: NodeSpec = {\n\tgroup: 'inline',\n\tinline: true,\n\tatom: true,\n\ttoDOM: (node) => ['span', { class: 'math-node' }, node.attrs.formula],\n\tparseDOM: [\n\t\t{ tag: 'span.math-node', getAttrs: (dom) => ({ formula: dom.textContent }) }\n\t],\n\tattrs: {\n\t\tformula: {}\n\t}\n};\n\nconst renderMath = (formula: string) => {\n\tconst span = createElement('span', { class: 'math-node' });\n\tkatex.render(formula, span);\n\treturn span;\n};\n\nexport const mathRender = () => {\n\treturn new Plugin({\n\t\tprops: {\n\t\t\tnodeViews: {\n\t\t\t\tmath(node, view, getPos) {\n\t\t\t\t\tconst dom = renderMath(node.attrs.formula);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdom,\n\t\t\t\t\t\tupdate: (newNode) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tnewNode.type.name === 'math' &&\n\t\t\t\t\t\t\t\tnewNode.attrs.formula === node.attrs.formula\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n\nexport const insertMath = (view: EditorView, formula: string) => {\n\tconst { state, dispatch } = view;\n\tconst node = state.schema.nodes.math.create({ formula });\n\tdispatch(state.tr.replaceSelectionWith(node));\n};\n","// model.ts 文件命名暂时还是以 mvc 模式命名，方便理解，实际中 命名为 schema.ts 更好\nimport {\n\tMarkSpec,\n\tNode,\n\tNodeSpec,\n\tSchema,\n\tSchemaSpec\n} from 'prosemirror-model';\nimport { codeBlock } from './components/codeBlock';\nimport { taskItem, taskList } from './components/taskList';\nimport { tableNodes } from './components/tables';\nimport { mathNodeSpec } from './components/katex';\n\nfunction createNodeSpec(config: NodeSpec): NodeSpec {\n\tconfig.attrs = { ...config.attrs, hidden: { default: false } };\n\tconst toDOM = config.toDOM;\n\tif (toDOM)\n\t\tconfig.toDOM = (node: Node) => {\n\t\t\tconst res = toDOM(node);\n\t\t\tif (Array.isArray(res)) {\n\t\t\t\tlet [tag, attrs, content] = res;\n\t\t\t\tif (attrs === 0) content = 0;\n\t\t\t\tconst hidden = node.attrs.hidden ? 'hidden' : '';\n\t\t\t\tattrs = {\n\t\t\t\t\t...attrs,\n\t\t\t\t\tclass: attrs.class ? attrs.class + ' ' + hidden : hidden\n\t\t\t\t};\n\t\t\t\treturn [tag, attrs, content];\n\t\t\t} else return res;\n\t\t};\n\treturn config;\n}\n\nconst nodes = {\n\t// 整个文档\n\tdoc: {\n\t\t// 文档内容规定必须是 block 类型的节点（block 与 HTML 中的 block 概念差不多） `+` 号代表可以有一个或多个（规则类似正则）\n\t\tcontent: 'block+'\n\t},\n\t// 段落中的文本\n\ttext: {\n\t\t// 当前处于 inline 分株，意味着它是个 inline 节点。代表输入的文本\n\t\tgroup: 'inline'\n\t},\n\n\tmath: createNodeSpec(mathNodeSpec),\n\n\t// 文档段落\n\tparagraph: createNodeSpec({\n\t\t// 段落内容规定必须是 inline 类型的节点（inline 与 HTML 中 inline 概念差不多）, `*` 号代表可以有 0 个或多个（规则类似正则）\n\t\tcontent: 'inline*',\n\t\t// 分组：当前节点所在的分组为 block，意味着它是个 block 节点\n\t\tgroup: 'block',\n\t\t// 渲染为 html 时候，使用 p 标签渲染，第二个参数 0 念做 “洞”，类似 vue 中 slot 插槽的概念，\n\t\t// 证明它有子节点，以后子节点就填充在 p 标签中\n\t\ttoDOM: () => {\n\t\t\treturn ['p', 0];\n\t\t},\n\t\t// 从别处复制过来的富文本，如果包含 p 标签，将 p 标签序列化为当前的 p 节点后进行展示\n\t\tparseDOM: [\n\t\t\t{\n\t\t\t\ttag: 'p'\n\t\t\t}\n\t\t]\n\t}),\n\tcodeBlock: createNodeSpec(codeBlock),\n\tblockQuote: createNodeSpec({\n\t\tcontent: 'paragraph block*',\n\t\tgroup: 'block',\n\t\ttoDOM() {\n\t\t\treturn ['blockquote', 0];\n\t\t},\n\t\tparseDOM: [\n\t\t\t{\n\t\t\t\ttag: 'blockquote'\n\t\t\t}\n\t\t]\n\t}),\n\n\t// 1-6 级标题\n\theading: createNodeSpec({\n\t\t// attrs 与 vue/react 组件中 props 的概念类似，代表定义当前节点有哪些属性，这里定义了 level 属性，默认值 1\n\t\tattrs: {\n\t\t\tlevel: {\n\t\t\t\tdefault: 1\n\t\t\t},\n\t\t\tid: {\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\tfold: {\n\t\t\t\tdefault: false\n\t\t\t}\n\t\t},\n\t\t// 当前节点内容可以是 0 个或多个 inline 节点\n\t\tcontent: 'inline*',\n\t\t// 当前节点分组为 block 分组\n\t\tgroup: 'block',\n\t\t// defining: 特殊属性，为 true 代表如果在当前标签内（以 h1 为例），全选内容，直接粘贴新的内容后，这些内容还会被 h1 标签包裹\n\t\t// 如果为 false, 整个 h1 标签（包括内容与标签本身）将会被替换为其他内容，删除亦如此。\n\t\t// 还有其他的特殊属性，后续细说\n\t\tdefining: true,\n\t\t// 转为 html 标签时，根据当前的 level 属性，生成对应的 h1 - h6 标签，节点的内容填充在 h 标签中（“洞”在）。\n\t\ttoDOM(node) {\n\t\t\tconst tag = `h${node.attrs.level}`;\n\t\t\treturn [tag, 0];\n\t\t},\n\t\t// 从别处复制进来的富文本内容，根据标签序列化为当前 heading 节点，并填充对应的 level 属性\n\t\tparseDOM: [\n\t\t\t{ tag: 'h1', attrs: { level: 1 } },\n\t\t\t{ tag: 'h2', attrs: { level: 2 } },\n\t\t\t{ tag: 'h3', attrs: { level: 3 } },\n\t\t\t{ tag: 'h4', attrs: { level: 4 } },\n\t\t\t{ tag: 'h5', attrs: { level: 5 } },\n\t\t\t{ tag: 'h6', attrs: { level: 6 } }\n\t\t]\n\t}),\n\t// listSymbol: {\n\t// \tgroup: 'inline',\n\t// \tinline: true,\n\t// \tattrs: {\n\t// \t\tlevel: { default: 1 },\n\t// \t\ttype: { default: 0 }\n\t// \t},\n\t// \ttoDOM({ attrs }) {\n\t// \t\treturn [\n\t// \t\t\t'span',\n\t// \t\t\t{\n\t// \t\t\t\tclass: 'list-symbol',\n\t// \t\t\t\t'data-level': attrs.level,\n\t// \t\t\t\t'data-type': attrs.type\n\t// \t\t\t}\n\t// \t\t];\n\t// \t},\n\t// \tparseDOM: [\n\t// \t\t{\n\t// \t\t\ttag: 'span[class=\"list-symbol\"]',\n\t// \t\t\tgetAttrs(dom) {\n\t// \t\t\t\treturn {\n\t// \t\t\t\t\tlevel: dom.getAttribute('data-level'),\n\t// \t\t\t\t\ttype: dom.getAttribute('data-type')\n\t// \t\t\t\t};\n\t// \t\t\t}\n\t// \t\t}\n\t// \t]\n\t// },\n\tordered_list: createNodeSpec({\n\t\tcontent: 'list_item+',\n\t\tgroup: 'block',\n\t\tattrs: { order: { default: 1 } },\n\t\tparseDOM: [\n\t\t\t{\n\t\t\t\ttag: 'ol',\n\t\t\t\tgetAttrs(dom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\torder: dom.hasAttribute('start')\n\t\t\t\t\t\t\t? dom.getAttribute?.('start') || ''\n\t\t\t\t\t\t\t: 1\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t\ttoDOM(node) {\n\t\t\treturn node.attrs.order == 1\n\t\t\t\t? ['ol', 0]\n\t\t\t\t: ['ol', { start: node.attrs.order }, 0];\n\t\t}\n\t}),\n\tbullet_list: createNodeSpec({\n\t\tcontent: 'list_item+',\n\t\tgroup: 'block',\n\t\tparseDOM: [{ tag: 'ul' }],\n\t\ttoDOM() {\n\t\t\treturn ['ul', 0];\n\t\t}\n\t}),\n\tlist_item: createNodeSpec({\n\t\tcontent: 'paragraph block*',\n\t\tparseDOM: [{ tag: 'li' }],\n\t\ttoDOM() {\n\t\t\treturn ['li', 0];\n\t\t}\n\t}),\n\ttaskList: createNodeSpec(taskList),\n\ttaskItem: createNodeSpec(taskItem),\n\t...tableNodes({\n\t\ttableGroup: 'block',\n\t\tcellContent: 'block+',\n\t\tcellAttributes: {}\n\t}),\n\thorizontalRule: createNodeSpec({\n\t\tgroup: 'block',\n\t\tparseDOM: [{ tag: 'hr' }],\n\t\ttoDOM: () => ['hr']\n\t}),\n\timage: createNodeSpec({\n\t\tinline: true,\n\t\tattrs: {\n\t\t\tsrc: {},\n\t\t\talt: { default: null },\n\t\t\ttitle: { default: null }\n\t\t},\n\t\tgroup: 'inline',\n\t\tdraggable: true,\n\t\tparseDOM: [\n\t\t\t{\n\t\t\t\ttag: 'img[src]',\n\t\t\t\tgetAttrs: (dom) => ({\n\t\t\t\t\tsrc: dom.getAttribute('src'),\n\t\t\t\t\ttitle: dom.getAttribute('title'),\n\t\t\t\t\talt: dom.getAttribute('alt')\n\t\t\t\t})\n\t\t\t}\n\t\t],\n\t\ttoDOM: (node) => {\n\t\t\tconst { title, src, alt } = node.attrs;\n\n\t\t\treturn ['img', { title, src, alt }];\n\t\t}\n\t}),\n\thardBreak: createNodeSpec({\n\t\tinline: true,\n\t\tgroup: 'inline',\n\t\tselectable: false,\n\t\tparseDOM: [{ tag: 'br' }],\n\t\ttoDOM: () => ['br']\n\t})\n};\nexport type NodesKey = keyof typeof nodes;\nexport type MarksKey =\n\t| 'bold'\n\t| 'italic'\n\t| 'link'\n\t| 'underline'\n\t| 'linethrough'\n\t| 'style';\n\nconst marks: Record<MarksKey, MarkSpec> = {\n\t// 文本加粗\n\tbold: {\n\t\ttoDOM: () => ['strong', 0],\n\t\tparseDOM: [\n\t\t\t{ tag: 'stong' },\n\t\t\t{\n\t\t\t\ttag: 'b',\n\t\t\t\tgetAttrs: (dom) => dom.style.fontWeight !== 'normal' && null\n\t\t\t},\n\t\t\t{\n\t\t\t\tstyle: 'font-weight',\n\t\t\t\tgetAttrs: (val) => /^(bold(er)?|[5-9]\\d{2})$/.test(val) && null\n\t\t\t}\n\t\t]\n\t},\n\titalic: {\n\t\tgroup: 'heading',\n\t\ttoDOM: () => ['em', 0],\n\t\tparseDOM: [\n\t\t\t{ tag: 'em' },\n\t\t\t{\n\t\t\t\ttag: 'i',\n\t\t\t\tgetAttrs: (dom) => dom.style.fontStyle !== 'normal' && null\n\t\t\t},\n\t\t\t{ style: 'font-style=italic' }\n\t\t]\n\t},\n\tlink: {\n\t\tgroup: 'heading',\n\t\tattrs: {\n\t\t\thref: { default: null },\n\t\t\tref: { default: 'noopener noreferrer nofollow' },\n\t\t\ttarget: { default: '_blank' },\n\t\t\ttitle: { default: '' }\n\t\t},\n\t\ttoDOM: (mark) => {\n\t\t\tconst { href, ref, target, title } = mark.attrs;\n\t\t\treturn ['a', { href, ref, target, title }, 0];\n\t\t},\n\t\tparseDOM: [{ tag: 'a[href]:not([href *= \"javascript:\" i])' }]\n\t},\n\tunderline: {\n\t\tparseDOM: [\n\t\t\t{ tag: 'u' },\n\t\t\t{\n\t\t\t\tstyle: 'text-decoration',\n\t\t\t\tgetAttrs: (val) => val === 'underline' && null\n\t\t\t}\n\t\t],\n\t\ttoDOM: () => ['u', 0]\n\t},\n\tlinethrough: {\n\t\tparseDOM: [\n\t\t\t{ tag: 's' },\n\t\t\t{ tag: 'strike' },\n\t\t\t{\n\t\t\t\tstyle: 'text-decoration',\n\t\t\t\tgetAttrs: (val) => val === 'linethrough' && null\n\t\t\t}\n\t\t],\n\t\ttoDOM: () => ['s', 0]\n\t},\n\tstyle: {\n\t\tattrs: {\n\t\t\tcolor: { default: null },\n\t\t\tfontSize: { default: null },\n\t\t\tbackgroundColor: { default: null }\n\t\t},\n\t\tparseDOM: [\n\t\t\t{ style: 'color', getAttrs: (val) => ({ color: val }) },\n\t\t\t{ style: 'font-size', getAttrs: (val) => ({ fontSize: val }) },\n\t\t\t{\n\t\t\t\tstyle: 'background-color',\n\t\t\t\tgetAttrs: (val) => ({ backgroundColor: val })\n\t\t\t}\n\t\t],\n\t\ttoDOM: (mark) => {\n\t\t\tconst { color, fontSize, backgroundColor } = mark.attrs;\n\t\t\tlet style = '';\n\t\t\tif (color) style += `color:${color}; `;\n\t\t\tif (fontSize) style += `font-size:${fontSize}; `;\n\t\t\tif (backgroundColor) style += `background-color:${backgroundColor}; `;\n\t\t\treturn ['span', { style }, 0];\n\t\t}\n\t}\n};\n\nconst config = {\n\tnodes,\n\tmarks\n};\n\nexport const schema = new Schema(config);\n","import { Node } from 'prosemirror-model';\nimport crel, { updateElement } from '../../createElement';\nimport {\n\tDecoration,\n\tDecorationSource,\n\tEditorView,\n\tNodeView,\n\tNodeViewConstructor\n} from 'prosemirror-view';\n// import { setup } from './menu';\nimport { BaseNodeView } from '../../utils/view';\ntype GetPos = () => number | undefined;\nexport class CodeBlockView extends BaseNodeView {\n\tname = 'blockCode';\n\tgetPos: GetPos;\n\tunmount?: () => void;\n\tmenu: HTMLElement;\n\t// root: ReactDOM.Root;\n\tcontentDOM?: HTMLElement | null | undefined;\n\tconstructor(...args: Parameters<NodeViewConstructor>) {\n\t\tconst [node, view, getPos] = args;\n\t\tsuper(node, view);\n\t\tthis.getPos = getPos;\n\t\tthis.contentDOM = crel('code', {\n\t\t\tclass: 'scrollbar dc-block',\n\t\t\t'data-language': node.attrs.language,\n\t\t\t'data-theme': node.attrs.theme,\n\t\t\t'data-show-line-number': node.attrs.showLineNumber,\n\t\t\t'data-node-type': 'codeBlock'\n\t\t});\n\t\tthis.menu = crel('div', { class: 'code-block-menu-container' });\n\t\tthis.dom = crel('pre', {\n\t\t\tclass: 'docucraft-codeblock hljs',\n\t\t\t'data-language': node.attrs.language,\n\t\t\t'data-theme': node.attrs.theme,\n\t\t\t'data-show-line-number': node.attrs.showLineNumber,\n\t\t\t'data-node-type': 'codeBlock'\n\t\t});\n\t\t// this.root = ReactDOM.createRoot(this.menu);\n\t\tthis.dom.appendChild(this.menu);\n\t\tthis.dom.appendChild(this.contentDOM);\n\t\tthis.renderComponent();\n\t}\n\n\trenderComponent() {\n\t\t// setup(this);\n\t}\n\n\tupdate(node: Node) {\n\t\tconst res = super.update(node);\n\t\tif (!res) return false;\n\t\tthis.node = node;\n\t\tupdateElement(this.dom, {\n\t\t\t'data-language': node.attrs.language,\n\t\t\t'data-theme': node.attrs.theme,\n\t\t\t'data-show-line-number': node.attrs.showLineNumber\n\t\t});\n\t\tupdateElement(this.contentDOM as HTMLElement, {\n\t\t\t'data-language': node.attrs.language,\n\t\t\t'data-theme': node.attrs.theme,\n\t\t\t'data-show-line-number': node.attrs.showLineNumber\n\t\t});\n\n\t\tthis.renderComponent();\n\n\t\treturn true;\n\t}\n\n\tdestroy() {\n\t\tconsole.log('destroy code');\n\n\t\t// this.root.unmount();\n\t}\n}\n\nexport const CodeBlockViewConstructor: NodeViewConstructor = (...args) =>\n\tnew CodeBlockView(...args);\n","interface RenderInfo {\n  from: number;\n  to: number;\n  classNames: string[];\n  scope: string;\n}\n\nexport class HighlightRenderer {\n  // 当前位置\n  private currentPos: number;\n  // 最终匹配好的所有 renderInfo\n  private finishedRenderInfos: RenderInfo[] = [];\n  // 正在进行加了 from 没有加 to 的这些，会一次入栈\n  private trackingRenderInfoStack: RenderInfo[] = [];\n  // 这里是 hljs-，是从 _emitter.options.classPrefix 获取的\n  private classPrefix: string;\n\n  constructor(tree: any, blockStartPos: number) {\n    // 这里实例化的时候直接记录初始位置，这里开始的位置是 code_block 开始位置 + 1,原因是还是之前的 node 坐标系统，\n    // 具体的文本是 <code_block>keyword 这样的，在 code_block 标签后面开始的，code_block开始位置是标签之前\n    this.currentPos = blockStartPos + 1;\n    this.classPrefix = tree.options.classPrefix;\n\n    // 直接开始遍历\n    tree.walk(this);\n  }\n\n  // add Text 就开始更新位置\n  addText(text: string) {\n    console.log(text, 'text');\n\n    if (text) {\n      this.currentPos += text.length;\n    }\n  }\n\n  // open 时候就创建 render Info，并入栈\n  openNode(node: any) {\n    // node.scope is className\n    console.log(node, 'node');\n\n    if (!node.scope) return;\n\n    // create new render info, which corresponds to HTML open tag.\n    const renderInfo = this.newRenderInfo({\n      from: this.currentPos,\n      classNames: node.scope\n        .split('.')\n        .filter((item: any) => item)\n        .map((item: string) => this.classPrefix + item),\n      scope: node.scope,\n    });\n\n    // push tracking stack\n    this.trackingRenderInfoStack.push(renderInfo);\n  }\n\n  // close 就出栈补充 to 信息，补充完丢带完成的数组中\n  closeNode(node: { scope: string }) {\n    console.log(node, 'node');\n\n    if (!node.scope) return;\n    const renderInfo = this.trackingRenderInfoStack.pop();\n    if (!renderInfo)\n      throw new Error('[highlight-code-plugin-error]: Cannot close node!');\n\n    if (node.scope !== renderInfo.scope)\n      throw new Error('[highlight-code-plugin-error]: Matching error!');\n\n    renderInfo.to = this.currentPos;\n\n    // finish a render info, which corresponds to html close tag.\n    this.finishedRenderInfos.push(renderInfo);\n  }\n\n  // 快捷的创建 renderINfo 的辅助方法\n  newRenderInfo(info: Partial<RenderInfo>): RenderInfo {\n    return {\n      from: this.currentPos,\n      to: -1,\n      classNames: [],\n      scope: '',\n      ...info,\n    };\n  }\n\n  // 获取 value\n  get value() {\n    return this.finishedRenderInfos;\n  }\n}\n","import { Node, NodeType } from 'prosemirror-model';\nimport { PluginKey, Plugin } from 'prosemirror-state';\nimport { Decoration, DecorationSet } from 'prosemirror-view';\nimport { HighlightRenderer } from './highlightRenderer';\nimport hljs from 'highlight.js';\nimport createElement from '../../createElement';\n\ninterface HighlightCodePluginState {\n  decorations: DecorationSet;\n}\n\nexport interface NodeWithPos {\n  node: Node;\n  pos: number;\n}\n\nexport const highlightCodePluginKey = new PluginKey<HighlightCodePluginState>(\n  'highlight-code'\n);\n\nexport function findNodesByType(\n  doc: Node,\n  type: string | string[] | NodeType | NodeType[]\n): NodeWithPos[] {\n  const nodes: NodeWithPos[] = [];\n  const schema = doc.type.schema;\n  const tempTypes: string[] | NodeType[] = Array.isArray(type)\n    ? type\n    : ([type] as string[] | NodeType[]);\n\n  const types = tempTypes\n    .map((item) => (typeof item === 'string' ? schema.nodes[item] : item))\n    .filter(Boolean);\n\n  doc.descendants((node, pos) => {\n    if (types.includes(node.type)) {\n      nodes.push({\n        node,\n        pos,\n      });\n    }\n  });\n\n  return nodes;\n}\n\nfunction createLineNumberDecorations(block: NodeWithPos): Decoration[] {\n  const textContent = block.node.textContent;\n  const lineInfos = textContent.split('\\n');\n\n  let currentPos = block.pos + 1;\n\n  const decorations: Decoration[] = lineInfos.map((item, index) => {\n    const span = createElement(\n      'span',\n      { class: 'line-number', line: `${index + 1}` },\n      '\\u200B'\n    );\n    const decoration = Decoration.widget(currentPos, (view) => span, {\n      side: -1,\n      ignoreSelection: true,\n      destroy() {\n        span.remove();\n      },\n    });\n    currentPos += item.length + 1;\n    return decoration;\n  });\n  return decorations;\n}\n\nexport function highlightCodePlugin() {\n  function getDecs(doc: Node): Decoration[] {\n    if (!doc || !doc.nodeSize) {\n      return [];\n    }\n    const blocks = findNodesByType(doc, 'codeBlock');\n    let decorations: Decoration[] = [];\n\n    blocks.forEach((block) => {\n      let language: string = block.node.attrs.language;\n\n      if (language && !hljs.getLanguage(language)) language = 'plaintext';\n\n      const highlightResult = language\n        ? hljs.highlight(block.node.textContent, { language })\n        : hljs.highlightAuto(block.node.textContent);\n\n      const emitter = highlightResult._emitter;\n\n      const renderer = new HighlightRenderer(emitter, block.pos);\n\n      if (renderer.value.length) {\n        const blockDecorations = renderer.value.map((renderInfo) =>\n          Decoration.inline(renderInfo.from, renderInfo.to, {\n            class: renderInfo.classNames.join(' '),\n          })\n        );\n\n        decorations = decorations.concat(blockDecorations);\n      }\n\n      // if (block.node.attrs.showLineNumber) {\n      //   const lineNumberDecorations = createLineNumberDecorations(block);\n      //   decorations = decorations.concat(lineNumberDecorations);\n      // }\n    });\n    return decorations;\n  }\n\n  return new Plugin({\n    key: highlightCodePluginKey,\n    state: {\n      init(config, instance) {\n        const decorations = getDecs(instance.doc);\n        return {\n          decorations: DecorationSet.create(instance.doc, decorations),\n        };\n      },\n      apply(tr, value, oldState, newState) {\n        if (!tr.docChanged) return value;\n        const decorations = getDecs(newState.doc);\n        return {\n          decorations: DecorationSet.create(tr.doc, decorations),\n        };\n      },\n    },\n    props: {\n      decorations(state) {\n        const pluginState = highlightCodePluginKey.getState(state);\n        return pluginState?.decorations;\n      },\n    },\n  });\n}\n","import { Node } from 'prosemirror-model';\nimport { EditorView } from 'prosemirror-view';\n\nlet view: { current?: EditorView } = {};\nexport const addView = (v: EditorView) => (view.current = v);\nexport const getView = () => view.current;\nexport default () => '';\n\nexport function escapeLatex(latex: string) {\n\tconst escapeMap: Record<string, string> = {\n\t\t'\\\\': '\\\\\\\\',\n\t\t'{': '\\\\{',\n\t\t'}': '\\\\}',\n\t\t$: '\\\\$',\n\t\t'&': '\\\\&',\n\t\t'#': '\\\\#',\n\t\t_: '\\\\_',\n\t\t'%': '\\\\%',\n\t\t'^': '\\\\^',\n\t\t'~': '\\\\~'\n\t};\n\n\treturn latex.replace(/[\\\\{}$&#_%^~]/g, (match) => escapeMap[match]);\n}\n\nlet uniqueIdCounter = 1000;\nexport function generateUniqueId() {\n\tuniqueIdCounter++;\n\tconst base36 = uniqueIdCounter.toString(36);\n\tconst randomPart = Math.random().toString(36).substring(2, 4);\n\treturn randomPart + base36;\n}\n\nexport function assignUniqueId(node: any) {\n\tif (!node.attrs.id) {\n\t\tnode.attrs.id = generateUniqueId();\n\t}\n}\n\nexport function convertToChineseNumber(num: number): string {\n\tconst units = [\n\t\t'',\n\t\t'十',\n\t\t'百',\n\t\t'千',\n\t\t'万',\n\t\t'十',\n\t\t'百',\n\t\t'千',\n\t\t'亿',\n\t\t'十',\n\t\t'百',\n\t\t'千',\n\t\t'万'\n\t];\n\tconst digits = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'];\n\n\tif (num === 0) return '零';\n\n\tconst numStr = num.toString();\n\tlet result = '';\n\tlet zeroFlag = false;\n\n\tfor (let i = 0; i < numStr.length; i++) {\n\t\tconst digit = parseInt(numStr[i]);\n\t\tconst unitPos = numStr.length - i - 1;\n\n\t\tif (digit === 0) {\n\t\t\tzeroFlag = true;\n\t\t} else {\n\t\t\tif (zeroFlag) {\n\t\t\t\tresult += '零';\n\t\t\t\tzeroFlag = false;\n\t\t\t}\n\t\t\tresult += digits[digit] + units[unitPos];\n\t\t}\n\t}\n\tresult = result.replace(/^一十/, '十');\n\treturn result.replace(/零+$/, '');\n}\n\nexport function convertToAlphabet(num: number): string {\n\tif (num <= 0) return '';\n\n\tlet result = '';\n\twhile (num > 0) {\n\t\tnum--;\n\t\tresult = String.fromCharCode((num % 26) + 97) + result;\n\t\tnum = Math.floor(num / 26);\n\t}\n\n\treturn result;\n}\n\nexport function convertToRoman(num: number): string {\n\tconst romanNumerals: { [key: number]: string } = {\n\t\t1000: 'm',\n\t\t900: 'cm',\n\t\t500: 'd',\n\t\t400: 'cd',\n\t\t100: 'c',\n\t\t90: 'xc',\n\t\t50: 'l',\n\t\t40: 'xl',\n\t\t10: 'x',\n\t\t9: 'ix',\n\t\t5: 'v',\n\t\t4: 'iv',\n\t\t1: 'i'\n\t};\n\n\tlet result = '';\n\tfor (const [value, numeral] of Object.entries(romanNumerals).reverse()) {\n\t\twhile (num >= parseInt(value)) {\n\t\t\tresult += numeral;\n\t\t\tnum -= parseInt(value);\n\t\t}\n\t}\n\n\treturn result;\n}\n","import { Node, ResolvedPos } from 'prosemirror-model';\nimport { Plugin, PluginKey, Transaction } from 'prosemirror-state';\nimport { DecorationSet, DecorationSource } from 'prosemirror-view';\nimport { ReplaceStep } from 'prosemirror-transform';\nimport { HeadingView } from '../heading';\nimport {\n\tconvertToAlphabet,\n\tconvertToChineseNumber,\n\tconvertToRoman\n} from '../../utils';\n\nexport class OutlineNode {\n\tchildren: OutlineNode[];\n\tparent: OutlineNode | null;\n\tconstructor(\n\t\tpublic id: string,\n\t\tpublic node: HeadingView | null,\n\t\tpublic level: number\n\t) {\n\t\tthis.children = [];\n\t\tthis.parent = null;\n\t}\n}\n\nexport type OrderType = 0 | 1 | 2 | 3;\n\nexport class OutlineTree {\n\troot: OutlineNode;\n\tprivate map: Map<string, OutlineNode>;\n\torderType: OrderType = 3;\n\tconstructor(public decorations: DecorationSource) {\n\t\tthis.root = new OutlineNode('root', null, 0);\n\t\tthis.map = new Map();\n\t}\n\tsetOrderType(type: OrderType) {\n\t\tthis.orderType = type;\n\t\tthis.updateHeading();\n\t}\n\tinsertOrUpdate(heading: HeadingView, $pos: ResolvedPos) {\n\t\tconst { node, id } = heading;\n\t\tconst level = node.attrs.level;\n\n\t\tconst parent = $pos.parent;\n\t\tlet outlineNode = this.findNodeById(id);\n\t\tif (outlineNode) {\n\t\t\toutlineNode.node = heading;\n\t\t\treturn outlineNode;\n\t\t} else outlineNode = new OutlineNode(id, heading, level);\n\t\tthis.map.set(id, outlineNode);\n\t\tlet index = $pos.index($pos.depth);\n\t\tlet cursor,\n\t\t\tcount = 0,\n\t\t\tlastLevel = Infinity;\n\t\tfor (let i = index + 1; i < parent.childCount; i++) {\n\t\t\tcursor = parent.child(i);\n\t\t\tif (cursor.type.name !== 'heading' || cursor.attrs.level > lastLevel)\n\t\t\t\tcontinue;\n\n\t\t\tconst olNode = this.findNodeById(cursor.attrs.id);\n\n\t\t\tif (!olNode) throw new Error('can not found node');\n\t\t\tconst l = olNode.level;\n\t\t\tif (l <= level) break;\n\n\t\t\tif (l < lastLevel) lastLevel = l;\n\t\t\toutlineNode.children.push(olNode);\n\t\t\tconst index = olNode.parent!.children.indexOf(olNode);\n\t\t\tolNode.parent?.children.splice(index, 1);\n\t\t}\n\n\t\tfor (const child of outlineNode.children) child.parent = outlineNode;\n\n\t\tlastLevel = Infinity;\n\t\tfor (let i = index - 1; i >= 0; i--) {\n\t\t\tcursor = parent.child(i);\n\t\t\tif (cursor.type.name !== 'heading') continue;\n\n\t\t\tconst olNode = this.findNodeById(cursor.attrs.id);\n\t\t\tif (!olNode) throw new Error('can not found node');\n\n\t\t\tif (olNode.level > level) {\n\t\t\t\tlet l = olNode.level;\n\t\t\t\tif (l < lastLevel) {\n\t\t\t\t\tcount = 1;\n\t\t\t\t\tlastLevel = l;\n\t\t\t\t} else if (l === lastLevel) count++;\n\t\t\t} else if (olNode.level < level) {\n\t\t\t\tolNode.children.unshift(outlineNode);\n\t\t\t\toutlineNode.parent = olNode;\n\t\t\t\tcount = -1;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tconst index = olNode.parent!.children.indexOf(olNode);\n\t\t\t\tif (index !== -1)\n\t\t\t\t\tolNode.parent?.children.splice(index + 1, 0, outlineNode);\n\t\t\t\tcount = -1;\n\t\t\t\toutlineNode.parent = olNode.parent;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (count >= 0) {\n\t\t\tthis.root.children.splice(count, 0, outlineNode);\n\t\t\toutlineNode.parent = this.root;\n\t\t}\n\n\t\treturn outlineNode;\n\t}\n\n\tfindNodeById(id: string) {\n\t\treturn this.map.get(id) || null;\n\t}\n\n\tremoveById(id: string) {\n\t\tconst outlineNode = this.findNodeById(id);\n\t\tif (outlineNode) {\n\t\t\tconst children = outlineNode.parent?.children || [];\n\t\t\tconst index = children.indexOf(outlineNode);\n\t\t\tchildren.splice(index, 1, ...outlineNode.children);\n\t\t\toutlineNode.children.forEach(\n\t\t\t\t(child) => (child.parent = outlineNode.parent)\n\t\t\t);\n\t\t\tthis.map.delete(id);\n\t\t}\n\n\t\tthis.updateHeading();\n\t\treturn !!outlineNode;\n\t}\n\tupdateHeading() {\n\t\tfor (const [key, outlineNode] of this.map) outlineNode.node?.updateSymbol();\n\t}\n\tdataLevel(id: string) {\n\t\tlet current = this.findNodeById(id),\n\t\t\toffset = -2;\n\t\twhile (current) {\n\t\t\toffset++;\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn offset;\n\t}\n\tprivate renderOrder1(id: string) {\n\t\tconst nums = [];\n\t\tlet current = this.findNodeById(id);\n\n\t\twhile (current && current.parent) {\n\t\t\tconst index = current.parent.children.indexOf(current) + 1;\n\n\t\t\tnums.unshift(index);\n\t\t\tcurrent = current.parent;\n\t\t}\n\n\t\treturn nums.join('.');\n\t}\n\tprivate renderOrder2(id: string) {\n\t\tlet current = this.findNodeById(id);\n\t\tconst index = current?.parent?.children.indexOf(current);\n\t\tif (typeof index !== 'number') return '';\n\t\tconst offset = this.dataLevel(id);\n\t\tswitch (offset % 3) {\n\t\t\tcase 0:\n\t\t\t\treturn convertToChineseNumber(index + 1);\n\t\t\tcase 1:\n\t\t\t\treturn `(${convertToChineseNumber(index + 1)})`;\n\t\t\tcase 2:\n\t\t\t\treturn index + 1 + '';\n\t\t}\n\n\t\treturn '';\n\t}\n\tprivate renderOrder3(id: string) {\n\t\tlet current = this.findNodeById(id);\n\t\tconst index = current?.parent?.children.indexOf(current);\n\t\tif (typeof index !== 'number') return '';\n\t\tconst offset = this.dataLevel(id);\n\t\tswitch (offset % 3) {\n\t\t\tcase 0:\n\t\t\t\treturn convertToAlphabet(index + 1);\n\t\t\tcase 1:\n\t\t\t\treturn convertToRoman(index + 1);\n\t\t\tcase 2:\n\t\t\t\treturn index + 1 + '';\n\t\t}\n\n\t\treturn '';\n\t}\n\tcalculateOrderNumber(id: string) {\n\t\tswitch (this.orderType) {\n\t\t\tcase 1:\n\t\t\t\treturn this.renderOrder1(id);\n\t\t\tcase 2:\n\t\t\t\treturn this.renderOrder2(id);\n\t\t\tcase 3:\n\t\t\t\treturn this.renderOrder3(id);\n\t\t}\n\t\treturn '';\n\t}\n}\n\nexport const outlineTreeKey = new PluginKey<OutlineTree>('outlineTreeKey');\nexport const outlineTreePlugin = new Plugin({\n\tkey: outlineTreeKey,\n\tstate: {\n\t\tinit(_, { doc }) {\n\t\t\tconst outlineTree = new OutlineTree(DecorationSet.create(doc, []));\n\t\t\treturn outlineTree;\n\t\t},\n\t\tapply(tr, value, oldState) {\n\t\t\ttr.steps.forEach((step) => {\n\t\t\t\tif (step instanceof ReplaceStep) {\n\t\t\t\t\tconst { from, to } = step;\n\n\t\t\t\t\toldState.doc.nodesBetween(from, to, (node, pos) => {\n\t\t\t\t\t\tif (node.type.name === 'heading' && pos >= from) {\n\t\t\t\t\t\t\tvalue.removeById(node.attrs.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}\n\t},\n\tappendTransaction(transactions, oldState, newState) {\n\t\tlet tr: Transaction | undefined;\n\t\tfor (const transaction of transactions) {\n\t\t\tconst data = transaction.getMeta('toggleHeading');\n\n\t\t\tif (data && typeof data.pos !== 'undefined') {\n\t\t\t\ttr = newState.tr;\n\t\t\t\tconst pos = data.pos;\n\t\t\t\tconst $pos = oldState.doc.resolve(pos);\n\t\t\t\tconst parent = $pos.parent;\n\t\t\t\tconst index = $pos.index($pos.depth);\n\t\t\t\tconst node = parent.child(index);\n\t\t\t\tlet offset = pos + node.nodeSize;\n\n\t\t\t\tfor (let i = index + 1; i < parent.childCount; i++) {\n\t\t\t\t\tconst current = parent.child(i);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tcurrent.type.name === 'heading' &&\n\t\t\t\t\t\tcurrent.attrs.level <= node.attrs.level\n\t\t\t\t\t)\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\ttr = tr.setNodeMarkup(\n\t\t\t\t\t\toffset,\n\t\t\t\t\t\tcurrent.type,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...current.attrs,\n\t\t\t\t\t\t\thidden: data.hidden\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcurrent.marks\n\t\t\t\t\t);\n\t\t\t\t\toffset += current.nodeSize;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn tr;\n\t}\n});\n","import {\n\tInputRule,\n\tinputRules,\n\ttextblockTypeInputRule,\n\twrappingInputRule\n} from 'prosemirror-inputrules';\nimport { schema } from '../model';\nimport { outlineTreeKey } from '../components/outline';\n\n// 定义输入规则\nconst headingRules = [\n\ttextblockTypeInputRule(/^#\\s$/, schema.nodes.heading, { level: 1 }),\n\ttextblockTypeInputRule(/^##\\s$/, schema.nodes.heading, { level: 2 }),\n\ttextblockTypeInputRule(/^###\\s$/, schema.nodes.heading, { level: 3 }),\n\ttextblockTypeInputRule(/^####\\s$/, schema.nodes.heading, { level: 4 }),\n\ttextblockTypeInputRule(/^#####\\s$/, schema.nodes.heading, { level: 5 }),\n\ttextblockTypeInputRule(/^######\\s$/, schema.nodes.heading, { level: 6 })\n];\n\nconst listRules = [\n\twrappingInputRule(/^\\s*([-+*])\\s$/, schema.nodes.bullet_list),\n\twrappingInputRule(/^(\\d+)\\.\\s$/, schema.nodes.ordered_list, (match) => ({\n\t\torder: +match[1]\n\t})),\n\twrappingInputRule(/^\\-\\[\\]\\s$/, schema.nodes.taskList)\n];\nconst map: Record<string, string> = {\n\tjavascript: 'javascript',\n\ttypescript: 'typescript',\n\trust: 'rust',\n\tgolang: 'golang',\n\tpython: 'python',\n\truby: 'ruby',\n\tphp: 'php',\n\thtml: 'html',\n\tcss: 'css',\n\tmarkdown: 'markdown',\n\tjava: 'java',\n\t'c++': 'c++',\n\t'c#': 'c#',\n\tc: 'c',\n\tjs: 'javascript',\n\tts: 'typescript',\n\tpy: 'python',\n\tgo: 'golang',\n\trs: 'rust',\n\tplaintext: 'plaintext'\n};\nconst mapTolang = (lang: string) => {\n\treturn map[lang] || 'plaintext';\n};\n\nconst rules = [\n\t...headingRules,\n\t...listRules,\n\ttextblockTypeInputRule(\n\t\t/^```([\\w+#]*)\\s$/,\n\t\tschema.nodes.codeBlock,\n\t\t(match) => ({ language: mapTolang(match[1]) })\n\t),\n\twrappingInputRule(/^(>|》)\\s$/, schema.nodes.blockQuote),\n\tnew InputRule(/\\d+\\.\\s$/, (state, match, start, end) => {\n\t\tlet tr = state.tr;\n\t\tconst $start = state.doc.resolve(start);\n\t\tconst parent = $start.parent;\n\t\tif (parent.type !== schema.nodes.heading) return null;\n\t\tconst level = parent.attrs.level;\n\t\tconst outineTree = outlineTreeKey.getState(state);\n\n\t\toutineTree &&\n\t\t\ttr.replaceWith(\n\t\t\t\tstart,\n\t\t\t\tend,\n\t\t\t\tschema.nodes.listSymbol.create(\n\t\t\t\t\t{ level },\n\t\t\t\t\tschema.text(outineTree.calculateOrderNumber(parent.attrs.id))\n\t\t\t\t)\n\t\t\t);\n\t\treturn tr;\n\t})\n];\n\nexport const buildInputRules = () => inputRules({ rules });\n","import {\n\tsplitBlock,\n\tchainCommands,\n\tnewlineInCode,\n\tcreateParagraphNear,\n\tliftEmptyBlock,\n\tbaseKeymap\n} from 'prosemirror-commands';\nimport { Attrs, Fragment, NodeType, Slice } from 'prosemirror-model';\nimport { canSplit } from 'prosemirror-transform';\nimport {\n\tCommand,\n\tEditorState,\n\tNodeSelection,\n\tSelection\n} from 'prosemirror-state';\nimport { schema } from '../model';\nimport { redo, undo } from 'prosemirror-history';\nimport { EditorView } from 'prosemirror-view';\nimport { createTaskList } from '../components/taskList';\n\nconst splitListItem = (itemTypes: NodeType[], itemAttrs?: Attrs): Command => {\n\treturn (state, dispatch) => {\n\t\tlet { $from, $to, node } = state.selection as NodeSelection;\n\t\tif ((node && node.isBlock) || $from.depth < 2 || !$from.sameParent($to))\n\t\t\treturn false;\n\t\tlet grandParent = $from.node(-1);\n\t\tif (!itemTypes.includes(grandParent.type)) return false;\n\n\t\tconst liCount = $from.node(-2).childCount;\n\t\tif (\n\t\t\t$from.parent.content.size == 0 &&\n\t\t\t$from.node(-1).childCount == $from.indexAfter(-1)\n\t\t) {\n\t\t\tif (\n\t\t\t\t$from.depth == 3 ||\n\t\t\t\t!itemTypes.includes($from.node(-3).type) ||\n\t\t\t\t$from.index(-2) != liCount - 1\n\t\t\t)\n\t\t\t\treturn false;\n\t\t\tif (dispatch) {\n\t\t\t\tlet wrap = Fragment.empty;\n\t\t\t\tlet depthBefore = $from.index(-1) ? 1 : $from.index(-2) ? 2 : 3;\n\t\t\t\tconsole.log(depthBefore, $from);\n\n\t\t\t\t// Build a fragment containing empty versions of the structure\n\t\t\t\t// from the outer list item to the parent node of the cursor\n\t\t\t\tfor (let d = $from.depth - depthBefore; d >= $from.depth - 3; d--)\n\t\t\t\t\twrap = Fragment.from($from.node(d).copy(wrap));\n\t\t\t\tconsole.log(wrap, $from.node(4), $from.node(3));\n\n\t\t\t\tlet depthAfter =\n\t\t\t\t\t$from.indexAfter(-1) < $from.node(-2).childCount\n\t\t\t\t\t\t? 1\n\t\t\t\t\t\t: $from.indexAfter(-2) < $from.node(-3).childCount\n\t\t\t\t\t\t\t? 2\n\t\t\t\t\t\t\t: 3;\n\t\t\t\t// Add a second list item with an empty default start node\n\t\t\t\twrap = wrap.append(Fragment.from(itemTypes[0].createAndFill()));\n\n\t\t\t\tlet start = $from.before($from.depth - (depthBefore - 1));\n\t\t\t\tconst s = new Slice(wrap, 4 - depthBefore, 0);\n\t\t\t\tlet tr = state.tr.replace(start, $from.after(-depthAfter), s);\n\t\t\t\tlet sel = -1;\n\t\t\t\ttr.doc.nodesBetween(start, tr.doc.content.size, (node, pos) => {\n\t\t\t\t\tif (sel > -1) return false;\n\t\t\t\t\tif (node.isTextblock && node.content.size == 0) sel = pos + 1;\n\t\t\t\t});\n\t\t\t\tif (sel > -1) tr.setSelection(Selection.near(tr.doc.resolve(sel)));\n\t\t\t\tdispatch(tr.scrollIntoView());\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tlet nextType =\n\t\t\t$to.pos == $from.end() ? grandParent.contentMatchAt(0).defaultType : null;\n\t\tlet tr = state.tr.delete($from.pos, $to.pos);\n\t\tlet types = nextType\n\t\t\t? [\n\t\t\t\t\titemAttrs ? { type: itemTypes[0], attrs: itemAttrs } : null,\n\t\t\t\t\t{ type: nextType }\n\t\t\t\t]\n\t\t\t: undefined;\n\t\tif (!canSplit(tr.doc, $from.pos, 2, types)) return false;\n\t\tif (dispatch) dispatch(tr.split($from.pos, 2, types).scrollIntoView());\n\t\treturn true;\n\t};\n};\n\nexport const myKeymap: { [key: string]: Command } = {\n\t...baseKeymap,\n\tEnter: chainCommands(\n\t\tsplitListItem([schema.nodes.list_item, schema.nodes.taskItem]),\n\t\tnewlineInCode,\n\t\tcreateParagraphNear,\n\t\tliftEmptyBlock,\n\t\tsplitBlock\n\t),\n\t'Mod-z': undo,\n\t'Mod-y': redo,\n\tTab: (state: EditorState, dispatch?: EditorView['dispatch']) => {\n\t\tconst { $from, $to } = state.selection;\n\t\tif (!$from.sameParent($to) || $from.parent.type !== schema.nodes.codeBlock)\n\t\t\treturn false;\n\t\tif (dispatch) {\n\t\t\tdispatch(state.tr.insertText('\\t'));\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t'Ctrl-Shift-L': createTaskList\n};\n","import { EditorState, Transaction } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\n\nexport interface MenuItemSpec {\n\tclass?: string;\n\tlabel: string;\n\tcontent?: HTMLElement;\n\thandler: (\n\t\tprops: {\n\t\t\tview: EditorView;\n\t\t\tstate: EditorState;\n\t\t\ttr: Transaction;\n\t\t\tdispatch: EditorView['dispatch'];\n\t\t},\n\t\tevent: MouseEvent\n\t) => void;\n\tupdate?: (view: EditorView, state: EditorState, menu: HTMLElement) => void;\n}\n\nexport class MenuItem {\n\tdom: HTMLElement;\n\tconstructor(\n\t\tprivate view: EditorView,\n\t\tprivate spec: MenuItemSpec\n\t) {\n\t\tconst btn = document.createElement('button');\n\t\tbtn.setAttribute('class', spec.class || '');\n\t\tbtn.addEventListener('click', (event: MouseEvent) => {\n\t\t\tspec.handler(\n\t\t\t\t{\n\t\t\t\t\tview: this.view,\n\t\t\t\t\tstate: this.view.state,\n\t\t\t\t\tdispatch: view.dispatch,\n\t\t\t\t\ttr: view.state.tr\n\t\t\t\t},\n\t\t\t\tevent\n\t\t\t);\n\t\t});\n\t\tbtn.classList.add('menu-item');\n\t\tbtn.innerText = spec.label;\n\t\tthis.dom = btn;\n\t}\n\n\tupdate(view: EditorView, state: EditorState) {\n\t\tthis.view = view;\n\t\tthis.spec.update?.(view, state, this.dom);\n\t}\n}\n","import { EditorView } from 'prosemirror-view';\nimport { MenuItem, MenuItemSpec } from './menuItem';\nimport { EditorState } from 'prosemirror-state';\nimport createElement from '../../createElement';\n\nexport interface MenuGroupSpec {\n\tname?: string;\n\tclass?: string;\n\tmenus: MenuItemSpec[];\n}\n\nexport class MenuGroup {\n\tdom: HTMLElement;\n\tprivate menus: MenuItem[];\n\tconstructor(\n\t\tprivate view: EditorView,\n\t\tprivate spec: MenuGroupSpec\n\t) {\n\t\tconst dom = createElement('div', {\n\t\t\tclass: spec.class || '' + ' menu-group'\n\t\t});\n\n\t\tthis.dom = dom;\n\t\tthis.menus = spec.menus.map(\n\t\t\t(menuSpec) => new MenuItem(this.view, menuSpec)\n\t\t);\n\n\t\tthis.menus.forEach((menu) => dom.appendChild(menu.dom));\n\t}\n\n\tupdate(view: EditorView, state: EditorState) {\n\t\tthis.view = view;\n\t\tthis.menus.forEach((menu) => menu.update(view, state));\n\t}\n}\n","import { Attrs, MarkType, Schema } from 'prosemirror-model';\nimport { TextSelection } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { CSSProperties } from 'react';\n\nexport const setMark = (\n\tview: EditorView,\n\tmarkType: MarkType | string,\n\tattrs: Attrs | null = null\n) => {\n\tconst { schema, selection, tr } = view.state;\n\tconst { $from, $to } = selection;\n\n\tconst mark = schema.mark(markType, attrs);\n\n\tview.dispatch(tr.addMark($from.pos, $to.pos, mark));\n\treturn true;\n};\nexport const unSetMark = (view: EditorView, markType: MarkType | string) => {\n\tconst { selection, tr, schema } = view.state;\n\tconst { $from, $to } = selection;\n\n\tview.dispatch(\n\t\ttr.removeMark($from.pos, $to.pos, getMarkType(markType, schema))\n\t);\n};\n\nfunction getMarkType(markType: MarkType | string, schema: Schema) {\n\treturn typeof markType === 'string' ? schema.marks[markType] : markType;\n}\n\nfunction isMarkActive(view: EditorView, markType: MarkType | string): boolean {\n\tconst { schema, selection, tr } = view.state;\n\tif (!(selection instanceof TextSelection)) return false;\n\n\tconst { $from, $to } = selection;\n\tconst realMarkType = getMarkType(markType, schema);\n\tlet isActive = true;\n\n\ttr.doc.nodesBetween($from.pos, $to.pos, (node) => {\n\t\tif (!isActive) return false;\n\t\tif (node.isInline) {\n\t\t\tconst mark = realMarkType.isInSet(node.marks);\n\t\t\tif (!mark) isActive = false;\n\t\t}\n\t});\n\n\treturn isActive;\n}\n\nfunction toggleMark(view: EditorView, markType: MarkType | string) {\n\tif (isMarkActive(view, markType)) return unSetMark(view, markType);\n\telse return setMark(view, markType);\n}\n\nexport const applyBold = (view: EditorView) => toggleMark(view, 'bold');\nexport const applyUnderline = (view: EditorView) =>\n\ttoggleMark(view, 'underline');\nexport const applyLinethrough = (view: EditorView) =>\n\ttoggleMark(view, 'linethrough');\nexport const applylink = (url: string) => (view: EditorView) =>\n\tsetMark(view, 'link', { href: url });\n\nexport const applyStyle =\n\t(style: CSSProperties) =>\n\t({ state, dispatch }: EditorView) => {\n\t\tconst { schema, selection } = state;\n\t\tconst markType = schema.marks.style;\n\t\tlet tr = state.tr;\n\t\tconsole.log(selection, 'sel');\n\t\tconst { from, to } = selection;\n\t\tstate.doc.nodesBetween(from, to, (node, pos) => {\n\t\t\tif (node.isText) {\n\t\t\t\tlet existingMark = node.marks.find((mark) => mark.type === markType);\n\t\t\t\tlet attrs = existingMark ? { ...existingMark.attrs, ...style } : style;\n\t\t\t\ttr = tr.addMark(\n\t\t\t\t\tpos < from ? from : pos,\n\t\t\t\t\tpos + node.nodeSize > to ? to : pos + node.nodeSize,\n\t\t\t\t\tmarkType.create(attrs)\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tdispatch(tr);\n\t\treturn true;\n\t};\n\nexport const applyColor = (color?: string) => applyStyle({ color });\n\nexport const applyBgColor = (backgroundColor?: string) =>\n\tapplyStyle({ backgroundColor });\n","import { EditorState, PluginView } from 'prosemirror-state';\nimport createElement from '../../createElement';\nimport { EditorView } from 'prosemirror-view';\nimport { MenuItem, MenuItemSpec } from './menuItem';\ninterface Spec {\n\tclass?: string;\n\tmenus: MenuItemSpec[];\n}\nexport class FloatBar implements PluginView {\n\tdom: HTMLElement;\n\tmenus: MenuItem[];\n\tconstructor(view: EditorView, spec: Spec) {\n\t\tthis.menus = spec.menus.map((menu) => new MenuItem(view, menu));\n\t\tthis.dom = createElement(\n\t\t\t'div',\n\t\t\t{ class: spec.class || 'dc-float-bar' },\n\t\t\tthis.menus.map((menu) => menu.dom)\n\t\t);\n\t}\n\n\tupdate(view: EditorView, state: EditorState) {\n\t\tthis.menus.forEach((menu) => menu.update(view, state));\n\t}\n\n\tdestroy() {}\n}\n","import createElement from '../../createElement';\nimport './style.scss';\n\nexport interface Rect {\n\tleft: number;\n\tright: number;\n\ttop: number;\n\tbottom: number;\n\twidth: number;\n\theight: number;\n}\n\nexport class Tooltip {\n\tstatic container: HTMLElement;\n\tstatic instance?: Tooltip;\n\ttooltip: HTMLElement;\n\tvisible: boolean = false;\n\n\tconstructor() {\n\t\tthis.tooltip = createElement('div', { class: 'dc-tooltip' });\n\t\tif (!Tooltip.container) {\n\t\t\tconst container = createElement('div', { class: 'dc-tooltip-container' });\n\t\t\tTooltip.container = container;\n\t\t\tdocument.body.appendChild(container);\n\t\t}\n\t\tTooltip.container.appendChild(this.tooltip);\n\t\tthis.tooltip.addEventListener('mouseup', (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t});\n\t}\n\n\tcontent(dom: HTMLElement) {\n\t\tthis.tooltip.replaceChildren(dom);\n\t}\n\n\tshowAt(rect: Rect) {\n\t\tthis.tooltip.style.visibility = 'visible';\n\t\tthis.tooltip.style.opacity = '1';\n\t\tthis.visible = true;\n\n\t\tconst { height, width } = this.tooltip.getBoundingClientRect();\n\t\tconst top = rect.top - height - 5;\n\t\tconst left = rect.left + (rect.width - width) / 2;\n\t\tthis.tooltip.style.top = top + 'px';\n\t\tthis.tooltip.style.left = left + 'px';\n\t}\n\n\tshow(target: HTMLElement, content?: string | HTMLElement) {\n\t\tif (!this.tooltip) return;\n\t\tif (!content) {\n\t\t} else if (typeof content === 'string') this.tooltip.innerHTML = content;\n\t\telse {\n\t\t\tthis.tooltip.replaceChildren(content);\n\t\t}\n\t\tthis.tooltip.style.visibility = 'visible';\n\t\tthis.tooltip.style.opacity = '1';\n\t\tthis.visible = true;\n\n\t\tconst rect = target.getBoundingClientRect();\n\t\tconst { height, width } = this.tooltip.getBoundingClientRect();\n\t\tconst top = rect.top - height - 5;\n\t\tconst left = rect.left + (rect.width - width) / 2;\n\t\tthis.tooltip.style.top = top + 'px';\n\t\tthis.tooltip.style.left = left + 'px';\n\t}\n\n\thide() {\n\t\tif (!this.tooltip) return;\n\t\tthis.tooltip.style.opacity = '0';\n\t\tthis.tooltip.style.visibility = 'hidden';\n\t\tthis.visible = false;\n\t}\n\n\tdestroy() {\n\t\tthis.tooltip.parentNode?.removeChild(this.tooltip);\n\t}\n\n\tstatic get() {\n\t\tlet instance = Tooltip.instance;\n\t\tif (!instance) {\n\t\t\tinstance = new Tooltip();\n\t\t\tTooltip.instance = instance;\n\t\t}\n\t\treturn instance;\n\t}\n}\n","import { EditorState, PluginView, Plugin, PluginKey } from 'prosemirror-state';\nimport { MenuGroup, MenuGroupSpec } from './menuGroup';\nimport { EditorView } from 'prosemirror-view';\nimport { createCodeBlockCmd } from '../codeBlock';\nimport { createTaskList } from '../taskList';\nimport { createTable, mergeCells } from '../tables/commands';\nimport { insertMath } from '../katex';\nimport {\n\tapplyBold,\n\tapplyColor,\n\tapplyLinethrough,\n\tapplyUnderline,\n\tapplylink\n} from './commands';\nimport { FloatBar } from './floatBar';\nimport { Tooltip } from '../tooltip';\n\nexport interface ToolBarSpec {\n\tgroups: MenuGroupSpec[];\n\tclass?: string;\n}\n\nexport class ToolBar implements PluginView {\n\tdom: HTMLElement;\n\tprivate groups: MenuGroup[];\n\tconstructor(\n\t\tprivate view: EditorView,\n\t\tprivate spec: ToolBarSpec\n\t) {\n\t\tconst dom = document.createElement('div');\n\t\tdom.setAttribute('class', this.spec.class || '');\n\t\tdom.classList.add('toolbar');\n\t\tthis.dom = dom;\n\n\t\tthis.groups = this.spec.groups.map(\n\t\t\t(menuGroupSpec) => new MenuGroup(this.view, menuGroupSpec)\n\t\t);\n\t\tthis.groups.forEach((menuGroup) => dom.appendChild(menuGroup.dom));\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tif (this.view.dom.parentNode) {\n\t\t\tthis.view.dom.parentNode.insertBefore(this.dom, this.view.dom);\n\t\t}\n\t}\n\n\tupdate(view: EditorView, state: EditorState) {\n\t\tthis.view = view;\n\t\tthis.groups.forEach((group) => group.update(view, state));\n\t}\n\n\tdestroy() {\n\t\tthis.dom.parentNode?.removeChild(this.dom);\n\t}\n}\n\nexport const buildToolbar = () => {\n\tlet toolbar: ToolBar | null;\n\tconst toolbarPlugin = new Plugin({\n\t\tkey: new PluginKey('toolbar'),\n\n\t\tview(view) {\n\t\t\ttoolbar = new ToolBar(view, {\n\t\t\t\tgroups: [\n\t\t\t\t\t{\n\t\t\t\t\t\tmenus: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '插入代码块',\n\t\t\t\t\t\t\t\thandler({ state, dispatch, view }, event) {\n\t\t\t\t\t\t\t\t\tcreateCodeBlockCmd(state, dispatch, view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '插入tasklist',\n\t\t\t\t\t\t\t\thandler({ state, dispatch, view }) {\n\t\t\t\t\t\t\t\t\tcreateTaskList(state, dispatch, view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '插入表格',\n\t\t\t\t\t\t\t\thandler({ state, dispatch, view }) {\n\t\t\t\t\t\t\t\t\tcreateTable(3, 4)(state, dispatch, view);\n\t\t\t\t\t\t\t\t\t// insertTable(state, dispatch);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '合并单元格',\n\t\t\t\t\t\t\t\thandler({ state, dispatch, view }) {\n\t\t\t\t\t\t\t\t\tmergeCells(state, dispatch, view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '插入公式',\n\t\t\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\t\t\tconst formula = prompt('输入一条 LaTex 公式: ');\n\t\t\t\t\t\t\t\t\t// console.log(escapeLatex(formula));\n\n\t\t\t\t\t\t\t\t\tif (formula) insertMath(view, formula);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tconst onMouseDown = (e: Event) => {\n\t\t\t\tconst { clientX: x1, clientY: y1 } = e as MouseEvent;\n\t\t\t\tconst onMouseup = (e: Event) => {\n\t\t\t\t\tconst { clientX: x2, clientY: y2 } = e as MouseEvent;\n\t\t\t\t\tconst sel = view.state.selection;\n\t\t\t\t\tif (!sel.empty && (Math.abs(x1 - x2) > 5 || Math.abs(y1 - y2) > 5)) {\n\t\t\t\t\t\tconst from = view.coordsAtPos(sel.$from.pos);\n\t\t\t\t\t\tconst to = view.coordsAtPos(sel.$to.pos);\n\t\t\t\t\t\tconst rect = {\n\t\t\t\t\t\t\tleft: Math.min(from.left, to.left),\n\t\t\t\t\t\t\tright: Math.max(from.right, to.right),\n\t\t\t\t\t\t\ttop: Math.min(from.top, to.top),\n\t\t\t\t\t\t\tbottom: Math.max(from.bottom, to.bottom)\n\t\t\t\t\t\t};\n\t\t\t\t\t\ttooltip.showAt({\n\t\t\t\t\t\t\t...rect,\n\t\t\t\t\t\t\twidth: Math.abs(rect.left - rect.right),\n\t\t\t\t\t\t\theight: Math.abs(rect.top - rect.bottom)\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (tooltip.visible) {\n\t\t\t\t\t\ttooltip.hide();\n\t\t\t\t\t}\n\t\t\t\t\tview.root.removeEventListener('mouseup', onMouseup);\n\t\t\t\t};\n\t\t\t\tview.root.addEventListener('mouseup', onMouseup);\n\t\t\t};\n\t\t\tview.root.addEventListener('mousedown', onMouseDown);\n\t\t\tconst floatBar = new FloatBar(view, {\n\t\t\t\tmenus: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '加粗',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyBold(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '链接',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplylink('www.baidu.com')(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '下划线',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyUnderline(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '删除线',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyLinethrough(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '颜色',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyColor('red')(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '颜色‘',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyColor()(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t\tconst tooltip = new Tooltip();\n\t\t\ttooltip.content(floatBar.dom);\n\t\t\treturn {\n\t\t\t\tdom: toolbar.dom,\n\t\t\t\tupdate(view, prevState) {\n\t\t\t\t\tconst sel = view.state.selection;\n\t\t\t\t\tif (tooltip.visible && !sel.eq(prevState.selection) && sel.empty)\n\t\t\t\t\t\ttooltip.hide();\n\t\t\t\t\ttoolbar?.update(view, prevState);\n\t\t\t\t},\n\t\t\t\tdestroy() {\n\t\t\t\t\ttoolbar?.destroy();\n\t\t\t\t\tview.root.removeEventListener('mousedown', onMouseDown);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\treturn {\n\t\tplugin: toolbarPlugin,\n\t\tupdate: (view: EditorView, state: EditorState) =>\n\t\t\ttoolbar?.update(view, state),\n\t\tdestroy: () => {\n\t\t\ttoolbar?.destroy();\n\t\t\ttoolbar = null;\n\t\t}\n\t};\n};\n","'use strict';\n\nvar srender = require('../dist');\n\nObject.defineProperty(exports, 'jsx', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn srender.createElement;\n\t}\n});\nObject.defineProperty(exports, 'jsxDEV', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn srender.createElement;\n\t}\n});\nObject.defineProperty(exports, 'jsxs', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn srender.createElement;\n\t}\n});\nObject.defineProperty(exports, 'Fragment', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn srender.Fragment;\n\t}\n});\n//# sourceMappingURL=index.js.map\n","let iconType = 'round';\nexport const setCurrentIconType = (type) => (iconType = type);\nexport const getIconType = () => iconType;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nconst SvgArrowRight = (props) => (_jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"1em\", height: \"1em\", viewBox: \"0 0 24 24\", ...props, children: _jsx(\"path\", { d: \"m11.71 15.29 2.59-2.59a.996.996 0 0 0 0-1.41L11.71 8.7c-.63-.62-1.71-.18-1.71.71v5.17c0 .9 1.08 1.34 1.71.71\" }) }));\nexport default SvgArrowRight;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getIconType } from './vars';\nimport { useEffect, useState } from 'react';\nexport * from './svg';\nexport const SVGIcon = () => null;\nexport default ({ name, type, onClick, className, style = {} }) => {\n    type = type || getIconType();\n    const [isFontLoaded, setState] = useState(false);\n    useEffect(() => {\n        document.fonts.ready.then(() => setState(true));\n    }, []);\n    return (_jsx(\"i\", { style: style, onClick: onClick, className: `dUI-icons${type === 'filled' ? '' : '-' + type}${className ? ' ' + className : ''}`, children: isFontLoaded ? name : '' }));\n};\n","import { useLayoutEffect, useRef } from '@docucraft/srender';\nimport { Button } from '@docucraft/ui';\nimport Icon, { ArrowRight } from '@docucraft/icons';\nimport { HeadingView } from '.';\nexport type Level = 1 | 2 | 3 | 4 | 5 | 6;\nexport interface Props {\n\tview: HeadingView;\n\tlevel: Level;\n\tfold: boolean;\n\thidden: boolean;\n\tid: string;\n}\nconst Cmp = () => <Button>dxce</Button>;\nexport default ({ view, level, fold, hidden, id }: Props) => {\n\tconst $heading = useRef<HTMLElement>();\n\tconst $content = useRef<HTMLDivElement>();\n\tconst outlineTree = view.outlineTree;\n\tuseLayoutEffect(() => {\n\t\tif ($heading.current) view.dom = $heading.current;\n\t\tview.contentDOM = $content.current;\n\t}, []);\n\tconst Tag = `h${level}`;\n\n\treturn (\n\t\t<Tag ref={$heading} id={id} className={`heading ${hidden ? 'hidden' : ''}`}>\n\t\t\t<div className=\"heading-tools\" contenteditable=\"false\">\n\t\t\t\t<ArrowRight />\n\t\t\t\t<Icon\n\t\t\t\t\tclassName=\"toggle-button\"\n\t\t\t\t\tname={fold ? 'arrow_drop_down' : 'arrow_right'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst pos = view.getPos();\n\n\t\t\t\t\t\tlet tr = view.view.state.tr.setMeta('toggleHeading', {\n\t\t\t\t\t\t\thidden: !fold,\n\t\t\t\t\t\t\tpos\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (typeof pos !== 'undefined')\n\t\t\t\t\t\t\ttr = tr.setNodeMarkup(pos, null, {\n\t\t\t\t\t\t\t\t...view.node.attrs,\n\t\t\t\t\t\t\t\tfold: !fold\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tview.view.dispatch(tr);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{outlineTree && outlineTree.orderType ? (\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"list-symbol\"\n\t\t\t\t\tdata-type={outlineTree.orderType}\n\t\t\t\t\tdata-level={outlineTree.dataLevel(view.id)}\n\t\t\t\t\tcontenteditable=\"false\"\n\t\t\t\t>\n\t\t\t\t\t{outlineTree.calculateOrderNumber(view.id)}\n\t\t\t\t</span>\n\t\t\t) : null}\n\t\t\t<div ref={$content} className=\"heading-content\"></div>\n\t\t</Tag>\n\t);\n};\n","import { NodeViewConstructor } from 'prosemirror-view';\nimport { Node } from 'prosemirror-model';\nimport { assignUniqueId } from '../../utils';\nimport { OutlineTree, outlineTreeKey } from '../outline';\nimport Heading from './Heading';\nimport { BaseNodeView } from '../../utils/view';\nimport './style.scss';\n\nconst headingViewMap = new Map<string, HeadingView>();\n\nexport class HeadingView extends BaseNodeView {\n\tnode: Node;\n\tid: string;\n\toutlineTree?: OutlineTree;\n\tgetPos: () => number | undefined;\n\tconstructor(...args: Parameters<NodeViewConstructor>) {\n\t\tconst [node, view, getPos] = args;\n\t\tsuper(node, view);\n\t\tthis.node = node;\n\t\tthis.getPos = getPos;\n\t\tassignUniqueId(this.node);\n\t\tconst { id } = node.attrs;\n\t\tthis.id = id;\n\t\tthis.component = Heading;\n\t\tconst outlineTree = outlineTreeKey.getState(view.state);\n\t\tconst pos = getPos();\n\t\theadingViewMap.set(node.attrs.id, this);\n\t\tif (outlineTree && typeof pos !== 'undefined') {\n\t\t\toutlineTree.insertOrUpdate(this, view.state.doc.resolve(pos));\n\t\t\tthis.outlineTree = outlineTree;\n\t\t\tfor (const [key, nodeview] of headingViewMap) nodeview.updateSymbol();\n\t\t}\n\t}\n\n\tupdateSymbol() {\n\t\tthis.render({ view: this, ...this.node.attrs });\n\t}\n\n\tupdate(node: Node) {\n\t\tconsole.log('update');\n\n\t\tif (node.type !== this.node.type) return false;\n\t\tthis.node = node;\n\t\tthis.render({ view: this, ...node.attrs });\n\t\treturn true;\n\t}\n\tdestroy() {\n\t\tconsole.log('destroy');\n\t}\n}\n\nexport const HeadingViewConstructor: NodeViewConstructor = (...args) =>\n\tnew HeadingView(...args);\n","// view.ts\nimport { EditorView } from 'prosemirror-view';\nimport { EditorState, Plugin, PluginKey } from 'prosemirror-state';\nimport { schema } from './model';\nimport { keymap } from 'prosemirror-keymap';\nimport { history } from 'prosemirror-history';\nimport { CodeBlockViewConstructor } from './components/codeBlock/codeBlockView';\nimport { highlightCodePlugin } from './components/codeBlock/highlightCodePlugin';\nimport { myKeymap, buildInputRules } from './commands';\nimport { buildToolbar } from './components/toolBar';\nimport './themes/default.scss';\nimport { TaskItemViewConstructor, taskItem } from './components/taskList';\nimport { columnResizing, tableEditing } from './components/tables';\nimport { addView } from './utils';\nimport { mathRender } from './components/katex';\nimport { HeadingViewConstructor } from './components/heading';\nimport { outlineTreePlugin } from './components/outline';\n\nexport class Editor {\n\tconstructor(container?: HTMLElement) {\n\t\tif (container) this.setup(container);\n\t}\n\n\tsetup(container: HTMLElement) {}\n}\n\nexport const setupEditor = (el: HTMLElement | null) => {\n\tif (!el) return;\n\n\tconst toolbar = buildToolbar();\n\n\t// 根据 schema 定义，创建 editorState 数据实例\n\tconst editorState = EditorState.create({\n\t\tschema,\n\t\tplugins: [\n\t\t\tbuildInputRules(),\n\t\t\tkeymap(myKeymap),\n\t\t\thistory(),\n\t\t\ttoolbar.plugin,\n\t\t\thighlightCodePlugin(),\n\t\t\tcolumnResizing(),\n\t\t\ttableEditing({}),\n\t\t\tmathRender(),\n\t\t\toutlineTreePlugin\n\t\t]\n\t});\n\n\t// 创建编辑器视图实例，并挂在到 el 上\n\tconst editorView = new EditorView(el, {\n\t\tstate: editorState,\n\t\tdispatchTransaction(tr) {\n\t\t\tconst newState = editorView.state.apply(tr);\n\t\t\teditorView.updateState(newState);\n\t\t\ttoolbar.update(editorView, editorView.state);\n\t\t},\n\t\tnodeViews: {\n\t\t\tcodeBlock: CodeBlockViewConstructor,\n\t\t\ttaskItem: TaskItemViewConstructor,\n\t\t\theading: HeadingViewConstructor\n\t\t},\n\t\thandleClickOn(view, pos, node, nodePos, event, direct) {\n\t\t\tconst markType = view.state.schema.marks.link;\n\t\t\tconst $pos = view.state.doc.resolve(pos);\n\t\t\tconst marks = $pos.marks();\n\t\t\tif (marks.some((mark) => mark.type === markType)) {\n\t\t\t\tconst linkMark = marks.find((mark) => mark.type === markType);\n\t\t\t\tconst { href, target } = linkMark?.attrs || {};\n\t\t\t\tif (href) {\n\t\t\t\t\tif ($pos.end() === pos) return false;\n\t\t\t\t\twindow.open(href, target);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t});\n\taddView(editorView);\n\treturn () => {\n\t\teditorView.destroy();\n\t\ttoolbar.destroy();\n\t};\n};\n","export default () => 'welocome';\nexport { setupEditor } from './view';\n"],"names":["codeBlock","content","group","marks","code","defining","draggable","selectable","isolating","attrs","language","default","theme","showLineNumber","toDOM","node","parseDOM","tag","preserveWhitespace","getAttrs","domNode","getAttribute","createCodeBlockCmd","state","dispatch","view","lastLanguage","schema","cached","nodes","codeBlockNode","create","tr","replaceSelectionWith","scrollIntoView","createElement","options","arguments","length","undefined","arg","children","_len","rest","Array","_key","isArray","concat","dom","document","_i","_Object$keys","Object","keys","key","val","addEventListener","replace","setAttribute","fragment","createDocumentFragment","_iterator","_createForOfIteratorHelper","_step","s","n","done","child","value","append","err","e","f","appendChild","updateElement","_i2","_Object$keys2","this","BaseNodeView","_classCallCheck","_defineProperty","rootRender","createRoot","_createClass","render","props","h","component","ignoreMutation","mutation","contentDOM","target","update","decorations","innerDecorations","type","hidden","classList","add","remove","taskItem","checked","class","contenteditable","tabindex","_dom$querySelector","querySelector","taskList","createTaskList","_state$schema$nodes","createAndFill","TaskItemView","_BaseNodeView","_this","args","getPos","_callSuper","onchange","_e$target","setNodeAttribute","_inherits","_get","_getPrototypeOf","prototype","call","TaskItemViewConstructor","_len2","_key2","_construct","readFromCache","addToCache","WeakMap","cache","get","set","cacheSize","cachePos","i","TableMap","width","height","map","problems","rectBetween","a","b","_this$findCell","findCell","leftA","left","topA","top","rightA","right","bottomA","bottom","_this$findCell2","leftB","topB","rightB","bottomB","Math","min","max","pos","curPos","floor","j","RangeError","nextCell","axis","dir","_this$findCell3","colCount","cellsInRect","rect","result","seen","row","col","index","push","positionAt","table","rowStart","rowEnd","nodeSize","rowEndIndex","computeMap","spec","tableRole","name","findWidth","childCount","fill","mapPos","colWidths","rowNode","cellNode","_cellNode$attrs","colspan","rowspan","colwidth","start","w","colW","widthIndex","prev","expectedPos","missing","tableMap","badWidths","findBadColWidths","hasRowSpan","rowWidth","prevRow","cell","nodeAt","updated","colWidth","freshColWidth","unshift","slice","getCellAttrs","extraAttrs","widthAttr","widths","test","split","Number","prop","getter","getFromDOM","setCellAttrs","join","setter","setDOMAttr","tableNodes","cellAttributes","cellAttrs","tableGroup","tableRow","tableCell","cellContent","tableHeader","tableNodeTypes","role","tableEditingKey","PluginKey","addColspan","_objectSpread","splice","columnIsHeader","headerCell","isInTable","$head","selection","d","depth","pointsAtCell","$pos","parent","nodeAfter","inSameTable","$cellA","$cellB","end","tableStart","moved","resolve","removeColSpan","some","cellAround","before","cellNear","after","firstChild","doc","nodeBefore","lastChild","selectionCell","sel","$anchorCell","$headCell","$anchor","$cell","head","isEmpty","isNaN","CellSelection","_Selection","cells","filter","p","ranges","from","SelectionRange","size","$from","$to","eq","mapping","tableChanged","isRowSelection","rowSelection","isColSelection","colSelection","TextSelection","between","toJSON","anchor","anchorLeft","headLeft","anchorRight","headRight","anchorTop","headTop","anchorBottom","headBottom","forEachCell","rows","rowContent","cellRect","extraLeft","extraRight","JSON","stringify","copy","Fragment","Slice","getBookmark","CellBookmark","anchorRect","headRect","fromJSON","json","anchorCell","headCell","Selection","visible","jsonID","near","drawCellSelection","Decoration","isCellBoundarySelection","_ref","afterFrom","beforeTo","isTextSelectionAcrossCells","_ref2","fromCellBoundaryNode","toCellBoundaryNode","parentOffset","normalizeSelection","allowTableNodeSelection","normalize","NodeSelection","lastCell","setSelection","fixTablesKey","changedDescendants","old","cur","offset","oldSize","curSize","outer","scan","sameMarkup","nodesBetween","fixTables","oldState","check","fixTable","descendants","tablePos","mustAdd","prob","setNodeMarkup","first","last","side","insert","setMeta","createTable","columns","paragraph","tableNode","_","selectedRect","addColumn","refColumn","addColumnAtEnd","$start","removeColumn","mapStart","maps","delete","rowIsHeader","_table$nodeAt","addRow","_ref3","rowPos","refRow","_table$nodeAt2","addRowAtEnd","removeRow","_ref4","nextRow","mapFrom","Set","has","_table$nodeAt3","newPos","cellsOverlapRectangle","_ref5","indexTop","indexLeft","indexBottom","indexRight","c","isTextblock","mergeCells","empty","mergedPos","mergedCell","cellPos","mapped","replaceWith","tableClassName","TableView","cellMinWidth","console","log","event","clientX","clientY","mousePos","posAtCoords","_map$findCell","decs","hoverDecos","colgroup","updateColumnsOnResize","handleMouseOver","handleMouseLeave","destroy","removeEventListener","className","record","contains","selectNode","overrideCol","overrideValue","totalWidth","fixedWidth","nextDOM","hasWidth","cssWidth","style","nextSibling","_nextDOM$parentNode","parentNode","removeChild","minWidth","TableViewConstructor","addToolkit","_loop","widget","onclick","_loop2","columnResizingPluginKey","columnResizing","_ref$handleWidth","handleWidth","_ref$cellMinWidth","_ref$View","View","_ref$lastColumnResiza","lastColumnResizable","plugin","Plugin","init","nodeViews","ResizeState","apply","attributes","pluginState","getState","activeHandle","handleDOMEvents","mousemove","handleMouseMove","mouseleave","mousedown","handleMouseDown","handleDecorations","dragging","action","getMeta","setHandle","setDragging","docChanged","handle","domCellAround","_target$getBoundingCl","getBoundingClientRect","edgeCell","updateHandle","_view$dom$ownerDocume","win","ownerDocument","defaultView","window","currentColWidth","startX","startWidth","finish","move","updateColumnWidth","draggedWidth","which","dragged","displayColumnWidth","preventDefault","domAtPos","childNodes","domWidth","offsetWidth","parts","nodeName","found","indexOf","mapIndex","zeroes","DecorationSet","pastedCells","openStart","openEnd","fitSlice","ensureRectangular","_row$child$attrs","r","nodeType","Transform","clipCells","newWidth","newHeight","added","newRows","frag","createChecked","source","growTable","types","emptyHead","header","emptyRow","isolateHorizontal","cellTop","cellLeft","isolateVertical","updatePos","insertCells","Error","recomp","to","deleteCellSelection","baseContent","handleKeyDown","keydownHandler","ArrowLeft","arrow","ArrowRight","ArrowUp","ArrowDown","shiftArrow","Backspace","Delete","maybeSetSelection","atEndOfCell","$next","newSel","cellSel","handlePaste","startEvent","_cellUnderMouse","ctrlKey","metaKey","startDOMCell","domInCell","cellUnderMouse","shiftKey","setCellSelection","_tableEditingKey$getS","starting","x1","y1","stop","_tableEditingKey$getS2","_event","x2","y2","abs","newSelection","focus","_tableDOM$firstChild","tableDOM","nodeDOM","root","startPos","_tableEditingKey$getS3","blur","indexAfter","dirStr","endOfTextblock","handleTripleClick","tableEditing","_ref$allowTableNodeSe","getDecorations","st","_ref2$set","_tr$mapping$mapResult","mapResult","deleted","_this$getState","appendTransaction","newState","mathNodeSpec","inline","atom","formula","textContent","renderMath","span","katex","mathRender","math","newNode","insertMath","createNodeSpec","config","res","_res","_slicedToArray","text","blockQuote","heading","level","id","fold","ordered_list","order","_dom$getAttribute","hasAttribute","bullet_list","list_item","horizontalRule","image","src","alt","title","_node$attrs","hardBreak","bold","fontWeight","italic","fontStyle","link","href","ref","mark","_mark$attrs","underline","linethrough","color","fontSize","backgroundColor","_mark$attrs2","Schema","CodeBlockView","crel","menu","renderComponent","CodeBlockViewConstructor","HighlightRenderer","tree","blockStartPos","currentPos","classPrefix","walk","addText","openNode","scope","renderInfo","newRenderInfo","classNames","item","trackingRenderInfoStack","closeNode","pop","finishedRenderInfos","info","highlightCodePluginKey","findNodesByType","tempTypes","Boolean","includes","highlightCodePlugin","getDecs","blocks","forEach","block","hljs","getLanguage","highlightResult","highlight","highlightAuto","emitter","_emitter","renderer","blockDecorations","instance","uniqueIdCounter","generateUniqueId","base36","toString","randomPart","random","substring","assignUniqueId","convertToChineseNumber","num","units","digits","numStr","zeroFlag","digit","parseInt","unitPos","convertToAlphabet","String","fromCharCode","convertToRoman","romanNumerals","entries","reverse","_step$value","numeral","OutlineNode","OutlineTree","Map","setOrderType","orderType","updateHeading","insertOrUpdate","outlineNode","findNodeById","cursor","count","lastLevel","Infinity","_olNode$parent","olNode","l","_olNode$parent2","removeById","_outlineNode$parent","_toConsumableArray","_iterator2","_step2","_outlineNode$node","_step2$value","updateSymbol","dataLevel","current","renderOrder1","nums","renderOrder2","_current$parent","renderOrder3","_current$parent2","calculateOrderNumber","outlineTreeKey","outlineTreePlugin","outlineTree","steps","step","ReplaceStep","transactions","_iterator3","_step3","transaction","data","headingRules","textblockTypeInputRule","listRules","wrappingInputRule","match","javascript","typescript","rust","golang","python","ruby","php","html","css","markdown","java","js","ts","py","go","rs","plaintext","mapTolang","lang","rules","InputRule","outineTree","listSymbol","buildInputRules","inputRules","splitListItem","itemTypes","itemAttrs","isBlock","sameParent","grandParent","liCount","wrap","depthBefore","depthAfter","nextType","contentMatchAt","defaultType","canSplit","myKeymap","baseKeymap","Enter","chainCommands","newlineInCode","createParagraphNear","liftEmptyBlock","splitBlock","undo","redo","Tab","_state$selection","insertText","MenuItem","btn","handler","innerText","label","_this$spec$update","_this$spec","MenuGroup","menus","menuSpec","setMark","markType","_view$state","addMark","unSetMark","_view$state2","removeMark","getMarkType","isMarkActive","_view$state3","realMarkType","isActive","isInline","isInSet","toggleMark","applyBold","applyUnderline","applyLinethrough","applylink","url","applyStyle","isText","existingMark","find","applyColor","FloatBar","Tooltip","tooltip","container","body","stopPropagation","replaceChildren","showAt","visibility","opacity","_this$tooltip$getBoun","show","innerHTML","_this$tooltip$getBoun2","hide","_this$tooltip$parentN","ToolBar","groups","menuGroupSpec","menuGroup","insertBefore","_this$dom$parentNode","buildToolbar","toolbar","toolbarPlugin","_view","_x","prompt","onMouseDown","_ref6","onMouseup","_ref7","coordsAtPos","floatBar","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","prevState","_toolbar","_toolbar2","_toolbar3","_toolbar4","require$$0","_jsx","useState","useEffect","$heading","useRef","$content","useLayoutEffect","Tag","_jsxs","Icon","onClick","headingViewMap","HeadingView","Heading","nodeview","HeadingViewConstructor","setupEditor","el","editorState","EditorState","plugins","keymap","history","editorView","EditorView","dispatchTransaction","updateState","handleClickOn","nodePos","direct","linkMark","open"],"mappings":"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"}