{"version":3,"file":"index.mjs","sources":["../src/components/codeBlock/index.ts","../src/createElement.ts","../../srender/dist/index.js","../src/utils/view.ts","../src/components/taskList/index.ts","../src/components/tables/tableMap.ts","../src/components/tables/schema.ts","../src/components/tables/utils.ts","../src/components/tables/cellSelection.ts","../src/components/tables/fixtables.ts","../src/components/tables/commands.ts","../src/components/tables/tableView.ts","../src/components/tables/columnresizing.ts","../src/components/tables/copypaste.ts","../src/components/tables/input.ts","../src/components/tables/index.ts","../src/components/katex/index.ts","../src/model.ts","../src/components/codeBlock/codeBlockView.ts","../src/components/codeBlock/highlightRenderer.ts","../src/components/codeBlock/highlightCodePlugin.ts","../src/utils/index.ts","../src/components/outline/index.ts","../src/commands/inputRules.ts","../src/commands/keymap.ts","../src/components/toolBar/menuItem.ts","../src/components/toolBar/menuGroup.ts","../src/components/toolBar/commands.ts","../src/components/toolBar/floatBar.ts","../src/components/tooltip/index.ts","../src/components/toolBar/index.ts","../../srender/jsx-runtime/index.js","../../Icons/vars.js","../../Icons/svg/ArrowRight.js","../../Icons/index.js","../src/components/heading/Heading.tsx","../src/components/heading/index.ts","../src/view.ts","../src/index.ts"],"sourcesContent":["import { NodeSpec } from 'prosemirror-model';\nimport { Command } from 'prosemirror-state';\n\nexport const codeBlock: NodeSpec = {\n  content: 'text*',\n  group: 'block',\n  marks: '',\n  code: true,\n  defining: true,\n  draggable: false,\n  selectable: true,\n  isolating: true,\n\n  attrs: {\n    language: {\n      default: 'plaintext',\n    },\n    theme: {\n      default: 'dark',\n    },\n    showLineNumber: {\n      default: true,\n    },\n  },\n\n  toDOM(node) {\n    return [\n      'pre',\n      {\n        'data-lanaguage': node.attrs.language,\n        'data-theme': node.attrs.theme,\n        'data-show-line-number': node.attrs.showLineNumber,\n        'data-node-type': 'code_block',\n      },\n      ['code', 0],\n    ];\n  },\n  parseDOM: [\n    {\n      tag: 'pre',\n      preserveWhitespace: 'full',\n      getAttrs(domNode: HTMLElement) {\n        return {\n          language: domNode.getAttribute('data-language'),\n          theme: domNode.getAttribute('data-theme'),\n          showLineNumber: domNode.getAttribute('data-show-line-number'),\n        };\n      },\n    },\n  ],\n};\n\nexport const createCodeBlockCmd: Command = (state, dispatch, view) => {\n  const lastLanguage = state.schema.cached.lastLanguage || 'plaintext';\n  const { codeBlock } = state.schema.nodes;\n  const codeBlockNode = codeBlock.create({ language: lastLanguage });\n  let tr = state.tr;\n  tr.replaceSelectionWith(codeBlockNode);\n  tr.scrollIntoView();\n\n  if (dispatch) {\n    dispatch(tr);\n    return true;\n  }\n\n  return false;\n};\n","interface Spec {\n  [key: string]: undefined | null | boolean | string | ((e: Event) => void);\n}\ntype DOMNode = HTMLElement | string;\ntype TagName = keyof HTMLElementTagNameMap;\n\nfunction createElement<T extends TagName>(\n  tag: T,\n  options: Spec = {},\n  arg?: DOMNode | DOMNode[],\n  ...rest: DOMNode[]\n): HTMLElementTagNameMap[T] {\n  let children: DOMNode[] = [];\n  if (Array.isArray(arg)) children = arg;\n  else children = arg ? [arg, ...rest] : [];\n\n  const dom = document.createElement(tag);\n  for (const key of Object.keys(options)) {\n    const val = options[key];\n    if (val === null || val === undefined) continue;\n    if (typeof val === 'function') {\n      dom.addEventListener(key.replace('on', ''), val);\n    } else {\n      dom.setAttribute(key, val + '');\n    }\n  }\n  const fragment = document.createDocumentFragment();\n  for (const child of children) {\n    fragment.append(child);\n  }\n  dom.appendChild(fragment);\n  return dom;\n}\n\nexport default createElement;\n\nexport const updateElement = (\n  dom: HTMLElement,\n  attrs: Record<string, string>\n) => {\n  for (const key of Object.keys(attrs)) {\n    dom.setAttribute(key, attrs[key]);\n  }\n};\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.srender = {}));\n})(this, (function (exports) { 'use strict';\n\n  function _arrayLikeToArray(r, a) {\n    (null == a || a > r.length) && (a = r.length);\n    for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n    return n;\n  }\n  function _arrayWithHoles(r) {\n    if (Array.isArray(r)) return r;\n  }\n  function _classCallCheck(a, n) {\n    if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n  function _defineProperties(e, r) {\n    for (var t = 0; t < r.length; t++) {\n      var o = r[t];\n      o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n    }\n  }\n  function _createClass(e, r, t) {\n    return r && _defineProperties(e.prototype, r), Object.defineProperty(e, \"prototype\", {\n      writable: !1\n    }), e;\n  }\n  function _createForOfIteratorHelper(r, e) {\n    var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n    if (!t) {\n      if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e  ) {\n        t && (r = t);\n        var n = 0,\n          F = function () {};\n        return {\n          s: F,\n          n: function () {\n            return n >= r.length ? {\n              done: !0\n            } : {\n              done: !1,\n              value: r[n++]\n            };\n          },\n          e: function (r) {\n            throw r;\n          },\n          f: F\n        };\n      }\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n    var o,\n      a = !0,\n      u = !1;\n    return {\n      s: function () {\n        t = t.call(r);\n      },\n      n: function () {\n        var r = t.next();\n        return a = r.done, r;\n      },\n      e: function (r) {\n        u = !0, o = r;\n      },\n      f: function () {\n        try {\n          a || null == t.return || t.return();\n        } finally {\n          if (u) throw o;\n        }\n      }\n    };\n  }\n  function _defineProperty(e, r, t) {\n    return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n      value: t,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[r] = t, e;\n  }\n  function _iterableToArrayLimit(r, l) {\n    var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n    if (null != t) {\n      var e,\n        n,\n        i,\n        u,\n        a = [],\n        f = !0,\n        o = !1;\n      try {\n        if (i = (t = t.call(r)).next, 0 === l) ; else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n      } catch (r) {\n        o = !0, n = r;\n      } finally {\n        try {\n          if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;\n        } finally {\n          if (o) throw n;\n        }\n      }\n      return a;\n    }\n  }\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  function _slicedToArray(r, e) {\n    return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _unsupportedIterableToArray(r, a) {\n    if (r) {\n      if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n      var t = {}.toString.call(r).slice(8, -1);\n      return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n    }\n  }\n\n  var Component = /*#__PURE__*/function () {\n    function Component(props, context) {\n      _classCallCheck(this, Component);\n      _defineProperty(this, \"props\", void 0);\n      _defineProperty(this, \"state\", void 0);\n      _defineProperty(this, \"context\", void 0);\n      _defineProperty(this, \"__fiber\", void 0);\n      _defineProperty(this, \"_snapshot\", void 0);\n      this.props = props || {};\n      this.context = context;\n    }\n    return _createClass(Component, [{\n      key: \"shouldComponentUpdate\",\n      value: function shouldComponentUpdate(props, state, nextContext) {\n        return true;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {}\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(props, state, snapshot) {}\n    }, {\n      key: \"getSnapshotBeforeUpdate\",\n      value: function getSnapshotBeforeUpdate(prevProps, prevState) {}\n    }, {\n      key: \"componentDidCatch\",\n      value: function componentDidCatch(error, errorInfo) {}\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {}\n    }, {\n      key: \"destory\",\n      value: function destory() {\n        this.componentWillUnmount();\n      }\n    }, {\n      key: \"setState\",\n      value: function setState(state) {\n        // this.__fiber!.partialState = state;\n        // batchUpdate({ from: ITag.CLASS_COMPONENT, fiber: this.__fiber! });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        throw new Error('render method should be implemented');\n      }\n    }]);\n  }();\n  function createInstance(fiber) {\n    var _Ctor$contextType;\n    var Ctor = fiber.type;\n    var instance = new Ctor(fiber.pendingProps, (_Ctor$contextType = Ctor.contextType) === null || _Ctor$contextType === void 0 ? void 0 : _Ctor$contextType.currentValue);\n    instance.__fiber = fiber;\n    return instance;\n  }\n\n  var FiberTag;\n  (function (FiberTag) {\n    FiberTag[\"HostComponent\"] = \"Host\";\n    FiberTag[\"HostText\"] = \"HostText\";\n    FiberTag[\"ClassComponent\"] = \"Class\";\n    FiberTag[\"FunctionComponent\"] = \"Function\";\n    FiberTag[\"HostRoot\"] = \"Root\";\n    FiberTag[\"Fragment\"] = \"Fragment\";\n    FiberTag[\"Suspense\"] = \"Suspense\";\n    FiberTag[\"Offscreen\"] = \"Offscreen\";\n    FiberTag[\"ContextProvider\"] = \"ContextProvider\";\n    FiberTag[\"Unknown\"] = \"Unknown\";\n  })(FiberTag || (FiberTag = {}));\n  var FiberFlags;\n  (function (FiberFlags) {\n    FiberFlags[FiberFlags[\"NONE\"] = 0] = \"NONE\";\n    FiberFlags[FiberFlags[\"ShouldCapture\"] = 1] = \"ShouldCapture\";\n    FiberFlags[FiberFlags[\"DidCapture\"] = 2] = \"DidCapture\";\n    FiberFlags[FiberFlags[\"PerformWork\"] = 4] = \"PerformWork\";\n    FiberFlags[FiberFlags[\"Placement\"] = 8] = \"Placement\";\n    FiberFlags[FiberFlags[\"Deletion\"] = 16] = \"Deletion\";\n    FiberFlags[FiberFlags[\"Update\"] = 32] = \"Update\";\n  })(FiberFlags || (FiberFlags = {}));\n  var UpdateState;\n  (function (UpdateState) {\n    UpdateState[UpdateState[\"replaceState\"] = 1] = \"replaceState\";\n    UpdateState[UpdateState[\"updateState\"] = 2] = \"updateState\";\n    UpdateState[UpdateState[\"forceUpdate\"] = 3] = \"forceUpdate\";\n    UpdateState[UpdateState[\"captureState\"] = 4] = \"captureState\";\n  })(UpdateState || (UpdateState = {}));\n  var Mode;\n  (function (Mode) {\n    Mode[Mode[\"NoMode\"] = 0] = \"NoMode\";\n    Mode[Mode[\"Concurrent\"] = 1] = \"Concurrent\";\n  })(Mode || (Mode = {}));\n\n  var ITag;\n  (function (ITag) {\n    ITag[\"HOST_COMPONENT\"] = \"Host\";\n    ITag[\"HOST_TEXT\"] = \"HostText\";\n    ITag[\"CLASS_COMPONENT\"] = \"Class\";\n    ITag[\"FUNCTION_COMPONENT\"] = \"Function\";\n    ITag[\"HOST_ROOT\"] = \"Root\";\n    ITag[\"FRAGMENT\"] = \"Fragment\";\n    ITag[\"SUSPENSE\"] = \"Suspense\";\n    ITag[\"OFFSCREEN\"] = \"Offscreen\";\n    ITag[\"CONTEXT_PROVIDER\"] = \"ContextProvider\";\n    ITag[\"UNKNOWN\"] = \"Unknown\";\n  })(ITag || (ITag = {}));\n  var Effect;\n  (function (Effect) {\n    Effect[Effect[\"NOTHING\"] = 0] = \"NOTHING\";\n    Effect[Effect[\"PLACEMENT\"] = 1] = \"PLACEMENT\";\n    Effect[Effect[\"DELETION\"] = 2] = \"DELETION\";\n    Effect[Effect[\"UPDATE\"] = 4] = \"UPDATE\";\n  })(Effect || (Effect = {}));\n  var Flags;\n  (function (Flags) {\n    Flags[Flags[\"NONE\"] = 0] = \"NONE\";\n    Flags[Flags[\"ShouldCapture\"] = 1] = \"ShouldCapture\";\n    Flags[Flags[\"DidCapture\"] = 2] = \"DidCapture\";\n  })(Flags || (Flags = {}));\n\n  function adjustHeap(list, parent, end, compare) {\n    if (parent < 0) return;\n    for (var i = 2 * parent + 1; i < end; i = i * 2 + 1) {\n      if (i + 1 < end && compare(list[i], list[i + 1]) <= 0) i++;\n      if (compare(list[i], list[parent]) > 0) swap(list, i, parent);\n      parent = i;\n    }\n  }\n  function swap(list, left, right) {\n    var tmp = list[left];\n    list[left] = list[right];\n    list[right] = tmp;\n  }\n  function heapify(list, compare) {\n    var len = list.length;\n    var index = Math.floor(len / 2) - 1;\n    for (var i = index; i >= 0; i--) adjustHeap(list, i, len, compare);\n    return list;\n  }\n  var TaskQueue = /*#__PURE__*/function () {\n    function TaskQueue() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        compare = _ref.compare;\n      _classCallCheck(this, TaskQueue);\n      _defineProperty(this, \"list\", void 0);\n      _defineProperty(this, \"compare\", void 0);\n      this.list = [];\n      this.compare = compare || TaskQueue.defaultCompareFn;\n    }\n    return _createClass(TaskQueue, [{\n      key: \"push\",\n      value: function push(item) {\n        var list = this.list,\n          compare = this.compare;\n        list.push(item);\n        var len = list.length;\n        var i = len - 1;\n        do {\n          i = Math.floor((i + 1) / 2) - 1;\n          adjustHeap(list, i, len, compare);\n        } while (i > 0);\n      }\n    }, {\n      key: \"shift\",\n      value: function shift() {\n        var list = this.list,\n          compare = this.compare;\n        var item = list.shift();\n        heapify(list, compare);\n        return item;\n      }\n    }, {\n      key: \"pop\",\n      value: function pop() {\n        return this.list.pop();\n      }\n    }, {\n      key: \"peek\",\n      value: function peek() {\n        return this.list[0];\n      }\n    }]);\n  }();\n  _defineProperty(TaskQueue, \"defaultCompareFn\", function (a, b) {\n    return b.sortIndex - a.sortIndex;\n  });\n\n  var ImmediatePriority = 1;\n  var UserBlockingPriority = 2;\n  var NormalPriority = 3;\n  var LowPriority = 4;\n  var IdlePriority = 5;\n  var maxSigned31BitInt = 1073741823;\n  var IMMEDIATE_PRIORITY_TIMEOUT = -1;\n  var USER_BLOCKING_PRIORITY_TIMEOUT = 250;\n  var NORMAL_PRIORITY_TIMEOUT = 5000;\n  var LOW_PRIORITY_TIMEOUT = 10000;\n  var IDLE_PRIORITY_TIMEOUT = maxSigned31BitInt;\n  var taskQueue = new TaskQueue();\n  var timerQueue = new TaskQueue();\n  var currentTask = null;\n  var isPerformingWork = false;\n  var isHostCallbackScheduled = false;\n  var isHostTimeoutScheduled = false;\n  var taskIdCounter = 0;\n  var deadline = 0;\n  var yieldInterval = 5;\n  var requestHostCallback;\n  var scheduledHostCallback = null;\n  function timeoutForPriorityLevel(priorityLevel) {\n    switch (priorityLevel) {\n      case ImmediatePriority:\n        return IMMEDIATE_PRIORITY_TIMEOUT;\n      case UserBlockingPriority:\n        return USER_BLOCKING_PRIORITY_TIMEOUT;\n      case IdlePriority:\n        return IDLE_PRIORITY_TIMEOUT;\n      case LowPriority:\n        return LOW_PRIORITY_TIMEOUT;\n      case NormalPriority:\n      default:\n        return NORMAL_PRIORITY_TIMEOUT;\n    }\n  }\n  var getCurrentTime = function () {\n    var initialTime = Date.now();\n    var hasPerformanceNow = (typeof performance === \"undefined\" ? \"undefined\" : _typeof(performance)) === 'object' && typeof performance.now === 'function';\n    if (hasPerformanceNow) return function () {\n      return performance.now();\n    };else return function () {\n      return Date.now() - initialTime;\n    };\n  }();\n  function push(queue, task) {\n    queue.push(task);\n  }\n  function peek(queue) {\n    return queue.peek();\n  }\n  function shift(queue) {\n    return queue.shift();\n  }\n  function workLoop$1(hasTimeRemaining, initialTime) {\n    var currentTime = getCurrentTime();\n    advanceTimers(currentTime);\n    currentTask = peek(taskQueue);\n    while (currentTask) {\n      var _currentTask = currentTask,\n        callback = _currentTask.callback;\n      if (callback) {\n        currentTask.callback = null;\n        currentTask.priorityLevel;\n        var didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n        var continuationCallback = callback(didUserCallbackTimeout);\n        currentTime = getCurrentTime();\n        if (typeof continuationCallback === 'function') {\n          currentTask.callback = continuationCallback;\n          return true;\n        } else if (currentTask === peek(taskQueue)) shift(taskQueue);\n        advanceTimers(currentTime);\n      } else {\n        shift(taskQueue);\n      }\n      currentTask = peek(taskQueue);\n    }\n    if (currentTask) return true;else {\n      var firstTimer = peek(timerQueue);\n      if (firstTimer) requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n      return false;\n    }\n  }\n  function flushWork(hasTimeRemaining, initialTime) {\n    isHostCallbackScheduled = false;\n    if (isHostTimeoutScheduled) {\n      isHostTimeoutScheduled = false;\n      cancelHostTimeout();\n    }\n    isPerformingWork = true;\n    var res = workLoop$1();\n    currentTask = null;\n    isPerformingWork = false;\n    return res;\n  }\n  function scheduleCallback(priorityLevel, callback, options) {\n    var currentTime = getCurrentTime();\n    var startTime,\n      delay = 0;\n    if (_typeof(options) === 'object' && options !== null && typeof delay === 'number' && delay > 0) {\n      delay = options.delay;\n    }\n    startTime = currentTime + delay;\n    var timeout = timeoutForPriorityLevel(priorityLevel);\n    var expirationTime = startTime + timeout;\n    var newTask = {\n      id: taskIdCounter++,\n      callback: callback,\n      priorityLevel: priorityLevel,\n      startTime: startTime,\n      expirationTime: expirationTime,\n      sortIndex: -1\n    };\n    if (startTime > currentTime) {\n      newTask.sortIndex = startTime;\n      push(timerQueue, newTask);\n      if (!peek(taskQueue) && newTask === peek(timerQueue)) {\n        if (isHostTimeoutScheduled) cancelHostTimeout();else isHostTimeoutScheduled = true;\n        requestHostTimeout(handleTimeout, startTime - currentTime);\n      }\n    } else {\n      newTask.sortIndex = expirationTime;\n      push(taskQueue, newTask);\n      if (!isHostCallbackScheduled && !isPerformingWork) {\n        isHostCallbackScheduled = true;\n        requestHostCallback(flushWork);\n      }\n    }\n    return newTask;\n  }\n  function shouldYieldToHost() {\n    var res = getCurrentTime() - deadline > 0;\n    return res;\n  }\n  var shouldYield = shouldYieldToHost;\n  var channel = new MessageChannel();\n  var port = channel.port2;\n  var performWorkUntilDeadline = function performWorkUntilDeadline() {\n    if (scheduledHostCallback) {\n      var currentTime = getCurrentTime();\n      deadline = currentTime + yieldInterval;\n      var hasTimeRemaining = true;\n      var hasMoreWork = scheduledHostCallback(hasTimeRemaining, currentTime);\n      if (!hasMoreWork) {\n        isMessageLoopRunning = false;\n        scheduledHostCallback = null;\n      } else {\n        port.postMessage(null);\n      }\n    } else {\n      isMessageLoopRunning = false;\n    }\n  };\n  channel.port1.onmessage = performWorkUntilDeadline;\n  var isMessageLoopRunning = false;\n  requestHostCallback = function requestHostCallback(callback) {\n    scheduledHostCallback = callback;\n    if (!isMessageLoopRunning) {\n      isMessageLoopRunning = true;\n      port.postMessage(null);\n    }\n  };\n  var taskTimeoutID;\n  function requestHostTimeout(callback, ms) {\n    taskTimeoutID = setTimeout(function () {\n      return callback(getCurrentTime());\n    }, ms);\n  }\n  function cancelHostTimeout() {\n    clearTimeout(taskTimeoutID);\n    taskTimeoutID = -1;\n  }\n  function handleTimeout(currentTime) {\n    isHostTimeoutScheduled = false;\n    advanceTimers(currentTime);\n    if (!isHostCallbackScheduled) {\n      if (peek(taskQueue)) {\n        isHostCallbackScheduled = true;\n        requestHostCallback(flushWork);\n      } else {\n        var firstTimer = peek(timerQueue);\n        if (firstTimer) requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n      }\n    }\n  }\n  function advanceTimers(currentTime) {\n    var timer = peek(timerQueue);\n    while (timer) {\n      if (!timer.callback) {\n        shift(timerQueue);\n      } else if (timer.startTime <= currentTime) {\n        shift(timerQueue);\n        timer.sortIndex = timer.expirationTime;\n        push(taskQueue, timer);\n      } else return;\n      timer = peek(timerQueue);\n    }\n  }\n\n  // lane使用31位二进制来表示优先级车道共31条, 位数越小（1的位置越靠右）表示优先级越高\n  // 没有优先级\n  var NoLanes = /*                        */0;\n  var NoLane = /*                          */0;\n  // 同步优先级，表示同步的任务一次只能执行一个，例如：用户的交互事件产生的更新任务\n  var SyncLane = /*                        */1;\n  var InputContinuousLane = /*            */4;\n  var TransitionLanes = /*                       */4194240;\n  var TransitionLane1 = /*                        */64;\n  var NonIdleLanes = /*                                 */134217727;\n  var PingLane = /*                             */268435456;\n  var DiscreteEventPriority = SyncLane;\n  var ContinuousEventPriority = InputContinuousLane;\n\n  function isSubsetOfLanes(set, subset) {\n    return (set & subset) === subset;\n  }\n  function mergeLanes(a, b) {\n    return a | b;\n  }\n  function intersectLanes(a, b) {\n    return a & b;\n  }\n  function getHighestPriorityLane(lanes) {\n    return lanes & -lanes;\n  }\n  var currentIndex = 0;\n  var batchTransitionLane = NoLane;\n  function getTransitionLane() {\n    var res = TransitionLane1 << currentIndex;\n    currentIndex = (currentIndex + 1) % 16;\n    return res;\n  }\n  function requestUpdateLane() {\n    if (currentBatchConfig.transition) {\n      batchTransitionLane = batchTransitionLane === NoLane || !isBatchingUpdates ? getTransitionLane() : batchTransitionLane;\n      return batchTransitionLane;\n    }\n    return SyncLane;\n  }\n  function LaneToPriority(lane) {\n    if (lane <= DiscreteEventPriority) return ImmediatePriority;\n    if (lane <= ContinuousEventPriority) return UserBlockingPriority;\n    if (lane & NonIdleLanes) return NormalPriority;\n    return IdlePriority;\n  }\n\n  function createFiberNode(tag, pendingProps, options) {\n    var key = pendingProps.key,\n      ref = pendingProps.ref;\n    var parent = options === null || options === void 0 ? void 0 : options.parent;\n    var base = {\n      tag: tag,\n      key: key,\n      mode: parent ? parent.mode : Mode.NoMode,\n      pendingProps: pendingProps,\n      type: null,\n      stateNode: null,\n      parent: null,\n      child: null,\n      sibling: null,\n      index: 0,\n      ref: ref,\n      memoizedProps: null,\n      memoizedState: null,\n      updateQueue: null,\n      flags: FiberFlags.Placement,\n      lanes: NoLanes,\n      childLanes: NoLanes,\n      alternate: null,\n      effects: null\n    };\n    return Object.assign(base, {}, options);\n  }\n  function cloneFiberNode(oldFiber, pendingProps) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var key = pendingProps.key,\n      ref = pendingProps.ref;\n    var child = options.child,\n      sibling = options.sibling;\n    if (!child) options.child = null;\n    if (!sibling) options.sibling = null;\n    var fiber = Object.assign({\n      key: key,\n      ref: ref\n    }, oldFiber, options, pendingProps ? {\n      pendingProps: pendingProps\n    } : {});\n    fiber.effects = [];\n    fiber.flags = FiberFlags.Update;\n    return fiber;\n  }\n\n  var resetHandlers = [];\n  function resetContext() {\n    var _iterator = _createForOfIteratorHelper(resetHandlers),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var fn = _step.value;\n        fn();\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  var createContext = function createContext(initialValue) {\n    var $currentValue = createRef(initialValue);\n    var stackValue = [initialValue];\n    var Provider = function Provider(_ref) {\n      var value = _ref.value,\n        children = _ref.children;\n      stackValue.push(value);\n      return children;\n    };\n    resetHandlers.push(function () {\n      return stackValue.length = 1;\n    });\n    var context = {\n      get currentValue() {\n        return stackValue[stackValue.length - 1];\n      },\n      pop: function pop() {\n        stackValue.pop();\n      },\n      Provider: Provider,\n      Consumer: function Consumer(_ref2) {\n        var children = _ref2.children;\n        return children($currentValue.current);\n      }\n    };\n    Provider._context = context;\n    Provider.displayType = ContextProvider;\n    return context;\n  };\n  function popProvider(context) {\n    context.pop();\n  }\n\n  function markCurrentFiber(wip, old) {\n    if (wip) wip.flags |= FiberFlags.PerformWork;\n    if (old) old.flags &= ~FiberFlags.PerformWork;\n  }\n  function cloneChildren(wipFiber) {\n    var oldFiber = wipFiber.alternate;\n    if (!oldFiber.child) return;\n    var oldChild = oldFiber.child;\n    var prevChild = null;\n    for (var i = 0; oldChild; i++, oldChild = oldChild.sibling) {\n      var newChild = cloneFiberNode(oldChild, oldChild.pendingProps, {\n        parent: wipFiber,\n        index: i,\n        alternate: oldChild\n      });\n      markCurrentFiber(newChild, oldChild);\n      if (prevChild) prevChild.sibling = newChild;else wipFiber.child = newChild;\n      prevChild = newChild;\n      oldChild.alternate = null;\n    }\n  }\n  function reconcileChildrenArray(wipFiber, newChildElements, lanes) {\n    var elements = arrify(newChildElements);\n    var needUpdate = !!intersectLanes(wipFiber.lanes, lanes);\n    var oldFiber = wipFiber.alternate ? wipFiber.alternate.child : null;\n    var newFiber = null;\n    var map = new Map();\n    for (var node = oldFiber, i = 0; node; node = node.sibling, i++) {\n      var key = node.key || node.index;\n      map.set(key, node);\n    }\n    for (var index = 0; index < elements.length; index++) {\n      var prevFiber = newFiber;\n      var element = elements[index];\n      var _key = element ? element.props.key || index : null;\n      var _oldFiber = map.get(_key);\n      if (_oldFiber && _oldFiber.type === element.type) {\n        newFiber = cloneFiberNode(_oldFiber, element.props, {\n          parent: wipFiber,\n          alternate: _oldFiber,\n          memoizedProps: _oldFiber.pendingProps,\n          index: index,\n          lanes: needUpdate ? mergeLanes(lanes, _oldFiber.lanes) : _oldFiber.lanes\n        });\n        map.delete(_key);\n      } else {\n        newFiber = createFiberNode(getTag(element), element.props, {\n          parent: wipFiber,\n          index: index,\n          memoizedProps: element.props,\n          type: element.type,\n          lanes: lanes\n        });\n      }\n      // markCurrentFiber(newFiber, oldFiber || null);\n      if (index === 0) {\n        wipFiber.child = newFiber;\n      } else if (prevFiber) prevFiber.sibling = newFiber;\n    }\n    var _iterator = _createForOfIteratorHelper(map.values()),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _node = _step.value;\n        deleteChild(_node, wipFiber);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    map.clear();\n  }\n  function deleteChild(fiber, parent) {\n    fiber.flags |= FiberFlags.Deletion;\n    parent = parent || fiber.parent;\n    if (parent) {\n      parent.effects = parent.effects || [];\n      parent.effects.push(fiber);\n    }\n  }\n  var suspenseHandlers = [];\n  function getSuspenseHander() {\n    return suspenseHandlers[suspenseHandlers.length - 1];\n  }\n  function popSuspenseHander() {\n    suspenseHandlers.pop();\n  }\n  function pushSuspenseHander(fiber) {\n    suspenseHandlers.push(fiber);\n  }\n  function clearSuspenseHander() {\n    suspenseHandlers.length = 0;\n  }\n  function hideAllChildren(fiber) {\n    var node = fiber.child;\n    while (node) {\n      console.log(node.stateNode, 'node');\n      if (node.tag === FiberTag.HostComponent) {\n        node.stateNode.style.display = 'none';\n      } else {\n        hideAllChildren(node);\n      }\n      node = node.sibling;\n    }\n  }\n  function unhideAllChildren(fiber) {\n    var node = fiber.child;\n    while (node) {\n      if (node.tag === FiberTag.HostComponent) {\n        node.stateNode.style.display = '';\n      } else {\n        unhideAllChildren(node);\n      }\n      node = node.sibling;\n    }\n  }\n  function unwindWork(fiber, lanes) {\n    var flags = fiber.flags;\n    if (lanes || lanes === NoLanes) {\n      unwindWorks.push(fiber);\n      if (fiber.parent) {\n        var childEffects = fiber.effects || [];\n        var thisEffect = fiber.flags > FiberFlags.PerformWork ? [fiber] : [];\n        var parentEffects = fiber.parent.effects || [];\n        fiber.parent.effects = parentEffects.concat(childEffects, thisEffect);\n      } else {\n        var root = fiber.stateNode;\n        root.finishedWork = fiber;\n      }\n    }\n    switch (fiber.tag) {\n      case FiberTag.Suspense:\n        popSuspenseHander();\n        if (flags & Flags.ShouldCapture && !(flags & Flags.DidCapture)) {\n          fiber.flags = flags & ~Flags.ShouldCapture | Flags.DidCapture;\n        }\n        return fiber;\n      case FiberTag.ContextProvider:\n        var ctx = fiber.type._context;\n        popProvider(ctx);\n        return;\n    }\n  }\n  function unwindUnit(fiber, lanes) {\n    fiber.lanes &= ~lanes;\n    fiber.childLanes &= ~lanes;\n    var oldFiber = fiber.alternate;\n    if (oldFiber) oldFiber.alternate = fiber;\n    markCurrentFiber(fiber, oldFiber);\n    switch (fiber.tag) {\n      case FiberTag.Offscreen:\n        return fiber.pendingProps.mode === 'hidden' ? hideAllChildren(fiber) : unhideAllChildren(fiber);\n    }\n  }\n  function _cloneChildren(firstChild, parent) {\n    var next = firstChild;\n    parent.child = firstChild;\n    while (next) {\n      next.parent = parent;\n      next = next.sibling;\n    }\n  }\n  function cloneFiberChildren(firstChild, parent) {\n    cloneChildrenHandlers.push(function () {\n      return _cloneChildren(firstChild, parent);\n    });\n  }\n  function getLatestFiber(fiber) {\n    var node = fiber;\n    while (node.alternate) {\n      if (node.alternate.alternate === node) {\n        if (node.alternate.flags & FiberFlags.PerformWork) node = node.alternate;\n        break;\n      }\n      node = node.alternate;\n    }\n    return node;\n  }\n\n  function createUpdate(payload, eventTime, lane) {\n    var tag = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : UpdateState.updateState;\n    return {\n      eventTime: eventTime,\n      lane: lane,\n      tag: tag,\n      payload: payload,\n      next: null\n    };\n  }\n  function enqueueUpdate(queue, update) {\n    var sharedQueue = queue.shared;\n    var pending = sharedQueue.pending;\n    if (!pending) {\n      update.next = update;\n    } else {\n      update.next = pending.next;\n      pending.next = update;\n    }\n    sharedQueue.pending = update;\n  }\n  function getStateFromUpdate(update, prevState, nextProps) {\n    switch (update.tag) {\n      case UpdateState.replaceState:\n      case UpdateState.updateState:\n        {\n          var payload = update.payload;\n          var partialState = typeof payload === 'function' ? payload(prevState, nextProps) : payload;\n          return update.tag === UpdateState.replaceState ? partialState : Object.assign({}, prevState, partialState);\n        }\n      default:\n        return prevState;\n    }\n  }\n  function initializeUpdateQueue(memoizedState) {\n    return {\n      baseState: memoizedState,\n      firstBaseUpdate: null,\n      lastBaseUpdate: null,\n      shared: {\n        pending: null\n      },\n      effects: []\n    };\n  }\n  function processUpdateQueue(wip, hooks, queue, renderLanes) {\n    if (!queue) return;\n    var firstBaseUpdate = queue.firstBaseUpdate,\n      lastBaseUpdate = queue.lastBaseUpdate,\n      shared = queue.shared;\n    var pendingQueue = shared.pending;\n    if (pendingQueue) {\n      shared.pending = null;\n      var lastPendingUpdate = pendingQueue;\n      var firstPendingUpdate = lastPendingUpdate.next;\n      lastPendingUpdate.next = null;\n      if (lastBaseUpdate) {\n        lastBaseUpdate.next = firstPendingUpdate;\n      } else {\n        firstBaseUpdate = firstPendingUpdate;\n      }\n      lastBaseUpdate = lastPendingUpdate;\n    }\n    if (firstBaseUpdate) {\n      var newState = queue.baseState;\n      var newBaseState = null;\n      var newFirstBaseUpdate = null;\n      var newLastBaseUpdate = null;\n      var update = firstBaseUpdate;\n      do {\n        var updateLane = update.lane;\n        if (!isSubsetOfLanes(renderLanes, updateLane)) {\n          var clone = {\n            eventTime: update.eventTime,\n            lane: updateLane,\n            tag: update.tag,\n            payload: update.payload,\n            next: null\n          };\n          if (!newLastBaseUpdate) {\n            newFirstBaseUpdate = newLastBaseUpdate = clone;\n            newBaseState = newState;\n          } else {\n            newLastBaseUpdate.next = clone;\n            newLastBaseUpdate = newLastBaseUpdate.next;\n          }\n        } else {\n          newState = getStateFromUpdate(update, newState, wip.pendingProps);\n        }\n        update = update.next;\n      } while (update);\n      if (!newLastBaseUpdate) {\n        newBaseState = newState;\n      }\n      if (hooks) {\n        hooks.state = newBaseState;\n      } else {\n        wip.memoizedState = newBaseState;\n      }\n      queue.baseState = newBaseState;\n      queue.firstBaseUpdate = newFirstBaseUpdate;\n      queue.lastBaseUpdate = newLastBaseUpdate;\n    }\n  }\n  function markUpdateFromFiberToRoot(fiber) {\n    var parent = fiber.parent,\n      node = fiber;\n    while (parent) {\n      parent.childLanes |= mergeLanes(node.lanes, node.childLanes);\n      node = parent;\n      parent = parent.parent;\n    }\n    if (node.tag !== FiberTag.HostRoot) {\n      return null;\n    }\n    var root = node.stateNode;\n    root.pendingLanes = mergeLanes(node.lanes, node.childLanes);\n    return root;\n  }\n  var isBatchingUpdates = false;\n  function batchedUpdates(fn, a) {\n    var previousIsBatchingUpdates = isBatchingUpdates;\n    isBatchingUpdates = true;\n    try {\n      return fn(a);\n    } finally {\n      isBatchingUpdates = previousIsBatchingUpdates;\n      if (!isBatchingUpdates) {\n        workInProgressRoot && ensureRootIsScheduled(workInProgressRoot);\n      }\n    }\n  }\n  function updateClassComponent(wipFiber, lanes) {\n    var _Ctor$contextType;\n    var instance = wipFiber.stateNode;\n    var Ctor = wipFiber.type;\n    processUpdateQueue(wipFiber, null, wipFiber.updateQueue, lanes);\n    var nextState = wipFiber.memoizedState;\n    var nextContext = (_Ctor$contextType = Ctor.contextType) === null || _Ctor$contextType === void 0 ? void 0 : _Ctor$contextType.currentValue;\n    if (!instance.shouldComponentUpdate(wipFiber.pendingProps, nextState, nextContext)) {\n      return cloneChildren(wipFiber);\n    }\n    if (Ctor.getDerivedStateFromProps) {\n      nextState = Ctor.getDerivedStateFromProps(wipFiber.pendingProps, nextState);\n    }\n    var prevState = instance.state;\n    var prevProps = instance.props;\n    instance.context = nextContext;\n    instance.props = wipFiber.pendingProps;\n    instance.state = nextState;\n    wipFiber.memoizedState = nextState;\n    reconcileChildrenArray(wipFiber, instance.render(), lanes);\n    if (instance.getSnapshotBeforeUpdate) {\n      instance._snapshot = instance.getSnapshotBeforeUpdate(prevProps, prevState);\n    }\n  }\n  function updateSuspenseFallbackChildren(fiber, primaryChildren, fallbackChildren, lanes) {\n    var _fiber$alternate;\n    var oldFiber = (_fiber$alternate = fiber.alternate) === null || _fiber$alternate === void 0 ? void 0 : _fiber$alternate.child;\n    var offscreen = cloneFiberNode(oldFiber, {\n      mode: 'hidden',\n      children: primaryChildren\n    }, {\n      parent: fiber,\n      index: 0,\n      lanes: lanes,\n      alternate: oldFiber\n    });\n    oldFiber.alternate = offscreen;\n    var fallback = oldFiber.sibling ? cloneFiberNode(oldFiber.sibling, {\n      children: fallbackChildren\n    }, {\n      parent: fiber,\n      index: 1,\n      lanes: mergeLanes(oldFiber.lanes, lanes)\n    }) : createFiberNode(FiberTag.Fragment, {\n      children: fallbackChildren\n    }, {\n      parent: fiber,\n      index: 1,\n      lanes: lanes\n    });\n    if (oldFiber.sibling) deleteChild(oldFiber.sibling, fiber);\n    offscreen.sibling = fallback;\n    fiber.child = offscreen;\n  }\n  function updateSuspensePrimaryChildren(fiber, primaryChildren, lanes) {\n    var _fiber$alternate2;\n    var oldFiber = (_fiber$alternate2 = fiber.alternate) === null || _fiber$alternate2 === void 0 ? void 0 : _fiber$alternate2.child;\n    var offscreen = cloneFiberNode(oldFiber, {\n      mode: 'visible',\n      children: primaryChildren\n    }, {\n      parent: fiber,\n      index: 0,\n      lanes: lanes,\n      alternate: oldFiber\n    });\n    oldFiber.alternate = offscreen;\n    oldFiber.sibling && deleteChild(oldFiber.sibling, fiber);\n    fiber.child = offscreen;\n  }\n\n  var events = ['onCopy', 'onCopyCapture', 'onCutCapture', 'onPaste', 'onPasteCapture', 'onCompositionEnd', 'onCompositionEndCapture', 'onCompositionStart', 'onCompositionStartCapture', 'onCompositionUpdate', 'onCompositionUpdateCapture', 'onFocus', 'onCut', 'onFocusCapture', 'onBlur', 'onBlurCapture', 'onChange', 'onChangeCapture', 'onBeforeInput', 'onBeforeInputCapture', 'onInput', 'onInputCapture', 'onReset', 'onResetCapture', 'onSubmit', 'onSubmitCapture', 'onInvalid', 'onInvalidCapture', 'onLoad', 'onLoadCapture', 'onError', 'onErrorCapture', 'onKeyDown', 'onKeyDownCapture', 'onKeyPress', 'onKeyPressCapture', 'onKeyUp', 'onKeyUpCapture', 'onAbort', 'onAbortCapture', 'onCanPlay', 'onCanPlayCapture', 'onCanPlayThrough', 'onCanPlayThroughCapture', 'onDurationChange', 'onDurationChangeCapture', 'onEmptied', 'onEmptiedCapture', 'onEncrypted', 'onEncryptedCapture', 'onEnded', 'onEndedCapture', 'onLoadedData', 'onLoadedDataCapture', 'onLoadedMetadata', 'onLoadedMetadataCapture', 'onLoadStart', 'onLoadStartCapture', 'onPause', 'onPauseCapture', 'onPlay', 'onPlayCapture', 'onPlaying', 'onPlayingCapture', 'onProgress', 'onProgressCapture', 'onRateChange', 'onRateChangeCapture', 'onResize', 'onResizeCapture', 'onSeeked', 'onSeekedCapture', 'onSeeking', 'onSeekingCapture', 'onStalled', 'onStalledCapture', 'onSuspend', 'onSuspendCapture', 'onTimeUpdate', 'onTimeUpdateCapture', 'onVolumeChange', 'onVolumeChangeCapture', 'onWaiting', 'onWaitingCapture', 'onAuxClick', 'onAuxClickCapture', 'onClick', 'onClickCapture', 'onContextMenu', 'onContextMenuCapture', 'onDoubleClick', 'onDoubleClickCapture', 'onDrag', 'onDragCapture', 'onDragEnd', 'onDragEndCapture', 'onDragEnter', 'onDragEnterCapture', 'onDragExit', 'onDragExitCapture', 'onDragLeave', 'onDragLeaveCapture', 'onDragOver', 'onDragOverCapture', 'onDragStart', 'onDragStartCapture', 'onDrop', 'onDropCapture', 'onMouseDown', 'onMouseDownCapture', 'onMouseEnter', 'onMouseLeave', 'onMouseMove', 'onMouseMoveCapture', 'onMouseOut', 'onMouseOutCapture', 'onMouseOver', 'onMouseOverCapture', 'onMouseUp', 'onMouseUpCapture', 'onSelect', 'onSelectCapture', 'onTouchCancel', 'onTouchCancelCapture', 'onTouchEnd', 'onTouchEndCapture', 'onTouchMove', 'onTouchMoveCapture', 'onTouchStart', 'onTouchStartCapture', 'onPointerDown', 'onPointerDownCapture', 'onPointerMove', 'onPointerMoveCapture', 'onPointerUp', 'onPointerUpCapture', 'onPointerCancel', 'onPointerCancelCapture', 'onPointerEnter', 'onPointerLeave', 'onPointerOver', 'onPointerOverCapture', 'onPointerOut', 'onPointerOutCapture', 'onGotPointerCapture', 'onGotPointerCaptureCapture', 'onLostPointerCapture', 'onLostPointerCaptureCapture', 'onScroll', 'onScrollCapture', 'onWheel', 'onWheelCapture', 'onAnimationStart', 'onAnimationStartCapture', 'onAnimationEnd', 'onAnimationEndCapture', 'onAnimationIteration', 'onAnimationIterationCapture', 'onTransitionEnd', 'onTransitionEndCapture'];\n  var domMap = new WeakMap();\n  var registerEvent = function registerEvent(root) {\n    var listener = function listener(eventName) {\n      return function (e) {\n        var fiber = domMap.get(e.target);\n        var current = fiber;\n        while (current) {\n          if (current.tag === FiberTag.HostComponent) {\n            var handler = current.pendingProps[eventName];\n            handler && batchedUpdates(handler, e);\n          }\n          current = current.parent;\n        }\n      };\n    };\n    for (var _i = 0, _events = events; _i < _events.length; _i++) {\n      var eventName = _events[_i];\n      var event = eventName.toLowerCase().slice(2);\n      root.addEventListener(event, listener(eventName), false);\n    }\n  };\n\n  var blacklist = ['children', 'style', 'ref'];\n  var isEvent = function isEvent(name) {\n    return name.startsWith('on');\n  };\n  var isAttribute = function isAttribute(name) {\n    return !(isEvent(name) || blacklist.includes(name));\n  };\n  // !isEvent(name) && name !== 'children' && name !== 'style';\n  var isNew = function isNew(prev, next) {\n    return function (key) {\n      return prev[key] !== next[key];\n    };\n  };\n  var isGone = function isGone(next) {\n    return function (key) {\n      return !(key in next);\n    };\n  };\n  function convertName(name) {\n    return name === 'className' ? 'class' : name;\n  }\n  function updateDomProperties(dom, prevProps, nextProps) {\n    Object.keys(prevProps).filter(isAttribute).filter(isGone(nextProps)).forEach(function (name) {\n      // (dom as IState)[name] = null;\n      dom.removeAttribute(convertName(name));\n    });\n    Object.keys(nextProps).filter(isAttribute).filter(isNew(prevProps, nextProps)).forEach(function (name) {\n      if (dom.setAttribute) dom.setAttribute(convertName(name), nextProps[name]);else dom[name] = nextProps[name];\n    });\n    prevProps.style = prevProps.style || {};\n    nextProps.style = nextProps.style || {};\n    Object.keys(nextProps.style).filter(isNew(prevProps.style, nextProps.style)).forEach(function (key) {\n      dom.style[key] = nextProps.style[key];\n    });\n    Object.keys(prevProps.style).filter(isGone(nextProps.style)).forEach(function (key) {\n      dom.style[key] = '';\n    });\n  }\n  function createDomElement(fiber) {\n    var isTextElement = fiber.type === TEXT_ELEMENT;\n    var dom = isTextElement ? document.createTextNode('') : document.createElement(fiber.type);\n    updateDomProperties(dom, {}, fiber.pendingProps);\n    return dom;\n  }\n\n  function getHostParent(fiber) {\n    var domParentFiber = fiber.parent;\n    while (domParentFiber && domParentFiber.parent && domParentFiber.tag !== FiberTag.HostComponent && domParentFiber.tag !== FiberTag.HostText) {\n      domParentFiber = domParentFiber.parent;\n    }\n    if (!domParentFiber) return fiber.stateNode;\n    return domParentFiber.parent ? domParentFiber.stateNode : domParentFiber.stateNode.container;\n  }\n  function getHostSibling(fiber) {\n    var node = fiber;\n    siblings: while (true) {\n      while (!node.sibling) {\n        if (!node.parent || node.parent.tag === FiberTag.HostComponent) return null;\n        node = node.parent;\n      }\n      node.sibling.parent = node.parent;\n      node = node.sibling;\n      while (node.tag !== FiberTag.HostComponent && node.tag !== FiberTag.HostText) {\n        if (node.flags & FiberFlags.Placement || !node.child) continue siblings;\n        node.child.parent = node;\n        node = node.child;\n      }\n      if (!(node.flags & FiberFlags.Placement)) {\n        return node.stateNode;\n      }\n    }\n  }\n  function callEffect(fiber) {\n    var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'create';\n    var hook = fiber.memoizedState;\n    while (hook) {\n      var create = hook.state[key];\n      if (typeof create === 'function') create();\n      hook = hook.next;\n    }\n  }\n  function commitPlacement(fiber) {\n    var domParent = getHostParent(fiber);\n    if ((fiber.tag === FiberTag.HostComponent || fiber.tag === FiberTag.HostText) && domParent) {\n      var before = getHostSibling(fiber);\n      var node = fiber.stateNode;\n      if (before) domParent.insertBefore(node, before);else domParent.appendChild(node);\n      if (fiber.ref) fiber.ref.current = fiber.stateNode;\n    } else if (fiber.tag === FiberTag.ClassComponent) {\n      fiber.stateNode.componentDidMount();\n    } else if (fiber.tag === FiberTag.FunctionComponent) {\n      callEffect(fiber);\n    }\n    fiber.flags &= ~FiberFlags.Placement;\n  }\n  function commitUpdate(fiber) {\n    if (fiber.tag === FiberTag.HostComponent || fiber.tag === FiberTag.HostText) {\n      updateDomProperties(fiber.stateNode, fiber.alternate.pendingProps, fiber.pendingProps);\n    } else if (fiber.tag === FiberTag.FunctionComponent) {\n      callEffect(fiber);\n    } else if (fiber.tag === FiberTag.ClassComponent && fiber.stateNode instanceof Component) {\n      var oldFiber = fiber.alternate;\n      if (oldFiber) {\n        fiber.stateNode.componentDidUpdate(oldFiber.pendingProps, oldFiber.stateNode.state);\n      }\n    }\n    fiber.flags &= ~FiberFlags.Update;\n  }\n  function commitDeletion(fiber) {\n    var node = fiber;\n    var domParent = getHostParent(fiber);\n    while (domParent) {\n      if (!node) break;\n      if (node.tag !== FiberTag.HostComponent && node.tag !== FiberTag.HostText) {\n        node = node.child;\n        continue;\n      }\n      domParent.removeChild(node.stateNode);\n      while (node !== fiber && !node.sibling) node = node.parent;\n      if (node === fiber) break;\n      node = node.sibling;\n    }\n    var goStep = function goStep(node) {\n      if (node.child) return node.child;\n      var cursor = node;\n      while (cursor && cursor != fiber) {\n        if (cursor.tag === FiberTag.FunctionComponent) callEffect(cursor, 'destroy');\n        if (cursor.stateNode instanceof Component) cursor.stateNode.destory();\n        if (cursor.sibling) return cursor.sibling;\n        cursor = cursor.parent;\n      }\n    };\n    while (node) node = goStep(node);\n    fiber.flags &= ~FiberFlags.Deletion;\n  }\n  function commitWork(fiber) {\n    if (fiber.tag === FiberTag.HostRoot) return;\n    if (fiber.flags & FiberFlags.Placement) commitPlacement(fiber);\n    if (fiber.flags & FiberFlags.Update) commitUpdate(fiber);\n    if (fiber.flags & FiberFlags.Deletion) commitDeletion(fiber);\n    fiber.effects = [];\n  }\n\n  var workInProgressHook = null;\n  var firstWorkInProgressHook = null;\n  var lastWorkInProgressHook = null;\n  var workInProgress = null;\n  function createWorkInProgress(wip) {\n    workInProgressHook = firstWorkInProgressHook = wip.memoizedState;\n    workInProgress = wip;\n  }\n  function createHooks(state) {\n    return {\n      state: state,\n      baseState: null,\n      baseUpdate: null,\n      queue: null,\n      next: null\n    };\n  }\n  function createWorkInProgressHook(state) {\n    if (!firstWorkInProgressHook) {\n      firstWorkInProgressHook = workInProgressHook = createHooks(state);\n      workInProgress.memoizedState = firstWorkInProgressHook;\n    } else if (!workInProgressHook) {\n      lastWorkInProgressHook.next = workInProgressHook = createHooks(state);\n    }\n    lastWorkInProgressHook = workInProgressHook;\n    workInProgressHook = workInProgressHook.next;\n    return lastWorkInProgressHook;\n  }\n  function processHookState(hook) {\n    if (workInProgress.alternate) processUpdateQueue(workInProgress, hook, hook.queue, workInProgressRootRenderLanes);\n  }\n  function createUpdateQueue(hook) {\n    hook.queue = initializeUpdateQueue(hook.state);\n    hook.queue.dispatch = dispatchState.bind(null, workInProgress, hook);\n  }\n  function dispatchState(fiber, hook, state) {\n    if (!fiber) return;\n    var current = getLatestFiber(fiber);\n    var lane = requestUpdateLane();\n    current.lanes |= lane;\n    var update = createUpdate(state, getCurrentTime(), lane, UpdateState.replaceState);\n    enqueueUpdate(hook.queue, update);\n    scheduleUpdateOnFiber(current);\n  }\n\n  function mountClassComponent(wipFiber, lanes) {\n    var _Ctor$contextType;\n    var instance = wipFiber.stateNode = createInstance(wipFiber);\n    var Ctor = wipFiber.type;\n    var nextState = Object.assign({}, instance.state);\n    var nextContext = (_Ctor$contextType = Ctor.contextType) === null || _Ctor$contextType === void 0 ? void 0 : _Ctor$contextType.currentValue;\n    if (Ctor.getDerivedStateFromProps) nextState = Ctor.getDerivedStateFromProps(wipFiber.pendingProps, nextState);\n    instance.context = nextContext;\n    instance.props = wipFiber.pendingProps;\n    instance.state = nextState;\n    wipFiber.memoizedState = nextState;\n    reconcileChildrenArray(wipFiber, instance.render(), lanes);\n  }\n  function mountSuspenseFallbackChildren(fiber, primaryChildren, fallbackChildren, lanes) {\n    var offscreen = createFiberNode(FiberTag.Offscreen, {\n      mode: 'hidden',\n      children: primaryChildren\n    }, {\n      parent: fiber,\n      index: 0,\n      lanes: lanes\n    });\n    var fallback = createFiberNode(FiberTag.Fragment, {\n      children: fallbackChildren\n    }, {\n      parent: fiber,\n      index: 1,\n      lanes: lanes\n    });\n    offscreen.sibling = fallback;\n    fiber.child = offscreen;\n  }\n  function mountSuspensePrimaryChildren(fiber, primaryChildren, lanes) {\n    var offscreen = createFiberNode(FiberTag.Offscreen, {\n      mode: 'visible',\n      children: primaryChildren\n    }, {\n      parent: fiber,\n      lanes: lanes\n    });\n    fiber.child = offscreen;\n  }\n\n  function beginWork(wipFiber, renderLanes) {\n    var _wipFiber$pendingProp;\n    createWorkInProgress(wipFiber);\n    if (!intersectLanes(wipFiber.lanes, renderLanes) && !intersectLanes(wipFiber.childLanes, renderLanes)) {\n      var _wipFiber$alternate;\n      cloneFiberChildren(((_wipFiber$alternate = wipFiber.alternate) === null || _wipFiber$alternate === void 0 ? void 0 : _wipFiber$alternate.child) || null, wipFiber);\n      return true;\n    }\n    switch (wipFiber.tag) {\n      case FiberTag.FunctionComponent:\n      case FiberTag.ContextProvider:\n        processFunctionComponent(wipFiber, renderLanes);\n        break;\n      case FiberTag.ClassComponent:\n        processClassComponent(wipFiber, renderLanes);\n        break;\n      case FiberTag.Suspense:\n        if (processSuspenseComponent(wipFiber, renderLanes)) return true;\n        break;\n      case FiberTag.Offscreen:\n        if (processOffscreenComponent(wipFiber, renderLanes)) return true;\n        break;\n      case FiberTag.Fragment:\n        reconcileChildrenArray(wipFiber, (_wipFiber$pendingProp = wipFiber.pendingProps) === null || _wipFiber$pendingProp === void 0 ? void 0 : _wipFiber$pendingProp.children, renderLanes);\n        break;\n      case FiberTag.HostRoot:\n      case FiberTag.HostComponent:\n      case FiberTag.HostText:\n        processHostComponent(wipFiber, renderLanes);\n        break;\n    }\n    return false;\n  }\n  var flag = false;\n  function processOffscreenComponent(fiber, lanes) {\n    var children = fiber.pendingProps.children;\n    if (fiber.pendingProps.mode === 'hidden') {\n      var _fiber$alternate;\n      fiber.lanes |= PingLane;\n      cloneFiberChildren(((_fiber$alternate = fiber.alternate) === null || _fiber$alternate === void 0 ? void 0 : _fiber$alternate.child) || null, fiber);\n      return true;\n    }\n    if (intersectLanes(fiber.lanes, TransitionLanes) && flag) {\n      var _fiber$alternate2;\n      flag = false;\n      cloneFiberChildren(((_fiber$alternate2 = fiber.alternate) === null || _fiber$alternate2 === void 0 ? void 0 : _fiber$alternate2.child) || null, fiber);\n      return true;\n    }\n    reconcileChildrenArray(fiber, children, lanes);\n  }\n  function processSuspenseComponent(wipFiber, lanes) {\n    var current = wipFiber.alternate;\n    var nextPrimaryChildren = wipFiber.pendingProps.children;\n    var nextFallbackChildren = wipFiber.pendingProps.fallback;\n    var showFallback = false;\n    var DidCapture = (wipFiber.flags & Flags.DidCapture) !== Flags.NONE;\n    if (DidCapture) {\n      if (intersectLanes(wipFiber.childLanes, TransitionLanes) && wipFiber.alternate) {\n        var _wipFiber$alternate2;\n        cloneFiberChildren((_wipFiber$alternate2 = wipFiber.alternate) === null || _wipFiber$alternate2 === void 0 ? void 0 : _wipFiber$alternate2.child, wipFiber);\n        return true;\n      }\n      showFallback = true;\n      wipFiber.flags &= ~FiberFlags.DidCapture;\n    }\n    pushSuspenseHander(wipFiber);\n    if (current) {\n      if (showFallback) updateSuspenseFallbackChildren(wipFiber, nextPrimaryChildren, nextFallbackChildren, lanes);else updateSuspensePrimaryChildren(wipFiber, nextPrimaryChildren, lanes);\n    } else {\n      if (showFallback) mountSuspenseFallbackChildren(wipFiber, nextPrimaryChildren, nextFallbackChildren, lanes);else mountSuspensePrimaryChildren(wipFiber, nextPrimaryChildren, lanes);\n    }\n    return false;\n  }\n  function processFunctionComponent(wipFiber, lanes) {\n    var newChildElements = wipFiber.type(wipFiber.pendingProps);\n    reconcileChildrenArray(wipFiber, newChildElements, lanes);\n  }\n  function processClassComponent(wipFiber, lanes) {\n    if (wipFiber.alternate) updateClassComponent(wipFiber, lanes);else mountClassComponent(wipFiber, lanes);\n  }\n  function processHostComponent(wipFiber, lanes) {\n    if (!wipFiber.stateNode) {\n      wipFiber.stateNode = createDomElement(wipFiber);\n      if (wipFiber.ref) wipFiber.ref.current = wipFiber.stateNode;\n    }\n    domMap.set(wipFiber.stateNode, wipFiber);\n    var newChildElements = wipFiber.pendingProps.children;\n    reconcileChildrenArray(wipFiber, newChildElements, lanes);\n  }\n\n  var nextUnitOfWork = null;\n  var workInProgressRoot = null;\n  var workInProgressRootRenderLanes = NoLanes;\n  var currentBatchConfig = {\n    transition: null\n  };\n  var unwindWorks = [];\n  var cloneChildrenHandlers = [];\n  if (typeof window !== 'undefined') registerEvent(document.body);\n  function render(children, containerDom) {\n    if (!containerDom) containerDom = document.createElement('div');\n    var _containerDom = containerDom,\n      rootFiberNode = _containerDom.__rootFiber;\n    if (!rootFiberNode) rootFiberNode = containerDom.__rootFiber = createRootFiber(containerDom, Mode.NoMode);\n    renderOnRootFiber(children, containerDom, rootFiberNode);\n    return containerDom;\n  }\n  function createRoot() {\n    var rootFiberNode = createRootFiber(null, Mode.Concurrent);\n    return {\n      render: function render(children, dom) {\n        return renderOnRootFiber(children, dom, rootFiberNode);\n      },\n      unmount: function unmount() {}\n    };\n  }\n  function createRootFiber(container, mode) {\n    return {\n      container: container,\n      mode: mode,\n      pendingLanes: NoLanes,\n      expiredLanes: NoLanes,\n      renderLanes: NoLanes,\n      finishedWork: null,\n      callbackNode: null,\n      callbackId: NoLanes\n    };\n  }\n  function renderOnRootFiber(children) {\n    var dom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var rootFiberNode = arguments.length > 2 ? arguments[2] : undefined;\n    var container = rootFiberNode.container,\n      current = rootFiberNode.current,\n      mode = rootFiberNode.mode;\n    if (!container) rootFiberNode.container = dom;\n    var pendingProps = {\n      children: children\n    };\n    var root = current ? cloneFiberNode(current, pendingProps, {\n      child: current.child,\n      sibling: current.sibling\n    }) : createFiberNode(FiberTag.HostRoot, pendingProps, {\n      stateNode: rootFiberNode,\n      mode: mode\n    });\n    rootFiberNode.current = root;\n    rootFiberNode.pendingLanes |= SyncLane;\n    root.lanes |= SyncLane;\n    workInProgressRoot = rootFiberNode;\n    scheduleOnRoot(rootFiberNode);\n  }\n  function scheduleOnRoot(root) {\n    ensureRootIsScheduled(root);\n  }\n  function scheduleUpdateOnFiber(fiber) {\n    var root = markUpdateFromFiberToRoot(fiber);\n    workInProgressRoot = root;\n    if (!root) return;\n    if (!isBatchingUpdates) ensureRootIsScheduled(root);\n  }\n  function ensureRootIsScheduled(root) {\n    var lanes = getNextLanes(root);\n    workInProgressRootRenderLanes = lanes;\n    root.pendingLanes &= ~lanes;\n    if (root.callbackNode && lanes < root.callbackId) {\n      root.callbackNode.callback = null;\n      root.callbackNode = null;\n      root.pendingLanes |= root.callbackId;\n      root.callbackId = NoLanes;\n      resetContext();\n    }\n    var priority = LaneToPriority(lanes);\n    if (lanes === NoLanes) {\n      return;\n    } else if (lanes === SyncLane) {\n      return performSyncWorkOnRoot(root);\n    } else {\n      root.callbackNode = scheduleCallback(priority, performConcurrentWorkOnRoot.bind(null, root));\n      root.callbackId = lanes;\n    }\n  }\n  function getNextLanes(root) {\n    var pendingLanes = root.pendingLanes;\n    return getHighestPriorityLane(pendingLanes);\n  }\n  function performSyncWorkOnRoot(root) {\n    performWork(root, workLoopSync);\n  }\n  function performConcurrentWorkOnRoot(root) {\n    return performWork(root, workLoop);\n  }\n  function prepareStack() {\n    clearSuspenseHander();\n    unwindWorks = [];\n    cloneChildrenHandlers.length = 0;\n  }\n  function performWork(root, workLoop) {\n    var current = root.current;\n    if (!current) return;\n    prepareStack();\n    nextUnitOfWork = cloneFiberNode(current, current.pendingProps, {\n      alternate: current\n    });\n    while (nextUnitOfWork) {\n      try {\n        return workLoop(root);\n      } catch (error) {\n        nextUnitOfWork = catchError(error, nextUnitOfWork);\n      }\n    }\n  }\n  function workLoopSync(root) {\n    while (nextUnitOfWork) {\n      nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n    }\n    var finishedWork = root.finishedWork;\n    if (finishedWork) {\n      commitAllWork(finishedWork);\n    }\n  }\n  function workLoop(root) {\n    while (nextUnitOfWork && !shouldYield()) {\n      nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n    }\n    var finishedWork = root.finishedWork;\n    if (finishedWork) {\n      commitAllWork(finishedWork);\n    } else {\n      var prevWork = nextUnitOfWork;\n      return function () {\n        nextUnitOfWork = prevWork;\n        return workLoop(root);\n      };\n    }\n  }\n  function performUnitOfWork(wipFiber) {\n    var skip = beginWork(wipFiber, workInProgressRootRenderLanes);\n    wipFiber.memoizedProps = wipFiber.pendingProps;\n    if (wipFiber.child && !skip) {\n      return wipFiber.child;\n    }\n    var uow = wipFiber;\n    while (uow) {\n      completeWork(uow);\n      if (uow.sibling) {\n        return uow.sibling;\n      }\n      uow = uow.parent;\n    }\n  }\n  function completeWork(fiber) {\n    unwindWork(fiber, workInProgressRootRenderLanes);\n  }\n  function beforeCommit() {\n    var _iterator = _createForOfIteratorHelper(cloneChildrenHandlers),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var fn = _step.value;\n        fn();\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    var _iterator2 = _createForOfIteratorHelper(unwindWorks),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var f = _step2.value;\n        unwindUnit(f, workInProgressRootRenderLanes);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n  function commitAllWork(fiber) {\n    beforeCommit();\n    (fiber.effects || []).forEach(function (f) {\n      return commitWork(f);\n    });\n    var root = fiber.stateNode;\n    root.current = fiber;\n    root.finishedWork = null;\n    nextUnitOfWork = null;\n    ensureRootIsScheduled(root);\n  }\n\n  function getNearestSuspense(fiber) {\n    var node = fiber;\n    while (node && node.tag !== FiberTag.Suspense) node = node.parent;\n    return node ? getLatestFiber(node) : null;\n  }\n  function attachPingListener(fiber, promise) {\n    var ping = function ping() {\n      var suspense = getNearestSuspense(fiber);\n      if (suspense) suspense.lanes |= fiber.lanes;\n      var root = suspense ? markUpdateFromFiberToRoot(suspense) : null;\n      root && ensureRootIsScheduled(root);\n    };\n    promise.then(ping, ping);\n  }\n  function catchError(error, fiber, lanes, errorInfo) {\n    var component, ctor, handled;\n    var needPing = true;\n    if (error instanceof SuspenseException) {\n      error = error.promise;\n      var suspenseBoundary = getSuspenseHander();\n      if (suspenseBoundary) {\n        suspenseBoundary.flags |= Flags.ShouldCapture;\n        if (suspenseBoundary.memoizedState === error) needPing = false;\n        suspenseBoundary.memoizedState = error;\n      }\n    }\n    if (error instanceof Promise && needPing) {\n      attachPingListener(fiber, error);\n    }\n    for (var current = fiber; current; current = current.parent) {\n      current.effects = []; // reset effect\n      var next = unwindWork(current);\n      if (next) return next;\n      if ((component = fiber.stateNode) && component instanceof Component) {\n        try {\n          ctor = fiber.type;\n          if (ctor && ctor.getDerivedStateFromError) {\n            component.setState(ctor.getDerivedStateFromError(error));\n            handled = true;\n          }\n          if (component.componentDidCatch) {\n            component.componentDidCatch(error, errorInfo || {});\n            handled = true;\n          }\n          if (handled) {\n            return;\n          }\n        } catch (e) {\n          error = e;\n        }\n      }\n    }\n    throw error;\n  }\n  var SuspenseException = /*#__PURE__*/_createClass(function SuspenseException(promise) {\n    _classCallCheck(this, SuspenseException);\n    _defineProperty(this, \"promise\", void 0);\n    this.promise = promise;\n  });\n\n  function isSubclassOf(subClass, superClass) {\n    var prototype = subClass.prototype ? Object.getPrototypeOf(subClass.prototype) : void 0;\n    while (prototype) {\n      if (prototype === superClass.prototype) {\n        return true;\n      }\n      prototype = Object.getPrototypeOf(prototype);\n    }\n    return false;\n  }\n  var wait = function wait(fn, time) {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return new Promise(function (resolve) {\n        setTimeout(function () {\n          return resolve(fn.apply(void 0, args));\n        }, time);\n      });\n    };\n  };\n  var createRef = function createRef(initialVal) {\n    return {\n      current: initialVal\n    };\n  };\n  var forwardRef = function forwardRef(render) {\n    return function (props) {\n      return render(props, props.ref);\n    };\n  };\n  var wrapPromise = function wrapPromise(promise) {\n    var status = 'pending',\n      result;\n    var next = promise.then(function (res) {\n      status = 'fulfilled';\n      result = res;\n    }, function (reason) {\n      status = 'rejected';\n      result = reason;\n    });\n    return {\n      read: function read() {\n        switch (status) {\n          case 'pending':\n            throw new SuspenseException(next);\n          case 'fulfilled':\n            return result;\n          case 'rejected':\n          default:\n            throw result;\n        }\n      }\n    };\n  };\n  var lazy = function lazy(load) {\n    var p = load();\n    var _wrapPromise = wrapPromise(p),\n      read = _wrapPromise.read;\n    return function (props) {\n      return createElement(read().default, props);\n    };\n  };\n\n  var TEXT_ELEMENT = 'TEXT_ELEMENT';\n  var FRAGMENT = Symbol.for('srender.Fragment');\n  var ELEMENT = Symbol.for('srender.Element');\n  var SUSPENSE = Symbol.for('srender.Suspense');\n  var OFFSCREEN = Symbol.for('srender.Offscreen');\n  var ContextProvider = Symbol.for('srender.ContextProvider');\n  var getTag = function getTag(_ref) {\n    var type = _ref.type,\n      $$typeof = _ref.$$typeof;\n    switch ($$typeof) {\n      case FRAGMENT:\n        return FiberTag.Fragment;\n      case SUSPENSE:\n        return FiberTag.Suspense;\n      case OFFSCREEN:\n        return FiberTag.Offscreen;\n      case ContextProvider:\n        return FiberTag.ContextProvider;\n    }\n    if (typeof type === 'string') return type === TEXT_ELEMENT ? FiberTag.HostText : FiberTag.HostComponent;\n    if (typeof type === 'function') return isSubclassOf(type, Component) ? FiberTag.ClassComponent : FiberTag.FunctionComponent;\n    return FiberTag.Unknown;\n  };\n  function createElement(type) {\n    var _config, _config2;\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var children = [];\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n    if (_typeof(config) !== 'object' || (_config = config) !== null && _config !== void 0 && _config.$$typeof) {\n      children = [config].concat(args);\n      config = {};\n    } else if (Array.isArray(config)) {\n      children = config;\n      config = {};\n    } else if (Array.isArray(args[0])) {\n      children = args[0];\n    } else if ((_config2 = config) !== null && _config2 !== void 0 && _config2.children) {\n      config.key = config.key ? config.key : args[0] || void 0;\n    } else {\n      children = [].concat(args);\n    }\n    if (config && (config.children || config.children === 0)) children = children.concat(config.children);\n    var props = Object.assign({\n      children: null\n    }, config);\n    // if (props.className) props.class = props.className;\n    props.children = children.filter(function (c) {\n      return c != undefined && c != null && c !== false;\n    }).map(function (c) {\n      return c !== null && c !== void 0 && c.$$typeof ? c : createTextElement(c);\n    });\n    var node = {\n      $$typeof: ELEMENT,\n      props: props,\n      type: type\n    };\n    if (_typeof(type) === 'symbol') node.$$typeof = type;\n    if (typeof type === 'function' && type.displayType === ContextProvider) node.$$typeof = ContextProvider;\n    return node;\n  }\n  function arrify(val) {\n    return val == null ? [] : Array.isArray(val) ? val : [val];\n  }\n  function createTextElement(value) {\n    return createElement(TEXT_ELEMENT, {\n      nodeValue: value\n    });\n  }\n  var forEach = function forEach(children, callback) {\n    children = arrify(children);\n    for (var i = 0; i < children.length; i++) {\n      callback(children[i], i);\n    }\n  };\n  var map = function map(children, callback) {\n    children = arrify(children);\n    var newChildren = [];\n    for (var i = 0; i < children.length; i++) {\n      newChildren.push(callback(children[i], i));\n    }\n    return newChildren;\n  };\n  var isValidElement = function isValidElement(val) {\n    if (_typeof(val) !== 'object') return false;\n    if (val.$$typeof) return true;\n    return false;\n  };\n\n  var useRef = function useRef(initValue) {\n    var hook = createWorkInProgressHook({\n      current: initValue\n    });\n    return hook.state;\n  };\n  var useState = function useState(initialState) {\n    var hook = createWorkInProgressHook(typeof initialState === 'function' ? initialState() : initialState);\n    if (!hook.queue) createUpdateQueue(hook);\n    processHookState(hook);\n    return [hook.state, hook.queue.dispatch];\n  };\n  function areDependenciesEqual(prevDeps, deps) {\n    if (prevDeps === null) return false;\n    if (!prevDeps && !deps) return false;\n    if (!(Array.isArray(prevDeps) && Array.isArray(deps))) return false;\n    for (var i = 0; i < deps.length; i++) {\n      if (deps[i] !== prevDeps[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  function callbackWrapper(callback, effectHook, deps) {\n    var sync = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var res = areDependenciesEqual(effectHook.deps, deps) ? function () {} : sync ? function () {\n      effectHook.destroy = callback();\n    } : wait(function () {\n      return effectHook.destroy = callback();\n    }, 17);\n    effectHook.deps = deps;\n    return res;\n  }\n  var useLayoutEffect = function useLayoutEffect(callback, deps) {\n    var effectHook = {\n      create: callback\n    };\n    var hook = createWorkInProgressHook(effectHook);\n    hook.state.create = callbackWrapper(callback, hook.state, deps);\n  };\n  var useEffect = function useEffect(callback, deps) {\n    var effectHook = {\n      create: callback\n    };\n    var hook = createWorkInProgressHook(effectHook);\n    hook.state.create = callbackWrapper(callback, hook.state, deps, false);\n  };\n  var useMemo = function useMemo(callback, deps) {\n    var effectHook = {\n      value: null\n    };\n    var hook = createWorkInProgressHook(effectHook);\n    if (!areDependenciesEqual(hook.state.deps, deps)) {\n      hook.state.value = callback();\n    }\n    hook.state.deps = deps;\n    return hook.state.value;\n  };\n  var useCallback = function useCallback(callback, deps) {\n    return useMemo(function () {\n      return callback;\n    }, deps);\n  };\n  var useContext = function useContext(context) {\n    return context.currentValue;\n  };\n  function _startTransition(setPending, fn) {\n    setPending(true);\n    var prevTransition = currentBatchConfig.transition;\n    currentBatchConfig.transition = 1;\n    setPending(false);\n    fn();\n    currentBatchConfig.transition = prevTransition;\n  }\n  function startTransition(fn) {\n    _startTransition(function () {}, fn);\n  }\n  var useTransition = function useTransition() {\n    var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isPending = _useState2[0],\n      setPending = _useState2[1];\n    return [isPending, _startTransition.bind(null, setPending)];\n  };\n\n  // export * from './interface';\n  var Children = {\n    map: map,\n    forEach: forEach\n  };\n  var index = {\n    createElement: createElement,\n    render: render,\n    createRoot: createRoot,\n    Fragment: FRAGMENT,\n    Component: Component,\n    forwardRef: forwardRef,\n    Children: Children,\n    isValidElement: isValidElement,\n    createRef: createRef,\n    useEffect: useEffect,\n    useLayoutEffect: useLayoutEffect,\n    useState: useState,\n    useMemo: useMemo,\n    useCallback: useCallback,\n    useRef: useRef,\n    useContext: useContext,\n    useTransition: useTransition,\n    startTransition: startTransition,\n    createContext: createContext,\n    Offscreen: OFFSCREEN,\n    Suspense: SUSPENSE,\n    lazy: lazy\n  };\n\n  exports.Children = Children;\n  exports.Component = Component;\n  exports.Fragment = FRAGMENT;\n  exports.Offscreen = OFFSCREEN;\n  exports.Suspense = SUSPENSE;\n  exports.createContext = createContext;\n  exports.createElement = createElement;\n  exports.createRef = createRef;\n  exports.createRoot = createRoot;\n  exports.default = index;\n  exports.forwardRef = forwardRef;\n  exports.isValidElement = isValidElement;\n  exports.lazy = lazy;\n  exports.render = render;\n  exports.startTransition = startTransition;\n  exports.useCallback = useCallback;\n  exports.useContext = useContext;\n  exports.useEffect = useEffect;\n  exports.useLayoutEffect = useLayoutEffect;\n  exports.useMemo = useMemo;\n  exports.useRef = useRef;\n  exports.useState = useState;\n  exports.useTransition = useTransition;\n  exports.wrapPromise = wrapPromise;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=index.js.map\n","import { Node } from 'prosemirror-model';\nimport {\n\tDecoration,\n\tDecorationSource,\n\tEditorView,\n\tNodeView\n} from 'prosemirror-view';\nimport createElement from '../createElement';\nimport {\n\tComponentType,\n\tcreateElement as h,\n\tcreateRoot,\n\tRootRender\n} from '@docucraft/srender';\nexport class BaseNodeView implements NodeView {\n\tdom: HTMLElement;\n\tcontentDOM?: HTMLElement | null | undefined;\n\tcontainer?: HTMLElement;\n\trootRender: RootRender;\n\tcomponent: ComponentType<any> = () => '';\n\tconstructor(\n\t\tpublic node: Node,\n\t\tpublic view: EditorView\n\t) {\n\t\tthis.dom = createElement('div');\n\t\tthis.rootRender = createRoot();\n\t}\n\n\trender(props: any) {\n\t\tthis.rootRender.render(h(this.component, props));\n\t}\n\n\tignoreMutation(mutation: MutationRecord) {\n\t\tif (this.contentDOM && mutation.target !== this.contentDOM) return true;\n\t\treturn false;\n\t}\n\n\tupdate(\n\t\tnode: Node,\n\t\tdecorations?: readonly Decoration[],\n\t\tinnerDecorations?: DecorationSource\n\t) {\n\t\tif (node.type !== this.node.type) return false;\n\t\tif (node.attrs.hidden !== this.node.attrs.hidden) {\n\t\t\tif (node.attrs.hidden) {\n\t\t\t\tthis.dom.classList.add('hidden');\n\t\t\t} else {\n\t\t\t\tthis.dom.classList.remove('hidden');\n\t\t\t}\n\t\t}\n\t\tthis.node = node;\n\t\treturn true;\n\t}\n}\n","import { Fragment, Node, NodeSpec } from 'prosemirror-model';\nimport { Command, EditorState } from 'prosemirror-state';\nimport {\n\tDecoration,\n\tDecorationSource,\n\tEditorView,\n\tNodeView,\n\tNodeViewConstructor\n} from 'prosemirror-view';\nimport './style.scss';\nimport createElement, { updateElement } from '../../createElement';\nimport { BaseNodeView } from '../../utils/view';\n\nexport const taskItem: NodeSpec = {\n\tcontent: 'paragraph block*',\n\tgroup: 'block',\n\tattrs: {\n\t\tchecked: { default: false }\n\t},\n\ttoDOM(node) {\n\t\treturn [\n\t\t\t'li',\n\t\t\t{ class: 'task-item' },\n\t\t\t[\n\t\t\t\t'div',\n\t\t\t\t{ class: 'task-item-checkbox' },\n\t\t\t\t[\n\t\t\t\t\t'input',\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\t\tchecked: node.attrs.checked ? 'checked' : null,\n\t\t\t\t\t\tcontenteditable: 'false',\n\t\t\t\t\t\ttabindex: '-1'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t],\n\t\t\t['p', { class: 'task-item-content' }, 0]\n\t\t];\n\t},\n\tparseDOM: [\n\t\t{\n\t\t\ttag: 'li.task-list-item',\n\t\t\tgetAttrs: (dom) => ({\n\t\t\t\tchecked: dom.querySelector<HTMLInputElement>('input[type=checkbox]')\n\t\t\t\t\t?.checked\n\t\t\t})\n\t\t}\n\t]\n};\n\nexport const taskList: NodeSpec = {\n\tcontent: 'taskItem+',\n\tgroup: 'block',\n\ttoDOM: () => ['ul', { class: 'task-list' }, 0],\n\tparseDOM: [{ tag: 'ul.task-list' }]\n};\n\nexport const createTaskList: Command = (state, dispatch) => {\n\tconst { taskList, taskItem } = state.schema.nodes;\n\tif (dispatch) {\n\t\tdispatch(\n\t\t\tstate.tr\n\t\t\t\t.replaceSelectionWith(taskList.create(null, taskItem.createAndFill()))\n\t\t\t\t.scrollIntoView()\n\t\t);\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport class TaskItemView extends BaseNodeView {\n\tcontentDOM?: HTMLElement | null | undefined;\n\tconstructor(...args: Parameters<NodeViewConstructor>) {\n\t\tconst [node, view, getPos] = args;\n\t\tsuper(node, view);\n\t\tthis.contentDOM = createElement('div', { class: 'task-item-content' });\n\t\tthis.view = view;\n\t\tthis.dom = createElement(\n\t\t\t'li',\n\t\t\t{ class: 'task-item' },\n\t\t\tcreateElement(\n\t\t\t\t'div',\n\t\t\t\t{ class: 'task-item-checkbox' },\n\t\t\t\tcreateElement('input', {\n\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\tchecked: node.attrs.checked ? 'true' : void 0,\n\t\t\t\t\tonchange: (e) => {\n\t\t\t\t\t\tconst val = (e.target as HTMLInputElement)?.checked;\n\t\t\t\t\t\tlet tr = view.state.tr;\n\t\t\t\t\t\tview.dispatch(\n\t\t\t\t\t\t\ttr.setNodeAttribute(getPos() as number, 'checked', !!val)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t),\n\t\t\tthis.contentDOM\n\t\t);\n\t}\n\tupdate(node: Node) {\n\t\tif (!super.update(node)) return false;\n\t\tupdateElement(this.dom, {\n\t\t\tclass: `task-item${node.attrs.checked ? ' checked' : ''}`\n\t\t});\n\t\treturn true;\n\t}\n}\n\nexport const TaskItemViewConstructor = (\n\t...args: Parameters<NodeViewConstructor>\n) => new TaskItemView(...args);\nexport default () => {};\n","import { Attrs, Node } from 'prosemirror-model';\nimport { CellAttrs } from './utils';\n\nlet readFromCache: (key: Node) => TableMap | undefined;\nlet addToCache: (key: Node, value: TableMap) => TableMap;\n\nif (typeof WeakMap !== 'undefined') {\n\tlet cache = new WeakMap<Node, TableMap>();\n\treadFromCache = (key) => cache.get(key);\n\taddToCache = (key, value) => {\n\t\tcache.set(key, value);\n\t\treturn value;\n\t};\n} else {\n\tconst cache: (Node | TableMap)[] = [];\n\tconst cacheSize = 10;\n\tlet cachePos = 0;\n\treadFromCache = (key) => {\n\t\tfor (let i = 0; i < cache.length; i += 2) {\n\t\t\tif (cache[i] == key) return cache[i + 1] as TableMap;\n\t\t}\n\t};\n\n\taddToCache = (key, value) => {\n\t\tif (cachePos == cacheSize) cachePos = 0;\n\t\tcache[cachePos++] = key;\n\t\treturn (cache[cachePos++] = value);\n\t};\n}\n\nexport interface Rect {\n\tleft: number;\n\ttop: number;\n\tright: number;\n\tbottom: number;\n}\n\nexport type Problem =\n\t| {\n\t\t\ttype: 'colwidth mismatch';\n\t\t\tpos: number;\n\t\t\tcolwidth: ColWidths;\n\t  }\n\t| {\n\t\t\ttype: 'collision';\n\t\t\tpos: number;\n\t\t\trow: number;\n\t\t\tn: number;\n\t  }\n\t| {\n\t\t\ttype: 'missing';\n\t\t\trow: number;\n\t\t\tn: number;\n\t  }\n\t| {\n\t\t\ttype: 'overlong_rowspan';\n\t\t\tpos: number;\n\t\t\tn: number;\n\t  };\n\nexport class TableMap {\n\tconstructor(\n\t\tpublic width: number,\n\t\tpublic height: number,\n\t\tpublic map: number[],\n\t\tpublic problems: Problem[] = []\n\t) {}\n\n\trectBetween(a: number, b: number): Rect {\n\t\tconst {\n\t\t\tleft: leftA,\n\t\t\ttop: topA,\n\t\t\tright: rightA,\n\t\t\tbottom: bottomA\n\t\t} = this.findCell(a);\n\n\t\tconst {\n\t\t\tleft: leftB,\n\t\t\ttop: topB,\n\t\t\tright: rightB,\n\t\t\tbottom: bottomB\n\t\t} = this.findCell(b);\n\n\t\treturn {\n\t\t\tleft: Math.min(leftA, leftB),\n\t\t\ttop: Math.min(topA, topB),\n\t\t\tright: Math.max(rightA, rightB),\n\t\t\tbottom: Math.max(bottomA, bottomB)\n\t\t};\n\t}\n\n\tfindCell(pos: number): Rect {\n\t\tfor (let i = 0; i < this.map.length; i++) {\n\t\t\tconst curPos = this.map[i];\n\t\t\tif (curPos != pos) continue;\n\t\t\tconst left = i % this.width;\n\t\t\tconst top = Math.floor(i / this.width);\n\t\t\tlet right = left + 1;\n\t\t\tlet bottom = top + 1;\n\n\t\t\tfor (let j = 1; right < this.width && this.map[i + j] == curPos; j++)\n\t\t\t\tright++;\n\t\t\tfor (\n\t\t\t\tlet j = 1;\n\t\t\t\tbottom < this.height && this.map[i + this.width * j] == curPos;\n\t\t\t\tj++\n\t\t\t)\n\t\t\t\tbottom++;\n\t\t\treturn { left, top, right, bottom };\n\t\t}\n\t\tthrow new RangeError(`No cell with offset ${pos} found`);\n\t}\n\n\tnextCell(pos: number, axis: 'horiz' | 'vert', dir: number): number | null {\n\t\tconst { left, top, right, bottom } = this.findCell(pos);\n\t\tif (axis === 'horiz') {\n\t\t\tif (dir < 0 ? left === 0 : right == this.width) return null;\n\t\t\treturn this.map[top * this.width + (dir < 0 ? left - 1 : right)];\n\t\t} else {\n\t\t\tif (dir < 0 ? top == 0 : bottom == this.height) return null;\n\t\t\treturn this.map[left + this.width * (dir < 0 ? top - 1 : bottom)];\n\t\t}\n\t}\n\n\tcolCount(pos: number): number {\n\t\tfor (let i = 0; i < this.map.length; i++) {\n\t\t\tif (this.map[i] == pos) {\n\t\t\t\treturn i % this.width;\n\t\t\t}\n\t\t}\n\t\tthrow new RangeError(`No cell width offset ${pos} found`);\n\t}\n\n\tcellsInRect(rect: Rect): number[] {\n\t\tconst result: number[] = [];\n\t\tconst seen: Record<number, boolean> = {};\n\n\t\tfor (let row = rect.top; row < rect.bottom; row++) {\n\t\t\tfor (let col = rect.left; col < rect.right; col++) {\n\t\t\t\tconst index = row * this.width + col;\n\t\t\t\tconst pos = this.map[index];\n\n\t\t\t\tif (seen[pos]) continue;\n\n\t\t\t\tseen[pos] = true;\n\n\t\t\t\tif (\n\t\t\t\t\t(col == rect.left && col && this.map[index - 1] == pos) ||\n\t\t\t\t\t(row == rect.top && row && this.map[index - this.width] == pos)\n\t\t\t\t)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tresult.push(pos);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpositionAt(row: number, col: number, table: Node): number {\n\t\tfor (let i = 0, rowStart = 0; ; i++) {\n\t\t\tconst rowEnd = rowStart + table.child(i).nodeSize;\n\t\t\tif (i == row) {\n\t\t\t\tlet index = col + row * this.width;\n\t\t\t\tconst rowEndIndex = (row + 1) * this.width;\n\t\t\t\twhile (index < rowEndIndex && this.map[index] < rowStart) index++;\n\t\t\t\treturn index == rowEndIndex ? rowEnd - 1 : this.map[index];\n\t\t\t}\n\t\t\trowStart = rowEnd;\n\t\t}\n\t}\n\tstatic get(table: Node): TableMap {\n\t\treturn readFromCache(table) || addToCache(table, computeMap(table));\n\t}\n}\nexport type ColWidths = number[];\nfunction computeMap(table: Node): TableMap {\n\tif (table.type.spec.tableRole != 'table')\n\t\tthrow new RangeError('Not a table node: ' + table.type.name);\n\n\tconst width = findWidth(table),\n\t\theight = table.childCount;\n\tconst map = Array(width * height).fill(0);\n\tlet mapPos = 0;\n\tlet problems: Problem[] | undefined;\n\tconst colWidths: ColWidths = [];\n\tfor (let row = 0, pos = 0; row < height; row++) {\n\t\tconst rowNode = table.child(row);\n\t\tpos++;\n\t\tfor (let i = 0; ; i++) {\n\t\t\twhile (mapPos < map.length && map[mapPos] != 0) mapPos++;\n\t\t\tif (i == rowNode.childCount) break;\n\t\t\tconst cellNode = rowNode.child(i);\n\t\t\tconst { colspan, rowspan, colwidth } = cellNode.attrs;\n\t\t\tfor (let h = 0; h < rowspan; h++) {\n\t\t\t\tif (h + row >= height) {\n\t\t\t\t\t(problems || (problems = [])).push({\n\t\t\t\t\t\ttype: 'overlong_rowspan',\n\t\t\t\t\t\tpos,\n\t\t\t\t\t\tn: rowspan - h\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst start = mapPos + h * width;\n\t\t\t\tfor (let w = 0; w < colspan; w++) {\n\t\t\t\t\tif (map[start + w] == 0) map[start + w] = pos;\n\t\t\t\t\telse {\n\t\t\t\t\t\t(problems || (problems = [])).push({\n\t\t\t\t\t\t\ttype: 'collision',\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tpos,\n\t\t\t\t\t\t\tn: colspan - w\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst colW = colwidth && colwidth[w];\n\t\t\t\t\tif (colW) {\n\t\t\t\t\t\tconst widthIndex = ((start + w) % width) * 2,\n\t\t\t\t\t\t\tprev = colWidths[widthIndex];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tprev == null ||\n\t\t\t\t\t\t\t(prev != colW && colWidths[widthIndex + 1] == 1)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tcolWidths[widthIndex] = colW;\n\t\t\t\t\t\t\tcolWidths[widthIndex + 1] = 1;\n\t\t\t\t\t\t} else if (prev == colW) {\n\t\t\t\t\t\t\tcolWidths[widthIndex + 1]++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmapPos += colspan;\n\t\t\tpos += cellNode.nodeSize;\n\t\t}\n\t\tconst expectedPos = (row + 1) * width;\n\t\tlet missing = 0;\n\t\twhile (mapPos < expectedPos) if (map[mapPos++] == 0) missing++;\n\t\tif (missing) {\n\t\t\t(problems || (problems = [])).push({ type: 'missing', row, n: missing });\n\t\t}\n\t\tpos++;\n\t}\n\n\tconst tableMap = new TableMap(width, height, map);\n\tlet badWidths = false;\n\n\tfor (let i = 0; !badWidths && i < colWidths.length; i += 2)\n\t\tif (colWidths[i] != null && colWidths[i + 1] < height) badWidths = true;\n\n\tif (badWidths) findBadColWidths(tableMap, colWidths, table);\n\n\treturn tableMap;\n}\n\nfunction findWidth(table: Node): number {\n\tlet width = -1;\n\tlet hasRowSpan = false;\n\tfor (let row = 0; row < table.childCount; row++) {\n\t\tconst rowNode = table.child(row);\n\t\tlet rowWidth = 0;\n\t\tif (hasRowSpan)\n\t\t\tfor (let j = 0; j < row; j++) {\n\t\t\t\tconst prevRow = table.child(j);\n\t\t\t\tfor (let i = 0; i < prevRow.childCount; i++) {\n\t\t\t\t\tconst cell = prevRow.child(i);\n\t\t\t\t\tif (j + cell.attrs.rowspan > row) rowWidth += cell.attrs.colspan;\n\t\t\t\t}\n\t\t\t}\n\t\tfor (let i = 0; i < rowNode.childCount; i++) {\n\t\t\tconst cell = rowNode.child(i);\n\t\t\trowWidth += cell.attrs.colspan;\n\t\t\tif (cell.attrs.rowspan > 1) hasRowSpan = true;\n\t\t}\n\t\tif (width == -1) width = rowWidth;\n\t\twidth = Math.max(width, rowWidth);\n\t}\n\treturn width;\n}\n\nfunction findBadColWidths(\n\tmap: TableMap,\n\tcolWidths: ColWidths,\n\ttable: Node\n): void {\n\tif (!map.problems) map.problems = [];\n\tconst seen: Record<number, boolean> = {};\n\tfor (let i = 0; i < map.map.length; i++) {\n\t\tconst pos = map.map[i];\n\t\tif (seen[pos]) continue;\n\t\tseen[pos] = true;\n\t\tconst node = table.nodeAt(pos);\n\t\tif (!node) {\n\t\t\tthrow new RangeError(`No cell with offset ${pos} found`);\n\t\t}\n\n\t\tlet updated = null;\n\t\tconst attrs = node.attrs as CellAttrs;\n\t\tfor (let j = 0; j < attrs.colspan; j++) {\n\t\t\tconst col = (i + j) % map.width;\n\t\t\tconst colWidth = colWidths[col * 2];\n\t\t\tif (\n\t\t\t\tcolWidth != null &&\n\t\t\t\t(!attrs.colwidth || attrs.colwidth[j] != colWidth)\n\t\t\t)\n\t\t\t\t(updated || (updated = freshColWidth(attrs)))[j] = colWidth;\n\t\t}\n\t\tif (updated)\n\t\t\tmap.problems.unshift({\n\t\t\t\ttype: 'colwidth mismatch',\n\t\t\t\tpos,\n\t\t\t\tcolwidth: updated\n\t\t\t});\n\t}\n}\n\nfunction freshColWidth(attrs: Attrs): ColWidths {\n\tif (attrs.colwidth) return attrs.colwidth.slice();\n\tconst result: ColWidths = [];\n\tfor (let i = 0; i < attrs.colspan; i++) result.push(0);\n\n\treturn result;\n}\n","import {\n\tAttributeSpec,\n\tAttrs,\n\tNodeSpec,\n\tNode,\n\tNodeType,\n\tSchema\n} from 'prosemirror-model';\nimport { CellAttrs, MutableAttrs } from './utils';\n\nexport type getFromDOM = (dom: HTMLElement) => unknown;\nexport type setDOMAttr = (value: unknown, attrs: MutableAttrs) => void;\n\nexport interface CellAttributes {\n\tdefault: unknown;\n\tgetFromDOM?: getFromDOM;\n\tsetDOMAttr?: setDOMAttr;\n}\n\nexport interface TableNodesOptions {\n\ttableGroup?: string;\n\tcellContent: string;\n\tcellAttributes: { [k: string]: CellAttributes };\n}\n\nexport type TableNodes = Record<\n\t'table' | 'tableRow' | 'tableCell' | 'tableHeader',\n\tNodeSpec\n>;\n\nconst getCellAttrs = (dom: HTMLElement | string, extraAttrs: Attrs): Attrs => {\n\tif (typeof dom === 'string') return {} as Attrs;\n\n\tconst widthAttr = dom.getAttribute('data-colwidth');\n\tconst widths =\n\t\twidthAttr && /^\\d+(,\\d+)*$/.test(widthAttr)\n\t\t\t? widthAttr.split(',').map(Number)\n\t\t\t: null;\n\tconst colspan = Number(dom.getAttribute('colspan') || 1);\n\tconst rowspan = Number(dom.getAttribute('rowspan') || 1);\n\tconst result: MutableAttrs = {\n\t\tcolspan,\n\t\trowspan,\n\t\tcolwidth: widths && widths.length == colspan ? widths : null\n\t} satisfies CellAttrs;\n\n\tfor (const prop of Object.keys(extraAttrs)) {\n\t\tconst getter = extraAttrs[prop].getFromDOM;\n\t\tconst value = getter && getter(dom);\n\t\tif (value !== null) result[prop] = value;\n\t}\n\treturn result;\n};\n\nconst setCellAttrs = (node: Node, extraAttrs: Attrs): Attrs => {\n\tconst attrs: MutableAttrs = {};\n\tif (node.attrs.colspan != 1) attrs.colspan = node.attrs.colspan;\n\tif (node.attrs.rowspan != 1) attrs.rowspan = node.attrs.rowspan;\n\tif (node.attrs.colwidth)\n\t\tattrs['data-colwidth'] = node.attrs.colwidth.join(',');\n\n\tfor (const prop in extraAttrs) {\n\t\tconst setter = extraAttrs[prop].setDOMAttr;\n\t\tif (setter) setter(node.attrs[prop], attrs);\n\t}\n\treturn attrs;\n};\n\nexport const tableNodes = (options: TableNodesOptions): TableNodes => {\n\tconst extraAttrs = options.cellAttributes || {};\n\tconst cellAttrs: Record<string, AttributeSpec> = {\n\t\tcolspan: { default: 1 },\n\t\trowspan: { default: 1 },\n\t\tcolwidth: { default: null }\n\t};\n\n\tfor (const prop of Object.keys(extraAttrs))\n\t\tcellAttrs[prop] = { default: extraAttrs[prop].default };\n\treturn {\n\t\ttable: {\n\t\t\tattrs: { class: { default: '' }, hidden: { default: false } },\n\t\t\tcontent: 'tableRow+',\n\t\t\ttableRole: 'table',\n\t\t\tisolating: true,\n\t\t\tgroup: options.tableGroup,\n\t\t\tparseDOM: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'table',\n\t\t\t\t\tgetAttrs(dom) {\n\t\t\t\t\t\treturn { class: dom.getAttribute('class') };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\ttoDOM(node) {\n\t\t\t\treturn ['table', { class: node.attrs.class }, ['tbody', 0]];\n\t\t\t}\n\t\t},\n\t\ttableRow: {\n\t\t\tcontent: '(tableCell | tableHeader)*',\n\t\t\ttableRole: 'row',\n\t\t\tparseDOM: [{ tag: 'tr' }],\n\t\t\ttoDOM() {\n\t\t\t\treturn ['tr', 0];\n\t\t\t}\n\t\t},\n\t\ttableCell: {\n\t\t\tcontent: options.cellContent,\n\t\t\tattrs: cellAttrs,\n\t\t\ttableRole: 'cell',\n\t\t\tisolating: true,\n\t\t\tparseDOM: [\n\t\t\t\t{ tag: 'td', getAttrs: (dom) => getCellAttrs(dom, extraAttrs) }\n\t\t\t],\n\t\t\ttoDOM(node) {\n\t\t\t\treturn ['td', setCellAttrs(node, extraAttrs), 0];\n\t\t\t}\n\t\t},\n\t\ttableHeader: {\n\t\t\tcontent: options.cellContent,\n\t\t\tattrs: cellAttrs,\n\t\t\ttableRole: 'headerCell',\n\t\t\tisolating: true,\n\t\t\tparseDOM: [\n\t\t\t\t{ tag: 'th', getAttrs: (dom) => getCellAttrs(dom, extraAttrs) }\n\t\t\t],\n\t\t\ttoDOM(node) {\n\t\t\t\treturn ['th', setCellAttrs(node, extraAttrs), 0];\n\t\t\t}\n\t\t}\n\t};\n};\n\nexport type TableRole = 'table' | 'row' | 'cell' | 'headerCell';\n\nexport function tableNodeTypes(schema: Schema): Record<TableRole, NodeType> {\n\tlet result = schema.cached.tableNodeTypes;\n\tif (!result) {\n\t\tresult = schema.cached.tableNodeTypes = {};\n\t\tfor (const name in schema.nodes) {\n\t\t\tconst type = schema.nodes[name];\n\t\t\tlet role = type.spec.tableRole;\n\t\t\tif (role) result[role] = type;\n\t\t}\n\t}\n\treturn result;\n}\n","import { Attrs, Node, ResolvedPos } from 'prosemirror-model';\nimport { TableMap } from './tableMap';\nimport { tableNodeTypes } from './schema';\nimport { EditorState, NodeSelection, PluginKey } from 'prosemirror-state';\nimport { CellSelection } from './cellSelection';\nimport { Decoration, DecorationSet, DecorationSource } from 'prosemirror-view';\n\nexport interface TableState {\n\tdecorations: DecorationSet;\n\tset: number | null;\n\thoverDecos?: Decoration[];\n}\nexport const tableEditingKey = new PluginKey<TableState>('selectingCells');\n\nexport interface CellAttrs {\n\tcolspan: number;\n\trowspan: number;\n\tcolwidth: number[] | null;\n}\n\nexport type MutableAttrs = Record<string, unknown>;\n\nexport const addColspan = (attrs: CellAttrs, pos: number, n = 1): Attrs => {\n\tconst result = { ...attrs, colspan: attrs.colspan + n };\n\tif (result.colwidth) {\n\t\tresult.colwidth = result.colwidth.slice();\n\t\tfor (let i = 0; i < n; i++) result.colwidth.splice(pos, 0, 0);\n\t}\n\treturn result;\n};\n\nexport function columnIsHeader(\n\tmap: TableMap,\n\ttable: Node,\n\tcol: number\n): boolean {\n\tconst headerCell = tableNodeTypes(table.type.schema).headerCell;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tif (table.nodeAt(map.map[col + row * map.width])!.type != headerCell)\n\t\t\treturn false;\n\t}\n\treturn true;\n}\n\nexport function isInTable(state: EditorState): boolean {\n\tconst $head = state.selection.$head;\n\tfor (let d = $head.depth; d > 0; d--)\n\t\tif ($head.node(d).type.spec.tableRole == 'row') return true;\n\n\treturn false;\n}\n\nexport function pointsAtCell($pos: ResolvedPos): boolean {\n\treturn $pos.parent.type.spec.tableRole == 'row' && !!$pos.nodeAfter;\n}\n\nexport function inSameTable($cellA: ResolvedPos, $cellB: ResolvedPos): boolean {\n\treturn (\n\t\t$cellA.depth == $cellB.depth &&\n\t\t$cellA.pos >= $cellB.start(-1) &&\n\t\t$cellA.pos <= $cellB.end(-1)\n\t);\n}\n\nexport function colCount($pos: ResolvedPos): number {\n\treturn TableMap.get($pos.node(-1)).colCount($pos.pos - $pos.start(-1));\n}\n\nexport function nextCell(\n\t$pos: ResolvedPos,\n\taxis: 'horiz' | 'vert',\n\tdir: number\n): ResolvedPos | null {\n\tconst table = $pos.node(-1);\n\tconst map = TableMap.get(table);\n\tconst tableStart = $pos.start(-1);\n\tconst moved = map.nextCell($pos.pos - tableStart, axis, dir);\n\treturn moved == null ? null : $pos.node(0).resolve(tableStart + moved);\n}\n\nexport function removeColSpan(attrs: CellAttrs, pos: number, n = 1): CellAttrs {\n\tconst result: CellAttrs = { ...attrs, colspan: attrs.colspan - n };\n\n\tif (result.colwidth) {\n\t\tresult.colwidth = result.colwidth.slice();\n\t\tresult.colwidth.splice(pos, n);\n\t\tif (!result.colwidth.some((w) => w > 0)) result.colwidth = null;\n\t}\n\treturn result;\n}\n\nexport function cellAround($pos: ResolvedPos): ResolvedPos | null {\n\tfor (let d = $pos.depth - 1; d > 0; d--)\n\t\tif ($pos.node(d).type.spec.tableRole == 'row')\n\t\t\treturn $pos.node(0).resolve($pos.before(d + 1));\n\n\treturn null;\n}\n\nexport function moveCellForward($pos: ResolvedPos): ResolvedPos {\n\treturn $pos.node(0).resolve($pos.pos + $pos.nodeAfter!.nodeSize);\n}\n\nexport function cellNear($pos: ResolvedPos): ResolvedPos | undefined {\n\tfor (\n\t\tlet after = $pos.nodeAfter, pos = $pos.pos;\n\t\tafter;\n\t\tafter = after.firstChild, pos++\n\t) {\n\t\tconst role = after.type.spec.tableRole;\n\t\tif (role == 'cell' || role == 'headerCell') return $pos.doc.resolve(pos);\n\t}\n\n\tfor (\n\t\tlet before = $pos.nodeBefore, pos = $pos.pos;\n\t\tbefore;\n\t\tbefore = before.lastChild, pos--\n\t) {\n\t\tconst role = before.type.spec.tableRole;\n\t\tif (role == 'cell' || role == 'headerCell') {\n\t\t\treturn $pos.doc.resolve(pos - before.nodeSize);\n\t\t}\n\t}\n}\n\nexport function selectionCell(state: EditorState): ResolvedPos {\n\tconst sel = state.selection as CellSelection | NodeSelection;\n\tif ('$anchorCell' in sel && sel.$anchorCell) {\n\t\treturn sel.$anchorCell.pos > sel.$headCell.pos\n\t\t\t? sel.$anchorCell\n\t\t\t: sel.$headCell;\n\t} else if (\n\t\t'node' in sel &&\n\t\tsel.node &&\n\t\tsel.node.type.spec.tableRole == 'cell'\n\t) {\n\t\treturn sel.$anchor;\n\t}\n\tconst $cell = cellAround(sel.$head) || cellNear(sel.$head);\n\tif ($cell) return $cell;\n\n\tthrow new RangeError(`No cell found around position ${sel.head}`);\n}\n\nexport const isEmpty = (val: unknown) =>\n\tval === null || val === undefined || Number.isNaN(val);\n","import { Fragment, Node, ResolvedPos, Slice } from 'prosemirror-model';\nimport {\n\tEditorState,\n\tNodeSelection,\n\tSelection,\n\tSelectionRange,\n\tTextSelection,\n\tTransaction\n} from 'prosemirror-state';\nimport { Mappable } from 'prosemirror-transform';\nimport { TableMap } from './tableMap';\nimport { CellAttrs, inSameTable, pointsAtCell, removeColSpan } from './utils';\nimport { Decoration, DecorationSet, DecorationSource } from 'prosemirror-view';\n\nexport interface CellSelectionJSON {\n\ttype: string;\n\tanchor: number;\n\thead: number;\n}\n\nexport class CellSelection extends Selection {\n\t$anchorCell: ResolvedPos;\n\t$headCell: ResolvedPos;\n\n\tconstructor($anchorCell: ResolvedPos, $headCell: ResolvedPos = $anchorCell) {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\t\tconst rect = map.rectBetween(\n\t\t\t$anchorCell.pos - tableStart,\n\t\t\t$headCell.pos - tableStart\n\t\t);\n\t\tconst doc = $anchorCell.node(0);\n\t\tconst cells = map\n\t\t\t.cellsInRect(rect)\n\t\t\t.filter((p) => p != $headCell.pos - tableStart);\n\n\t\tcells.unshift($headCell.pos - tableStart);\n\t\tconst ranges = cells.map((pos) => {\n\t\t\tconst cell = table.nodeAt(pos);\n\t\t\tif (!cell) {\n\t\t\t\tthrow new RangeError(`No cell with offset ${pos} found`);\n\t\t\t}\n\t\t\tconst from = tableStart + pos + 1;\n\t\t\treturn new SelectionRange(\n\t\t\t\tdoc.resolve(from),\n\t\t\t\tdoc.resolve(from + cell.content.size)\n\t\t\t);\n\t\t});\n\t\tsuper(ranges[0].$from, ranges[0].$to, ranges);\n\t\tthis.$anchorCell = $anchorCell;\n\t\tthis.$headCell = $headCell;\n\t}\n\teq(selection: unknown): boolean {\n\t\treturn (\n\t\t\tselection instanceof CellSelection &&\n\t\t\tselection.$anchorCell.pos == this.$anchorCell.pos &&\n\t\t\tselection.$headCell.pos == this.$headCell.pos\n\t\t);\n\t}\n\tmap(doc: Node, mapping: Mappable): CellSelection | Selection {\n\t\tconst $anchorCell = doc.resolve(mapping.map(this.$anchorCell.pos));\n\t\tconst $headCell = doc.resolve(mapping.map(this.$headCell.pos));\n\n\t\tif (\n\t\t\tpointsAtCell($anchorCell) &&\n\t\t\tpointsAtCell($headCell) &&\n\t\t\tinSameTable($anchorCell, $headCell)\n\t\t) {\n\t\t\tconst tableChanged = this.$anchorCell.node(-1) != $anchorCell.node(-1);\n\t\t\tif (tableChanged && this.isRowSelection())\n\t\t\t\treturn CellSelection.rowSelection($anchorCell, $headCell);\n\t\t\telse if (tableChanged && this.isColSelection())\n\t\t\t\treturn CellSelection.colSelection($anchorCell, $headCell);\n\t\t\telse return new CellSelection($anchorCell, $headCell);\n\t\t}\n\n\t\treturn TextSelection.between($anchorCell, $headCell);\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\ttype: 'cell',\n\t\t\tanchor: this.$anchorCell.pos,\n\t\t\thead: this.$headCell.pos\n\t\t};\n\t}\n\n\tpublic isRowSelection(): boolean {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\n\t\tconst anchorLeft = map.colCount(this.$anchorCell.pos - tableStart);\n\t\tconst headLeft = map.colCount(this.$headCell.pos - tableStart);\n\t\tif (Math.min(anchorLeft, headLeft) > 0) return false;\n\t\tconst anchorRight = anchorLeft + this.$anchorCell.nodeAfter!.attrs.colspan;\n\t\tconst headRight = headLeft + this.$headCell.nodeAfter!.attrs.colspan;\n\t\treturn Math.max(anchorRight, headRight) == map.width;\n\t}\n\n\tpublic isColSelection(): boolean {\n\t\tconst anchorTop = this.$anchorCell.index(-1);\n\t\tconst headTop = this.$headCell.index(-1);\n\t\tif (Math.min(anchorTop, headTop) > 0) return false;\n\n\t\tconst anchorBottom = anchorTop + this.$anchorCell.nodeAfter!.attrs.rowspan;\n\t\tconst headBottom = headTop + this.$headCell.nodeAfter!.attrs.rowspan;\n\n\t\treturn (\n\t\t\tMath.max(anchorBottom, headBottom) == this.$headCell.node(-1).childCount\n\t\t);\n\t}\n\n\tpublic static colSelection(\n\t\t$anchorCell: ResolvedPos,\n\t\t$headCell: ResolvedPos = $anchorCell\n\t): CellSelection {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\n\t\tconst anchorRect = map.findCell($anchorCell.pos - tableStart);\n\t\tconst headRect = map.findCell($headCell.pos - tableStart);\n\t\tconst doc = $anchorCell.node(0);\n\n\t\tif (anchorRect.top <= headRect.top) {\n\t\t\tif (anchorRect.top > 0)\n\t\t\t\t$anchorCell = doc.resolve(tableStart + map.map[anchorRect.left]);\n\t\t\tif (headRect.bottom < map.height)\n\t\t\t\t$headCell = doc.resolve(\n\t\t\t\t\ttableStart +\n\t\t\t\t\t\tmap.map[map.width * (map.height - 1) + headRect.right - 1]\n\t\t\t\t);\n\t\t} else {\n\t\t\tif (headRect.top > 0)\n\t\t\t\t$headCell = doc.resolve(tableStart + map.map[headRect.left]);\n\t\t\tif (anchorRect.bottom < map.height)\n\t\t\t\t$anchorCell = doc.resolve(\n\t\t\t\t\ttableStart +\n\t\t\t\t\t\tmap.map[map.width * (map.height - 1) + anchorRect.right - 1]\n\t\t\t\t);\n\t\t}\n\t\treturn new CellSelection($anchorCell, $headCell);\n\t}\n\n\tpublic forEachCell(f: (node: Node, pos: number) => void) {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\n\t\tconst cells = map.cellsInRect(\n\t\t\tmap.rectBetween(\n\t\t\t\tthis.$anchorCell.pos - tableStart,\n\t\t\t\tthis.$headCell.pos - tableStart\n\t\t\t)\n\t\t);\n\t\tfor (let i = 0; i < cells.length; i++) {\n\t\t\tf(table.nodeAt(cells[i])!, tableStart + cells[i]);\n\t\t}\n\t}\n\n\tpublic content(): Slice {\n\t\tconst table = this.$anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = this.$anchorCell.start(-1);\n\n\t\tconst rect = map.rectBetween(\n\t\t\tthis.$anchorCell.pos - tableStart,\n\t\t\tthis.$headCell.pos - tableStart\n\t\t);\n\t\tconst seen: Record<number, boolean> = {};\n\t\tconst rows = [];\n\t\tfor (let row = rect.top; row < rect.bottom; row++) {\n\t\t\tconst rowContent = [];\n\t\t\tfor (\n\t\t\t\tlet index = row * map.width + rect.left, col = rect.left;\n\t\t\t\tcol < rect.right;\n\t\t\t\tcol++, index++\n\t\t\t) {\n\t\t\t\tconst pos = map.map[index];\n\t\t\t\tif (seen[pos]) continue;\n\t\t\t\tseen[pos] = true;\n\n\t\t\t\tconst cellRect = map.findCell(pos);\n\t\t\t\tlet cell = table.nodeAt(pos);\n\t\t\t\tif (!cell) {\n\t\t\t\t\tthrow RangeError(`No cell with offset ${pos} found`);\n\t\t\t\t}\n\n\t\t\t\tconst extraLeft = rect.left - cellRect.left;\n\t\t\t\tconst extraRight = cellRect.right - rect.right;\n\n\t\t\t\tif (extraLeft > 0 || extraRight > 0) {\n\t\t\t\t\tlet attrs = cell.attrs as CellAttrs;\n\t\t\t\t\tif (extraLeft > 0) {\n\t\t\t\t\t\tattrs = removeColSpan(attrs, 0, extraLeft);\n\t\t\t\t\t}\n\t\t\t\t\tif (extraRight > 0) {\n\t\t\t\t\t\tattrs = removeColSpan(\n\t\t\t\t\t\t\tattrs,\n\t\t\t\t\t\t\tattrs.colspan - extraRight,\n\t\t\t\t\t\t\textraRight\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (cellRect.left < rect.left) {\n\t\t\t\t\t\tcell = cell.type.createAndFill(attrs);\n\t\t\t\t\t\tif (!cell) {\n\t\t\t\t\t\t\tthrow RangeError(\n\t\t\t\t\t\t\t\t`Could not create cell with attrs ${JSON.stringify(attrs)}`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcell = cell.type.create(attrs, cell.content);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (cellRect.top < rect.top || cellRect.bottom > rect.bottom) {\n\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t...cell.attrs,\n\t\t\t\t\t\trowspan:\n\t\t\t\t\t\t\tMath.min(cellRect.bottom, rect.bottom) -\n\t\t\t\t\t\t\tMath.max(cellRect.top, rect.top)\n\t\t\t\t\t};\n\t\t\t\t\tif (cellRect.top < rect.top) {\n\t\t\t\t\t\tcell = cell.type.createAndFill(attrs)!;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcell = cell.type.create(attrs, cell.content);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trowContent.push(cell);\n\t\t\t}\n\t\t\trows.push(table.child(row).copy(Fragment.from(rowContent)));\n\t\t}\n\n\t\tconst fragment =\n\t\t\tthis.isColSelection() && this.isRowSelection() ? table : rows;\n\t\treturn new Slice(Fragment.from(fragment), 1, 1);\n\t}\n\n\tpublic static rowSelection(\n\t\t$anchorCell: ResolvedPos,\n\t\t$headCell: ResolvedPos = $anchorCell\n\t): CellSelection {\n\t\tconst table = $anchorCell.node(-1);\n\t\tconst map = TableMap.get(table);\n\t\tconst tableStart = $anchorCell.start(-1);\n\n\t\tconst anchorRect = map.findCell($anchorCell.pos - tableStart);\n\t\tconst headRect = map.findCell($headCell.pos - tableStart);\n\t\tconst doc = $anchorCell.node(0);\n\n\t\tif (anchorRect.left <= headRect.left) {\n\t\t\tif (anchorRect.left > 0)\n\t\t\t\t$anchorCell = doc.resolve(\n\t\t\t\t\ttableStart + map.map[anchorRect.top * map.width]\n\t\t\t\t);\n\t\t\tif (headRect.right < map.width)\n\t\t\t\t$headCell = doc.resolve(\n\t\t\t\t\ttableStart + map.map[map.width * (headRect.top + 1) - 1]\n\t\t\t\t);\n\t\t} else {\n\t\t\tif (headRect.left > 0)\n\t\t\t\t$headCell = doc.resolve(tableStart + map.map[headRect.top * map.width]);\n\t\t\tif (anchorRect.right < map.width)\n\t\t\t\t$anchorCell = doc.resolve(\n\t\t\t\t\ttableStart + map.map[map.width * (anchorRect.top + 1) - 1]\n\t\t\t\t);\n\t\t}\n\t\treturn new CellSelection($anchorCell, $headCell);\n\t}\n\tstatic fromJSON(doc: Node, json: CellSelectionJSON): CellSelection {\n\t\treturn new CellSelection(doc.resolve(json.anchor), doc.resolve(json.head));\n\t}\n\n\tstatic create(\n\t\tdoc: Node,\n\t\tanchorCell: number,\n\t\theadCell: number = anchorCell\n\t): CellSelection {\n\t\treturn new CellSelection(doc.resolve(anchorCell), doc.resolve(headCell));\n\t}\n\n\tgetBookmark(): CellBookmark {\n\t\treturn new CellBookmark(this.$anchorCell.pos, this.$headCell.pos);\n\t}\n}\nCellSelection.prototype.visible = false;\n\nSelection.jsonID('cell', CellSelection);\n\nexport class CellBookmark {\n\tconstructor(\n\t\tpublic anchor: number,\n\t\tpublic head: number\n\t) {}\n\n\tmap(mapping: Mappable): CellBookmark {\n\t\treturn new CellBookmark(mapping.map(this.anchor), mapping.map(this.head));\n\t}\n\n\tresolve(doc: Node): CellSelection | Selection {\n\t\tconst $anchorCell = doc.resolve(this.anchor),\n\t\t\t$headCell = doc.resolve(this.head);\n\t\tif (\n\t\t\t$anchorCell.parent.type.spec.tableRole == 'row' &&\n\t\t\t$headCell.parent.type.spec.tableRole == 'row' &&\n\t\t\t$anchorCell.index() < $anchorCell.parent.childCount &&\n\t\t\t$headCell.index() < $headCell.parent.childCount &&\n\t\t\tinSameTable($anchorCell, $headCell)\n\t\t)\n\t\t\treturn new CellSelection($anchorCell, $headCell);\n\t\telse return Selection.near($headCell, 1);\n\t}\n}\n\nexport function drawCellSelection(state: EditorState): Decoration[] {\n\tconst cells: Decoration[] = [];\n\tif (!(state.selection instanceof CellSelection)) return cells;\n\tstate.selection.forEachCell((node, pos) => {\n\t\tcells.push(\n\t\t\tDecoration.node(pos, pos + node.nodeSize, { class: 'selectedCell' })\n\t\t);\n\t});\n\n\treturn cells;\n}\n\nfunction isCellBoundarySelection({ $from, $to }: TextSelection) {\n\tif ($from.pos == $to.pos || $from.pos < $from.pos - 6) return false; // Cheap elimination\n\tlet afterFrom = $from.pos;\n\tlet beforeTo = $to.pos;\n\tlet depth = $from.depth;\n\tfor (; depth >= 0; depth--, afterFrom++)\n\t\tif ($from.after(depth + 1) < $from.end(depth)) break;\n\tfor (let d = $to.depth; d >= 0; d--, beforeTo--)\n\t\tif ($to.before(d + 1) > $to.start(d)) break;\n\treturn (\n\t\tafterFrom == beforeTo &&\n\t\t/row|table/.test($from.node(depth).type.spec.tableRole)\n\t);\n}\n\nfunction isTextSelectionAcrossCells({ $from, $to }: TextSelection) {\n\tlet fromCellBoundaryNode: Node | undefined;\n\tlet toCellBoundaryNode: Node | undefined;\n\n\tfor (let i = $from.depth; i > 0; i--) {\n\t\tconst node = $from.node(i);\n\t\tif (\n\t\t\tnode.type.spec.tableRole === 'cell' ||\n\t\t\tnode.type.spec.tableRole === 'headerCell'\n\t\t) {\n\t\t\tfromCellBoundaryNode = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tfor (let i = $to.depth; i > 0; i--) {\n\t\tconst node = $to.node(i);\n\t\tif (\n\t\t\tnode.type.spec.tableRole === 'cell' ||\n\t\t\tnode.type.spec.tableRole === 'headerCell'\n\t\t) {\n\t\t\ttoCellBoundaryNode = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn fromCellBoundaryNode !== toCellBoundaryNode && $to.parentOffset === 0;\n}\n\nexport function normalizeSelection(\n\tstate: EditorState,\n\ttr: Transaction | undefined,\n\tallowTableNodeSelection: boolean\n) {\n\tconst sel = (tr || state).selection;\n\tconst doc = (tr || state).doc;\n\tlet normalize: Selection | undefined;\n\tlet role: string | undefined;\n\tif (sel instanceof NodeSelection && (role = sel.node.type.spec.tableRole)) {\n\t\tif (role == 'cell' || role == 'headerCell') {\n\t\t\tnormalize = CellSelection.create(doc, sel.from);\n\t\t} else if (role == 'row') {\n\t\t\tconst $cell = doc.resolve(sel.from + 1);\n\t\t\tnormalize = CellSelection.rowSelection($cell);\n\t\t} else if (!allowTableNodeSelection) {\n\t\t\tconst map = TableMap.get(sel.node);\n\t\t\tconst start = sel.from + 1;\n\t\t\tconst lastCell = start + map.map[map.width * map.height - 1];\n\t\t\tnormalize = CellSelection.create(doc, start + 1, lastCell);\n\t\t}\n\t} else if (sel instanceof TextSelection && isCellBoundarySelection(sel)) {\n\t\tnormalize = TextSelection.create(doc, sel.from);\n\t} else if (sel instanceof TextSelection && isTextSelectionAcrossCells(sel)) {\n\t\tnormalize = TextSelection.create(doc, sel.$from.start(), sel.$from.end());\n\t}\n\tif (normalize) (tr || (tr = state.tr)).setSelection(normalize);\n\treturn tr;\n}\n","import { Node } from 'prosemirror-model';\nimport { EditorState, PluginKey, Transaction } from 'prosemirror-state';\nimport { TableRole, tableNodeTypes } from './schema';\nimport { TableMap } from './tableMap';\nimport { CellAttrs, removeColSpan } from './utils';\n\nexport const fixTablesKey = new PluginKey<{ fixTables: boolean }>('fix-tables');\nfunction changedDescendants(\n  old: Node,\n  cur: Node,\n  offset: number,\n  f: (node: Node, pos: number) => void\n): void {\n  const oldSize = old.childCount,\n    curSize = cur.childCount;\n  outer: for (let i = 0, j = 0; i < curSize; i++) {\n    const child = cur.child(i);\n    for (let scan = j, e = Math.min(oldSize, i + 3); scan < e; scan++) {\n      if (old.child(scan) == child) {\n        j = scan + 1;\n        offset += child.nodeSize;\n        continue outer;\n      }\n    }\n    f(child, offset);\n    if (j < oldSize && old.child(j).sameMarkup(child))\n      changedDescendants(old.child(j), child, offset + 1, f);\n    else child.nodesBetween(0, child.content.size, f, offset + 1);\n    offset += child.nodeSize;\n  }\n}\n\nexport function fixTables(\n  state: EditorState,\n  oldState?: EditorState\n): Transaction | undefined {\n  let tr: Transaction | undefined;\n  const check = (node: Node, pos: number) => {\n    if (node.type.spec.tableRole == 'table')\n      tr = fixTable(state, node, pos, tr);\n  };\n  if (!oldState) state.doc.descendants(check);\n  else if (oldState.doc != state.doc)\n    changedDescendants(oldState.doc, state.doc, 0, check);\n  return tr;\n}\n\nexport function fixTable(\n  state: EditorState,\n  table: Node,\n  tablePos: number,\n  tr: Transaction | undefined\n): Transaction | undefined {\n  const map = TableMap.get(table);\n  if (!map.problems) return tr;\n  if (!tr) tr = state.tr;\n\n  // Track which rows we must add cells to, so that we can adjust that\n  // when fixing collisions.\n  const mustAdd: number[] = [];\n  for (let i = 0; i < map.height; i++) mustAdd.push(0);\n  for (let i = 0; i < map.problems.length; i++) {\n    const prob = map.problems[i];\n    if (prob.type == 'collision') {\n      const cell = table.nodeAt(prob.pos);\n      if (!cell) continue;\n      const attrs = cell.attrs as CellAttrs;\n      for (let j = 0; j < attrs.rowspan; j++) mustAdd[prob.row + j] += prob.n;\n      tr.setNodeMarkup(\n        tr.mapping.map(tablePos + 1 + prob.pos),\n        null,\n        removeColSpan(attrs, attrs.colspan - prob.n, prob.n)\n      );\n    } else if (prob.type == 'missing') {\n      mustAdd[prob.row] += prob.n;\n    } else if (prob.type == 'overlong_rowspan') {\n      const cell = table.nodeAt(prob.pos);\n      if (!cell) continue;\n      tr.setNodeMarkup(tr.mapping.map(tablePos + 1 + prob.pos), null, {\n        ...cell.attrs,\n        rowspan: cell.attrs.rowspan - prob.n,\n      });\n    } else if (prob.type == 'colwidth mismatch') {\n      const cell = table.nodeAt(prob.pos);\n      if (!cell) continue;\n      tr.setNodeMarkup(tr.mapping.map(tablePos + 1 + prob.pos), null, {\n        ...cell.attrs,\n        colwidth: prob.colwidth,\n      });\n    }\n  }\n  let first, last;\n  for (let i = 0; i < mustAdd.length; i++)\n    if (mustAdd[i]) {\n      if (first == null) first = i;\n      last = i;\n    }\n\n  for (let i = 0, pos = tablePos + 1; i < map.height; i++) {\n    const row = table.child(i);\n    const end = pos + row.nodeSize;\n    const add = mustAdd[i];\n    if (add > 0) {\n      let role: TableRole = 'cell';\n      if (row.firstChild) {\n        role = row.firstChild.type.spec.tableRole;\n      }\n      const nodes: Node[] = [];\n      for (let j = 0; j < add; j++) {\n        const node = tableNodeTypes(state.schema)[role].createAndFill();\n\n        if (node) nodes.push(node);\n      }\n      const side = (i == 0 || first == i - 1) && last == i ? pos + 1 : end - 1;\n      tr.insert(tr.mapping.map(side), nodes);\n    }\n    pos = end;\n  }\n  return tr.setMeta(fixTablesKey, { fixTables: true });\n}\n","import {\n\tCommand,\n\tEditorState,\n\tTextSelection,\n\tTransaction\n} from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Rect, TableMap } from './tableMap';\nimport { Fragment, Node, NodeType, ResolvedPos } from 'prosemirror-model';\nimport {\n\tCellAttrs,\n\taddColspan,\n\tcolumnIsHeader,\n\tisInTable,\n\tmoveCellForward,\n\tremoveColSpan,\n\tselectionCell\n} from './utils';\nimport { CellAttributes, tableNodeTypes } from './schema';\nimport { CellSelection } from './cellSelection';\nimport { Direction } from './input';\nexport const createTable: (rows: number, columns: number) => Command =\n\t(rows, columns) => (state, dispatch, view) => {\n\t\tconst { table, tableRow, tableHeader, tableCell, paragraph } =\n\t\t\tstate.schema.nodes;\n\n\t\tconst tableNode = table.create(\n\t\t\tnull,\n\t\t\tArray(rows + 1)\n\t\t\t\t.fill(null)\n\t\t\t\t.map((_, row) =>\n\t\t\t\t\ttableRow.create(\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tArray(columns)\n\t\t\t\t\t\t\t.fill(null)\n\t\t\t\t\t\t\t.map((_, col) =>\n\t\t\t\t\t\t\t\t(row === 0 ? tableHeader : tableCell).create(\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tparagraph.create(\n\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t\t// state.schema.text('cell row ' + row + ', col ' + col)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t);\n\t\tTableMap.get(tableNode);\n\t\tif (dispatch) {\n\t\t\tdispatch(state.tr.replaceSelectionWith(tableNode).scrollIntoView());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\nexport function insertTable(\n\tstate: EditorState,\n\tdispatch: EditorView['dispatch']\n) {\n\tconst { schema } = state;\n\tconst table = schema.nodes.table;\n\tconst row = schema.nodes.table_row;\n\tconst cell = schema.nodes.table_cell;\n\tconst paragraph = schema.nodes.paragraph;\n\tconst tableNode = table.create(\n\t\tnull,\n\t\tArray(3)\n\t\t\t.fill(null)\n\t\t\t.map((_, r) =>\n\t\t\t\trow.create(\n\t\t\t\t\tnull,\n\t\t\t\t\tArray(3)\n\t\t\t\t\t\t.fill(null)\n\t\t\t\t\t\t.map((_, col) =>\n\t\t\t\t\t\t\tcell.create(\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tparagraph.create(\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tschema.text(`hello row ${r + 1} col ${col + 1}`)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t);\n\tdispatch(state.tr.replaceSelectionWith(tableNode).scrollIntoView());\n}\n\nexport interface TableCtx {\n\ttableStart: number;\n\tmap: TableMap;\n\ttable: Node;\n}\nexport type TableRect = Rect & TableCtx;\n\nexport function selectedRect(state: EditorState): TableRect {\n\tconst sel = state.selection;\n\tconst $pos = selectionCell(state);\n\tconst table = $pos.node(-1);\n\tconst tableStart = $pos.start(-1);\n\tconst map = TableMap.get(table);\n\n\tconst rect =\n\t\tsel instanceof CellSelection\n\t\t\t? map.rectBetween(\n\t\t\t\t\tsel.$anchorCell.pos - tableStart,\n\t\t\t\t\tsel.$headCell.pos - tableStart\n\t\t\t\t)\n\t\t\t: map.findCell($pos.pos - tableStart);\n\n\treturn { ...rect, tableStart, map, table };\n}\n\nexport function addColumn(\n\ttr: Transaction,\n\t{ map, table, tableStart }: TableCtx,\n\tcol: number\n) {\n\tlet refColumn: number | null = col > 0 ? -1 : 0;\n\tif (columnIsHeader(map, table, col + refColumn)) {\n\t\trefColumn = col == 0 || col == map.width ? null : 0;\n\t}\n\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst index = row * map.width + col;\n\t\tif (col > 0 && col < map.width && map.map[index - 1] == map.map[index]) {\n\t\t\tconst pos = map.map[index];\n\t\t\tconst cell = table.nodeAt(pos)!;\n\t\t\ttr.setNodeMarkup(\n\t\t\t\ttr.mapping.map(tableStart + pos),\n\t\t\t\tnull,\n\t\t\t\taddColspan(cell.attrs as CellAttrs, col - map.colCount(pos))\n\t\t\t);\n\t\t\trow += cell.attrs.rowspan - 1;\n\t\t} else {\n\t\t\tconst type =\n\t\t\t\trefColumn == null\n\t\t\t\t\t? tableNodeTypes(table.type.schema).cell\n\t\t\t\t\t: table.nodeAt(map.map[index + refColumn])!.type;\n\t\t\tconst pos = map.positionAt(row, col, table);\n\t\t\ttr.insert(tr.mapping.map(tableStart + pos), type.createAndFill()!);\n\t\t}\n\t}\n\treturn tr;\n}\n\nexport const addColumnBefore: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addColumn(state.tr, rect, rect.left));\n\t}\n\treturn true;\n};\n\nexport const addColumnAfter: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addColumn(state.tr, rect, rect.right));\n\t}\n\treturn true;\n};\n\nexport const addColumnAtEnd = (pos: number, view: EditorView) => {\n\tconst { state, dispatch } = view;\n\tlet tr = state.tr;\n\tconst tableStart = tr.mapping.map(pos);\n\tconst $start = state.doc.resolve(tableStart);\n\tconst table = $start.nodeAfter!;\n\t// console.log($start);\n\t// console.log($start.node($start.depth), 'nn');\n\n\tconst map = TableMap.get(table);\n\tdispatch(addColumn(tr, { map, table, tableStart: pos + 1 }, map.width));\n};\n\nexport const removeColumn = (\n\ttr: Transaction,\n\t{ map, table, tableStart }: TableCtx,\n\tcol: number\n): Transaction => {\n\tconst mapStart = tr.mapping.maps.length;\n\tfor (let row = 0; row < map.height; ) {\n\t\tconst index = row * map.width + col;\n\t\tconst pos = map.map[index];\n\t\tconst cell = table.nodeAt(pos)!;\n\t\tconst attrs = cell.attrs as CellAttrs;\n\n\t\tif (\n\t\t\t(col > 0 && map.map[index - 1] == pos) ||\n\t\t\t(col < map.width - 1 && map.map[index + 1] == pos)\n\t\t) {\n\t\t\ttr.setNodeMarkup(\n\t\t\t\ttr.mapping.slice(mapStart).map(tableStart + pos),\n\t\t\t\tnull,\n\t\t\t\tremoveColSpan(attrs, col - map.colCount(pos))\n\t\t\t);\n\t\t} else {\n\t\t\tconst start = tr.mapping.slice(mapStart).map(tableStart + pos);\n\t\t\ttr.delete(start, start + cell.nodeSize);\n\t\t}\n\t\trow += attrs.rowspan;\n\t}\n\treturn tr;\n};\n\nexport const deleteColumn: Command = (state, dispatch) => {\n\tif (isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tconst tr = state.tr;\n\t\tif (rect.left == 0 && rect.right == rect.map.width) return false;\n\t\tfor (let i = rect.right - 1; ; i--) {\n\t\t\tremoveColumn(tr, rect, i);\n\t\t\tif (i == rect.left) break;\n\t\t\tconst table = rect.tableStart\n\t\t\t\t? tr.doc.nodeAt(rect.tableStart - 1)\n\t\t\t\t: tr.doc;\n\t\t\tif (!table) throw new RangeError('No table found');\n\t\t\trect.table = table;\n\t\t\trect.map = TableMap.get(table);\n\t\t}\n\t\tdispatch(tr);\n\t}\n\treturn true;\n};\n\nexport const rowIsHeader = (\n\tmap: TableMap,\n\ttable: Node,\n\trow: number\n): boolean => {\n\tconst headerCell = tableNodeTypes(table.type.schema).headerCell;\n\tfor (let col = 0; col < map.width; col++)\n\t\tif (table.nodeAt(map.map[col + row * map.width])?.type != headerCell)\n\t\t\treturn false;\n\n\treturn true;\n};\n\nexport const addRow = (\n\ttr: Transaction,\n\t{ map, table, tableStart }: TableCtx,\n\trow: number\n): Transaction => {\n\tlet rowPos = tableStart;\n\tfor (let i = 0; i < row; i++) rowPos += table.child(i).nodeSize;\n\tconst cells = [];\n\tlet refRow: number | null = row > 0 ? -1 : 0;\n\n\tif (rowIsHeader(map, table, row + refRow))\n\t\trefRow = row == 0 || row == map.height ? null : 0;\n\n\tfor (let col = 0, index = map.width * row; col < map.width; col++, index++) {\n\t\tif (\n\t\t\trow > 0 &&\n\t\t\trow < map.height &&\n\t\t\tmap.map[index] == map.map[index - map.width]\n\t\t) {\n\t\t\tconst pos = map.map[index];\n\t\t\tconst attrs = table.nodeAt(pos)!.attrs;\n\t\t\ttr.setNodeMarkup(tableStart + pos, null, {\n\t\t\t\t...attrs,\n\t\t\t\trowspan: attrs.rowspan + 1\n\t\t\t});\n\t\t\tcol += attrs.colspan - 1;\n\t\t} else {\n\t\t\tconst type =\n\t\t\t\trefRow === null\n\t\t\t\t\t? tableNodeTypes(table.type.schema).cell\n\t\t\t\t\t: table.nodeAt(map.map[index + refRow * map.width])?.type;\n\t\t\tconst node = type?.createAndFill();\n\t\t\tif (node) cells.push(node);\n\t\t}\n\t}\n\ttr.insert(rowPos, tableNodeTypes(table.type.schema).row.create(null, cells));\n\treturn tr;\n};\n\nexport const addRowBefore: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addRow(state.tr, rect, rect.top));\n\t}\n\treturn true;\n};\n\nexport const addRowAfter: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state);\n\t\tdispatch(addRow(state.tr, rect, rect.bottom));\n\t}\n\treturn true;\n};\n\nexport const addRowAtEnd = (pos: number, view: EditorView) => {\n\tconst $pos = view.state.doc.resolve(pos);\n\tconst table = $pos.nodeAfter!;\n\tconst map = TableMap.get(table);\n\tview.dispatch(\n\t\taddRow(view.state.tr, { map, table, tableStart: pos + 1 }, map.height)\n\t);\n};\n\nexport const removeRow = (\n\ttr: Transaction,\n\t{ map, table, tableStart }: TableCtx,\n\trow: number\n) => {\n\tlet rowPos = 0;\n\tfor (let i = 0; i < row; i++) rowPos += table.child(i).nodeSize;\n\tconst nextRow = rowPos + table.child(row).nodeSize;\n\tconst mapFrom = tr.mapping.maps.length;\n\ttr.delete(rowPos + tableStart, nextRow + tableStart);\n\n\tconst seen = new Set<number>();\n\n\tfor (let col = 0, index = row * map.width; col < map.width; col++, index++) {\n\t\tconst pos = map.map[index];\n\n\t\tif (seen.has(pos)) continue;\n\n\t\tseen.add(pos);\n\t\tif (row > 0 && pos == map.map[index - map.width]) {\n\t\t\tconst attrs = table.nodeAt(pos)?.attrs as CellAttrs;\n\t\t\ttr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos + tableStart), null, {\n\t\t\t\t...attrs,\n\t\t\t\trowspan: attrs.rowspan - 1\n\t\t\t});\n\t\t\tcol += attrs.colspan - 1;\n\t\t} else if (row < map.height && pos == map.map[index + map.width]) {\n\t\t\tconst cell = table.nodeAt(pos)!;\n\t\t\tconst attrs = cell?.attrs as CellAttrs;\n\t\t\tconst copy = cell.type.create(\n\t\t\t\t{ ...attrs, rowspan: cell.attrs.rowspan - 1 },\n\t\t\t\tcell.content\n\t\t\t);\n\t\t\tconst newPos = map.positionAt(row + 1, col, table);\n\t\t\ttr.insert(tr.mapping.slice(mapFrom).map(tableStart + newPos), copy);\n\t\t\tcol += attrs.colspan - 1;\n\t\t}\n\t}\n\treturn tr;\n};\n\nexport const deleteRow: Command = (state, dispatch) => {\n\tif (!isInTable(state)) return false;\n\tif (dispatch) {\n\t\tconst rect = selectedRect(state),\n\t\t\ttr = state.tr;\n\t\tif (rect.top == 0 && rect.bottom == rect.map.height) return false;\n\t\tfor (let i = rect.bottom - 1; ; i--) {\n\t\t\tremoveRow(tr, rect, i);\n\t\t\tif (i == rect.top) break;\n\t\t\tconst table = rect.tableStart\n\t\t\t\t? tr.doc.nodeAt(rect.tableStart - 1)\n\t\t\t\t: tr.doc;\n\t\t\tif (!table) throw new RangeError('No table found');\n\t\t\trect.table = table;\n\t\t\trect.map = TableMap.get(table);\n\t\t}\n\t\tdispatch(tr);\n\t}\n\treturn true;\n};\n\nconst cellsOverlapRectangle = (\n\t{ width, height, map }: TableMap,\n\trect: Rect\n): boolean => {\n\tlet indexTop = rect.top * width + rect.left,\n\t\tindexLeft = indexTop;\n\n\tlet indexBottom = (rect.bottom - 1) * width + rect.left,\n\t\tindexRight = indexTop + (rect.right - rect.left - 1);\n\n\tfor (let i = rect.top; i < rect.bottom; i++) {\n\t\tif (\n\t\t\t(rect.left > 0 && map[indexLeft] == map[indexLeft - 1]) ||\n\t\t\t(rect.right < width && map[indexRight] == map[indexRight + 1])\n\t\t)\n\t\t\treturn true;\n\t\tindexLeft += width;\n\t\tindexRight += width;\n\t}\n\tfor (let i = rect.left; i < rect.right; i++) {\n\t\tif (\n\t\t\t(rect.top > 0 && map[indexTop] == map[indexTop - width]) ||\n\t\t\t(rect.bottom < height && map[indexBottom] == map[indexBottom + width])\n\t\t)\n\t\t\treturn true;\n\n\t\tindexTop++;\n\t\tindexBottom++;\n\t}\n\treturn false;\n};\n\nconst isEmpty = (cell: Node): Boolean => {\n\tconst c = cell.content;\n\treturn (\n\t\tc.childCount == 1 && c.child(0).isTextblock && c.child(0).childCount == 0\n\t);\n};\n\nexport const mergeCells: Command = (state, dispatch) => {\n\tconst sel = state.selection;\n\tif (\n\t\t!(sel instanceof CellSelection) ||\n\t\tsel.$anchorCell.pos == sel.$headCell.pos\n\t)\n\t\treturn false;\n\n\tconst rect = selectedRect(state),\n\t\t{ map } = rect;\n\tif (cellsOverlapRectangle(map, rect)) return false;\n\n\tif (dispatch) {\n\t\tconst tr = state.tr;\n\t\tconst seen: Record<number, boolean> = {};\n\t\tlet content = Fragment.empty;\n\t\tlet mergedPos: number | undefined;\n\t\tlet mergedCell: Node | undefined;\n\t\tfor (let row = rect.top; row < rect.bottom; row++) {\n\t\t\tfor (let col = rect.left; col < rect.right; col++) {\n\t\t\t\tconst cellPos = map.map[row * map.width + col];\n\t\t\t\tconst cell = rect.table.nodeAt(cellPos);\n\t\t\t\tif (seen[cellPos] || !cell) continue;\n\t\t\t\tseen[cellPos] = true;\n\t\t\t\tif (mergedPos == null) {\n\t\t\t\t\tmergedPos = cellPos;\n\t\t\t\t\tmergedCell = cell;\n\t\t\t\t} else {\n\t\t\t\t\tif (!isEmpty(cell)) content = content.append(cell.content);\n\t\t\t\t\tconst mapped = tr.mapping.map(cellPos + rect.tableStart);\n\t\t\t\t\ttr.delete(mapped, mapped + cell.nodeSize);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (mergedPos == null || mergedCell == null) return true;\n\n\t\ttr.setNodeMarkup(mergedPos + rect.tableStart, null, {\n\t\t\t...addColspan(\n\t\t\t\tmergedCell.attrs as CellAttrs,\n\t\t\t\tmergedCell.attrs.colspan,\n\t\t\t\trect.right - rect.left - mergedCell.attrs.colspan\n\t\t\t),\n\t\t\trowspan: rect.bottom - rect.top\n\t\t});\n\t\tif (content.size) {\n\t\t\tconst end = mergedPos + 1 + mergedCell.content.size;\n\t\t\tconst start = isEmpty(mergedCell) ? mergedPos + 1 : end;\n\t\t\ttr.replaceWith(start + rect.tableStart, end + rect.tableStart, content);\n\t\t}\n\t\ttr.setSelection(\n\t\t\tnew CellSelection(tr.doc.resolve(mergedPos + rect.tableStart))\n\t\t);\n\t\tdispatch(tr);\n\t}\n\n\treturn true;\n};\n\nexport const setCellAttrs =\n\t(name: string, value: unknown): Command =>\n\t(state, dispatch) => {\n\t\tif (!isInTable(state)) return false;\n\t\tconst $cell = selectionCell(state);\n\t\tif ($cell.nodeAfter!.attrs[name] === value) return false;\n\t\tif (dispatch) {\n\t\t\tconst tr = state.tr;\n\t\t\tif (state.selection instanceof CellSelection)\n\t\t\t\tstate.selection.forEachCell((node, pos) => {\n\t\t\t\t\tif (node.attrs[name] !== value)\n\t\t\t\t\t\ttr.setNodeMarkup(pos, null, {\n\t\t\t\t\t\t\t...node.attrs,\n\t\t\t\t\t\t\t[name]: value\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\telse\n\t\t\t\ttr.setNodeMarkup($cell.pos, null, {\n\t\t\t\t\t...$cell.nodeAfter!.attrs,\n\t\t\t\t\t[name]: value\n\t\t\t\t});\n\t\t\tdispatch(tr);\n\t\t}\n\n\t\treturn true;\n\t};\n\nfunction isHeaderEnabledByType(\n\ttype: 'row' | 'column',\n\trect: TableRect,\n\ttypes: Record<string, NodeType>\n): boolean {\n\t// Get cell positions for first row or first column\n\tconst cellPositions = rect.map.cellsInRect({\n\t\tleft: 0,\n\t\ttop: 0,\n\t\tright: type == 'row' ? rect.map.width : 1,\n\t\tbottom: type == 'column' ? rect.map.height : 1\n\t});\n\n\tfor (let i = 0; i < cellPositions.length; i++) {\n\t\tconst cell = rect.table.nodeAt(cellPositions[i]);\n\t\tif (cell && cell.type !== types.header_cell) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport type ToggleHeaderType = 'column' | 'row' | 'cell';\n\nexport function toggleHeader(\n\ttype: ToggleHeaderType,\n\toptions?: { useDeprecatedLogic: boolean } | undefined\n): Command {\n\toptions = options || { useDeprecatedLogic: false };\n\n\t// if (options.useDeprecatedLogic) return deprecated_toggleHeader(type);\n\n\treturn function (state, dispatch) {\n\t\tif (!isInTable(state)) return false;\n\t\tif (dispatch) {\n\t\t\tconst types = tableNodeTypes(state.schema);\n\t\t\tconst rect = selectedRect(state),\n\t\t\t\ttr = state.tr;\n\n\t\t\tconst isHeaderRowEnabled = isHeaderEnabledByType('row', rect, types);\n\t\t\tconst isHeaderColumnEnabled = isHeaderEnabledByType(\n\t\t\t\t'column',\n\t\t\t\trect,\n\t\t\t\ttypes\n\t\t\t);\n\n\t\t\tconst isHeaderEnabled =\n\t\t\t\ttype === 'column'\n\t\t\t\t\t? isHeaderRowEnabled\n\t\t\t\t\t: type === 'row'\n\t\t\t\t\t\t? isHeaderColumnEnabled\n\t\t\t\t\t\t: false;\n\n\t\t\tconst selectionStartsAt = isHeaderEnabled ? 1 : 0;\n\n\t\t\tconst cellsRect =\n\t\t\t\ttype == 'column'\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: selectionStartsAt,\n\t\t\t\t\t\t\tright: 1,\n\t\t\t\t\t\t\tbottom: rect.map.height\n\t\t\t\t\t\t}\n\t\t\t\t\t: type == 'row'\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tleft: selectionStartsAt,\n\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\tright: rect.map.width,\n\t\t\t\t\t\t\t\tbottom: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: rect;\n\n\t\t\tconst newType =\n\t\t\t\ttype == 'column'\n\t\t\t\t\t? isHeaderColumnEnabled\n\t\t\t\t\t\t? types.cell\n\t\t\t\t\t\t: types.headerCell\n\t\t\t\t\t: type == 'row'\n\t\t\t\t\t\t? isHeaderRowEnabled\n\t\t\t\t\t\t\t? types.cell\n\t\t\t\t\t\t\t: types.headerCell\n\t\t\t\t\t\t: types.cell;\n\n\t\t\trect.map.cellsInRect(cellsRect).forEach((relativeCellPos) => {\n\t\t\t\tconst cellPos = relativeCellPos + rect.tableStart;\n\t\t\t\tconst cell = tr.doc.nodeAt(cellPos);\n\n\t\t\t\tif (cell) {\n\t\t\t\t\ttr.setNodeMarkup(cellPos, newType, cell.attrs);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdispatch(tr);\n\t\t}\n\t\treturn true;\n\t};\n}\n\nfunction findNextCell($cell: ResolvedPos, dir: Direction): number | null {\n\tif (dir < 0) {\n\t\tconst before = $cell.nodeBefore;\n\t\tif (before) return $cell.pos - before.nodeSize;\n\t\tfor (\n\t\t\tlet row = $cell.index(-1) - 1, rowEnd = $cell.before();\n\t\t\trow >= 0;\n\t\t\trow--\n\t\t) {\n\t\t\tconst rowNode = $cell.node(-1).child(row);\n\t\t\tconst lastChild = rowNode.lastChild;\n\t\t\tif (lastChild) return rowEnd - 1 - lastChild.nodeSize;\n\t\t\treturn (rowEnd -= rowNode.nodeSize);\n\t\t}\n\t} else {\n\t\tif ($cell.index() < $cell.parent.childCount - 1)\n\t\t\treturn $cell.pos + $cell.nodeAfter!.nodeSize;\n\t\tconst table = $cell.node(-1);\n\t\tfor (\n\t\t\tlet row = $cell.indexAfter(-1), rowStart = $cell.after();\n\t\t\trow < table.childCount;\n\t\t\trow++\n\t\t) {\n\t\t\tconst rowNode = table.child(row);\n\t\t\tif (rowNode.childCount) return rowStart + 1;\n\t\t\trowStart += rowNode.nodeSize;\n\t\t}\n\t}\n\n\treturn null;\n}\n\nexport const goToNextCell =\n\t(direction: Direction): Command =>\n\t(state, dispatch) => {\n\t\tif (!isInTable(state)) return false;\n\t\tconst cell = findNextCell(selectionCell(state), direction);\n\t\tif (cell == null) return false;\n\t\tif (dispatch) {\n\t\t\tconst $cell = state.doc.resolve(cell);\n\t\t\tdispatch(\n\t\t\t\tstate.tr\n\t\t\t\t\t.setSelection(TextSelection.between($cell, moveCellForward($cell)))\n\t\t\t\t\t.scrollIntoView()\n\t\t\t);\n\t\t}\n\t\treturn true;\n\t};\n\nexport const deleteTable: Command = (state, dispatch) => {\n\tconst $pos = state.selection.$anchor;\n\tfor (let d = $pos.depth; d > 0; d--) {\n\t\tconst node = $pos.node(d);\n\t\tif (node.type.spec.tableRole == 'table') {\n\t\t\tif (dispatch) {\n\t\t\t\tdispatch(\n\t\t\t\t\tstate.tr.delete($pos.before(d), $pos.after(d)).scrollIntoView()\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n","import { Node, ResolvedPos } from 'prosemirror-model';\nimport {\n\tDecoration,\n\tDecorationSet,\n\tDecorationSource,\n\tEditorView,\n\tNodeView,\n\tNodeViewConstructor\n} from 'prosemirror-view';\nimport createElement, { updateElement } from '../../createElement';\nimport { CellAttrs, cellAround, tableEditingKey } from './utils';\nimport { EditorState } from 'prosemirror-state';\nimport { TableMap } from './tableMap';\nimport {\n\taddColumnAtEnd,\n\taddRowAtEnd,\n\tremoveColumn,\n\tremoveRow\n} from './commands';\nimport { getView } from '../../utils';\nimport { BaseNodeView } from '../../utils/view';\n\nconst tableClassName = 'tableWrapper dc-block scrollbar';\nexport class TableView extends BaseNodeView {\n\tdom: HTMLDivElement;\n\ttable: HTMLTableElement;\n\tcolgroup: HTMLTableColElement;\n\tcontentDOM: HTMLTableSectionElement;\n\tprivate $cell?: ResolvedPos;\n\n\tconstructor(\n\t\tpublic node: Node,\n\t\tpublic view: EditorView,\n\t\tprivate getPos: () => number | undefined,\n\t\tpublic cellMinWidth: number\n\t) {\n\t\tconsole.log('table create');\n\t\tsuper(node, view);\n\t\tthis.dom = createElement('div', {\n\t\t\tclass: tableClassName\n\t\t});\n\t\tthis.dom.appendChild(\n\t\t\tcreateElement('div', { tabindex: '0', class: 'hiddenfocus' })\n\t\t);\n\t\tthis.table = this.dom.appendChild(\n\t\t\tcreateElement(\n\t\t\t\t'table'\n\t\t\t\t// {},\n\t\t\t\t// createElement('div', { class: 'rowBar' }),\n\t\t\t\t// createElement('div', { class: 'colBar' })\n\t\t\t)\n\t\t);\n\t\tthis.colgroup = this.table.appendChild(createElement('colgroup'));\n\t\tupdateColumnsOnResize(\n\t\t\tthis.node,\n\t\t\tthis.colgroup,\n\t\t\tthis.table,\n\t\t\tthis.cellMinWidth\n\t\t);\n\t\tthis.contentDOM = this.table.appendChild(createElement('tbody'));\n\t\tthis.dom.addEventListener('mouseover', this.handleMouseOver);\n\t\tthis.dom.addEventListener('mouseleave', this.handleMouseLeave);\n\t}\n\n\thandleMouseOver = (event: MouseEvent) => {\n\t\tconst { clientX, clientY } = event;\n\t\tconst mousePos = this.view.posAtCoords({ left: clientX, top: clientY });\n\t\tif (!mousePos) return;\n\t\tconst $cell = cellAround(this.view.state.doc.resolve(mousePos.pos));\n\t\tif (!$cell) return;\n\t\t// this.$cell = $cell;\n\t\tconst tableStart = $cell.start(-1);\n\t\tconst map = TableMap.get(this.node);\n\t\tconst { left, top, right, bottom } = map.findCell($cell.pos - tableStart);\n\t\t// console.log(left, top, right, bottom, 'o');\n\t\tconst decs: Decoration[] = [];\n\t\tfor (let i = top; i < bottom; i++) {\n\t\t\tconst pos = map.map[i * map.width] + tableStart;\n\t\t\tconst $pos = this.view.state.doc.resolve(pos);\n\t\t\tdecs.push(\n\t\t\t\tDecoration.node(pos, pos + $pos.nodeAfter!.nodeSize, {\n\t\t\t\t\tclass: 'row-active'\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tfor (let i = left; i < right; i++) {\n\t\t\tconst pos = map.map[i] + tableStart;\n\t\t\tconst $pos = this.view.state.doc.resolve(pos);\n\t\t\tdecs.push(\n\t\t\t\tDecoration.node(pos, pos + $pos.nodeAfter!.nodeSize, {\n\t\t\t\t\tclass: 'col-active'\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tlet tr = this.view.state.tr;\n\t\tconst classList = [];\n\t\tif (bottom == map.height) classList.push('row-active');\n\t\tif (right == map.width) classList.push('col-active');\n\t\tconst pos = this.getPos()!;\n\t\t// decs.push(\n\t\t//   Decoration.node(pos, pos + this.node.nodeSize, {\n\t\t//     class: classList.join(' '),\n\t\t//   })\n\t\t// );\n\t\t// console.log(pos, 'pos');\n\t\ttr.setNodeMarkup(pos!, null, {\n\t\t\t...this.node.attrs,\n\t\t\tclass: tableClassName + ' ' + classList.join(' ')\n\t\t});\n\n\t\tif (decs.length) {\n\t\t\ttr.setMeta(tableEditingKey, { hoverDecos: decs });\n\t\t}\n\t\tthis.view.dispatch(tr);\n\t};\n\n\thandleMouseLeave = () => {\n\t\tlet tr = this.view.state.tr;\n\t\ttr.setMeta(tableEditingKey, { hoverDecos: [] });\n\t\ttr.setNodeMarkup(this.getPos()!, null, {\n\t\t\tclass: tableClassName\n\t\t});\n\t\tthis.view.dispatch(tr);\n\t};\n\n\tdestroy() {\n\t\tconsole.log('table destroy');\n\n\t\tthis.dom.removeEventListener('mouseover', this.handleMouseOver);\n\t\tthis.dom.removeEventListener('mouseleave', this.handleMouseLeave);\n\t}\n\n\tupdate(node: Node): boolean {\n\t\tif (!super.update(node)) return false;\n\t\tthis.node = node;\n\n\t\tthis.dom.className = node.attrs.class || tableClassName;\n\t\tupdateColumnsOnResize(\n\t\t\tthis.node,\n\t\t\tthis.colgroup,\n\t\t\tthis.table,\n\t\t\tthis.cellMinWidth\n\t\t);\n\t\treturn true;\n\t}\n\n\tignoreMutation(record: MutationRecord): boolean {\n\t\treturn (\n\t\t\trecord.type == 'attributes' &&\n\t\t\t(record.target == this.table || this.colgroup.contains(record.target))\n\t\t);\n\t}\n\tselectNode() {\n\t\tconsole.log('select', this);\n\t}\n}\n\nexport function updateColumnsOnResize(\n\tnode: Node,\n\tcolgroup: HTMLTableColElement,\n\ttable: HTMLTableElement,\n\tcellMinWidth: number,\n\toverrideCol?: number,\n\toverrideValue?: number\n) {\n\tlet totalWidth = 0,\n\t\tfixedWidth = true,\n\t\tnextDOM = colgroup.firstChild as HTMLElement;\n\tconst row = node.firstChild;\n\tif (!row) return;\n\n\tfor (let i = 0, col = 0; i < row.childCount; i++) {\n\t\tconst { colspan, colwidth } = row.child(i).attrs as CellAttrs;\n\n\t\tfor (let j = 0; j < colspan; j++, col++) {\n\t\t\tconst hasWidth =\n\t\t\t\toverrideCol == col ? overrideValue : colwidth && colwidth[j];\n\t\t\tconst cssWidth = hasWidth ? hasWidth + 'px' : '';\n\t\t\ttotalWidth += hasWidth || cellMinWidth;\n\t\t\tif (!hasWidth) fixedWidth = false;\n\t\t\tif (!nextDOM) {\n\t\t\t\tcolgroup.appendChild(createElement('col')).style.width = cssWidth;\n\t\t\t} else {\n\t\t\t\tif (nextDOM.style.width != cssWidth) nextDOM.style.width = cssWidth;\n\t\t\t\tnextDOM = nextDOM.nextSibling as HTMLElement;\n\t\t\t}\n\t\t}\n\t}\n\n\twhile (nextDOM) {\n\t\tconst after = nextDOM.nextSibling;\n\t\tnextDOM.parentNode?.removeChild(nextDOM);\n\t\tnextDOM = after as HTMLElement;\n\n\t\tif (fixedWidth) {\n\t\t\ttable.style.width = totalWidth + 'px';\n\t\t\ttable.style.minWidth = '';\n\t\t} else {\n\t\t\ttable.style.width = '';\n\t\t\ttable.style.minWidth = totalWidth + 'px';\n\t\t}\n\t}\n}\n\nexport const TableViewConstructor: NodeViewConstructor = (node, view, getPos) =>\n\tnew TableView(node, view, getPos, 80);\n\nexport const addToolkit = (table: Node, start: number): Decoration[] => {\n\tconst map = TableMap.get(table);\n\tlet seen: Record<number, boolean> = {};\n\tconst { width, height } = map;\n\tconst result: Decoration[] = [];\n\n\tfor (let i = 0; i < width * height; i += width) {\n\t\tif (seen[i]) continue;\n\t\tseen[i] = true;\n\t\tresult.push(\n\t\t\tDecoration.widget(start + map.map[i] + 2, (view) =>\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tclass: 'rowBtn',\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tconst { dispatch, state } = view;\n\t\t\t\t\t\tconst row = i / width;\n\t\t\t\t\t\tconst table = state.doc.nodeAt(start)!;\n\t\t\t\t\t\tconst map = TableMap.get(table);\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\tremoveRow(state.tr, { map, table, tableStart: start + 1 }, row)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t}\n\n\tseen = {};\n\tfor (let i = 0; i < width; i++) {\n\t\tif (seen[i]) continue;\n\t\tseen[i] = true;\n\t\tresult.push(\n\t\t\tDecoration.widget(start + map.map[i] + 2, (view) =>\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tclass: 'colBtn',\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tconst { state, dispatch } = view;\n\t\t\t\t\t\tconst table = state.doc.nodeAt(start)!;\n\t\t\t\t\t\tconst map = TableMap.get(table);\n\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\tremoveColumn(state.tr, { map, table, tableStart: start + 1 }, i)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t}\n\n\tresult.push(\n\t\tDecoration.widget(start + 1, (view) =>\n\t\t\tcreateElement(\n\t\t\t\t'div',\n\t\t\t\t{ class: 'tools' },\n\t\t\t\tcreateElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ class: 'rowBar', onclick: () => addRowAtEnd(start, view) },\n\t\t\t\t\t'+'\n\t\t\t\t),\n\t\t\t\tcreateElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{\n\t\t\t\t\t\tclass: 'colBar',\n\t\t\t\t\t\tonclick: () => addColumnAtEnd(start, view)\n\t\t\t\t\t},\n\t\t\t\t\t'+'\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t);\n\treturn result;\n};\n","import { Attrs, Node as ProsemirrorNode } from 'prosemirror-model';\nimport { EditorState, Plugin, PluginKey, Transaction } from 'prosemirror-state';\nimport {\n\tDecoration,\n\tDecorationSet,\n\tEditorView,\n\tNodeView\n} from 'prosemirror-view';\nimport { tableNodeTypes } from './schema';\nimport { TableMap } from './tableMap';\nimport {\n\tTableView,\n\tupdateColumnsOnResize,\n\tTableViewConstructor\n} from './tableView';\nimport { cellAround, CellAttrs, pointsAtCell } from './utils';\n\n/**\n * @public\n */\nexport const columnResizingPluginKey = new PluginKey<ResizeState>(\n\t'tableColumnResizing'\n);\n\n/**\n * @public\n */\nexport type ColumnResizingOptions = {\n\thandleWidth?: number;\n\tcellMinWidth?: number;\n\tlastColumnResizable?: boolean;\n\tView?: typeof TableView;\n};\n\n/**\n * @public\n */\nexport type Dragging = { startX: number; startWidth: number };\n\n/**\n * @public\n */\nexport function columnResizing({\n\thandleWidth = 5,\n\tcellMinWidth = 25,\n\tView = TableView,\n\tlastColumnResizable = true\n}: ColumnResizingOptions = {}): Plugin {\n\tconst plugin = new Plugin<ResizeState>({\n\t\tkey: columnResizingPluginKey,\n\t\tstate: {\n\t\t\tinit(_, state) {\n\t\t\t\tplugin.spec!.props!.nodeViews![\n\t\t\t\t\ttableNodeTypes(state.schema).table.name\n\t\t\t\t] = (node, view, getPos) => new View(node, view, getPos, cellMinWidth);\n\t\t\t\treturn new ResizeState(-1, false);\n\t\t\t},\n\t\t\tapply(tr, prev) {\n\t\t\t\treturn prev.apply(tr);\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tattributes: (state): Record<string, string> => {\n\t\t\t\tconst pluginState = columnResizingPluginKey.getState(state);\n\t\t\t\treturn pluginState && pluginState.activeHandle > -1\n\t\t\t\t\t? { class: 'resize-cursor' }\n\t\t\t\t\t: {};\n\t\t\t},\n\n\t\t\thandleDOMEvents: {\n\t\t\t\tmousemove: (view, event) => {\n\t\t\t\t\thandleMouseMove(\n\t\t\t\t\t\tview,\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\thandleWidth,\n\t\t\t\t\t\tcellMinWidth,\n\t\t\t\t\t\tlastColumnResizable\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tmouseleave: (view) => {\n\t\t\t\t\thandleMouseLeave(view);\n\t\t\t\t},\n\t\t\t\tmousedown: (view, event) => {\n\t\t\t\t\thandleMouseDown(view, event, cellMinWidth);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdecorations: (state) => {\n\t\t\t\tconst pluginState = columnResizingPluginKey.getState(state);\n\t\t\t\tif (pluginState && pluginState.activeHandle > -1) {\n\t\t\t\t\treturn handleDecorations(state, pluginState.activeHandle);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tnodeViews: {}\n\t\t}\n\t});\n\treturn plugin;\n}\n\n/**\n * @public\n */\nexport class ResizeState {\n\tconstructor(\n\t\tpublic activeHandle: number,\n\t\tpublic dragging: Dragging | false\n\t) {}\n\n\tapply(tr: Transaction): ResizeState {\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\tconst state = this;\n\t\tconst action = tr.getMeta(columnResizingPluginKey);\n\t\tif (action && action.setHandle != null)\n\t\t\treturn new ResizeState(action.setHandle, false);\n\t\tif (action && action.setDragging !== undefined)\n\t\t\treturn new ResizeState(state.activeHandle, action.setDragging);\n\t\tif (state.activeHandle > -1 && tr.docChanged) {\n\t\t\tlet handle = tr.mapping.map(state.activeHandle, -1);\n\t\t\tif (!pointsAtCell(tr.doc.resolve(handle))) {\n\t\t\t\thandle = -1;\n\t\t\t}\n\t\t\treturn new ResizeState(handle, state.dragging);\n\t\t}\n\t\treturn state;\n\t}\n}\n\nfunction handleMouseMove(\n\tview: EditorView,\n\tevent: MouseEvent,\n\thandleWidth: number,\n\tcellMinWidth: number,\n\tlastColumnResizable: boolean\n): void {\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (!pluginState) return;\n\n\tif (!pluginState.dragging) {\n\t\tconst target = domCellAround(event.target as HTMLElement);\n\t\tlet cell = -1;\n\t\tif (target) {\n\t\t\tconst { left, right } = target.getBoundingClientRect();\n\t\t\tif (event.clientX - left <= handleWidth)\n\t\t\t\tcell = edgeCell(view, event, 'left', handleWidth);\n\t\t\telse if (right - event.clientX <= handleWidth)\n\t\t\t\tcell = edgeCell(view, event, 'right', handleWidth);\n\t\t}\n\n\t\tif (cell != pluginState.activeHandle) {\n\t\t\tif (!lastColumnResizable && cell !== -1) {\n\t\t\t\tconst $cell = view.state.doc.resolve(cell);\n\t\t\t\tconst table = $cell.node(-1);\n\t\t\t\tconst map = TableMap.get(table);\n\t\t\t\tconst tableStart = $cell.start(-1);\n\t\t\t\tconst col =\n\t\t\t\t\tmap.colCount($cell.pos - tableStart) +\n\t\t\t\t\t$cell.nodeAfter!.attrs.colspan -\n\t\t\t\t\t1;\n\n\t\t\t\tif (col == map.width - 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tupdateHandle(view, cell);\n\t\t}\n\t}\n}\n\nfunction handleMouseLeave(view: EditorView): void {\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (pluginState && pluginState.activeHandle > -1 && !pluginState.dragging)\n\t\tupdateHandle(view, -1);\n}\n\nfunction handleMouseDown(\n\tview: EditorView,\n\tevent: MouseEvent,\n\tcellMinWidth: number\n): boolean {\n\tconst win = view.dom.ownerDocument.defaultView ?? window;\n\n\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\tif (!pluginState || pluginState.activeHandle == -1 || pluginState.dragging)\n\t\treturn false;\n\n\tconst cell = view.state.doc.nodeAt(pluginState.activeHandle)!;\n\tconst width = currentColWidth(view, pluginState.activeHandle, cell.attrs);\n\tview.dispatch(\n\t\tview.state.tr.setMeta(columnResizingPluginKey, {\n\t\t\tsetDragging: { startX: event.clientX, startWidth: width }\n\t\t})\n\t);\n\n\tfunction finish(event: MouseEvent) {\n\t\twin.removeEventListener('mouseup', finish);\n\t\twin.removeEventListener('mousemove', move);\n\t\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\t\tif (pluginState?.dragging) {\n\t\t\tupdateColumnWidth(\n\t\t\t\tview,\n\t\t\t\tpluginState.activeHandle,\n\t\t\t\tdraggedWidth(pluginState.dragging, event, cellMinWidth)\n\t\t\t);\n\t\t\tview.dispatch(\n\t\t\t\tview.state.tr.setMeta(columnResizingPluginKey, { setDragging: null })\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction move(event: MouseEvent): void {\n\t\tif (!event.which) return finish(event);\n\t\tconst pluginState = columnResizingPluginKey.getState(view.state);\n\t\tif (!pluginState) return;\n\t\tif (pluginState.dragging) {\n\t\t\tconst dragged = draggedWidth(pluginState.dragging, event, cellMinWidth);\n\t\t\tdisplayColumnWidth(view, pluginState.activeHandle, dragged, cellMinWidth);\n\t\t}\n\t}\n\n\twin.addEventListener('mouseup', finish);\n\twin.addEventListener('mousemove', move);\n\tevent.preventDefault();\n\treturn true;\n}\n\nfunction currentColWidth(\n\tview: EditorView,\n\tcellPos: number,\n\t{ colspan, colwidth }: Attrs\n): number {\n\tconst width = colwidth && colwidth[colwidth.length - 1];\n\tif (width) return width;\n\tconst dom = view.domAtPos(cellPos);\n\tconst node = dom.node.childNodes[dom.offset] as HTMLElement;\n\tlet domWidth = node.offsetWidth,\n\t\tparts = colspan;\n\tif (colwidth)\n\t\tfor (let i = 0; i < colspan; i++)\n\t\t\tif (colwidth[i]) {\n\t\t\t\tdomWidth -= colwidth[i];\n\t\t\t\tparts--;\n\t\t\t}\n\treturn domWidth / parts;\n}\n\nfunction domCellAround(target: HTMLElement | null): HTMLElement | null {\n\twhile (target && target.nodeName != 'TD' && target.nodeName != 'TH')\n\t\ttarget =\n\t\t\ttarget.classList && target.classList.contains('ProseMirror')\n\t\t\t\t? null\n\t\t\t\t: (target.parentNode as HTMLElement);\n\treturn target;\n}\n\nfunction edgeCell(\n\tview: EditorView,\n\tevent: MouseEvent,\n\tside: 'left' | 'right',\n\thandleWidth: number\n): number {\n\t// posAtCoords returns inconsistent positions when cursor is moving\n\t// across a collapsed table border. Use an offset to adjust the\n\t// target viewport coordinates away from the table border.\n\tconst offset = side == 'right' ? -handleWidth : handleWidth;\n\tconst found = view.posAtCoords({\n\t\tleft: event.clientX + offset,\n\t\ttop: event.clientY\n\t});\n\tif (!found) return -1;\n\tconst { pos } = found;\n\tconst $cell = cellAround(view.state.doc.resolve(pos));\n\tif (!$cell) return -1;\n\tif (side == 'right') return $cell.pos;\n\tconst map = TableMap.get($cell.node(-1)),\n\t\tstart = $cell.start(-1);\n\tconst index = map.map.indexOf($cell.pos - start);\n\treturn index % map.width == 0 ? -1 : start + map.map[index - 1];\n}\n\nfunction draggedWidth(\n\tdragging: Dragging,\n\tevent: MouseEvent,\n\tcellMinWidth: number\n): number {\n\tconst offset = event.clientX - dragging.startX;\n\treturn Math.max(cellMinWidth, dragging.startWidth + offset);\n}\n\nfunction updateHandle(view: EditorView, value: number): void {\n\tview.dispatch(\n\t\tview.state.tr.setMeta(columnResizingPluginKey, { setHandle: value })\n\t);\n}\n\nfunction updateColumnWidth(\n\tview: EditorView,\n\tcell: number,\n\twidth: number\n): void {\n\tconst $cell = view.state.doc.resolve(cell);\n\tconst table = $cell.node(-1),\n\t\tmap = TableMap.get(table),\n\t\tstart = $cell.start(-1);\n\tconst col =\n\t\tmap.colCount($cell.pos - start) + $cell.nodeAfter!.attrs.colspan - 1;\n\tconst tr = view.state.tr;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst mapIndex = row * map.width + col;\n\t\t// Rowspanning cell that has already been handled\n\t\tif (row && map.map[mapIndex] == map.map[mapIndex - map.width]) continue;\n\t\tconst pos = map.map[mapIndex];\n\t\tconst attrs = table.nodeAt(pos)!.attrs as CellAttrs;\n\t\tconst index = attrs.colspan == 1 ? 0 : col - map.colCount(pos);\n\t\tif (attrs.colwidth && attrs.colwidth[index] == width) continue;\n\t\tconst colwidth = attrs.colwidth\n\t\t\t? attrs.colwidth.slice()\n\t\t\t: zeroes(attrs.colspan);\n\t\tcolwidth[index] = width;\n\t\ttr.setNodeMarkup(start + pos, null, { ...attrs, colwidth: colwidth });\n\t}\n\tif (tr.docChanged) view.dispatch(tr);\n}\n\nfunction displayColumnWidth(\n\tview: EditorView,\n\tcell: number,\n\twidth: number,\n\tcellMinWidth: number\n): void {\n\tconst $cell = view.state.doc.resolve(cell);\n\tconst table = $cell.node(-1),\n\t\tstart = $cell.start(-1);\n\tconst col =\n\t\tTableMap.get(table).colCount($cell.pos - start) +\n\t\t$cell.nodeAfter!.attrs.colspan -\n\t\t1;\n\tlet dom: Node | null = view.domAtPos($cell.start(-1)).node;\n\twhile (dom && dom.nodeName != 'TABLE') {\n\t\tdom = dom.parentNode;\n\t}\n\tif (!dom) return;\n\tupdateColumnsOnResize(\n\t\ttable,\n\t\tdom.firstChild as HTMLTableColElement,\n\t\tdom as HTMLTableElement,\n\t\tcellMinWidth,\n\t\tcol,\n\t\twidth\n\t);\n}\n\nfunction zeroes(n: number): 0[] {\n\treturn Array(n).fill(0);\n}\n\nexport function handleDecorations(\n\tstate: EditorState,\n\tcell: number\n): DecorationSet {\n\tconst decorations = [];\n\tconst $cell = state.doc.resolve(cell);\n\tconst table = $cell.node(-1);\n\tif (!table) {\n\t\treturn DecorationSet.empty;\n\t}\n\tconst map = TableMap.get(table);\n\tconst start = $cell.start(-1);\n\tconst col = map.colCount($cell.pos - start) + $cell.nodeAfter!.attrs.colspan;\n\tfor (let row = 0; row < map.height; row++) {\n\t\tconst index = col + row * map.width - 1;\n\t\t// For positions that have either a different cell or the end\n\t\t// of the table to their right, and either the top of the table or\n\t\t// a different cell above them, add a decoration\n\t\tif (\n\t\t\t(col == map.width || map.map[index] != map.map[index + 1]) &&\n\t\t\t(row == 0 || map.map[index] != map.map[index - map.width])\n\t\t) {\n\t\t\tconst cellPos = map.map[index];\n\t\t\tconst pos = start + cellPos + table.nodeAt(cellPos)!.nodeSize - 1;\n\t\t\tconst dom = document.createElement('div');\n\t\t\tdom.className = 'column-resize-handle';\n\t\t\tdecorations.push(Decoration.widget(pos, dom));\n\t\t}\n\t}\n\treturn DecorationSet.create(state.doc, decorations);\n}\n","import { Fragment, Node, NodeType, Schema, Slice } from 'prosemirror-model';\nimport { Transform } from 'prosemirror-transform';\nimport { CellAttrs, removeColSpan } from './utils';\nimport { tableNodeTypes } from './schema';\nimport { ColWidths, Rect, TableMap } from './tableMap';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { CellSelection } from './cellSelection';\n\nexport type Area = { width: number; height: number; rows: Fragment[] };\nexport const pastedCells = (slice: Slice): Area | null => {\n\tif (!slice.size) return null;\n\tlet { content, openStart, openEnd } = slice;\n\n\twhile (\n\t\tcontent.childCount == 1 &&\n\t\t((openStart > 0 && openEnd > 0) ||\n\t\t\tcontent.child(0).type.spec.tableRole == 'table')\n\t) {\n\t\topenStart--;\n\t\topenEnd--;\n\t\tcontent = content.child(0).content;\n\t}\n\tconst first = content.child(0);\n\tconst role = first.type.spec.tableRole;\n\tconst schema = first.type.schema,\n\t\trows = [];\n\n\tif (role == 'row') {\n\t\tfor (let i = 0; i < content.childCount; i++) {\n\t\t\tlet cells = content.child(i).content;\n\t\t\tconst left = i ? 0 : Math.max(0, openStart - 1);\n\t\t\tconst right = i < content.childCount - 1 ? 0 : Math.max(0, openEnd - 1);\n\t\t\tif (left || right)\n\t\t\t\tcells = fitSlice(\n\t\t\t\t\ttableNodeTypes(schema).row,\n\t\t\t\t\tnew Slice(cells, left, right)\n\t\t\t\t).content;\n\t\t\trows.push(cells);\n\t\t}\n\t} else if (role == 'cell' || role == 'headerCell') {\n\t\trows.push(\n\t\t\topenStart || openEnd\n\t\t\t\t? fitSlice(\n\t\t\t\t\t\ttableNodeTypes(schema).row,\n\t\t\t\t\t\tnew Slice(content, openStart, openEnd)\n\t\t\t\t\t).content\n\t\t\t\t: content\n\t\t);\n\t} else {\n\t\treturn null;\n\t}\n\treturn ensureRectangular(schema, rows);\n};\n\nfunction ensureRectangular(schema: Schema, rows: Fragment[]): Area {\n\tconst widths: ColWidths = [];\n\tfor (let i = 0; i < rows.length; i++) {\n\t\tconst row = rows[i];\n\t\tfor (let j = row.childCount - 1; j >= 0; j--) {\n\t\t\tconst { rowspan, colspan } = row.child(j).attrs;\n\t\t\tfor (let r = i; r < i + rowspan; r++)\n\t\t\t\twidths[r] = (widths[r] || 0) + colspan;\n\t\t}\n\t}\n\tlet width = 0;\n\tfor (let r = 0; r < widths.length; r++) width = Math.max(width, widths[r]);\n\tfor (let r = 0; r < widths.length; r++) {\n\t\tif (r > rows.length) rows.push(Fragment.empty);\n\t\tif (widths[r] < width) {\n\t\t\tconst empty = tableNodeTypes(schema).cell.createAndFill()!;\n\t\t\tconst cells = [];\n\t\t\tfor (let i = widths[r]; i < width; i++) {\n\t\t\t\tcells.push(empty);\n\t\t\t}\n\t\t\trows[r] = rows[r].append(Fragment.from(cells));\n\t\t}\n\t}\n\treturn { height: rows.length, width, rows };\n}\n\nexport const fitSlice = (nodeType: NodeType, slice: Slice): Node => {\n\tconst node = nodeType.createAndFill()!;\n\tconst tr = new Transform(node).replace(0, node.content.size, slice);\n\treturn tr.doc;\n};\n\nexport const clipCells = (\n\t{ width, height, rows }: Area,\n\tnewWidth: number,\n\tnewHeight: number\n): Area => {\n\tif (width != newWidth) {\n\t\tconst added: number[] = [];\n\t\tconst newRows: Fragment[] = [];\n\t\tfor (let row = 0; row < rows.length; row++) {\n\t\t\tconst frag = rows[row],\n\t\t\t\tcells = [];\n\t\t\tfor (let col = added[row] || 0, i = 0; col < newWidth; i++) {\n\t\t\t\tlet cell = frag.child(i % frag.childCount);\n\t\t\t\tif (col + cell.attrs.colspan > newWidth)\n\t\t\t\t\tcell = cell.type.createChecked(\n\t\t\t\t\t\tremoveColSpan(\n\t\t\t\t\t\t\tcell.attrs as CellAttrs,\n\t\t\t\t\t\t\tcell.attrs.colspan,\n\t\t\t\t\t\t\tcol + cell.attrs.colspan - newWidth\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcell.content\n\t\t\t\t\t);\n\t\t\t\tcells.push(cell);\n\t\t\t\tcol += cell.attrs.colspan;\n\t\t\t\tfor (let j = 1; j < cell.attrs.rowspan; j++)\n\t\t\t\t\tadded[row + j] = (added[row + j] || 0) + cell.attrs.colspan;\n\t\t\t}\n\t\t\tnewRows.push(Fragment.from(cells));\n\t\t}\n\t\trows = newRows;\n\t\twidth = newWidth;\n\t}\n\tif (height != newHeight) {\n\t\tconst newRows = [];\n\t\tfor (let row = 0, i = 0; row < newHeight; row++, i++) {\n\t\t\tconst cells = [],\n\t\t\t\tsource = rows[i % height];\n\t\t\tfor (let j = 0; j < source.childCount; j++) {\n\t\t\t\tlet cell = source.child(j);\n\t\t\t\tif (row + cell.attrs.rowspan > newHeight)\n\t\t\t\t\tcell = cell.type.create(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...cell.attrs,\n\t\t\t\t\t\t\trowspan: Math.max(1, newHeight - cell.attrs.rowspan)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcell.content\n\t\t\t\t\t);\n\t\t\t\tcells.push(cell);\n\t\t\t}\n\t\t\tnewRows.push(Fragment.from(cells));\n\t\t}\n\t\trows = newRows;\n\t\theight = newHeight;\n\t}\n\n\treturn { width, height, rows };\n};\n\nfunction growTable(\n\ttr: Transaction,\n\tmap: TableMap,\n\ttable: Node,\n\tstart: number,\n\twidth: number,\n\theight: number,\n\tmapFrom: number\n): boolean {\n\tconst schema = tr.doc.type.schema;\n\tconst types = tableNodeTypes(schema);\n\tlet empty;\n\tlet emptyHead;\n\tif (width > map.width) {\n\t\tfor (let row = 0, rowEnd = 0; row < map.height; row++) {\n\t\t\tconst rowNode = table.child(row);\n\t\t\trowEnd += rowNode.nodeSize;\n\t\t\tconst cells: Node[] = [];\n\t\t\tlet add: Node;\n\t\t\tif (rowNode.lastChild == null || rowNode.lastChild.type == types.cell)\n\t\t\t\tadd = empty || (empty = types.cell.createAndFill()!);\n\t\t\telse add = emptyHead || (emptyHead = types.headerCell.createAndFill()!);\n\t\t\tfor (let i = map.width; i < width; i++) cells.push(add);\n\t\t\ttr.insert(tr.mapping.slice(mapFrom).map(rowEnd - 1 + start), cells);\n\t\t}\n\t}\n\tif (height > map.height) {\n\t\tconst cells = [];\n\t\tfor (\n\t\t\tlet i = 0, start = (map.height - 1) * map.width;\n\t\t\ti < Math.max(map.width, width);\n\t\t\ti++\n\t\t) {\n\t\t\tconst header =\n\t\t\t\ti >= map.width\n\t\t\t\t\t? false\n\t\t\t\t\t: table.nodeAt(map.map[start + i])!.type == types.headerCell;\n\t\t\tcells.push(\n\t\t\t\theader\n\t\t\t\t\t? emptyHead || (emptyHead = types.headerCell.createAndFill()!)\n\t\t\t\t\t: empty || (empty = types.cell.createAndFill()!)\n\t\t\t);\n\t\t}\n\n\t\tconst emptyRow = types.row.create(null, Fragment.from(cells)),\n\t\t\trows = [];\n\t\tfor (let i = map.height; i < height; i++) rows.push(emptyRow);\n\t\ttr.insert(tr.mapping.slice(mapFrom).map(start + table.nodeSize - 2), rows);\n\t}\n\treturn !!(empty || emptyHead);\n}\n\nfunction isolateHorizontal(\n\ttr: Transaction,\n\tmap: TableMap,\n\ttable: Node,\n\tstart: number,\n\tleft: number,\n\tright: number,\n\ttop: number,\n\tmapFrom: number\n): boolean {\n\tif (top == 0 || top == map.height) return false;\n\tlet found = false;\n\tfor (let col = left; col < right; col++) {\n\t\tconst index = top * map.width + col,\n\t\t\tpos = map.map[index];\n\t\tif (map.map[index - map.width] == pos) {\n\t\t\tfound = true;\n\t\t\tconst cell = table.nodeAt(pos)!;\n\t\t\tconst { top: cellTop, left: cellLeft } = map.findCell(pos);\n\t\t\ttr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos + start), null, {\n\t\t\t\t...cell.attrs,\n\t\t\t\trowspan: top - cellTop\n\t\t\t});\n\t\t\ttr.insert(\n\t\t\t\ttr.mapping.slice(mapFrom).map(map.positionAt(top, cellLeft, table)),\n\t\t\t\tcell.type.createAndFill({\n\t\t\t\t\t...cell.attrs,\n\t\t\t\t\trowspan: cellTop + cell.attrs.rowspan - top\n\t\t\t\t})!\n\t\t\t);\n\t\t\tcol += cell.attrs.colspan - 1;\n\t\t}\n\t}\n\treturn found;\n}\n\nfunction isolateVertical(\n\ttr: Transaction,\n\tmap: TableMap,\n\ttable: Node,\n\tstart: number,\n\ttop: number,\n\tbottom: number,\n\tleft: number,\n\tmapFrom: number\n): boolean {\n\tif (left == 0 || left == map.width) return false;\n\tlet found = false;\n\tfor (let row = top; row < bottom; row++) {\n\t\tconst index = row * map.width + left,\n\t\t\tpos = map.map[index];\n\t\tif (map.map[index - 1] == pos) {\n\t\t\tfound = true;\n\t\t\tconst cell = table.nodeAt(pos)!;\n\t\t\tconst cellLeft = map.colCount(pos);\n\t\t\tconst updatePos = tr.mapping.slice(mapFrom).map(pos + start);\n\t\t\ttr.setNodeMarkup(\n\t\t\t\tupdatePos,\n\t\t\t\tnull,\n\t\t\t\tremoveColSpan(\n\t\t\t\t\tcell.attrs as CellAttrs,\n\t\t\t\t\tleft - cellLeft,\n\t\t\t\t\tcell.attrs.colspan - (left - cellLeft)\n\t\t\t\t)\n\t\t\t);\n\t\t\ttr.insert(\n\t\t\t\tupdatePos + cell.nodeSize,\n\t\t\t\tcell.type.createAndFill(\n\t\t\t\t\tremoveColSpan(cell.attrs as CellAttrs, 0, left - cellLeft)\n\t\t\t\t)!\n\t\t\t);\n\t\t\trow += cell.attrs.rowspan - 1;\n\t\t}\n\t}\n\treturn found;\n}\n\nexport const insertCells = (\n\tstate: EditorState,\n\tdispatch: EditorView['dispatch'],\n\ttableStart: number,\n\trect: Rect,\n\tcells: Area\n) => {\n\tlet table = tableStart ? state.doc.nodeAt(tableStart - 1) : state.doc;\n\tif (!table) throw new Error('No table found');\n\tlet map = TableMap.get(table);\n\tconst { top, left } = rect;\n\tconst right = left + cells.width,\n\t\tbottom = top + cells.height;\n\tconst tr = state.tr;\n\tlet mapFrom = 0;\n\tfunction recomp() {\n\t\ttable = tableStart ? tr.doc.nodeAt(tableStart - 1) : tr.doc;\n\t\tif (!table) throw new Error('No table found');\n\t\tmap = TableMap.get(table);\n\t\tmapFrom = tr.mapping.maps.length;\n\t}\n\n\tif (growTable(tr, map, table, tableStart, right, bottom, mapFrom)) recomp();\n\tif (isolateHorizontal(tr, map, table, tableStart, left, right, top, mapFrom))\n\t\trecomp();\n\tif (\n\t\tisolateHorizontal(tr, map, table, tableStart, left, right, bottom, mapFrom)\n\t)\n\t\trecomp();\n\tif (isolateVertical(tr, map, table, tableStart, top, bottom, left, mapFrom))\n\t\trecomp();\n\tif (isolateVertical(tr, map, table, tableStart, top, bottom, right, mapFrom))\n\t\trecomp();\n\n\tfor (let row = top; row < bottom; row++) {\n\t\tconst from = map.positionAt(row, left, table),\n\t\t\tto = map.positionAt(row, right, table);\n\t\ttr.replace(\n\t\t\ttr.mapping.slice(mapFrom).map(from + tableStart),\n\t\t\ttr.mapping.slice(mapFrom).map(to + tableStart),\n\t\t\tnew Slice(cells.rows[row - top], 0, 0)\n\t\t);\n\t}\n\trecomp();\n\n\ttr.setSelection(\n\t\tnew CellSelection(\n\t\t\ttr.doc.resolve(tableStart + map.positionAt(top, left, table)),\n\t\t\ttr.doc.resolve(tableStart + map.positionAt(bottom - 1, right - 1, table))\n\t\t)\n\t);\n\tdispatch(tr);\n};\n","import { EditorView } from 'prosemirror-view';\nimport {\n\tcellAround,\n\tinSameTable,\n\tisEmpty,\n\tisInTable,\n\tnextCell,\n\tselectionCell,\n\ttableEditingKey\n} from './utils';\nimport { CellSelection } from './cellSelection';\nimport { Fragment, ResolvedPos, Slice } from 'prosemirror-model';\nimport { keydownHandler } from 'prosemirror-keymap';\nimport {\n\tCommand,\n\tEditorState,\n\tSelection,\n\tTextSelection\n} from 'prosemirror-state';\nimport { tableNodeTypes } from './schema';\nimport { clipCells, fitSlice, insertCells, pastedCells } from './copypaste';\nimport { TableMap } from './tableMap';\n\ntype Axis = 'horiz' | 'vert';\n\nexport type Direction = -1 | 1;\n\nconst deleteCellSelection: Command = (state, dispatch) => {\n\tconst sel = state.selection;\n\tif (!(sel instanceof CellSelection)) return false;\n\tif (dispatch) {\n\t\tconst tr = state.tr;\n\t\tconst baseContent = tableNodeTypes(state.schema).cell.createAndFill()!\n\t\t\t.content;\n\t\tsel.forEachCell((cell, pos) => {\n\t\t\tif (!cell.content.eq(baseContent))\n\t\t\t\ttr.replace(\n\t\t\t\t\ttr.mapping.map(pos + 1),\n\t\t\t\t\ttr.mapping.map(pos + cell.nodeSize - 1),\n\t\t\t\t\tnew Slice(baseContent, 0, 0)\n\t\t\t\t);\n\t\t});\n\t\tif (tr.docChanged) dispatch(tr);\n\t}\n\treturn true;\n};\n\nexport const handleKeyDown = keydownHandler({\n\tArrowLeft: arrow('horiz', -1),\n\tArrowRight: arrow('horiz', 1),\n\tArrowUp: arrow('vert', -1),\n\tArrowDown: arrow('vert', 1),\n\t'Shift-ArrowLeft': shiftArrow('horiz', -1),\n\t'Shift-ArrowRight': shiftArrow('horiz', 1),\n\t'Shift-ArrowUp': shiftArrow('vert', -1),\n\t'Shift-ArrowDown': shiftArrow('vert', 1),\n\tBackspace: deleteCellSelection,\n\t'Mod-Backspace': deleteCellSelection,\n\tDelete: deleteCellSelection,\n\t'Mod-Delete': deleteCellSelection\n});\n\nfunction maybeSetSelection(\n\tstate: EditorState,\n\tdispatch: undefined | EditorView['dispatch'],\n\tselection: Selection\n): boolean {\n\tif (selection.eq(state.selection)) return false;\n\tif (dispatch) dispatch(state.tr.setSelection(selection).scrollIntoView());\n\treturn true;\n}\n\nexport function arrow(axis: Axis, dir: Direction): Command {\n\treturn (state, dispatch, view) => {\n\t\tif (!view) return false;\n\t\tconst sel = state.selection;\n\t\tif (sel instanceof CellSelection) {\n\t\t\treturn maybeSetSelection(\n\t\t\t\tstate,\n\t\t\t\tdispatch,\n\t\t\t\tSelection.near(sel.$headCell, dir)\n\t\t\t);\n\t\t}\n\t\tif (axis != 'horiz' && !sel.empty) return false;\n\t\tconst end = atEndOfCell(view, axis, dir);\n\t\tif (end == null) return false;\n\t\tif (axis == 'horiz') {\n\t\t\treturn maybeSetSelection(\n\t\t\t\tstate,\n\t\t\t\tdispatch,\n\t\t\t\tSelection.near(state.doc.resolve(sel.head + dir), dir)\n\t\t\t);\n\t\t} else {\n\t\t\tconst $cell = state.doc.resolve(end);\n\t\t\tconst $next = nextCell($cell, axis, dir);\n\t\t\tlet newSel;\n\t\t\tif ($next) newSel = Selection.near($next, 1);\n\t\t\telse if (dir < 0)\n\t\t\t\tnewSel = Selection.near(state.doc.resolve($cell.before(-1)), -1);\n\t\t\telse newSel = Selection.near(state.doc.resolve($cell.after(-1)), 1);\n\t\t\treturn maybeSetSelection(state, dispatch, newSel);\n\t\t}\n\t};\n}\n\nfunction shiftArrow(axis: Axis, dir: Direction): Command {\n\treturn (state, dispatch, view) => {\n\t\tif (!view) return false;\n\t\tlet cellSel: CellSelection;\n\t\tconst sel = state.selection;\n\t\tif (sel instanceof CellSelection) {\n\t\t\tcellSel = sel;\n\t\t} else {\n\t\t\tconst end = atEndOfCell(view, axis, dir);\n\t\t\tif (end == null) return false;\n\t\t\tcellSel = new CellSelection(state.doc.resolve(end));\n\t\t}\n\t\tconst $head = nextCell(cellSel.$headCell, axis, dir);\n\t\tif (!$head) return false;\n\t\treturn maybeSetSelection(\n\t\t\tstate,\n\t\t\tdispatch,\n\t\t\tnew CellSelection(cellSel.$anchorCell, $head)\n\t\t);\n\t};\n}\n\nexport const handlePaste = (\n\tview: EditorView,\n\te: ClipboardEvent,\n\tslice: Slice\n): boolean => {\n\tif (!isInTable(view.state)) return false;\n\tlet cells = pastedCells(slice);\n\tconst sel = view.state.selection;\n\tif (sel instanceof CellSelection) {\n\t\tif (!cells)\n\t\t\tcells = {\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1,\n\t\t\t\trows: [\n\t\t\t\t\tFragment.from(fitSlice(tableNodeTypes(view.state.schema).cell, slice))\n\t\t\t\t]\n\t\t\t};\n\t\tconst table = sel.$anchorCell.node(-1);\n\t\tconst start = sel.$anchorCell.start(-1);\n\t\tconst rect = TableMap.get(table).rectBetween(\n\t\t\tsel.$anchorCell.pos - start,\n\t\t\tsel.$headCell.pos - start\n\t\t);\n\t\tcells = clipCells(cells, rect.right - rect.left, rect.bottom - rect.top);\n\t\tinsertCells(view.state, view.dispatch, start, rect, cells);\n\t\treturn true;\n\t} else if (cells) {\n\t\tconst $cell = selectionCell(view.state);\n\t\tconst start = $cell.start(-1);\n\t\tinsertCells(\n\t\t\tview.state,\n\t\t\tview.dispatch,\n\t\t\tstart,\n\t\t\tTableMap.get($cell.node(-1)).findCell($cell.pos - start),\n\t\t\tcells\n\t\t);\n\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nexport function handleMouseDown(\n\tview: EditorView,\n\tstartEvent: MouseEvent\n): void {\n\tif (startEvent.ctrlKey || startEvent.metaKey) return;\n\n\tconst startDOMCell = domInCell(view, startEvent.target as Node);\n\tconst $cell = cellUnderMouse(view, startEvent);\n\tif (startDOMCell) {\n\t\tstartEvent.preventDefault();\n\t}\n\tlet $anchor;\n\tif (startEvent.shiftKey && view.state.selection instanceof CellSelection) {\n\t\t// Adding to an existing cell selection\n\t\tsetCellSelection(view.state.selection.$anchorCell, startEvent);\n\t\tstartEvent.preventDefault();\n\t} else if (\n\t\tstartEvent.shiftKey &&\n\t\tstartDOMCell &&\n\t\t($anchor = cellAround(view.state.selection.$anchor)) != null &&\n\t\tcellUnderMouse(view, startEvent)?.pos != $anchor.pos\n\t) {\n\t\tsetCellSelection($anchor, startEvent);\n\t\tstartEvent.preventDefault();\n\t} else if (!startDOMCell) {\n\t\treturn;\n\t}\n\n\tfunction setCellSelection($anchor: ResolvedPos, event: MouseEvent): void {\n\t\tlet $head = cellUnderMouse(view, event);\n\t\tconst starting = tableEditingKey.getState(view.state)?.set == null;\n\t\tif (!$head || !inSameTable($anchor, $head)) {\n\t\t\tif (starting) $head = $anchor;\n\t\t\telse return;\n\t\t}\n\t\tconst selection = new CellSelection($anchor, $head);\n\t\tif (starting || !view.state.selection.eq(selection)) {\n\t\t\tconst tr = view.state.tr.setSelection(selection);\n\n\t\t\tif (starting) tr.setMeta(tableEditingKey, { set: $anchor.pos });\n\t\t\tview.dispatch(tr);\n\t\t}\n\t}\n\tconst { clientX: x1, clientY: y1 } = startEvent;\n\tfunction stop(e?: Event): void {\n\t\tif (e?.type == 'mouseup') {\n\t\t\tconst _event: MouseEvent = e as MouseEvent;\n\t\t\tconst { clientX: x2, clientY: y2 } = _event;\n\t\t\tif (Math.abs(x1 - x2) < 4 && Math.abs(y1 - y2) < 4) {\n\t\t\t\tconst pos = view.posAtCoords({\n\t\t\t\t\tleft: x2,\n\t\t\t\t\ttop: y2\n\t\t\t\t});\n\t\t\t\tif (pos) {\n\t\t\t\t\tconst newSelection = TextSelection.create(\n\t\t\t\t\t\tview.state.doc,\n\t\t\t\t\t\tpos.pos,\n\t\t\t\t\t\tpos.pos\n\t\t\t\t\t);\n\t\t\t\t\tconst tr = view.state.tr.setSelection(newSelection);\n\t\t\t\t\tview.dispatch(tr);\n\t\t\t\t\tview.focus();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst tableDOM = view.nodeDOM($cell!.start(-2));\n\t\t\t\t(tableDOM?.firstChild as HTMLDivElement)?.focus();\n\n\t\t\t\t// document.querySelector<HTMLElement>('.hiddenfocus')?.focus();\n\t\t\t}\n\t\t}\n\n\t\tview.root.removeEventListener('mouseup', stop);\n\t\tview.root.removeEventListener('dragstart', stop);\n\t\tview.root.removeEventListener('mousemove', move);\n\t\tif (!isEmpty(tableEditingKey.getState(view.state)?.set))\n\t\t\tview.dispatch(view.state.tr.setMeta(tableEditingKey, { set: -1 }));\n\t}\n\n\tlet startPos = view.posAtCoords({ left: x1, top: y1 });\n\n\tfunction move(_event: Event): void {\n\t\tconst event = _event as MouseEvent;\n\n\t\tconst anchor = tableEditingKey.getState(view.state)?.set;\n\t\tlet $anchor;\n\t\tif (anchor || anchor == 0) {\n\t\t\t$anchor = view.state.doc.resolve(anchor);\n\t\t} else if (domInCell(view, event.target as Node) != startDOMCell) {\n\t\t\t$anchor = cellUnderMouse(view, startEvent);\n\t\t\tif (!$anchor) return stop();\n\t\t\tview.dom.blur();\n\t\t} else {\n\t\t\tconst head = view.posAtCoords({\n\t\t\t\tleft: event.clientX,\n\t\t\t\ttop: event.clientY\n\t\t\t});\n\t\t\tview.dispatch(\n\t\t\t\tview.state.tr.setSelection(\n\t\t\t\t\tTextSelection.create(view.state.doc, startPos!.pos, head!.pos)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ($anchor) setCellSelection($anchor, event);\n\t}\n\n\tview.root.addEventListener('mouseup', stop);\n\tview.root.addEventListener('dragstart', stop);\n\tview.root.addEventListener('mousemove', move);\n}\n\nexport function domInCell(view: EditorView, dom: Node | null): Node | null {\n\tfor (; dom && dom != view.dom; dom = dom.parentNode) {\n\t\tif (dom.nodeName == 'TD' || dom.nodeName == 'TH') {\n\t\t\treturn dom;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction cellUnderMouse(\n\tview: EditorView,\n\tevent: MouseEvent\n): ResolvedPos | null {\n\tconst mousePos = view.posAtCoords({\n\t\tleft: event.clientX,\n\t\ttop: event.clientY\n\t});\n\tif (!mousePos) return null;\n\treturn mousePos ? cellAround(view.state.doc.resolve(mousePos.pos)) : null;\n}\n\nfunction atEndOfCell(view: EditorView, axis: Axis, dir: number): null | number {\n\tif (!(view.state.selection instanceof TextSelection)) return null;\n\tconst { $head } = view.state.selection;\n\tfor (let d = $head.depth - 1; d >= 0; d--) {\n\t\tconst parent = $head.node(d),\n\t\t\tindex = dir < 0 ? $head.index(d) : $head.indexAfter(d);\n\n\t\tif (index != (dir < 0 ? 0 : parent.childCount)) return null;\n\n\t\tif (\n\t\t\tparent.type.spec.tableRole == 'cell' ||\n\t\t\tparent.type.spec.tableRole == 'headerCell'\n\t\t) {\n\t\t\tconst cellPos = $head.before(d);\n\t\t\tconst dirStr: 'up' | 'down' | 'left' | 'right' =\n\t\t\t\taxis == 'vert' ? (dir > 0 ? 'down' : 'up') : dir > 0 ? 'right' : 'left';\n\t\t\treturn view.endOfTextblock(dirStr) ? cellPos : null;\n\t\t}\n\t}\n\treturn null;\n}\n\nexport const handleTripleClick = (view: EditorView, pos: number): boolean => {\n\tconst doc = view.state.doc,\n\t\t$cell = cellAround(doc.resolve(pos));\n\tif (!$cell) return false;\n\tview.dispatch(\n\t\tview.state.tr\n\t\t\t.setSelection(new CellSelection($cell))\n\t\t\t.setMeta(tableEditingKey, { set: $cell.pos })\n\t);\n\treturn true;\n};\n","import { EditorState, Plugin } from 'prosemirror-state';\nimport { TableState, cellAround, isEmpty, tableEditingKey } from './utils';\nimport {\n\tCellSelection,\n\tdrawCellSelection,\n\tnormalizeSelection\n} from './cellSelection';\nimport { fixTables } from './fixtables';\n\nexport { tableNodeTypes, tableNodes } from './schema';\nexport { TableView } from './tableView';\nexport { columnResizing } from './columnresizing';\nimport './style.scss';\nimport {\n\tdomInCell,\n\thandleKeyDown,\n\thandleMouseDown,\n\thandlePaste,\n\thandleTripleClick\n} from './input';\nimport { Decoration, DecorationSet, EditorView } from 'prosemirror-view';\nimport { TableView, TableViewConstructor, addToolkit } from './tableView';\n\nexport type TableEditingOptions = {\n\tallowTableNodeSelection?: boolean;\n};\n\nexport function tableEditing({\n\tallowTableNodeSelection = false\n}: TableEditingOptions): Plugin {\n\tconst getDecorations = (state: EditorState) => {\n\t\tlet decs: Decoration[] = [];\n\t\tdecs = decs.concat(drawCellSelection(state));\n\t\tstate.doc.descendants((node, pos) => {\n\t\t\tif (node.type.name !== 'table') return;\n\t\t\tdecs = decs.concat(addToolkit(node, pos));\n\t\t});\n\t\treturn decs;\n\t};\n\n\treturn new Plugin<TableState>({\n\t\tkey: tableEditingKey,\n\t\tstate: {\n\t\t\tinit(_, state) {\n\t\t\t\treturn {\n\t\t\t\t\tdecorations: DecorationSet.create(state.doc, getDecorations(state)),\n\t\t\t\t\tset: null\n\t\t\t\t};\n\t\t\t},\n\t\t\tapply(tr, value, _, state) {\n\t\t\t\tconst st = tr.getMeta(tableEditingKey);\n\t\t\t\tlet { set = null, hoverDecos } = st || {};\n\t\t\t\tconst decorations = DecorationSet.create(\n\t\t\t\t\tstate.doc,\n\t\t\t\t\tgetDecorations(state).concat(\n\t\t\t\t\t\thoverDecos ? hoverDecos : value.hoverDecos || []\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\tif (!isEmpty(value.set) && isEmpty(set)) {\n\t\t\t\t\tconst { deleted, pos } = tr.mapping.mapResult(value.set!);\n\t\t\t\t\tset = deleted ? null : pos;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tset: isEmpty(set) || set == -1 ? null : set,\n\t\t\t\t\tdecorations,\n\t\t\t\t\thoverDecos\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tnodeViews: {\n\t\t\t\ttable: TableViewConstructor\n\t\t\t},\n\t\t\tdecorations(state) {\n\t\t\t\treturn this.getState(state)?.decorations;\n\t\t\t},\n\t\t\thandleDOMEvents: {\n\t\t\t\tmousedown: handleMouseDown\n\t\t\t},\n\t\t\thandlePaste,\n\t\t\thandleTripleClick,\n\t\t\thandleKeyDown\n\t\t\t// createSelectionBetween(view) {\n\t\t\t// \tconsole.log('cre');\n\n\t\t\t// \tconst set = tableEditingKey.getState(view.state)?.set;\n\t\t\t// \tconsole.log(set, 'selection');\n\n\t\t\t// \treturn !isEmpty(set) ? view.state.selection : null;\n\t\t\t// }\n\t\t},\n\t\tappendTransaction(_, oldState, newState) {\n\t\t\treturn normalizeSelection(\n\t\t\t\tnewState,\n\t\t\t\t// newState.tr,\n\t\t\t\tfixTables(newState, oldState),\n\t\t\t\tallowTableNodeSelection\n\t\t\t);\n\t\t}\n\t});\n}\n","import katex from 'katex';\nimport { NodeSpec } from 'prosemirror-model';\nimport { Plugin } from 'prosemirror-state';\nimport createElement from '../../createElement';\nimport { EditorView } from 'prosemirror-view';\n\nexport const mathNodeSpec: NodeSpec = {\n\tgroup: 'inline',\n\tinline: true,\n\tatom: true,\n\ttoDOM: (node) => ['span', { class: 'math-node' }, node.attrs.formula],\n\tparseDOM: [\n\t\t{ tag: 'span.math-node', getAttrs: (dom) => ({ formula: dom.textContent }) }\n\t],\n\tattrs: {\n\t\tformula: {}\n\t}\n};\n\nconst renderMath = (formula: string) => {\n\tconst span = createElement('span', { class: 'math-node' });\n\tkatex.render(formula, span);\n\treturn span;\n};\n\nexport const mathRender = () => {\n\treturn new Plugin({\n\t\tprops: {\n\t\t\tnodeViews: {\n\t\t\t\tmath(node, view, getPos) {\n\t\t\t\t\tconst dom = renderMath(node.attrs.formula);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdom,\n\t\t\t\t\t\tupdate: (newNode) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tnewNode.type.name === 'math' &&\n\t\t\t\t\t\t\t\tnewNode.attrs.formula === node.attrs.formula\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n\nexport const insertMath = (view: EditorView, formula: string) => {\n\tconst { state, dispatch } = view;\n\tconst node = state.schema.nodes.math.create({ formula });\n\tdispatch(state.tr.replaceSelectionWith(node));\n};\n","// model.ts 文件命名暂时还是以 mvc 模式命名，方便理解，实际中 命名为 schema.ts 更好\nimport {\n\tMarkSpec,\n\tNode,\n\tNodeSpec,\n\tSchema,\n\tSchemaSpec\n} from 'prosemirror-model';\nimport { codeBlock } from './components/codeBlock';\nimport { taskItem, taskList } from './components/taskList';\nimport { tableNodes } from './components/tables';\nimport { mathNodeSpec } from './components/katex';\n\nfunction createNodeSpec(config: NodeSpec): NodeSpec {\n\tconfig.attrs = { ...config.attrs, hidden: { default: false } };\n\tconst toDOM = config.toDOM;\n\tif (toDOM)\n\t\tconfig.toDOM = (node: Node) => {\n\t\t\tconst res = toDOM(node);\n\t\t\tif (Array.isArray(res)) {\n\t\t\t\tlet [tag, attrs, content] = res;\n\t\t\t\tif (attrs === 0) content = 0;\n\t\t\t\tconst hidden = node.attrs.hidden ? 'hidden' : '';\n\t\t\t\tattrs = {\n\t\t\t\t\t...attrs,\n\t\t\t\t\tclass: attrs.class ? attrs.class + ' ' + hidden : hidden\n\t\t\t\t};\n\t\t\t\treturn [tag, attrs, content];\n\t\t\t} else return res;\n\t\t};\n\treturn config;\n}\n\nconst nodes = {\n\t// 整个文档\n\tdoc: {\n\t\t// 文档内容规定必须是 block 类型的节点（block 与 HTML 中的 block 概念差不多） `+` 号代表可以有一个或多个（规则类似正则）\n\t\tcontent: 'block+'\n\t},\n\t// 段落中的文本\n\ttext: {\n\t\t// 当前处于 inline 分株，意味着它是个 inline 节点。代表输入的文本\n\t\tgroup: 'inline'\n\t},\n\n\tmath: createNodeSpec(mathNodeSpec),\n\n\t// 文档段落\n\tparagraph: createNodeSpec({\n\t\t// 段落内容规定必须是 inline 类型的节点（inline 与 HTML 中 inline 概念差不多）, `*` 号代表可以有 0 个或多个（规则类似正则）\n\t\tcontent: 'inline*',\n\t\t// 分组：当前节点所在的分组为 block，意味着它是个 block 节点\n\t\tgroup: 'block',\n\t\t// 渲染为 html 时候，使用 p 标签渲染，第二个参数 0 念做 “洞”，类似 vue 中 slot 插槽的概念，\n\t\t// 证明它有子节点，以后子节点就填充在 p 标签中\n\t\ttoDOM: () => {\n\t\t\treturn ['p', 0];\n\t\t},\n\t\t// 从别处复制过来的富文本，如果包含 p 标签，将 p 标签序列化为当前的 p 节点后进行展示\n\t\tparseDOM: [\n\t\t\t{\n\t\t\t\ttag: 'p'\n\t\t\t}\n\t\t]\n\t}),\n\tcodeBlock: createNodeSpec(codeBlock),\n\tblockQuote: createNodeSpec({\n\t\tcontent: 'paragraph block*',\n\t\tgroup: 'block',\n\t\ttoDOM() {\n\t\t\treturn ['blockquote', 0];\n\t\t},\n\t\tparseDOM: [\n\t\t\t{\n\t\t\t\ttag: 'blockquote'\n\t\t\t}\n\t\t]\n\t}),\n\n\t// 1-6 级标题\n\theading: createNodeSpec({\n\t\t// attrs 与 vue/react 组件中 props 的概念类似，代表定义当前节点有哪些属性，这里定义了 level 属性，默认值 1\n\t\tattrs: {\n\t\t\tlevel: {\n\t\t\t\tdefault: 1\n\t\t\t},\n\t\t\tid: {\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\tfold: {\n\t\t\t\tdefault: false\n\t\t\t}\n\t\t},\n\t\t// 当前节点内容可以是 0 个或多个 inline 节点\n\t\tcontent: 'inline*',\n\t\t// 当前节点分组为 block 分组\n\t\tgroup: 'block',\n\t\t// defining: 特殊属性，为 true 代表如果在当前标签内（以 h1 为例），全选内容，直接粘贴新的内容后，这些内容还会被 h1 标签包裹\n\t\t// 如果为 false, 整个 h1 标签（包括内容与标签本身）将会被替换为其他内容，删除亦如此。\n\t\t// 还有其他的特殊属性，后续细说\n\t\tdefining: true,\n\t\t// 转为 html 标签时，根据当前的 level 属性，生成对应的 h1 - h6 标签，节点的内容填充在 h 标签中（“洞”在）。\n\t\ttoDOM(node) {\n\t\t\tconst tag = `h${node.attrs.level}`;\n\t\t\treturn [tag, 0];\n\t\t},\n\t\t// 从别处复制进来的富文本内容，根据标签序列化为当前 heading 节点，并填充对应的 level 属性\n\t\tparseDOM: [\n\t\t\t{ tag: 'h1', attrs: { level: 1 } },\n\t\t\t{ tag: 'h2', attrs: { level: 2 } },\n\t\t\t{ tag: 'h3', attrs: { level: 3 } },\n\t\t\t{ tag: 'h4', attrs: { level: 4 } },\n\t\t\t{ tag: 'h5', attrs: { level: 5 } },\n\t\t\t{ tag: 'h6', attrs: { level: 6 } }\n\t\t]\n\t}),\n\t// listSymbol: {\n\t// \tgroup: 'inline',\n\t// \tinline: true,\n\t// \tattrs: {\n\t// \t\tlevel: { default: 1 },\n\t// \t\ttype: { default: 0 }\n\t// \t},\n\t// \ttoDOM({ attrs }) {\n\t// \t\treturn [\n\t// \t\t\t'span',\n\t// \t\t\t{\n\t// \t\t\t\tclass: 'list-symbol',\n\t// \t\t\t\t'data-level': attrs.level,\n\t// \t\t\t\t'data-type': attrs.type\n\t// \t\t\t}\n\t// \t\t];\n\t// \t},\n\t// \tparseDOM: [\n\t// \t\t{\n\t// \t\t\ttag: 'span[class=\"list-symbol\"]',\n\t// \t\t\tgetAttrs(dom) {\n\t// \t\t\t\treturn {\n\t// \t\t\t\t\tlevel: dom.getAttribute('data-level'),\n\t// \t\t\t\t\ttype: dom.getAttribute('data-type')\n\t// \t\t\t\t};\n\t// \t\t\t}\n\t// \t\t}\n\t// \t]\n\t// },\n\tordered_list: createNodeSpec({\n\t\tcontent: 'list_item+',\n\t\tgroup: 'block',\n\t\tattrs: { order: { default: 1 } },\n\t\tparseDOM: [\n\t\t\t{\n\t\t\t\ttag: 'ol',\n\t\t\t\tgetAttrs(dom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\torder: dom.hasAttribute('start')\n\t\t\t\t\t\t\t? dom.getAttribute?.('start') || ''\n\t\t\t\t\t\t\t: 1\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t\ttoDOM(node) {\n\t\t\treturn node.attrs.order == 1\n\t\t\t\t? ['ol', 0]\n\t\t\t\t: ['ol', { start: node.attrs.order }, 0];\n\t\t}\n\t}),\n\tbullet_list: createNodeSpec({\n\t\tcontent: 'list_item+',\n\t\tgroup: 'block',\n\t\tparseDOM: [{ tag: 'ul' }],\n\t\ttoDOM() {\n\t\t\treturn ['ul', 0];\n\t\t}\n\t}),\n\tlist_item: createNodeSpec({\n\t\tcontent: 'paragraph block*',\n\t\tparseDOM: [{ tag: 'li' }],\n\t\ttoDOM() {\n\t\t\treturn ['li', 0];\n\t\t}\n\t}),\n\ttaskList: createNodeSpec(taskList),\n\ttaskItem: createNodeSpec(taskItem),\n\t...tableNodes({\n\t\ttableGroup: 'block',\n\t\tcellContent: 'block+',\n\t\tcellAttributes: {}\n\t}),\n\thorizontalRule: createNodeSpec({\n\t\tgroup: 'block',\n\t\tparseDOM: [{ tag: 'hr' }],\n\t\ttoDOM: () => ['hr']\n\t}),\n\timage: createNodeSpec({\n\t\tinline: true,\n\t\tattrs: {\n\t\t\tsrc: {},\n\t\t\talt: { default: null },\n\t\t\ttitle: { default: null }\n\t\t},\n\t\tgroup: 'inline',\n\t\tdraggable: true,\n\t\tparseDOM: [\n\t\t\t{\n\t\t\t\ttag: 'img[src]',\n\t\t\t\tgetAttrs: (dom) => ({\n\t\t\t\t\tsrc: dom.getAttribute('src'),\n\t\t\t\t\ttitle: dom.getAttribute('title'),\n\t\t\t\t\talt: dom.getAttribute('alt')\n\t\t\t\t})\n\t\t\t}\n\t\t],\n\t\ttoDOM: (node) => {\n\t\t\tconst { title, src, alt } = node.attrs;\n\n\t\t\treturn ['img', { title, src, alt }];\n\t\t}\n\t}),\n\thardBreak: createNodeSpec({\n\t\tinline: true,\n\t\tgroup: 'inline',\n\t\tselectable: false,\n\t\tparseDOM: [{ tag: 'br' }],\n\t\ttoDOM: () => ['br']\n\t})\n};\nexport type NodesKey = keyof typeof nodes;\nexport type MarksKey =\n\t| 'bold'\n\t| 'italic'\n\t| 'link'\n\t| 'underline'\n\t| 'linethrough'\n\t| 'style';\n\nconst marks: Record<MarksKey, MarkSpec> = {\n\t// 文本加粗\n\tbold: {\n\t\ttoDOM: () => ['strong', 0],\n\t\tparseDOM: [\n\t\t\t{ tag: 'stong' },\n\t\t\t{\n\t\t\t\ttag: 'b',\n\t\t\t\tgetAttrs: (dom) => dom.style.fontWeight !== 'normal' && null\n\t\t\t},\n\t\t\t{\n\t\t\t\tstyle: 'font-weight',\n\t\t\t\tgetAttrs: (val) => /^(bold(er)?|[5-9]\\d{2})$/.test(val) && null\n\t\t\t}\n\t\t]\n\t},\n\titalic: {\n\t\tgroup: 'heading',\n\t\ttoDOM: () => ['em', 0],\n\t\tparseDOM: [\n\t\t\t{ tag: 'em' },\n\t\t\t{\n\t\t\t\ttag: 'i',\n\t\t\t\tgetAttrs: (dom) => dom.style.fontStyle !== 'normal' && null\n\t\t\t},\n\t\t\t{ style: 'font-style=italic' }\n\t\t]\n\t},\n\tlink: {\n\t\tgroup: 'heading',\n\t\tattrs: {\n\t\t\thref: { default: null },\n\t\t\tref: { default: 'noopener noreferrer nofollow' },\n\t\t\ttarget: { default: '_blank' },\n\t\t\ttitle: { default: '' }\n\t\t},\n\t\ttoDOM: (mark) => {\n\t\t\tconst { href, ref, target, title } = mark.attrs;\n\t\t\treturn ['a', { href, ref, target, title }, 0];\n\t\t},\n\t\tparseDOM: [{ tag: 'a[href]:not([href *= \"javascript:\" i])' }]\n\t},\n\tunderline: {\n\t\tparseDOM: [\n\t\t\t{ tag: 'u' },\n\t\t\t{\n\t\t\t\tstyle: 'text-decoration',\n\t\t\t\tgetAttrs: (val) => val === 'underline' && null\n\t\t\t}\n\t\t],\n\t\ttoDOM: () => ['u', 0]\n\t},\n\tlinethrough: {\n\t\tparseDOM: [\n\t\t\t{ tag: 's' },\n\t\t\t{ tag: 'strike' },\n\t\t\t{\n\t\t\t\tstyle: 'text-decoration',\n\t\t\t\tgetAttrs: (val) => val === 'linethrough' && null\n\t\t\t}\n\t\t],\n\t\ttoDOM: () => ['s', 0]\n\t},\n\tstyle: {\n\t\tattrs: {\n\t\t\tcolor: { default: null },\n\t\t\tfontSize: { default: null },\n\t\t\tbackgroundColor: { default: null }\n\t\t},\n\t\tparseDOM: [\n\t\t\t{ style: 'color', getAttrs: (val) => ({ color: val }) },\n\t\t\t{ style: 'font-size', getAttrs: (val) => ({ fontSize: val }) },\n\t\t\t{\n\t\t\t\tstyle: 'background-color',\n\t\t\t\tgetAttrs: (val) => ({ backgroundColor: val })\n\t\t\t}\n\t\t],\n\t\ttoDOM: (mark) => {\n\t\t\tconst { color, fontSize, backgroundColor } = mark.attrs;\n\t\t\tlet style = '';\n\t\t\tif (color) style += `color:${color}; `;\n\t\t\tif (fontSize) style += `font-size:${fontSize}; `;\n\t\t\tif (backgroundColor) style += `background-color:${backgroundColor}; `;\n\t\t\treturn ['span', { style }, 0];\n\t\t}\n\t}\n};\n\nconst config = {\n\tnodes,\n\tmarks\n};\n\nexport const schema = new Schema(config);\n","import { Node } from 'prosemirror-model';\nimport crel, { updateElement } from '../../createElement';\nimport {\n\tDecoration,\n\tDecorationSource,\n\tEditorView,\n\tNodeView,\n\tNodeViewConstructor\n} from 'prosemirror-view';\n// import { setup } from './menu';\nimport { BaseNodeView } from '../../utils/view';\ntype GetPos = () => number | undefined;\nexport class CodeBlockView extends BaseNodeView {\n\tname = 'blockCode';\n\tgetPos: GetPos;\n\tunmount?: () => void;\n\tmenu: HTMLElement;\n\t// root: ReactDOM.Root;\n\tcontentDOM?: HTMLElement | null | undefined;\n\tconstructor(...args: Parameters<NodeViewConstructor>) {\n\t\tconst [node, view, getPos] = args;\n\t\tsuper(node, view);\n\t\tthis.getPos = getPos;\n\t\tthis.contentDOM = crel('code', {\n\t\t\tclass: 'scrollbar dc-block',\n\t\t\t'data-language': node.attrs.language,\n\t\t\t'data-theme': node.attrs.theme,\n\t\t\t'data-show-line-number': node.attrs.showLineNumber,\n\t\t\t'data-node-type': 'codeBlock'\n\t\t});\n\t\tthis.menu = crel('div', { class: 'code-block-menu-container' });\n\t\tthis.dom = crel('pre', {\n\t\t\tclass: 'docucraft-codeblock hljs',\n\t\t\t'data-language': node.attrs.language,\n\t\t\t'data-theme': node.attrs.theme,\n\t\t\t'data-show-line-number': node.attrs.showLineNumber,\n\t\t\t'data-node-type': 'codeBlock'\n\t\t});\n\t\t// this.root = ReactDOM.createRoot(this.menu);\n\t\tthis.dom.appendChild(this.menu);\n\t\tthis.dom.appendChild(this.contentDOM);\n\t\tthis.renderComponent();\n\t}\n\n\trenderComponent() {\n\t\t// setup(this);\n\t}\n\n\tupdate(node: Node) {\n\t\tconst res = super.update(node);\n\t\tif (!res) return false;\n\t\tthis.node = node;\n\t\tupdateElement(this.dom, {\n\t\t\t'data-language': node.attrs.language,\n\t\t\t'data-theme': node.attrs.theme,\n\t\t\t'data-show-line-number': node.attrs.showLineNumber\n\t\t});\n\t\tupdateElement(this.contentDOM as HTMLElement, {\n\t\t\t'data-language': node.attrs.language,\n\t\t\t'data-theme': node.attrs.theme,\n\t\t\t'data-show-line-number': node.attrs.showLineNumber\n\t\t});\n\n\t\tthis.renderComponent();\n\n\t\treturn true;\n\t}\n\n\tdestroy() {\n\t\tconsole.log('destroy code');\n\n\t\t// this.root.unmount();\n\t}\n}\n\nexport const CodeBlockViewConstructor: NodeViewConstructor = (...args) =>\n\tnew CodeBlockView(...args);\n","interface RenderInfo {\n  from: number;\n  to: number;\n  classNames: string[];\n  scope: string;\n}\n\nexport class HighlightRenderer {\n  // 当前位置\n  private currentPos: number;\n  // 最终匹配好的所有 renderInfo\n  private finishedRenderInfos: RenderInfo[] = [];\n  // 正在进行加了 from 没有加 to 的这些，会一次入栈\n  private trackingRenderInfoStack: RenderInfo[] = [];\n  // 这里是 hljs-，是从 _emitter.options.classPrefix 获取的\n  private classPrefix: string;\n\n  constructor(tree: any, blockStartPos: number) {\n    // 这里实例化的时候直接记录初始位置，这里开始的位置是 code_block 开始位置 + 1,原因是还是之前的 node 坐标系统，\n    // 具体的文本是 <code_block>keyword 这样的，在 code_block 标签后面开始的，code_block开始位置是标签之前\n    this.currentPos = blockStartPos + 1;\n    this.classPrefix = tree.options.classPrefix;\n\n    // 直接开始遍历\n    tree.walk(this);\n  }\n\n  // add Text 就开始更新位置\n  addText(text: string) {\n    console.log(text, 'text');\n\n    if (text) {\n      this.currentPos += text.length;\n    }\n  }\n\n  // open 时候就创建 render Info，并入栈\n  openNode(node: any) {\n    // node.scope is className\n    console.log(node, 'node');\n\n    if (!node.scope) return;\n\n    // create new render info, which corresponds to HTML open tag.\n    const renderInfo = this.newRenderInfo({\n      from: this.currentPos,\n      classNames: node.scope\n        .split('.')\n        .filter((item: any) => item)\n        .map((item: string) => this.classPrefix + item),\n      scope: node.scope,\n    });\n\n    // push tracking stack\n    this.trackingRenderInfoStack.push(renderInfo);\n  }\n\n  // close 就出栈补充 to 信息，补充完丢带完成的数组中\n  closeNode(node: { scope: string }) {\n    console.log(node, 'node');\n\n    if (!node.scope) return;\n    const renderInfo = this.trackingRenderInfoStack.pop();\n    if (!renderInfo)\n      throw new Error('[highlight-code-plugin-error]: Cannot close node!');\n\n    if (node.scope !== renderInfo.scope)\n      throw new Error('[highlight-code-plugin-error]: Matching error!');\n\n    renderInfo.to = this.currentPos;\n\n    // finish a render info, which corresponds to html close tag.\n    this.finishedRenderInfos.push(renderInfo);\n  }\n\n  // 快捷的创建 renderINfo 的辅助方法\n  newRenderInfo(info: Partial<RenderInfo>): RenderInfo {\n    return {\n      from: this.currentPos,\n      to: -1,\n      classNames: [],\n      scope: '',\n      ...info,\n    };\n  }\n\n  // 获取 value\n  get value() {\n    return this.finishedRenderInfos;\n  }\n}\n","import { Node, NodeType } from 'prosemirror-model';\nimport { PluginKey, Plugin } from 'prosemirror-state';\nimport { Decoration, DecorationSet } from 'prosemirror-view';\nimport { HighlightRenderer } from './highlightRenderer';\nimport hljs from 'highlight.js';\nimport createElement from '../../createElement';\n\ninterface HighlightCodePluginState {\n  decorations: DecorationSet;\n}\n\nexport interface NodeWithPos {\n  node: Node;\n  pos: number;\n}\n\nexport const highlightCodePluginKey = new PluginKey<HighlightCodePluginState>(\n  'highlight-code'\n);\n\nexport function findNodesByType(\n  doc: Node,\n  type: string | string[] | NodeType | NodeType[]\n): NodeWithPos[] {\n  const nodes: NodeWithPos[] = [];\n  const schema = doc.type.schema;\n  const tempTypes: string[] | NodeType[] = Array.isArray(type)\n    ? type\n    : ([type] as string[] | NodeType[]);\n\n  const types = tempTypes\n    .map((item) => (typeof item === 'string' ? schema.nodes[item] : item))\n    .filter(Boolean);\n\n  doc.descendants((node, pos) => {\n    if (types.includes(node.type)) {\n      nodes.push({\n        node,\n        pos,\n      });\n    }\n  });\n\n  return nodes;\n}\n\nfunction createLineNumberDecorations(block: NodeWithPos): Decoration[] {\n  const textContent = block.node.textContent;\n  const lineInfos = textContent.split('\\n');\n\n  let currentPos = block.pos + 1;\n\n  const decorations: Decoration[] = lineInfos.map((item, index) => {\n    const span = createElement(\n      'span',\n      { class: 'line-number', line: `${index + 1}` },\n      '\\u200B'\n    );\n    const decoration = Decoration.widget(currentPos, (view) => span, {\n      side: -1,\n      ignoreSelection: true,\n      destroy() {\n        span.remove();\n      },\n    });\n    currentPos += item.length + 1;\n    return decoration;\n  });\n  return decorations;\n}\n\nexport function highlightCodePlugin() {\n  function getDecs(doc: Node): Decoration[] {\n    if (!doc || !doc.nodeSize) {\n      return [];\n    }\n    const blocks = findNodesByType(doc, 'codeBlock');\n    let decorations: Decoration[] = [];\n\n    blocks.forEach((block) => {\n      let language: string = block.node.attrs.language;\n\n      if (language && !hljs.getLanguage(language)) language = 'plaintext';\n\n      const highlightResult = language\n        ? hljs.highlight(block.node.textContent, { language })\n        : hljs.highlightAuto(block.node.textContent);\n\n      const emitter = highlightResult._emitter;\n\n      const renderer = new HighlightRenderer(emitter, block.pos);\n\n      if (renderer.value.length) {\n        const blockDecorations = renderer.value.map((renderInfo) =>\n          Decoration.inline(renderInfo.from, renderInfo.to, {\n            class: renderInfo.classNames.join(' '),\n          })\n        );\n\n        decorations = decorations.concat(blockDecorations);\n      }\n\n      // if (block.node.attrs.showLineNumber) {\n      //   const lineNumberDecorations = createLineNumberDecorations(block);\n      //   decorations = decorations.concat(lineNumberDecorations);\n      // }\n    });\n    return decorations;\n  }\n\n  return new Plugin({\n    key: highlightCodePluginKey,\n    state: {\n      init(config, instance) {\n        const decorations = getDecs(instance.doc);\n        return {\n          decorations: DecorationSet.create(instance.doc, decorations),\n        };\n      },\n      apply(tr, value, oldState, newState) {\n        if (!tr.docChanged) return value;\n        const decorations = getDecs(newState.doc);\n        return {\n          decorations: DecorationSet.create(tr.doc, decorations),\n        };\n      },\n    },\n    props: {\n      decorations(state) {\n        const pluginState = highlightCodePluginKey.getState(state);\n        return pluginState?.decorations;\n      },\n    },\n  });\n}\n","import { Node } from 'prosemirror-model';\nimport { EditorView } from 'prosemirror-view';\n\nlet view: { current?: EditorView } = {};\nexport const addView = (v: EditorView) => (view.current = v);\nexport const getView = () => view.current;\nexport default () => '';\n\nexport function escapeLatex(latex: string) {\n\tconst escapeMap: Record<string, string> = {\n\t\t'\\\\': '\\\\\\\\',\n\t\t'{': '\\\\{',\n\t\t'}': '\\\\}',\n\t\t$: '\\\\$',\n\t\t'&': '\\\\&',\n\t\t'#': '\\\\#',\n\t\t_: '\\\\_',\n\t\t'%': '\\\\%',\n\t\t'^': '\\\\^',\n\t\t'~': '\\\\~'\n\t};\n\n\treturn latex.replace(/[\\\\{}$&#_%^~]/g, (match) => escapeMap[match]);\n}\n\nlet uniqueIdCounter = 1000;\nexport function generateUniqueId() {\n\tuniqueIdCounter++;\n\tconst base36 = uniqueIdCounter.toString(36);\n\tconst randomPart = Math.random().toString(36).substring(2, 4);\n\treturn randomPart + base36;\n}\n\nexport function assignUniqueId(node: any) {\n\tif (!node.attrs.id) {\n\t\tnode.attrs.id = generateUniqueId();\n\t}\n}\n\nexport function convertToChineseNumber(num: number): string {\n\tconst units = [\n\t\t'',\n\t\t'十',\n\t\t'百',\n\t\t'千',\n\t\t'万',\n\t\t'十',\n\t\t'百',\n\t\t'千',\n\t\t'亿',\n\t\t'十',\n\t\t'百',\n\t\t'千',\n\t\t'万'\n\t];\n\tconst digits = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'];\n\n\tif (num === 0) return '零';\n\n\tconst numStr = num.toString();\n\tlet result = '';\n\tlet zeroFlag = false;\n\n\tfor (let i = 0; i < numStr.length; i++) {\n\t\tconst digit = parseInt(numStr[i]);\n\t\tconst unitPos = numStr.length - i - 1;\n\n\t\tif (digit === 0) {\n\t\t\tzeroFlag = true;\n\t\t} else {\n\t\t\tif (zeroFlag) {\n\t\t\t\tresult += '零';\n\t\t\t\tzeroFlag = false;\n\t\t\t}\n\t\t\tresult += digits[digit] + units[unitPos];\n\t\t}\n\t}\n\tresult = result.replace(/^一十/, '十');\n\treturn result.replace(/零+$/, '');\n}\n\nexport function convertToAlphabet(num: number): string {\n\tif (num <= 0) return '';\n\n\tlet result = '';\n\twhile (num > 0) {\n\t\tnum--;\n\t\tresult = String.fromCharCode((num % 26) + 97) + result;\n\t\tnum = Math.floor(num / 26);\n\t}\n\n\treturn result;\n}\n\nexport function convertToRoman(num: number): string {\n\tconst romanNumerals: { [key: number]: string } = {\n\t\t1000: 'm',\n\t\t900: 'cm',\n\t\t500: 'd',\n\t\t400: 'cd',\n\t\t100: 'c',\n\t\t90: 'xc',\n\t\t50: 'l',\n\t\t40: 'xl',\n\t\t10: 'x',\n\t\t9: 'ix',\n\t\t5: 'v',\n\t\t4: 'iv',\n\t\t1: 'i'\n\t};\n\n\tlet result = '';\n\tfor (const [value, numeral] of Object.entries(romanNumerals).reverse()) {\n\t\twhile (num >= parseInt(value)) {\n\t\t\tresult += numeral;\n\t\t\tnum -= parseInt(value);\n\t\t}\n\t}\n\n\treturn result;\n}\n","import { Node, ResolvedPos } from 'prosemirror-model';\nimport { Plugin, PluginKey, Transaction } from 'prosemirror-state';\nimport { DecorationSet, DecorationSource } from 'prosemirror-view';\nimport { ReplaceStep } from 'prosemirror-transform';\nimport { HeadingView } from '../heading';\nimport {\n\tconvertToAlphabet,\n\tconvertToChineseNumber,\n\tconvertToRoman\n} from '../../utils';\n\nexport class OutlineNode {\n\tchildren: OutlineNode[];\n\tparent: OutlineNode | null;\n\tconstructor(\n\t\tpublic id: string,\n\t\tpublic node: HeadingView | null,\n\t\tpublic level: number\n\t) {\n\t\tthis.children = [];\n\t\tthis.parent = null;\n\t}\n}\n\nexport type OrderType = 0 | 1 | 2 | 3;\n\nexport class OutlineTree {\n\troot: OutlineNode;\n\tprivate map: Map<string, OutlineNode>;\n\torderType: OrderType = 3;\n\tconstructor(public decorations: DecorationSource) {\n\t\tthis.root = new OutlineNode('root', null, 0);\n\t\tthis.map = new Map();\n\t}\n\tsetOrderType(type: OrderType) {\n\t\tthis.orderType = type;\n\t\tthis.updateHeading();\n\t}\n\tinsertOrUpdate(heading: HeadingView, $pos: ResolvedPos) {\n\t\tconst { node, id } = heading;\n\t\tconst level = node.attrs.level;\n\n\t\tconst parent = $pos.parent;\n\t\tlet outlineNode = this.findNodeById(id);\n\t\tif (outlineNode) {\n\t\t\toutlineNode.node = heading;\n\t\t\treturn outlineNode;\n\t\t} else outlineNode = new OutlineNode(id, heading, level);\n\t\tthis.map.set(id, outlineNode);\n\t\tlet index = $pos.index($pos.depth);\n\t\tlet cursor,\n\t\t\tcount = 0,\n\t\t\tlastLevel = Infinity;\n\t\tfor (let i = index + 1; i < parent.childCount; i++) {\n\t\t\tcursor = parent.child(i);\n\t\t\tif (cursor.type.name !== 'heading' || cursor.attrs.level > lastLevel)\n\t\t\t\tcontinue;\n\n\t\t\tconst olNode = this.findNodeById(cursor.attrs.id);\n\n\t\t\tif (!olNode) throw new Error('can not found node');\n\t\t\tconst l = olNode.level;\n\t\t\tif (l <= level) break;\n\n\t\t\tif (l < lastLevel) lastLevel = l;\n\t\t\toutlineNode.children.push(olNode);\n\t\t\tconst index = olNode.parent!.children.indexOf(olNode);\n\t\t\tolNode.parent?.children.splice(index, 1);\n\t\t}\n\n\t\tfor (const child of outlineNode.children) child.parent = outlineNode;\n\n\t\tlastLevel = Infinity;\n\t\tfor (let i = index - 1; i >= 0; i--) {\n\t\t\tcursor = parent.child(i);\n\t\t\tif (cursor.type.name !== 'heading') continue;\n\n\t\t\tconst olNode = this.findNodeById(cursor.attrs.id);\n\t\t\tif (!olNode) throw new Error('can not found node');\n\n\t\t\tif (olNode.level > level) {\n\t\t\t\tlet l = olNode.level;\n\t\t\t\tif (l < lastLevel) {\n\t\t\t\t\tcount = 1;\n\t\t\t\t\tlastLevel = l;\n\t\t\t\t} else if (l === lastLevel) count++;\n\t\t\t} else if (olNode.level < level) {\n\t\t\t\tolNode.children.unshift(outlineNode);\n\t\t\t\toutlineNode.parent = olNode;\n\t\t\t\tcount = -1;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tconst index = olNode.parent!.children.indexOf(olNode);\n\t\t\t\tif (index !== -1)\n\t\t\t\t\tolNode.parent?.children.splice(index + 1, 0, outlineNode);\n\t\t\t\tcount = -1;\n\t\t\t\toutlineNode.parent = olNode.parent;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (count >= 0) {\n\t\t\tthis.root.children.splice(count, 0, outlineNode);\n\t\t\toutlineNode.parent = this.root;\n\t\t}\n\n\t\treturn outlineNode;\n\t}\n\n\tfindNodeById(id: string) {\n\t\treturn this.map.get(id) || null;\n\t}\n\n\tremoveById(id: string) {\n\t\tconst outlineNode = this.findNodeById(id);\n\t\tif (outlineNode) {\n\t\t\tconst children = outlineNode.parent?.children || [];\n\t\t\tconst index = children.indexOf(outlineNode);\n\t\t\tchildren.splice(index, 1, ...outlineNode.children);\n\t\t\toutlineNode.children.forEach(\n\t\t\t\t(child) => (child.parent = outlineNode.parent)\n\t\t\t);\n\t\t\tthis.map.delete(id);\n\t\t}\n\n\t\tthis.updateHeading();\n\t\treturn !!outlineNode;\n\t}\n\tupdateHeading() {\n\t\tfor (const [key, outlineNode] of this.map) outlineNode.node?.updateSymbol();\n\t}\n\tdataLevel(id: string) {\n\t\tlet current = this.findNodeById(id),\n\t\t\toffset = -2;\n\t\twhile (current) {\n\t\t\toffset++;\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn offset;\n\t}\n\tprivate renderOrder1(id: string) {\n\t\tconst nums = [];\n\t\tlet current = this.findNodeById(id);\n\n\t\twhile (current && current.parent) {\n\t\t\tconst index = current.parent.children.indexOf(current) + 1;\n\n\t\t\tnums.unshift(index);\n\t\t\tcurrent = current.parent;\n\t\t}\n\n\t\treturn nums.join('.');\n\t}\n\tprivate renderOrder2(id: string) {\n\t\tlet current = this.findNodeById(id);\n\t\tconst index = current?.parent?.children.indexOf(current);\n\t\tif (typeof index !== 'number') return '';\n\t\tconst offset = this.dataLevel(id);\n\t\tswitch (offset % 3) {\n\t\t\tcase 0:\n\t\t\t\treturn convertToChineseNumber(index + 1);\n\t\t\tcase 1:\n\t\t\t\treturn `(${convertToChineseNumber(index + 1)})`;\n\t\t\tcase 2:\n\t\t\t\treturn index + 1 + '';\n\t\t}\n\n\t\treturn '';\n\t}\n\tprivate renderOrder3(id: string) {\n\t\tlet current = this.findNodeById(id);\n\t\tconst index = current?.parent?.children.indexOf(current);\n\t\tif (typeof index !== 'number') return '';\n\t\tconst offset = this.dataLevel(id);\n\t\tswitch (offset % 3) {\n\t\t\tcase 0:\n\t\t\t\treturn convertToAlphabet(index + 1);\n\t\t\tcase 1:\n\t\t\t\treturn convertToRoman(index + 1);\n\t\t\tcase 2:\n\t\t\t\treturn index + 1 + '';\n\t\t}\n\n\t\treturn '';\n\t}\n\tcalculateOrderNumber(id: string) {\n\t\tswitch (this.orderType) {\n\t\t\tcase 1:\n\t\t\t\treturn this.renderOrder1(id);\n\t\t\tcase 2:\n\t\t\t\treturn this.renderOrder2(id);\n\t\t\tcase 3:\n\t\t\t\treturn this.renderOrder3(id);\n\t\t}\n\t\treturn '';\n\t}\n}\n\nexport const outlineTreeKey = new PluginKey<OutlineTree>('outlineTreeKey');\nexport const outlineTreePlugin = new Plugin({\n\tkey: outlineTreeKey,\n\tstate: {\n\t\tinit(_, { doc }) {\n\t\t\tconst outlineTree = new OutlineTree(DecorationSet.create(doc, []));\n\t\t\treturn outlineTree;\n\t\t},\n\t\tapply(tr, value, oldState) {\n\t\t\ttr.steps.forEach((step) => {\n\t\t\t\tif (step instanceof ReplaceStep) {\n\t\t\t\t\tconst { from, to } = step;\n\n\t\t\t\t\toldState.doc.nodesBetween(from, to, (node, pos) => {\n\t\t\t\t\t\tif (node.type.name === 'heading' && pos >= from) {\n\t\t\t\t\t\t\tvalue.removeById(node.attrs.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}\n\t},\n\tappendTransaction(transactions, oldState, newState) {\n\t\tlet tr: Transaction | undefined;\n\t\tfor (const transaction of transactions) {\n\t\t\tconst data = transaction.getMeta('toggleHeading');\n\n\t\t\tif (data && typeof data.pos !== 'undefined') {\n\t\t\t\ttr = newState.tr;\n\t\t\t\tconst pos = data.pos;\n\t\t\t\tconst $pos = oldState.doc.resolve(pos);\n\t\t\t\tconst parent = $pos.parent;\n\t\t\t\tconst index = $pos.index($pos.depth);\n\t\t\t\tconst node = parent.child(index);\n\t\t\t\tlet offset = pos + node.nodeSize;\n\n\t\t\t\tfor (let i = index + 1; i < parent.childCount; i++) {\n\t\t\t\t\tconst current = parent.child(i);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tcurrent.type.name === 'heading' &&\n\t\t\t\t\t\tcurrent.attrs.level <= node.attrs.level\n\t\t\t\t\t)\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\ttr = tr.setNodeMarkup(\n\t\t\t\t\t\toffset,\n\t\t\t\t\t\tcurrent.type,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...current.attrs,\n\t\t\t\t\t\t\thidden: data.hidden\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcurrent.marks\n\t\t\t\t\t);\n\t\t\t\t\toffset += current.nodeSize;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn tr;\n\t}\n});\n","import {\n\tInputRule,\n\tinputRules,\n\ttextblockTypeInputRule,\n\twrappingInputRule\n} from 'prosemirror-inputrules';\nimport { schema } from '../model';\nimport { outlineTreeKey } from '../components/outline';\n\n// 定义输入规则\nconst headingRules = [\n\ttextblockTypeInputRule(/^#\\s$/, schema.nodes.heading, { level: 1 }),\n\ttextblockTypeInputRule(/^##\\s$/, schema.nodes.heading, { level: 2 }),\n\ttextblockTypeInputRule(/^###\\s$/, schema.nodes.heading, { level: 3 }),\n\ttextblockTypeInputRule(/^####\\s$/, schema.nodes.heading, { level: 4 }),\n\ttextblockTypeInputRule(/^#####\\s$/, schema.nodes.heading, { level: 5 }),\n\ttextblockTypeInputRule(/^######\\s$/, schema.nodes.heading, { level: 6 })\n];\n\nconst listRules = [\n\twrappingInputRule(/^\\s*([-+*])\\s$/, schema.nodes.bullet_list),\n\twrappingInputRule(/^(\\d+)\\.\\s$/, schema.nodes.ordered_list, (match) => ({\n\t\torder: +match[1]\n\t})),\n\twrappingInputRule(/^\\-\\[\\]\\s$/, schema.nodes.taskList)\n];\nconst map: Record<string, string> = {\n\tjavascript: 'javascript',\n\ttypescript: 'typescript',\n\trust: 'rust',\n\tgolang: 'golang',\n\tpython: 'python',\n\truby: 'ruby',\n\tphp: 'php',\n\thtml: 'html',\n\tcss: 'css',\n\tmarkdown: 'markdown',\n\tjava: 'java',\n\t'c++': 'c++',\n\t'c#': 'c#',\n\tc: 'c',\n\tjs: 'javascript',\n\tts: 'typescript',\n\tpy: 'python',\n\tgo: 'golang',\n\trs: 'rust',\n\tplaintext: 'plaintext'\n};\nconst mapTolang = (lang: string) => {\n\treturn map[lang] || 'plaintext';\n};\n\nconst rules = [\n\t...headingRules,\n\t...listRules,\n\ttextblockTypeInputRule(\n\t\t/^```([\\w+#]*)\\s$/,\n\t\tschema.nodes.codeBlock,\n\t\t(match) => ({ language: mapTolang(match[1]) })\n\t),\n\twrappingInputRule(/^(>|》)\\s$/, schema.nodes.blockQuote),\n\tnew InputRule(/\\d+\\.\\s$/, (state, match, start, end) => {\n\t\tlet tr = state.tr;\n\t\tconst $start = state.doc.resolve(start);\n\t\tconst parent = $start.parent;\n\t\tif (parent.type !== schema.nodes.heading) return null;\n\t\tconst level = parent.attrs.level;\n\t\tconst outineTree = outlineTreeKey.getState(state);\n\n\t\toutineTree &&\n\t\t\ttr.replaceWith(\n\t\t\t\tstart,\n\t\t\t\tend,\n\t\t\t\tschema.nodes.listSymbol.create(\n\t\t\t\t\t{ level },\n\t\t\t\t\tschema.text(outineTree.calculateOrderNumber(parent.attrs.id))\n\t\t\t\t)\n\t\t\t);\n\t\treturn tr;\n\t})\n];\n\nexport const buildInputRules = () => inputRules({ rules });\n","import {\n\tsplitBlock,\n\tchainCommands,\n\tnewlineInCode,\n\tcreateParagraphNear,\n\tliftEmptyBlock,\n\tbaseKeymap\n} from 'prosemirror-commands';\nimport { Attrs, Fragment, NodeType, Slice } from 'prosemirror-model';\nimport { canSplit } from 'prosemirror-transform';\nimport {\n\tCommand,\n\tEditorState,\n\tNodeSelection,\n\tSelection\n} from 'prosemirror-state';\nimport { schema } from '../model';\nimport { redo, undo } from 'prosemirror-history';\nimport { EditorView } from 'prosemirror-view';\nimport { createTaskList } from '../components/taskList';\n\nconst splitListItem = (itemTypes: NodeType[], itemAttrs?: Attrs): Command => {\n\treturn (state, dispatch) => {\n\t\tlet { $from, $to, node } = state.selection as NodeSelection;\n\t\tif ((node && node.isBlock) || $from.depth < 2 || !$from.sameParent($to))\n\t\t\treturn false;\n\t\tlet grandParent = $from.node(-1);\n\t\tif (!itemTypes.includes(grandParent.type)) return false;\n\n\t\tconst liCount = $from.node(-2).childCount;\n\t\tif (\n\t\t\t$from.parent.content.size == 0 &&\n\t\t\t$from.node(-1).childCount == $from.indexAfter(-1)\n\t\t) {\n\t\t\tif (\n\t\t\t\t$from.depth == 3 ||\n\t\t\t\t!itemTypes.includes($from.node(-3).type) ||\n\t\t\t\t$from.index(-2) != liCount - 1\n\t\t\t)\n\t\t\t\treturn false;\n\t\t\tif (dispatch) {\n\t\t\t\tlet wrap = Fragment.empty;\n\t\t\t\tlet depthBefore = $from.index(-1) ? 1 : $from.index(-2) ? 2 : 3;\n\t\t\t\tconsole.log(depthBefore, $from);\n\n\t\t\t\t// Build a fragment containing empty versions of the structure\n\t\t\t\t// from the outer list item to the parent node of the cursor\n\t\t\t\tfor (let d = $from.depth - depthBefore; d >= $from.depth - 3; d--)\n\t\t\t\t\twrap = Fragment.from($from.node(d).copy(wrap));\n\t\t\t\tconsole.log(wrap, $from.node(4), $from.node(3));\n\n\t\t\t\tlet depthAfter =\n\t\t\t\t\t$from.indexAfter(-1) < $from.node(-2).childCount\n\t\t\t\t\t\t? 1\n\t\t\t\t\t\t: $from.indexAfter(-2) < $from.node(-3).childCount\n\t\t\t\t\t\t\t? 2\n\t\t\t\t\t\t\t: 3;\n\t\t\t\t// Add a second list item with an empty default start node\n\t\t\t\twrap = wrap.append(Fragment.from(itemTypes[0].createAndFill()));\n\n\t\t\t\tlet start = $from.before($from.depth - (depthBefore - 1));\n\t\t\t\tconst s = new Slice(wrap, 4 - depthBefore, 0);\n\t\t\t\tlet tr = state.tr.replace(start, $from.after(-depthAfter), s);\n\t\t\t\tlet sel = -1;\n\t\t\t\ttr.doc.nodesBetween(start, tr.doc.content.size, (node, pos) => {\n\t\t\t\t\tif (sel > -1) return false;\n\t\t\t\t\tif (node.isTextblock && node.content.size == 0) sel = pos + 1;\n\t\t\t\t});\n\t\t\t\tif (sel > -1) tr.setSelection(Selection.near(tr.doc.resolve(sel)));\n\t\t\t\tdispatch(tr.scrollIntoView());\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tlet nextType =\n\t\t\t$to.pos == $from.end() ? grandParent.contentMatchAt(0).defaultType : null;\n\t\tlet tr = state.tr.delete($from.pos, $to.pos);\n\t\tlet types = nextType\n\t\t\t? [\n\t\t\t\t\titemAttrs ? { type: itemTypes[0], attrs: itemAttrs } : null,\n\t\t\t\t\t{ type: nextType }\n\t\t\t\t]\n\t\t\t: undefined;\n\t\tif (!canSplit(tr.doc, $from.pos, 2, types)) return false;\n\t\tif (dispatch) dispatch(tr.split($from.pos, 2, types).scrollIntoView());\n\t\treturn true;\n\t};\n};\n\nexport const myKeymap: { [key: string]: Command } = {\n\t...baseKeymap,\n\tEnter: chainCommands(\n\t\tsplitListItem([schema.nodes.list_item, schema.nodes.taskItem]),\n\t\tnewlineInCode,\n\t\tcreateParagraphNear,\n\t\tliftEmptyBlock,\n\t\tsplitBlock\n\t),\n\t'Mod-z': undo,\n\t'Mod-y': redo,\n\tTab: (state: EditorState, dispatch?: EditorView['dispatch']) => {\n\t\tconst { $from, $to } = state.selection;\n\t\tif (!$from.sameParent($to) || $from.parent.type !== schema.nodes.codeBlock)\n\t\t\treturn false;\n\t\tif (dispatch) {\n\t\t\tdispatch(state.tr.insertText('\\t'));\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t'Ctrl-Shift-L': createTaskList\n};\n","import { EditorState, Transaction } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\n\nexport interface MenuItemSpec {\n\tclass?: string;\n\tlabel: string;\n\tcontent?: HTMLElement;\n\thandler: (\n\t\tprops: {\n\t\t\tview: EditorView;\n\t\t\tstate: EditorState;\n\t\t\ttr: Transaction;\n\t\t\tdispatch: EditorView['dispatch'];\n\t\t},\n\t\tevent: MouseEvent\n\t) => void;\n\tupdate?: (view: EditorView, state: EditorState, menu: HTMLElement) => void;\n}\n\nexport class MenuItem {\n\tdom: HTMLElement;\n\tconstructor(\n\t\tprivate view: EditorView,\n\t\tprivate spec: MenuItemSpec\n\t) {\n\t\tconst btn = document.createElement('button');\n\t\tbtn.setAttribute('class', spec.class || '');\n\t\tbtn.addEventListener('click', (event: MouseEvent) => {\n\t\t\tspec.handler(\n\t\t\t\t{\n\t\t\t\t\tview: this.view,\n\t\t\t\t\tstate: this.view.state,\n\t\t\t\t\tdispatch: view.dispatch,\n\t\t\t\t\ttr: view.state.tr\n\t\t\t\t},\n\t\t\t\tevent\n\t\t\t);\n\t\t});\n\t\tbtn.classList.add('menu-item');\n\t\tbtn.innerText = spec.label;\n\t\tthis.dom = btn;\n\t}\n\n\tupdate(view: EditorView, state: EditorState) {\n\t\tthis.view = view;\n\t\tthis.spec.update?.(view, state, this.dom);\n\t}\n}\n","import { EditorView } from 'prosemirror-view';\nimport { MenuItem, MenuItemSpec } from './menuItem';\nimport { EditorState } from 'prosemirror-state';\nimport createElement from '../../createElement';\n\nexport interface MenuGroupSpec {\n\tname?: string;\n\tclass?: string;\n\tmenus: MenuItemSpec[];\n}\n\nexport class MenuGroup {\n\tdom: HTMLElement;\n\tprivate menus: MenuItem[];\n\tconstructor(\n\t\tprivate view: EditorView,\n\t\tprivate spec: MenuGroupSpec\n\t) {\n\t\tconst dom = createElement('div', {\n\t\t\tclass: spec.class || '' + ' menu-group'\n\t\t});\n\n\t\tthis.dom = dom;\n\t\tthis.menus = spec.menus.map(\n\t\t\t(menuSpec) => new MenuItem(this.view, menuSpec)\n\t\t);\n\n\t\tthis.menus.forEach((menu) => dom.appendChild(menu.dom));\n\t}\n\n\tupdate(view: EditorView, state: EditorState) {\n\t\tthis.view = view;\n\t\tthis.menus.forEach((menu) => menu.update(view, state));\n\t}\n}\n","import { Attrs, MarkType, Schema } from 'prosemirror-model';\nimport { TextSelection } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { CSSProperties } from 'react';\n\nexport const setMark = (\n\tview: EditorView,\n\tmarkType: MarkType | string,\n\tattrs: Attrs | null = null\n) => {\n\tconst { schema, selection, tr } = view.state;\n\tconst { $from, $to } = selection;\n\n\tconst mark = schema.mark(markType, attrs);\n\n\tview.dispatch(tr.addMark($from.pos, $to.pos, mark));\n\treturn true;\n};\nexport const unSetMark = (view: EditorView, markType: MarkType | string) => {\n\tconst { selection, tr, schema } = view.state;\n\tconst { $from, $to } = selection;\n\n\tview.dispatch(\n\t\ttr.removeMark($from.pos, $to.pos, getMarkType(markType, schema))\n\t);\n};\n\nfunction getMarkType(markType: MarkType | string, schema: Schema) {\n\treturn typeof markType === 'string' ? schema.marks[markType] : markType;\n}\n\nfunction isMarkActive(view: EditorView, markType: MarkType | string): boolean {\n\tconst { schema, selection, tr } = view.state;\n\tif (!(selection instanceof TextSelection)) return false;\n\n\tconst { $from, $to } = selection;\n\tconst realMarkType = getMarkType(markType, schema);\n\tlet isActive = true;\n\n\ttr.doc.nodesBetween($from.pos, $to.pos, (node) => {\n\t\tif (!isActive) return false;\n\t\tif (node.isInline) {\n\t\t\tconst mark = realMarkType.isInSet(node.marks);\n\t\t\tif (!mark) isActive = false;\n\t\t}\n\t});\n\n\treturn isActive;\n}\n\nfunction toggleMark(view: EditorView, markType: MarkType | string) {\n\tif (isMarkActive(view, markType)) return unSetMark(view, markType);\n\telse return setMark(view, markType);\n}\n\nexport const applyBold = (view: EditorView) => toggleMark(view, 'bold');\nexport const applyUnderline = (view: EditorView) =>\n\ttoggleMark(view, 'underline');\nexport const applyLinethrough = (view: EditorView) =>\n\ttoggleMark(view, 'linethrough');\nexport const applylink = (url: string) => (view: EditorView) =>\n\tsetMark(view, 'link', { href: url });\n\nexport const applyStyle =\n\t(style: CSSProperties) =>\n\t({ state, dispatch }: EditorView) => {\n\t\tconst { schema, selection } = state;\n\t\tconst markType = schema.marks.style;\n\t\tlet tr = state.tr;\n\t\tconsole.log(selection, 'sel');\n\t\tconst { from, to } = selection;\n\t\tstate.doc.nodesBetween(from, to, (node, pos) => {\n\t\t\tif (node.isText) {\n\t\t\t\tlet existingMark = node.marks.find((mark) => mark.type === markType);\n\t\t\t\tlet attrs = existingMark ? { ...existingMark.attrs, ...style } : style;\n\t\t\t\ttr = tr.addMark(\n\t\t\t\t\tpos < from ? from : pos,\n\t\t\t\t\tpos + node.nodeSize > to ? to : pos + node.nodeSize,\n\t\t\t\t\tmarkType.create(attrs)\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tdispatch(tr);\n\t\treturn true;\n\t};\n\nexport const applyColor = (color?: string) => applyStyle({ color });\n\nexport const applyBgColor = (backgroundColor?: string) =>\n\tapplyStyle({ backgroundColor });\n","import { EditorState, PluginView } from 'prosemirror-state';\nimport createElement from '../../createElement';\nimport { EditorView } from 'prosemirror-view';\nimport { MenuItem, MenuItemSpec } from './menuItem';\ninterface Spec {\n\tclass?: string;\n\tmenus: MenuItemSpec[];\n}\nexport class FloatBar implements PluginView {\n\tdom: HTMLElement;\n\tmenus: MenuItem[];\n\tconstructor(view: EditorView, spec: Spec) {\n\t\tthis.menus = spec.menus.map((menu) => new MenuItem(view, menu));\n\t\tthis.dom = createElement(\n\t\t\t'div',\n\t\t\t{ class: spec.class || 'dc-float-bar' },\n\t\t\tthis.menus.map((menu) => menu.dom)\n\t\t);\n\t}\n\n\tupdate(view: EditorView, state: EditorState) {\n\t\tthis.menus.forEach((menu) => menu.update(view, state));\n\t}\n\n\tdestroy() {}\n}\n","import createElement from '../../createElement';\nimport './style.scss';\n\nexport interface Rect {\n\tleft: number;\n\tright: number;\n\ttop: number;\n\tbottom: number;\n\twidth: number;\n\theight: number;\n}\n\nexport class Tooltip {\n\tstatic container: HTMLElement;\n\tstatic instance?: Tooltip;\n\ttooltip: HTMLElement;\n\tvisible: boolean = false;\n\n\tconstructor() {\n\t\tthis.tooltip = createElement('div', { class: 'dc-tooltip' });\n\t\tif (!Tooltip.container) {\n\t\t\tconst container = createElement('div', { class: 'dc-tooltip-container' });\n\t\t\tTooltip.container = container;\n\t\t\tdocument.body.appendChild(container);\n\t\t}\n\t\tTooltip.container.appendChild(this.tooltip);\n\t\tthis.tooltip.addEventListener('mouseup', (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t});\n\t}\n\n\tcontent(dom: HTMLElement) {\n\t\tthis.tooltip.replaceChildren(dom);\n\t}\n\n\tshowAt(rect: Rect) {\n\t\tthis.tooltip.style.visibility = 'visible';\n\t\tthis.tooltip.style.opacity = '1';\n\t\tthis.visible = true;\n\n\t\tconst { height, width } = this.tooltip.getBoundingClientRect();\n\t\tconst top = rect.top - height - 5;\n\t\tconst left = rect.left + (rect.width - width) / 2;\n\t\tthis.tooltip.style.top = top + 'px';\n\t\tthis.tooltip.style.left = left + 'px';\n\t}\n\n\tshow(target: HTMLElement, content?: string | HTMLElement) {\n\t\tif (!this.tooltip) return;\n\t\tif (!content) {\n\t\t} else if (typeof content === 'string') this.tooltip.innerHTML = content;\n\t\telse {\n\t\t\tthis.tooltip.replaceChildren(content);\n\t\t}\n\t\tthis.tooltip.style.visibility = 'visible';\n\t\tthis.tooltip.style.opacity = '1';\n\t\tthis.visible = true;\n\n\t\tconst rect = target.getBoundingClientRect();\n\t\tconst { height, width } = this.tooltip.getBoundingClientRect();\n\t\tconst top = rect.top - height - 5;\n\t\tconst left = rect.left + (rect.width - width) / 2;\n\t\tthis.tooltip.style.top = top + 'px';\n\t\tthis.tooltip.style.left = left + 'px';\n\t}\n\n\thide() {\n\t\tif (!this.tooltip) return;\n\t\tthis.tooltip.style.opacity = '0';\n\t\tthis.tooltip.style.visibility = 'hidden';\n\t\tthis.visible = false;\n\t}\n\n\tdestroy() {\n\t\tthis.tooltip.parentNode?.removeChild(this.tooltip);\n\t}\n\n\tstatic get() {\n\t\tlet instance = Tooltip.instance;\n\t\tif (!instance) {\n\t\t\tinstance = new Tooltip();\n\t\t\tTooltip.instance = instance;\n\t\t}\n\t\treturn instance;\n\t}\n}\n","import { EditorState, PluginView, Plugin, PluginKey } from 'prosemirror-state';\nimport { MenuGroup, MenuGroupSpec } from './menuGroup';\nimport { EditorView } from 'prosemirror-view';\nimport { createCodeBlockCmd } from '../codeBlock';\nimport { createTaskList } from '../taskList';\nimport { createTable, mergeCells } from '../tables/commands';\nimport { insertMath } from '../katex';\nimport {\n\tapplyBold,\n\tapplyColor,\n\tapplyLinethrough,\n\tapplyUnderline,\n\tapplylink\n} from './commands';\nimport { FloatBar } from './floatBar';\nimport { Tooltip } from '../tooltip';\n\nexport interface ToolBarSpec {\n\tgroups: MenuGroupSpec[];\n\tclass?: string;\n}\n\nexport class ToolBar implements PluginView {\n\tdom: HTMLElement;\n\tprivate groups: MenuGroup[];\n\tconstructor(\n\t\tprivate view: EditorView,\n\t\tprivate spec: ToolBarSpec\n\t) {\n\t\tconst dom = document.createElement('div');\n\t\tdom.setAttribute('class', this.spec.class || '');\n\t\tdom.classList.add('toolbar');\n\t\tthis.dom = dom;\n\n\t\tthis.groups = this.spec.groups.map(\n\t\t\t(menuGroupSpec) => new MenuGroup(this.view, menuGroupSpec)\n\t\t);\n\t\tthis.groups.forEach((menuGroup) => dom.appendChild(menuGroup.dom));\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tif (this.view.dom.parentNode) {\n\t\t\tthis.view.dom.parentNode.insertBefore(this.dom, this.view.dom);\n\t\t}\n\t}\n\n\tupdate(view: EditorView, state: EditorState) {\n\t\tthis.view = view;\n\t\tthis.groups.forEach((group) => group.update(view, state));\n\t}\n\n\tdestroy() {\n\t\tthis.dom.parentNode?.removeChild(this.dom);\n\t}\n}\n\nexport const buildToolbar = () => {\n\tlet toolbar: ToolBar | null;\n\tconst toolbarPlugin = new Plugin({\n\t\tkey: new PluginKey('toolbar'),\n\n\t\tview(view) {\n\t\t\ttoolbar = new ToolBar(view, {\n\t\t\t\tgroups: [\n\t\t\t\t\t{\n\t\t\t\t\t\tmenus: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '插入代码块',\n\t\t\t\t\t\t\t\thandler({ state, dispatch, view }, event) {\n\t\t\t\t\t\t\t\t\tcreateCodeBlockCmd(state, dispatch, view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '插入tasklist',\n\t\t\t\t\t\t\t\thandler({ state, dispatch, view }) {\n\t\t\t\t\t\t\t\t\tcreateTaskList(state, dispatch, view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '插入表格',\n\t\t\t\t\t\t\t\thandler({ state, dispatch, view }) {\n\t\t\t\t\t\t\t\t\tcreateTable(3, 4)(state, dispatch, view);\n\t\t\t\t\t\t\t\t\t// insertTable(state, dispatch);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '合并单元格',\n\t\t\t\t\t\t\t\thandler({ state, dispatch, view }) {\n\t\t\t\t\t\t\t\t\tmergeCells(state, dispatch, view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '插入公式',\n\t\t\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\t\t\tconst formula = prompt('输入一条 LaTex 公式: ');\n\t\t\t\t\t\t\t\t\t// console.log(escapeLatex(formula));\n\n\t\t\t\t\t\t\t\t\tif (formula) insertMath(view, formula);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tconst onMouseDown = (e: Event) => {\n\t\t\t\tconst { clientX: x1, clientY: y1 } = e as MouseEvent;\n\t\t\t\tconst onMouseup = (e: Event) => {\n\t\t\t\t\tconst { clientX: x2, clientY: y2 } = e as MouseEvent;\n\t\t\t\t\tconst sel = view.state.selection;\n\t\t\t\t\tif (!sel.empty && (Math.abs(x1 - x2) > 5 || Math.abs(y1 - y2) > 5)) {\n\t\t\t\t\t\tconst from = view.coordsAtPos(sel.$from.pos);\n\t\t\t\t\t\tconst to = view.coordsAtPos(sel.$to.pos);\n\t\t\t\t\t\tconst rect = {\n\t\t\t\t\t\t\tleft: Math.min(from.left, to.left),\n\t\t\t\t\t\t\tright: Math.max(from.right, to.right),\n\t\t\t\t\t\t\ttop: Math.min(from.top, to.top),\n\t\t\t\t\t\t\tbottom: Math.max(from.bottom, to.bottom)\n\t\t\t\t\t\t};\n\t\t\t\t\t\ttooltip.showAt({\n\t\t\t\t\t\t\t...rect,\n\t\t\t\t\t\t\twidth: Math.abs(rect.left - rect.right),\n\t\t\t\t\t\t\theight: Math.abs(rect.top - rect.bottom)\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (tooltip.visible) {\n\t\t\t\t\t\ttooltip.hide();\n\t\t\t\t\t}\n\t\t\t\t\tview.root.removeEventListener('mouseup', onMouseup);\n\t\t\t\t};\n\t\t\t\tview.root.addEventListener('mouseup', onMouseup);\n\t\t\t};\n\t\t\tview.root.addEventListener('mousedown', onMouseDown);\n\t\t\tconst floatBar = new FloatBar(view, {\n\t\t\t\tmenus: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '加粗',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyBold(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '链接',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplylink('www.baidu.com')(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '下划线',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyUnderline(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '删除线',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyLinethrough(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '颜色',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyColor('red')(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '颜色‘',\n\t\t\t\t\t\thandler({ view }) {\n\t\t\t\t\t\t\tapplyColor()(view);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t\tconst tooltip = new Tooltip();\n\t\t\ttooltip.content(floatBar.dom);\n\t\t\treturn {\n\t\t\t\tdom: toolbar.dom,\n\t\t\t\tupdate(view, prevState) {\n\t\t\t\t\tconst sel = view.state.selection;\n\t\t\t\t\tif (tooltip.visible && !sel.eq(prevState.selection) && sel.empty)\n\t\t\t\t\t\ttooltip.hide();\n\t\t\t\t\ttoolbar?.update(view, prevState);\n\t\t\t\t},\n\t\t\t\tdestroy() {\n\t\t\t\t\ttoolbar?.destroy();\n\t\t\t\t\tview.root.removeEventListener('mousedown', onMouseDown);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\treturn {\n\t\tplugin: toolbarPlugin,\n\t\tupdate: (view: EditorView, state: EditorState) =>\n\t\t\ttoolbar?.update(view, state),\n\t\tdestroy: () => {\n\t\t\ttoolbar?.destroy();\n\t\t\ttoolbar = null;\n\t\t}\n\t};\n};\n","'use strict';\n\nvar srender = require('../dist');\n\nObject.defineProperty(exports, 'jsx', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn srender.createElement;\n\t}\n});\nObject.defineProperty(exports, 'jsxDEV', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn srender.createElement;\n\t}\n});\nObject.defineProperty(exports, 'jsxs', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn srender.createElement;\n\t}\n});\nObject.defineProperty(exports, 'Fragment', {\n\tenumerable: true,\n\tget: function () {\n\t\treturn srender.Fragment;\n\t}\n});\n//# sourceMappingURL=index.js.map\n","let iconType = 'round';\nexport const setCurrentIconType = (type) => (iconType = type);\nexport const getIconType = () => iconType;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nconst SvgArrowRight = (props) => (_jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"1em\", height: \"1em\", viewBox: \"0 0 24 24\", ...props, children: _jsx(\"path\", { d: \"m11.71 15.29 2.59-2.59a.996.996 0 0 0 0-1.41L11.71 8.7c-.63-.62-1.71-.18-1.71.71v5.17c0 .9 1.08 1.34 1.71.71\" }) }));\nexport default SvgArrowRight;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getIconType } from './vars';\nimport { useEffect, useState } from 'react';\nexport * from './svg';\nexport const SVGIcon = () => null;\nexport default ({ name, type, onClick, className, style = {} }) => {\n    type = type || getIconType();\n    const [isFontLoaded, setState] = useState(false);\n    useEffect(() => {\n        document.fonts.ready.then(() => setState(true));\n    }, []);\n    return (_jsx(\"i\", { style: style, onClick: onClick, className: `dUI-icons${type === 'filled' ? '' : '-' + type}${className ? ' ' + className : ''}`, children: isFontLoaded ? name : '' }));\n};\n","import { useLayoutEffect, useRef } from '@docucraft/srender';\nimport { Button } from '@docucraft/ui';\nimport Icon, { ArrowRight } from '@docucraft/icons';\nimport { HeadingView } from '.';\nexport type Level = 1 | 2 | 3 | 4 | 5 | 6;\nexport interface Props {\n\tview: HeadingView;\n\tlevel: Level;\n\tfold: boolean;\n\thidden: boolean;\n\tid: string;\n}\nconst Cmp = () => <Button>dxce</Button>;\nexport default ({ view, level, fold, hidden, id }: Props) => {\n\tconst $heading = useRef<HTMLElement>();\n\tconst $content = useRef<HTMLDivElement>();\n\tconst outlineTree = view.outlineTree;\n\tuseLayoutEffect(() => {\n\t\tif ($heading.current) view.dom = $heading.current;\n\t\tview.contentDOM = $content.current;\n\t}, []);\n\tconst Tag = `h${level}`;\n\n\treturn (\n\t\t<Tag ref={$heading} id={id} className={`heading ${hidden ? 'hidden' : ''}`}>\n\t\t\t<div className=\"heading-tools\" contenteditable=\"false\">\n\t\t\t\t<ArrowRight />\n\t\t\t\t<Icon\n\t\t\t\t\tclassName=\"toggle-button\"\n\t\t\t\t\tname={fold ? 'arrow_drop_down' : 'arrow_right'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst pos = view.getPos();\n\n\t\t\t\t\t\tlet tr = view.view.state.tr.setMeta('toggleHeading', {\n\t\t\t\t\t\t\thidden: !fold,\n\t\t\t\t\t\t\tpos\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (typeof pos !== 'undefined')\n\t\t\t\t\t\t\ttr = tr.setNodeMarkup(pos, null, {\n\t\t\t\t\t\t\t\t...view.node.attrs,\n\t\t\t\t\t\t\t\tfold: !fold\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tview.view.dispatch(tr);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{outlineTree && outlineTree.orderType ? (\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"list-symbol\"\n\t\t\t\t\tdata-type={outlineTree.orderType}\n\t\t\t\t\tdata-level={outlineTree.dataLevel(view.id)}\n\t\t\t\t\tcontenteditable=\"false\"\n\t\t\t\t>\n\t\t\t\t\t{outlineTree.calculateOrderNumber(view.id)}\n\t\t\t\t</span>\n\t\t\t) : null}\n\t\t\t<div ref={$content} className=\"heading-content\"></div>\n\t\t</Tag>\n\t);\n};\n","import { NodeViewConstructor } from 'prosemirror-view';\nimport { Node } from 'prosemirror-model';\nimport { assignUniqueId } from '../../utils';\nimport { OutlineTree, outlineTreeKey } from '../outline';\nimport Heading from './Heading';\nimport { BaseNodeView } from '../../utils/view';\nimport './style.scss';\n\nconst headingViewMap = new Map<string, HeadingView>();\n\nexport class HeadingView extends BaseNodeView {\n\tnode: Node;\n\tid: string;\n\toutlineTree?: OutlineTree;\n\tgetPos: () => number | undefined;\n\tconstructor(...args: Parameters<NodeViewConstructor>) {\n\t\tconst [node, view, getPos] = args;\n\t\tsuper(node, view);\n\t\tthis.node = node;\n\t\tthis.getPos = getPos;\n\t\tassignUniqueId(this.node);\n\t\tconst { id } = node.attrs;\n\t\tthis.id = id;\n\t\tthis.component = Heading;\n\t\tconst outlineTree = outlineTreeKey.getState(view.state);\n\t\tconst pos = getPos();\n\t\theadingViewMap.set(node.attrs.id, this);\n\t\tif (outlineTree && typeof pos !== 'undefined') {\n\t\t\toutlineTree.insertOrUpdate(this, view.state.doc.resolve(pos));\n\t\t\tthis.outlineTree = outlineTree;\n\t\t\tfor (const [key, nodeview] of headingViewMap) nodeview.updateSymbol();\n\t\t}\n\t}\n\n\tupdateSymbol() {\n\t\tthis.render({ view: this, ...this.node.attrs });\n\t}\n\n\tupdate(node: Node) {\n\t\tconsole.log('update');\n\n\t\tif (node.type !== this.node.type) return false;\n\t\tthis.node = node;\n\t\tthis.render({ view: this, ...node.attrs });\n\t\treturn true;\n\t}\n\tdestroy() {\n\t\tconsole.log('destroy');\n\t}\n}\n\nexport const HeadingViewConstructor: NodeViewConstructor = (...args) =>\n\tnew HeadingView(...args);\n","// view.ts\nimport { EditorView } from 'prosemirror-view';\nimport { EditorState, Plugin, PluginKey } from 'prosemirror-state';\nimport { schema } from './model';\nimport { keymap } from 'prosemirror-keymap';\nimport { history } from 'prosemirror-history';\nimport { CodeBlockViewConstructor } from './components/codeBlock/codeBlockView';\nimport { highlightCodePlugin } from './components/codeBlock/highlightCodePlugin';\nimport { myKeymap, buildInputRules } from './commands';\nimport { buildToolbar } from './components/toolBar';\nimport './themes/default.scss';\nimport { TaskItemViewConstructor, taskItem } from './components/taskList';\nimport { columnResizing, tableEditing } from './components/tables';\nimport { addView } from './utils';\nimport { mathRender } from './components/katex';\nimport { HeadingViewConstructor } from './components/heading';\nimport { outlineTreePlugin } from './components/outline';\n\nexport class Editor {\n\tconstructor(container?: HTMLElement) {\n\t\tif (container) this.setup(container);\n\t}\n\n\tsetup(container: HTMLElement) {}\n}\n\nexport const setupEditor = (el: HTMLElement | null) => {\n\tif (!el) return;\n\n\tconst toolbar = buildToolbar();\n\n\t// 根据 schema 定义，创建 editorState 数据实例\n\tconst editorState = EditorState.create({\n\t\tschema,\n\t\tplugins: [\n\t\t\tbuildInputRules(),\n\t\t\tkeymap(myKeymap),\n\t\t\thistory(),\n\t\t\ttoolbar.plugin,\n\t\t\thighlightCodePlugin(),\n\t\t\tcolumnResizing(),\n\t\t\ttableEditing({}),\n\t\t\tmathRender(),\n\t\t\toutlineTreePlugin\n\t\t]\n\t});\n\n\t// 创建编辑器视图实例，并挂在到 el 上\n\tconst editorView = new EditorView(el, {\n\t\tstate: editorState,\n\t\tdispatchTransaction(tr) {\n\t\t\tconst newState = editorView.state.apply(tr);\n\t\t\teditorView.updateState(newState);\n\t\t\ttoolbar.update(editorView, editorView.state);\n\t\t},\n\t\tnodeViews: {\n\t\t\tcodeBlock: CodeBlockViewConstructor,\n\t\t\ttaskItem: TaskItemViewConstructor,\n\t\t\theading: HeadingViewConstructor\n\t\t},\n\t\thandleClickOn(view, pos, node, nodePos, event, direct) {\n\t\t\tconst markType = view.state.schema.marks.link;\n\t\t\tconst $pos = view.state.doc.resolve(pos);\n\t\t\tconst marks = $pos.marks();\n\t\t\tif (marks.some((mark) => mark.type === markType)) {\n\t\t\t\tconst linkMark = marks.find((mark) => mark.type === markType);\n\t\t\t\tconst { href, target } = linkMark?.attrs || {};\n\t\t\t\tif (href) {\n\t\t\t\t\tif ($pos.end() === pos) return false;\n\t\t\t\t\twindow.open(href, target);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t});\n\taddView(editorView);\n\treturn () => {\n\t\teditorView.destroy();\n\t\ttoolbar.destroy();\n\t};\n};\n","export default () => 'welocome';\nexport { setupEditor } from './view';\n"],"names":["codeBlock","content","group","marks","code","defining","draggable","selectable","isolating","attrs","language","default","theme","showLineNumber","toDOM","node","parseDOM","tag","preserveWhitespace","getAttrs","domNode","getAttribute","createCodeBlockCmd","state","dispatch","view","lastLanguage","schema","cached","nodes","codeBlockNode","create","tr","replaceSelectionWith","scrollIntoView","createElement","options","arguments","length","undefined","arg","children","_len","rest","Array","_key","isArray","dom","document","key","Object","keys","val","addEventListener","replace","setAttribute","fragment","createDocumentFragment","child","append","appendChild","updateElement","this","BaseNodeView","component","constructor","rootRender","createRoot","render","props","h","ignoreMutation","mutation","contentDOM","target","update","decorations","innerDecorations","type","hidden","classList","add","remove","taskItem","checked","class","contenteditable","tabindex","querySelector","taskList","createTaskList","createAndFill","TaskItemView","args","getPos","onchange","e","setNodeAttribute","TaskItemViewConstructor","_len2","_key2","readFromCache","addToCache","WeakMap","cache","get","value","set","cacheSize","cachePos","i","TableMap","width","height","map","problems","rectBetween","a","b","left","leftA","top","topA","right","rightA","bottom","bottomA","findCell","leftB","topB","rightB","bottomB","Math","min","max","pos","curPos","floor","j","RangeError","nextCell","axis","dir","colCount","cellsInRect","rect","result","seen","row","col","index","push","positionAt","table","rowStart","rowEnd","nodeSize","rowEndIndex","computeMap","spec","tableRole","name","findWidth","childCount","fill","mapPos","colWidths","rowNode","cellNode","colspan","rowspan","colwidth","n","start","w","colW","widthIndex","prev","expectedPos","missing","tableMap","badWidths","findBadColWidths","hasRowSpan","rowWidth","prevRow","cell","nodeAt","updated","colWidth","freshColWidth","unshift","slice","getCellAttrs","extraAttrs","widthAttr","widths","test","split","Number","prop","getter","getFromDOM","setCellAttrs","join","setter","setDOMAttr","tableNodes","cellAttributes","cellAttrs","tableGroup","tableRow","tableCell","cellContent","tableHeader","tableNodeTypes","role","tableEditingKey","PluginKey","addColspan","splice","columnIsHeader","headerCell","isInTable","$head","selection","d","depth","pointsAtCell","$pos","parent","nodeAfter","inSameTable","$cellA","$cellB","end","tableStart","moved","resolve","removeColSpan","some","cellAround","before","cellNear","after","firstChild","doc","nodeBefore","lastChild","selectionCell","sel","$anchorCell","$headCell","$anchor","$cell","head","isEmpty","isNaN","CellSelection","Selection","cells","filter","p","ranges","from","SelectionRange","size","$from","$to","eq","mapping","tableChanged","isRowSelection","rowSelection","isColSelection","colSelection","TextSelection","between","toJSON","anchor","anchorLeft","headLeft","anchorRight","headRight","anchorTop","headTop","anchorBottom","headBottom","anchorRect","headRect","forEachCell","f","rows","rowContent","cellRect","extraLeft","extraRight","JSON","stringify","copy","Fragment","Slice","fromJSON","json","anchorCell","headCell","getBookmark","CellBookmark","prototype","visible","jsonID","near","drawCellSelection","Decoration","isCellBoundarySelection","_ref","afterFrom","beforeTo","isTextSelectionAcrossCells","_ref2","fromCellBoundaryNode","toCellBoundaryNode","parentOffset","normalizeSelection","allowTableNodeSelection","normalize","NodeSelection","lastCell","setSelection","fixTablesKey","changedDescendants","old","cur","offset","oldSize","curSize","outer","scan","sameMarkup","nodesBetween","fixTables","oldState","check","fixTable","descendants","tablePos","mustAdd","prob","setNodeMarkup","first","last","side","insert","setMeta","createTable","columns","paragraph","tableNode","_","selectedRect","addColumn","refColumn","addColumnAtEnd","$start","removeColumn","mapStart","maps","delete","rowIsHeader","addRow","_ref3","rowPos","refRow","addRowAtEnd","removeRow","_ref4","nextRow","mapFrom","Set","has","newPos","cellsOverlapRectangle","_ref5","indexTop","indexLeft","indexBottom","indexRight","c","isTextblock","mergeCells","empty","mergedPos","mergedCell","cellPos","mapped","replaceWith","tableClassName","TableView","cellMinWidth","console","log","colgroup","updateColumnsOnResize","handleMouseOver","handleMouseLeave","event","clientX","clientY","mousePos","posAtCoords","decs","hoverDecos","destroy","removeEventListener","className","record","contains","selectNode","overrideCol","overrideValue","totalWidth","fixedWidth","nextDOM","hasWidth","cssWidth","style","nextSibling","parentNode","removeChild","minWidth","TableViewConstructor","addToolkit","widget","onclick","columnResizingPluginKey","columnResizing","handleWidth","View","lastColumnResizable","plugin","Plugin","init","nodeViews","ResizeState","apply","attributes","pluginState","getState","activeHandle","handleDOMEvents","mousemove","handleMouseMove","mouseleave","mousedown","handleMouseDown","handleDecorations","dragging","action","getMeta","setHandle","setDragging","docChanged","handle","domCellAround","getBoundingClientRect","edgeCell","updateHandle","win","ownerDocument","defaultView","window","currentColWidth","startX","startWidth","finish","move","updateColumnWidth","draggedWidth","which","dragged","displayColumnWidth","preventDefault","domAtPos","childNodes","domWidth","offsetWidth","parts","nodeName","found","indexOf","mapIndex","zeroes","DecorationSet","pastedCells","openStart","openEnd","fitSlice","ensureRectangular","r","nodeType","Transform","clipCells","newWidth","newHeight","added","newRows","frag","createChecked","source","growTable","types","emptyHead","header","emptyRow","isolateHorizontal","cellTop","cellLeft","isolateVertical","updatePos","insertCells","Error","recomp","to","deleteCellSelection","baseContent","handleKeyDown","keydownHandler","ArrowLeft","arrow","ArrowRight","ArrowUp","ArrowDown","shiftArrow","Backspace","Delete","maybeSetSelection","atEndOfCell","$next","newSel","cellSel","handlePaste","startEvent","ctrlKey","metaKey","startDOMCell","domInCell","cellUnderMouse","shiftKey","setCellSelection","starting","x1","y1","stop","_event","x2","y2","abs","newSelection","focus","tableDOM","nodeDOM","root","startPos","blur","indexAfter","dirStr","endOfTextblock","handleTripleClick","tableEditing","getDecorations","concat","st","deleted","mapResult","appendTransaction","newState","mathNodeSpec","inline","atom","formula","textContent","renderMath","span","katex","mathRender","math","newNode","insertMath","createNodeSpec","config","res","text","blockQuote","heading","level","id","fold","ordered_list","order","hasAttribute","bullet_list","list_item","horizontalRule","image","src","alt","title","hardBreak","bold","fontWeight","italic","fontStyle","link","href","ref","mark","underline","linethrough","color","fontSize","backgroundColor","Schema","CodeBlockView","crel","menu","renderComponent","CodeBlockViewConstructor","HighlightRenderer","finishedRenderInfos","trackingRenderInfoStack","tree","blockStartPos","currentPos","classPrefix","walk","addText","openNode","scope","renderInfo","newRenderInfo","classNames","item","closeNode","pop","info","highlightCodePluginKey","findNodesByType","tempTypes","Boolean","includes","highlightCodePlugin","getDecs","blocks","forEach","block","hljs","getLanguage","highlightResult","highlight","highlightAuto","emitter","_emitter","renderer","blockDecorations","instance","uniqueIdCounter","generateUniqueId","base36","toString","randomPart","random","substring","assignUniqueId","convertToChineseNumber","num","units","digits","numStr","zeroFlag","digit","parseInt","unitPos","convertToAlphabet","String","fromCharCode","convertToRoman","romanNumerals","numeral","entries","reverse","OutlineNode","OutlineTree","orderType","Map","setOrderType","updateHeading","insertOrUpdate","outlineNode","findNodeById","cursor","count","lastLevel","Infinity","olNode","l","removeById","updateSymbol","dataLevel","current","renderOrder1","nums","renderOrder2","renderOrder3","calculateOrderNumber","outlineTreeKey","outlineTreePlugin","outlineTree","steps","step","ReplaceStep","transactions","transaction","data","headingRules","textblockTypeInputRule","listRules","wrappingInputRule","match","javascript","typescript","rust","golang","python","ruby","php","html","css","markdown","java","js","ts","py","go","rs","plaintext","mapTolang","lang","rules","InputRule","outineTree","listSymbol","buildInputRules","inputRules","splitListItem","itemTypes","itemAttrs","isBlock","sameParent","grandParent","liCount","wrap","depthBefore","depthAfter","s","nextType","contentMatchAt","defaultType","canSplit","myKeymap","baseKeymap","Enter","chainCommands","newlineInCode","createParagraphNear","liftEmptyBlock","splitBlock","undo","redo","Tab","insertText","MenuItem","btn","handler","innerText","label","MenuGroup","menus","menuSpec","setMark","markType","addMark","unSetMark","removeMark","getMarkType","isMarkActive","realMarkType","isActive","isInline","isInSet","toggleMark","applyBold","applyUnderline","applyLinethrough","applylink","url","applyStyle","isText","existingMark","find","applyColor","FloatBar","Tooltip","tooltip","container","body","stopPropagation","replaceChildren","showAt","visibility","opacity","show","innerHTML","hide","ToolBar","groups","menuGroupSpec","menuGroup","insertBefore","buildToolbar","toolbar","toolbarPlugin","prompt","onMouseDown","onMouseup","coordsAtPos","floatBar","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","prevState","require$$0","_jsx","useState","useEffect","$heading","useRef","$content","useLayoutEffect","Tag","_jsxs","Icon","onClick","headingViewMap","HeadingView","Heading","nodeview","HeadingViewConstructor","setupEditor","el","editorState","EditorState","plugins","keymap","history","editorView","EditorView","dispatchTransaction","updateState","handleClickOn","nodePos","direct","linkMark","open"],"mappings":";;;;;;;;;;;;AAGO,MAAMA,SAAmB,GAAG;AACjCC,EAAAA,OAAO,EAAE,OAAO;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,KAAK,EAAE,EAAE;AACTC,EAAAA,IAAI,EAAE,IAAI;AACVC,EAAAA,QAAQ,EAAE,IAAI;AACdC,EAAAA,SAAS,EAAE,KAAK;AAChBC,EAAAA,UAAU,EAAE,IAAI;AAChBC,EAAAA,SAAS,EAAE,IAAI;AAEfC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE,WAAA;KACV;AACDC,IAAAA,KAAK,EAAE;AACLD,MAAAA,OAAO,EAAE,MAAA;KACV;AACDE,IAAAA,cAAc,EAAE;AACdF,MAAAA,OAAO,EAAE,IAAA;AACX,KAAA;GACD;EAEDG,KAAKA,CAACC,IAAI,EAAE;IACV,OAAO,CACL,KAAK,EACL;AACE,MAAA,gBAAgB,EAAEA,IAAI,CAACN,KAAK,CAACC,QAAQ;AACrC,MAAA,YAAY,EAAEK,IAAI,CAACN,KAAK,CAACG,KAAK;AAC9B,MAAA,uBAAuB,EAAEG,IAAI,CAACN,KAAK,CAACI,cAAc;AAClD,MAAA,gBAAgB,EAAE,YAAA;AACpB,KAAC,EACD,CAAC,MAAM,EAAE,CAAC,CAAC,CACZ,CAAA;GACF;AACDG,EAAAA,QAAQ,EAAE,CACR;AACEC,IAAAA,GAAG,EAAE,KAAK;AACVC,IAAAA,kBAAkB,EAAE,MAAM;IAC1BC,QAAQA,CAACC,OAAoB,EAAE;MAC7B,OAAO;AACLV,QAAAA,QAAQ,EAAEU,OAAO,CAACC,YAAY,CAAC,eAAe,CAAC;AAC/CT,QAAAA,KAAK,EAAEQ,OAAO,CAACC,YAAY,CAAC,YAAY,CAAC;AACzCR,QAAAA,cAAc,EAAEO,OAAO,CAACC,YAAY,CAAC,uBAAuB,CAAA;OAC7D,CAAA;AACH,KAAA;GACD,CAAA;AAEL,CAAC,CAAA;AAEM,MAAMC,kBAA2B,GAAGA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,IAAI,KAAK;EACpE,MAAMC,YAAY,GAAGH,KAAK,CAACI,MAAM,CAACC,MAAM,CAACF,YAAY,IAAI,WAAW,CAAA;EACpE,MAAM;AAAE1B,IAAAA,SAAAA;AAAU,GAAC,GAAGuB,KAAK,CAACI,MAAM,CAACE,KAAK,CAAA;AACxC,EAAA,MAAMC,aAAa,GAAG9B,SAAS,CAAC+B,MAAM,CAAC;AAAErB,IAAAA,QAAQ,EAAEgB,YAAAA;AAAa,GAAC,CAAC,CAAA;AAClE,EAAA,IAAIM,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAA;AACjBA,EAAAA,EAAE,CAACC,oBAAoB,CAACH,aAAa,CAAC,CAAA;EACtCE,EAAE,CAACE,cAAc,EAAE,CAAA;AAEnB,EAAA,IAAIV,QAAQ,EAAE;IACZA,QAAQ,CAACQ,EAAE,CAAC,CAAA;AACZ,IAAA,OAAO,IAAI,CAAA;AACb,GAAA;AAEA,EAAA,OAAO,KAAK,CAAA;AACd,CAAC;;AC5DD,SAASG,aAAaA,CACpBlB,GAAM,EAIoB;AAAA,EAAA,IAH1BmB,OAAa,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;EAAA,IAClBG,GAAyB,GAAAH,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,MAAAE,SAAA,CAAA;EAGzB,IAAIE,QAAmB,GAAG,EAAE,CAAA;EAAC,KAAAC,IAAAA,IAAA,GAAAL,SAAA,CAAAC,MAAA,EAF1BK,IAAI,OAAAC,KAAA,CAAAF,IAAA,GAAAA,CAAAA,GAAAA,IAAA,WAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;AAAJF,IAAAA,IAAI,CAAAE,IAAA,GAAAR,CAAAA,CAAAA,GAAAA,SAAA,CAAAQ,IAAA,CAAA,CAAA;AAAA,GAAA;EAGP,IAAID,KAAK,CAACE,OAAO,CAACN,GAAG,CAAC,EAAEC,QAAQ,GAAGD,GAAG,CAAC,KAClCC,QAAQ,GAAGD,GAAG,GAAG,CAACA,GAAG,EAAE,GAAGG,IAAI,CAAC,GAAG,EAAE,CAAA;AAEzC,EAAA,MAAMI,GAAG,GAAGC,QAAQ,CAACb,aAAa,CAAClB,GAAG,CAAC,CAAA;EACvC,KAAK,MAAMgC,GAAG,IAAIC,MAAM,CAACC,IAAI,CAACf,OAAO,CAAC,EAAE;AACtC,IAAA,MAAMgB,GAAG,GAAGhB,OAAO,CAACa,GAAG,CAAC,CAAA;AACxB,IAAA,IAAIG,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKb,SAAS,EAAE,SAAA;AACvC,IAAA,IAAI,OAAOa,GAAG,KAAK,UAAU,EAAE;AAC7BL,MAAAA,GAAG,CAACM,gBAAgB,CAACJ,GAAG,CAACK,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,EAAEF,GAAG,CAAC,CAAA;AAClD,KAAC,MAAM;MACLL,GAAG,CAACQ,YAAY,CAACN,GAAG,EAAEG,GAAG,GAAG,EAAE,CAAC,CAAA;AACjC,KAAA;AACF,GAAA;AACA,EAAA,MAAMI,QAAQ,GAAGR,QAAQ,CAACS,sBAAsB,EAAE,CAAA;AAClD,EAAA,KAAK,MAAMC,KAAK,IAAIjB,QAAQ,EAAE;AAC5Be,IAAAA,QAAQ,CAACG,MAAM,CAACD,KAAK,CAAC,CAAA;AACxB,GAAA;AACAX,EAAAA,GAAG,CAACa,WAAW,CAACJ,QAAQ,CAAC,CAAA;AACzB,EAAA,OAAOT,GAAG,CAAA;AACZ,CAAA;AAIO,MAAMc,aAAa,GAAGA,CAC3Bd,GAAgB,EAChBtC,KAA6B,KAC1B;EACH,KAAK,MAAMwC,GAAG,IAAIC,MAAM,CAACC,IAAI,CAAC1C,KAAK,CAAC,EAAE;IACpCsC,GAAG,CAACQ,YAAY,CAACN,GAAG,EAAExC,KAAK,CAACwC,GAAG,CAAC,CAAC,CAAA;AACnC,GAAA;AACF,CAAC;;;;;;;AC3CD,CAAA,CAAC,UAAU,MAAM,EAAE,OAAO,EAAE;GACqC,OAAO,CAAC,OAAO,CAAC,CAEyB,CAAC;EAC1G,EAAEa,cAAI,GAAG,UAAU,OAAO,EAAE,CAC7B;AACA,GAAE,SAAS,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE;AACnC,KAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;AAClD,KAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;KACtD,OAAO,CAAC,CAAC;IACV;AACH,GAAE,SAAS,eAAe,CAAC,CAAC,EAAE;KAC1B,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;IAChC;AACH,GAAE,SAAS,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE;AACjC,KAAI,IAAI,EAAE,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;IACjF;AACH,GAAE,SAAS,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE;AACnC,KAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACvC,OAAM,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;OACb,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;MAC/I;IACF;GACD,SAAS,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;AACjC,KAAI,OAAO,CAAC,IAAI,iBAAiB,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,WAAW,EAAE;OACnF,QAAQ,EAAE,CAAC,CAAC;MACb,CAAC,EAAE,CAAC,CAAC;IACP;AACH,GAAE,SAAS,0BAA0B,CAAC,CAAC,EAAE,CAAC,EAAE;AAC5C,KAAI,IAAI,CAAC,GAAG,WAAW,IAAI,OAAO,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,CAAC;KAC9E,IAAI,CAAC,CAAC,EAAE;AACZ,OAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,2BAA2B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI;AAC3E,SAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;SACb,IAAI,CAAC,GAAG,CAAC;AACjB,WAAU,CAAC,GAAG,YAAY,EAAE,CAAC;AAC7B,SAAQ,OAAO;WACL,CAAC,EAAE,CAAC;WACJ,CAAC,EAAE,YAAY;AACzB,aAAY,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG;eACrB,IAAI,EAAE,CAAC,CAAC;AACtB,cAAa,GAAG;eACF,IAAI,EAAE,CAAC,CAAC;AACtB,eAAc,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAC3B,cAAa,CAAC;YACH;AACX,WAAU,CAAC,EAAE,UAAU,CAAC,EAAE;aACd,MAAM,CAAC,CAAC;YACT;WACD,CAAC,EAAE,CAAC;AACd,UAAS,CAAC;QACH;AACP,OAAM,MAAM,IAAI,SAAS,CAAC,uIAAuI,CAAC,CAAC;MAC9J;AACL,KAAI,IAAI,CAAC;OACH,CAAC,GAAG,CAAC,CAAC;AACZ,OAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AACb,KAAI,OAAO;OACL,CAAC,EAAE,YAAY;SACb,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACf;OACD,CAAC,EAAE,YAAY;AACrB,SAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;SACjB,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;QACtB;AACP,OAAM,CAAC,EAAE,UAAU,CAAC,EAAE;SACd,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QACf;OACD,CAAC,EAAE,YAAY;AACrB,SAAQ,IAAI;AACZ,WAAU,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;AAC9C,UAAS,SAAS;AAClB,WAAU,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC;UAChB;QACF;AACP,MAAK,CAAC;IACH;GACD,SAAS,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;AACpC,KAAI,OAAO,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE;OAChE,KAAK,EAAE,CAAC;OACR,UAAU,EAAE,CAAC,CAAC;OACd,YAAY,EAAE,CAAC,CAAC;OAChB,QAAQ,EAAE,CAAC,CAAC;MACb,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAClB;AACH,GAAE,SAAS,qBAAqB,CAAC,CAAC,EAAE,CAAC,EAAE;KACnC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,IAAI,GAAG,WAAW,IAAI,OAAO,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,CAAC;AACrG,KAAI,IAAI,IAAI,IAAI,CAAC,EAAE;AACnB,OAAM,IAAI,CAAC;AACX,SAAQ,CAAC;AACT,SAAQ,CAAC;AACT,SAAQ,CAAC;SACD,CAAC,GAAG,EAAE;SACN,CAAC,GAAG,CAAC,CAAC;AACd,SAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AACf,OAAM,IAAI;SACF,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAChI,CAAC,OAAO,CAAC,EAAE;SACV,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AACtB,QAAO,SAAS;AAChB,SAAQ,IAAI;WACF,IAAI,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO;AAClF,UAAS,SAAS;AAClB,WAAU,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC;UAChB;QACF;OACD,OAAO,CAAC,CAAC;MACV;IACF;GACD,SAAS,gBAAgB,GAAG;AAC9B,KAAI,MAAM,IAAI,SAAS,CAAC,2IAA2I,CAAC,CAAC;IAClK;AACH,GAAE,SAAS,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE;KAC5B,OAAO,eAAe,CAAC,CAAC,CAAC,IAAI,qBAAqB,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,2BAA2B,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,gBAAgB,EAAE,CAAC;IACrH;AACH,GAAE,SAAS,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE;KAC1B,IAAI,QAAQ,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;KACzC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;AAClC,KAAI,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE;AACtB,OAAM,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,IAAI,SAAS,CAAC,CAAC;OAClC,IAAI,QAAQ,IAAI,OAAO,CAAC,EAAE,OAAO,CAAC,CAAC;AACzC,OAAM,MAAM,IAAI,SAAS,CAAC,8CAA8C,CAAC,CAAC;MACrE;AACL,KAAI,OAAO,CAAC,QAAQ,KAAK,CAAC,GAAG,MAAM,GAAG,MAAM,EAAE,CAAC,CAAC,CAAC;IAC9C;AACH,GAAE,SAAS,cAAc,CAAC,CAAC,EAAE;KACzB,IAAI,CAAC,GAAG,YAAY,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;KAClC,OAAO,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;IAC1C;AACH,GAAE,SAAS,OAAO,CAAC,CAAC,EAAE;AACtB,KAAI,yBAAyB,CAAC;AAC9B;AACA,KAAI,OAAO,OAAO,GAAG,UAAU,IAAI,OAAO,MAAM,IAAI,QAAQ,IAAI,OAAO,MAAM,CAAC,QAAQ,GAAG,UAAU,CAAC,EAAE;OAChG,OAAO,OAAO,CAAC,CAAC;MACjB,GAAG,UAAU,CAAC,EAAE;OACf,OAAO,CAAC,IAAI,UAAU,IAAI,OAAO,MAAM,IAAI,CAAC,CAAC,WAAW,KAAK,MAAM,IAAI,CAAC,KAAK,MAAM,CAAC,SAAS,GAAG,QAAQ,GAAG,OAAO,CAAC,CAAC;AAC1H,MAAK,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;IACf;AACH,GAAE,SAAS,2BAA2B,CAAC,CAAC,EAAE,CAAC,EAAE;KACzC,IAAI,CAAC,EAAE;AACX,OAAM,IAAI,QAAQ,IAAI,OAAO,CAAC,EAAE,OAAO,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/D,OAAM,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;OACzC,OAAO,QAAQ,KAAK,CAAC,IAAI,CAAC,CAAC,WAAW,KAAK,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,WAAW,KAAK,CAAC,IAAI,0CAA0C,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;MAC7N;IACF;AACH;AACA,GAAE,IAAI,SAAS,gBAAgB,YAAY;AAC3C,KAAI,SAAS,SAAS,CAAC,KAAK,EAAE,OAAO,EAAE;AACvC,OAAM,eAAe,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;OACjC,eAAe,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;OACvC,eAAe,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;OACvC,eAAe,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;OACzC,eAAe,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;OACzC,eAAe,CAAC,IAAI,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC;AACjD,OAAM,IAAI,CAAC,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;AAC/B,OAAM,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;MACxB;AACL,KAAI,OAAO,YAAY,CAAC,SAAS,EAAE,CAAC;OAC9B,GAAG,EAAE,uBAAuB;OAC5B,KAAK,EAAE,SAAS,qBAAqB,CAAC,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE;SAC/D,OAAO,IAAI,CAAC;QACb;AACP,MAAK,EAAE;OACD,GAAG,EAAE,mBAAmB;AAC9B,OAAM,KAAK,EAAE,SAAS,iBAAiB,GAAG,EAAE;AAC5C,MAAK,EAAE;OACD,GAAG,EAAE,oBAAoB;OACzB,KAAK,EAAE,SAAS,kBAAkB,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE;AACnE,MAAK,EAAE;OACD,GAAG,EAAE,yBAAyB;OAC9B,KAAK,EAAE,SAAS,uBAAuB,CAAC,SAAS,EAAE,SAAS,EAAE,EAAE;AACtE,MAAK,EAAE;OACD,GAAG,EAAE,mBAAmB;OACxB,KAAK,EAAE,SAAS,iBAAiB,CAAC,KAAK,EAAE,SAAS,EAAE,EAAE;AAC5D,MAAK,EAAE;OACD,GAAG,EAAE,sBAAsB;AACjC,OAAM,KAAK,EAAE,SAAS,oBAAoB,GAAG,EAAE;AAC/C,MAAK,EAAE;OACD,GAAG,EAAE,SAAS;AACpB,OAAM,KAAK,EAAE,SAAS,OAAO,GAAG;AAChC,SAAQ,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC7B;AACP,MAAK,EAAE;OACD,GAAG,EAAE,UAAU;AACrB,OAAM,KAAK,EAAE,SAAS,QAAQ,CAAC,KAAK,EAAE;AACtC;AACA;QACO;AACP,MAAK,EAAE;OACD,GAAG,EAAE,QAAQ;AACnB,OAAM,KAAK,EAAE,SAAS,MAAM,GAAG;AAC/B,SAAQ,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;QACxD;MACF,CAAC,CAAC,CAAC;AACR,IAAG,EAAE,CAAC;AACN,GAAE,SAAS,cAAc,CAAC,KAAK,EAAE;KAC7B,IAAI,iBAAiB,CAAC;AAC1B,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;AAC1B,KAAI,IAAI,QAAQ,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,MAAM,IAAI,IAAI,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,iBAAiB,CAAC,YAAY,CAAC,CAAC;AAC3K,KAAI,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;KACzB,OAAO,QAAQ,CAAC;IACjB;AACH;GACE,IAAI,QAAQ,CAAC;GACb,CAAC,UAAU,QAAQ,EAAE;AACvB,KAAI,QAAQ,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC;AACvC,KAAI,QAAQ,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;AACtC,KAAI,QAAQ,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC;AACzC,KAAI,QAAQ,CAAC,mBAAmB,CAAC,GAAG,UAAU,CAAC;AAC/C,KAAI,QAAQ,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC;AAClC,KAAI,QAAQ,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;AACtC,KAAI,QAAQ,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;AACtC,KAAI,QAAQ,CAAC,WAAW,CAAC,GAAG,WAAW,CAAC;AACxC,KAAI,QAAQ,CAAC,iBAAiB,CAAC,GAAG,iBAAiB,CAAC;AACpD,KAAI,QAAQ,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC;IACjC,EAAE,QAAQ,KAAK,QAAQ,GAAG,EAAE,CAAC,CAAC,CAAC;GAChC,IAAI,UAAU,CAAC;GACf,CAAC,UAAU,UAAU,EAAE;KACrB,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;KAC5C,UAAU,CAAC,UAAU,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,GAAG,eAAe,CAAC;KAC9D,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC;KACxD,UAAU,CAAC,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,GAAG,aAAa,CAAC;KAC1D,UAAU,CAAC,UAAU,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,WAAW,CAAC;KACtD,UAAU,CAAC,UAAU,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,GAAG,UAAU,CAAC;KACrD,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,QAAQ,CAAC;IAClD,EAAE,UAAU,KAAK,UAAU,GAAG,EAAE,CAAC,CAAC,CAAC;GACpC,IAAI,WAAW,CAAC;GAChB,CAAC,UAAU,WAAW,EAAE;KACtB,WAAW,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,GAAG,cAAc,CAAC;KAC9D,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,GAAG,aAAa,CAAC;KAC5D,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,GAAG,aAAa,CAAC;KAC5D,WAAW,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,GAAG,cAAc,CAAC;IAC/D,EAAE,WAAW,KAAK,WAAW,GAAG,EAAE,CAAC,CAAC,CAAC;GACtC,IAAI,IAAI,CAAC;GACT,CAAC,UAAU,IAAI,EAAE;KACf,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;KACpC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC;IAC7C,EAAE,IAAI,KAAK,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;AAC1B;GACE,IAAI,IAAI,CAAC;GACT,CAAC,UAAU,IAAI,EAAE;AACnB,KAAI,IAAI,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC;AACpC,KAAI,IAAI,CAAC,WAAW,CAAC,GAAG,UAAU,CAAC;AACnC,KAAI,IAAI,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC;AACtC,KAAI,IAAI,CAAC,oBAAoB,CAAC,GAAG,UAAU,CAAC;AAC5C,KAAI,IAAI,CAAC,WAAW,CAAC,GAAG,MAAM,CAAC;AAC/B,KAAI,IAAI,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;AAClC,KAAI,IAAI,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;AAClC,KAAI,IAAI,CAAC,WAAW,CAAC,GAAG,WAAW,CAAC;AACpC,KAAI,IAAI,CAAC,kBAAkB,CAAC,GAAG,iBAAiB,CAAC;AACjD,KAAI,IAAI,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC;IAC7B,EAAE,IAAI,KAAK,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;GACxB,IAAI,MAAM,CAAC;GACX,CAAC,UAAU,MAAM,EAAE;KACjB,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;KAC1C,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,WAAW,CAAC;KAC9C,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC;KAC5C,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;IACzC,EAAE,MAAM,KAAK,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;GAC5B,IAAI,KAAK,CAAC;GACV,CAAC,UAAU,KAAK,EAAE;KAChB,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;KAClC,KAAK,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,GAAG,eAAe,CAAC;KACpD,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC;IAC/C,EAAE,KAAK,KAAK,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC;AAC5B;GACE,SAAS,UAAU,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE;AAClD,KAAI,IAAI,MAAM,GAAG,CAAC,EAAE,OAAO;KACvB,KAAK,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;OACnD,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC;OAC3D,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;OAC9D,MAAM,GAAG,CAAC,CAAC;MACZ;IACF;GACD,SAAS,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;AACnC,KAAI,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;KACrB,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;AAC7B,KAAI,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;IACnB;AACH,GAAE,SAAS,OAAO,CAAC,IAAI,EAAE,OAAO,EAAE;AAClC,KAAI,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;AAC1B,KAAI,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;KACpC,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,UAAU,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;KACnE,OAAO,IAAI,CAAC;IACb;AACH,GAAE,IAAI,SAAS,gBAAgB,YAAY;KACvC,SAAS,SAAS,GAAG;OACnB,IAAI,IAAI,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE;AACvF,SAAQ,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC/B,OAAM,eAAe,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;OACjC,eAAe,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC;OACtC,eAAe,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;AAC/C,OAAM,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;OACf,IAAI,CAAC,OAAO,GAAG,OAAO,IAAI,SAAS,CAAC,gBAAgB,CAAC;MACtD;AACL,KAAI,OAAO,YAAY,CAAC,SAAS,EAAE,CAAC;OAC9B,GAAG,EAAE,MAAM;AACjB,OAAM,KAAK,EAAE,SAAS,IAAI,CAAC,IAAI,EAAE;AACjC,SAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI;AAC5B,WAAU,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AACjC,SAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACxB,SAAQ,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;AAC9B,SAAQ,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AACxB,SAAQ,GAAG;AACX,WAAU,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;WAChC,UAAU,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;AAC5C,UAAS,QAAQ,CAAC,GAAG,CAAC,EAAE;QACjB;AACP,MAAK,EAAE;OACD,GAAG,EAAE,OAAO;AAClB,OAAM,KAAK,EAAE,SAAS,KAAK,GAAG;AAC9B,SAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI;AAC5B,WAAU,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AACjC,SAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AAChC,SAAQ,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SACvB,OAAO,IAAI,CAAC;QACb;AACP,MAAK,EAAE;OACD,GAAG,EAAE,KAAK;AAChB,OAAM,KAAK,EAAE,SAAS,GAAG,GAAG;AAC5B,SAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QACxB;AACP,MAAK,EAAE;OACD,GAAG,EAAE,MAAM;AACjB,OAAM,KAAK,EAAE,SAAS,IAAI,GAAG;AAC7B,SAAQ,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACrB;MACF,CAAC,CAAC,CAAC;AACR,IAAG,EAAE,CAAC;GACJ,eAAe,CAAC,SAAS,EAAE,kBAAkB,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;KAC7D,OAAO,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC;AACrC,IAAG,CAAC,CAAC;AACL;AACA,GAAE,IAAI,iBAAiB,GAAG,CAAC,CAAC;AAC5B,GAAE,IAAI,oBAAoB,GAAG,CAAC,CAAC;AAC/B,GAAE,IAAI,cAAc,GAAG,CAAC,CAAC;AACzB,GAAE,IAAI,WAAW,GAAG,CAAC,CAAC;AACtB,GAAE,IAAI,YAAY,GAAG,CAAC,CAAC;AACvB,GAAE,IAAI,iBAAiB,GAAG,UAAU,CAAC;AACrC,GAAE,IAAI,0BAA0B,GAAG,CAAC,CAAC,CAAC;AACtC,GAAE,IAAI,8BAA8B,GAAG,GAAG,CAAC;AAC3C,GAAE,IAAI,uBAAuB,GAAG,IAAI,CAAC;AACrC,GAAE,IAAI,oBAAoB,GAAG,KAAK,CAAC;AACnC,GAAE,IAAI,qBAAqB,GAAG,iBAAiB,CAAC;AAChD,GAAE,IAAI,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;AAClC,GAAE,IAAI,UAAU,GAAG,IAAI,SAAS,EAAE,CAAC;AACnC,GAAE,IAAI,WAAW,GAAG,IAAI,CAAC;AACzB,GAAE,IAAI,gBAAgB,GAAG,KAAK,CAAC;AAC/B,GAAE,IAAI,uBAAuB,GAAG,KAAK,CAAC;AACtC,GAAE,IAAI,sBAAsB,GAAG,KAAK,CAAC;AACrC,GAAE,IAAI,aAAa,GAAG,CAAC,CAAC;AACxB,GAAE,IAAI,QAAQ,GAAG,CAAC,CAAC;AACnB,GAAE,IAAI,aAAa,GAAG,CAAC,CAAC;GACtB,IAAI,mBAAmB,CAAC;AAC1B,GAAE,IAAI,qBAAqB,GAAG,IAAI,CAAC;AACnC,GAAE,SAAS,uBAAuB,CAAC,aAAa,EAAE;AAClD,KAAI,QAAQ,aAAa;AACzB,OAAM,KAAK,iBAAiB;SACpB,OAAO,0BAA0B,CAAC;AAC1C,OAAM,KAAK,oBAAoB;SACvB,OAAO,8BAA8B,CAAC;AAC9C,OAAM,KAAK,YAAY;SACf,OAAO,qBAAqB,CAAC;AACrC,OAAM,KAAK,WAAW;SACd,OAAO,oBAAoB,CAAC;OAC9B,KAAK,cAAc,CAAC;OACpB;SACE,OAAO,uBAAuB,CAAC;MAClC;IACF;GACD,IAAI,cAAc,GAAG,YAAY;AACnC,KAAI,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;KAC7B,IAAI,iBAAiB,GAAG,CAAC,OAAO,WAAW,KAAK,WAAW,GAAG,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC,MAAM,QAAQ,IAAI,OAAO,WAAW,CAAC,GAAG,KAAK,UAAU,CAAC;AAC5J,KAAI,IAAI,iBAAiB,EAAE,OAAO,YAAY;AAC9C,OAAM,OAAO,WAAW,CAAC,GAAG,EAAE,CAAC;MAC1B,CAAC,KAAK,OAAO,YAAY;AAC9B,OAAM,OAAO,IAAI,CAAC,GAAG,EAAE,GAAG,WAAW,CAAC;AACtC,MAAK,CAAC;AACN,IAAG,EAAE,CAAC;AACN,GAAE,SAAS,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE;AAC7B,KAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAClB;AACH,GAAE,SAAS,IAAI,CAAC,KAAK,EAAE;AACvB,KAAI,OAAO,KAAK,CAAC,IAAI,EAAE,CAAC;IACrB;AACH,GAAE,SAAS,KAAK,CAAC,KAAK,EAAE;AACxB,KAAI,OAAO,KAAK,CAAC,KAAK,EAAE,CAAC;IACtB;AACH,GAAE,SAAS,UAAU,CAAC,gBAAgB,EAAE,WAAW,EAAE;AACrD,KAAI,IAAI,WAAW,GAAG,cAAc,EAAE,CAAC;AACvC,KAAI,aAAa,CAAC,WAAW,CAAC,CAAC;AAC/B,KAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;KAC9B,OAAO,WAAW,EAAE;OAClB,IAAI,YAAY,GAAG,WAAW;AACpC,SAAQ,QAAQ,GAAG,YAAY,CAAC,QAAQ,CAAC;OACnC,IAAI,QAAQ,EAAE;AACpB,SAAQ,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC5B,WAAW,CAAC,aAAa,CAAC;SAC1B,IAAI,sBAAsB,GAAG,WAAW,CAAC,cAAc,IAAI,WAAW,CAAC;AAC/E,SAAQ,IAAI,oBAAoB,GAAG,QAAQ,CAAC,sBAAsB,CAAC,CAAC;AACpE,SAAQ,WAAW,GAAG,cAAc,EAAE,CAAC;AACvC,SAAQ,IAAI,OAAO,oBAAoB,KAAK,UAAU,EAAE;AACxD,WAAU,WAAW,CAAC,QAAQ,GAAG,oBAAoB,CAAC;WAC5C,OAAO,IAAI,CAAC;AACtB,UAAS,MAAM,IAAI,WAAW,KAAK,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC;AACrE,SAAQ,aAAa,CAAC,WAAW,CAAC,CAAC;AACnC,QAAO,MAAM;AACb,SAAQ,KAAK,CAAC,SAAS,CAAC,CAAC;QAClB;AACP,OAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;MAC/B;AACL,KAAI,IAAI,WAAW,EAAE,OAAO,IAAI,CAAC,KAAK;AACtC,OAAM,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;AACxC,OAAM,IAAI,UAAU,EAAE,kBAAkB,CAAC,aAAa,EAAE,UAAU,CAAC,SAAS,GAAG,WAAW,CAAC,CAAC;OACtF,OAAO,KAAK,CAAC;MACd;IACF;AACH,GAAE,SAAS,SAAS,CAAC,gBAAgB,EAAE,WAAW,EAAE;KAChD,uBAAuB,GAAG,KAAK,CAAC;KAChC,IAAI,sBAAsB,EAAE;OAC1B,sBAAsB,GAAG,KAAK,CAAC;OAC/B,iBAAiB,EAAE,CAAC;MACrB;KACD,gBAAgB,GAAG,IAAI,CAAC;AAC5B,KAAI,IAAI,GAAG,GAAG,UAAU,EAAE,CAAC;KACvB,WAAW,GAAG,IAAI,CAAC;KACnB,gBAAgB,GAAG,KAAK,CAAC;KACzB,OAAO,GAAG,CAAC;IACZ;GACD,SAAS,gBAAgB,CAAC,aAAa,EAAE,QAAQ,EAAE,OAAO,EAAE;AAC9D,KAAI,IAAI,WAAW,GAAG,cAAc,EAAE,CAAC;AACvC,KAAI,IAAI,SAAS;OACX,KAAK,GAAG,CAAC,CAAC;KACZ,IAAI,OAAO,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,OAAO,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,GAAG,CAAC,EAAE;AACrG,OAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;MACvB;AACL,KAAI,SAAS,GAAG,WAAW,GAAG,KAAK,CAAC;AACpC,KAAI,IAAI,OAAO,GAAG,uBAAuB,CAAC,aAAa,CAAC,CAAC;AACzD,KAAI,IAAI,cAAc,GAAG,SAAS,GAAG,OAAO,CAAC;KACzC,IAAI,OAAO,GAAG;OACZ,EAAE,EAAE,aAAa,EAAE;OACnB,QAAQ,EAAE,QAAQ;OAClB,aAAa,EAAE,aAAa;OAC5B,SAAS,EAAE,SAAS;OACpB,cAAc,EAAE,cAAc;OAC9B,SAAS,EAAE,CAAC,CAAC;AACnB,MAAK,CAAC;AACN,KAAI,IAAI,SAAS,GAAG,WAAW,EAAE;AACjC,OAAM,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;AACpC,OAAM,IAAI,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;AAChC,OAAM,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,KAAK,IAAI,CAAC,UAAU,CAAC,EAAE;SACpD,IAAI,sBAAsB,EAAE,iBAAiB,EAAE,CAAC,KAAK,sBAAsB,GAAG,IAAI,CAAC;SACnF,kBAAkB,CAAC,aAAa,EAAE,SAAS,GAAG,WAAW,CAAC,CAAC;QAC5D;AACP,MAAK,MAAM;AACX,OAAM,OAAO,CAAC,SAAS,GAAG,cAAc,CAAC;AACzC,OAAM,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;AAC/B,OAAM,IAAI,CAAC,uBAAuB,IAAI,CAAC,gBAAgB,EAAE;SACjD,uBAAuB,GAAG,IAAI,CAAC;AACvC,SAAQ,mBAAmB,CAAC,SAAS,CAAC,CAAC;QAChC;MACF;KACD,OAAO,OAAO,CAAC;IAChB;GACD,SAAS,iBAAiB,GAAG;KAC3B,IAAI,GAAG,GAAG,cAAc,EAAE,GAAG,QAAQ,GAAG,CAAC,CAAC;KAC1C,OAAO,GAAG,CAAC;IACZ;AACH,GAAE,IAAI,WAAW,GAAG,iBAAiB,CAAC;AACtC,GAAE,IAAI,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;AACrC,GAAE,IAAI,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC;AAC3B,GAAE,IAAI,wBAAwB,GAAG,SAAS,wBAAwB,GAAG;KACjE,IAAI,qBAAqB,EAAE;AAC/B,OAAM,IAAI,WAAW,GAAG,cAAc,EAAE,CAAC;AACzC,OAAM,QAAQ,GAAG,WAAW,GAAG,aAAa,CAAC;AAC7C,OAAM,IAAI,gBAAgB,GAAG,IAAI,CAAC;OAC5B,IAAI,WAAW,GAAG,qBAAqB,CAAC,gBAAgB,EAAE,WAAW,CAAC,CAAC;OACvE,IAAI,CAAC,WAAW,EAAE;SAChB,oBAAoB,GAAG,KAAK,CAAC;SAC7B,qBAAqB,GAAG,IAAI,CAAC;AACrC,QAAO,MAAM;AACb,SAAQ,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACxB;AACP,MAAK,MAAM;OACL,oBAAoB,GAAG,KAAK,CAAC;MAC9B;AACL,IAAG,CAAC;AACJ,GAAE,OAAO,CAAC,KAAK,CAAC,SAAS,GAAG,wBAAwB,CAAC;AACrD,GAAE,IAAI,oBAAoB,GAAG,KAAK,CAAC;AACnC,GAAE,mBAAmB,GAAG,SAAS,mBAAmB,CAAC,QAAQ,EAAE;KAC3D,qBAAqB,GAAG,QAAQ,CAAC;KACjC,IAAI,CAAC,oBAAoB,EAAE;OACzB,oBAAoB,GAAG,IAAI,CAAC;AAClC,OAAM,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;MACxB;AACL,IAAG,CAAC;GACF,IAAI,aAAa,CAAC;AACpB,GAAE,SAAS,kBAAkB,CAAC,QAAQ,EAAE,EAAE,EAAE;AAC5C,KAAI,aAAa,GAAG,UAAU,CAAC,YAAY;AAC3C,OAAM,OAAO,QAAQ,CAAC,cAAc,EAAE,CAAC,CAAC;MACnC,EAAE,EAAE,CAAC,CAAC;IACR;GACD,SAAS,iBAAiB,GAAG;AAC/B,KAAI,YAAY,CAAC,aAAa,CAAC,CAAC;AAChC,KAAI,aAAa,GAAG,CAAC,CAAC,CAAC;IACpB;AACH,GAAE,SAAS,aAAa,CAAC,WAAW,EAAE;KAClC,sBAAsB,GAAG,KAAK,CAAC;AACnC,KAAI,aAAa,CAAC,WAAW,CAAC,CAAC;KAC3B,IAAI,CAAC,uBAAuB,EAAE;AAClC,OAAM,IAAI,IAAI,CAAC,SAAS,CAAC,EAAE;SACnB,uBAAuB,GAAG,IAAI,CAAC;AACvC,SAAQ,mBAAmB,CAAC,SAAS,CAAC,CAAC;AACvC,QAAO,MAAM;AACb,SAAQ,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;AAC1C,SAAQ,IAAI,UAAU,EAAE,kBAAkB,CAAC,aAAa,EAAE,UAAU,CAAC,SAAS,GAAG,WAAW,CAAC,CAAC;QACvF;MACF;IACF;AACH,GAAE,SAAS,aAAa,CAAC,WAAW,EAAE;AACtC,KAAI,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;KAC7B,OAAO,KAAK,EAAE;AAClB,OAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;AAC3B,SAAQ,KAAK,CAAC,UAAU,CAAC,CAAC;AAC1B,QAAO,MAAM,IAAI,KAAK,CAAC,SAAS,IAAI,WAAW,EAAE;AACjD,SAAQ,KAAK,CAAC,UAAU,CAAC,CAAC;AAC1B,SAAQ,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,cAAc,CAAC;AAC/C,SAAQ,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;AAC/B,QAAO,MAAM,OAAO;AACpB,OAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;MAC1B;IACF;AACH;AACA;AACA;AACA,GAAE,IAAI,OAAO,+BAA+B,CAAC,CAAC;AAC9C,GAAE,IAAI,MAAM,iCAAiC,CAAC,CAAC;AAC/C;AACA,GAAE,IAAI,QAAQ,+BAA+B,CAAC,CAAC;AAC/C,GAAE,IAAI,mBAAmB,mBAAmB,CAAC,CAAC;AAC9C,GAAE,IAAI,eAAe,8BAA8B,OAAO,CAAC;AAC3D,GAAE,IAAI,eAAe,+BAA+B,EAAE,CAAC;AACvD,GAAE,IAAI,YAAY,wCAAwC,SAAS,CAAC;AACpE,GAAE,IAAI,QAAQ,oCAAoC,SAAS,CAAC;AAC5D,GAAE,IAAI,qBAAqB,GAAG,QAAQ,CAAC;AACvC,GAAE,IAAI,uBAAuB,GAAG,mBAAmB,CAAC;AACpD;AACA,GAAE,SAAS,eAAe,CAAC,GAAG,EAAE,MAAM,EAAE;AACxC,KAAI,OAAO,CAAC,GAAG,GAAG,MAAM,MAAM,MAAM,CAAC;IAClC;AACH,GAAE,SAAS,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE;AAC5B,KAAI,OAAO,CAAC,GAAG,CAAC,CAAC;IACd;AACH,GAAE,SAAS,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE;AAChC,KAAI,OAAO,CAAC,GAAG,CAAC,CAAC;IACd;AACH,GAAE,SAAS,sBAAsB,CAAC,KAAK,EAAE;AACzC,KAAI,OAAO,KAAK,GAAG,CAAC,KAAK,CAAC;IACvB;AACH,GAAE,IAAI,YAAY,GAAG,CAAC,CAAC;AACvB,GAAE,IAAI,mBAAmB,GAAG,MAAM,CAAC;GACjC,SAAS,iBAAiB,GAAG;AAC/B,KAAI,IAAI,GAAG,GAAG,eAAe,IAAI,YAAY,CAAC;KAC1C,YAAY,GAAG,CAAC,YAAY,GAAG,CAAC,IAAI,EAAE,CAAC;KACvC,OAAO,GAAG,CAAC;IACZ;GACD,SAAS,iBAAiB,GAAG;AAC/B,KAAI,IAAI,kBAAkB,CAAC,UAAU,EAAE;AACvC,OAAM,mBAAmB,GAAG,mBAAmB,KAAK,MAAM,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,EAAE,GAAG,mBAAmB,CAAC;OACvH,OAAO,mBAAmB,CAAC;MAC5B;KACD,OAAO,QAAQ,CAAC;IACjB;AACH,GAAE,SAAS,cAAc,CAAC,IAAI,EAAE;AAChC,KAAI,IAAI,IAAI,IAAI,qBAAqB,EAAE,OAAO,iBAAiB,CAAC;AAChE,KAAI,IAAI,IAAI,IAAI,uBAAuB,EAAE,OAAO,oBAAoB,CAAC;AACrE,KAAI,IAAI,IAAI,GAAG,YAAY,EAAE,OAAO,cAAc,CAAC;KAC/C,OAAO,YAAY,CAAC;IACrB;AACH;GACE,SAAS,eAAe,CAAC,GAAG,EAAE,YAAY,EAAE,OAAO,EAAE;AACvD,KAAI,IAAI,GAAG,GAAG,YAAY,CAAC,GAAG;AAC9B,OAAM,GAAG,GAAG,YAAY,CAAC,GAAG,CAAC;AAC7B,KAAI,IAAI,MAAM,GAAG,OAAO,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC;KAC9E,IAAI,IAAI,GAAG;OACT,GAAG,EAAE,GAAG;OACR,GAAG,EAAE,GAAG;OACR,IAAI,EAAE,MAAM,GAAG,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM;OACxC,YAAY,EAAE,YAAY;OAC1B,IAAI,EAAE,IAAI;OACV,SAAS,EAAE,IAAI;OACf,MAAM,EAAE,IAAI;OACZ,KAAK,EAAE,IAAI;OACX,OAAO,EAAE,IAAI;OACb,KAAK,EAAE,CAAC;OACR,GAAG,EAAE,GAAG;OACR,aAAa,EAAE,IAAI;OACnB,aAAa,EAAE,IAAI;OACnB,WAAW,EAAE,IAAI;AACvB,OAAM,KAAK,EAAE,UAAU,CAAC,SAAS;OAC3B,KAAK,EAAE,OAAO;OACd,UAAU,EAAE,OAAO;OACnB,SAAS,EAAE,IAAI;OACf,OAAO,EAAE,IAAI;AACnB,MAAK,CAAC;KACF,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;IACzC;AACH,GAAE,SAAS,cAAc,CAAC,QAAQ,EAAE,YAAY,EAAE;KAC9C,IAAI,OAAO,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACzF,KAAI,IAAI,GAAG,GAAG,YAAY,CAAC,GAAG;AAC9B,OAAM,GAAG,GAAG,YAAY,CAAC,GAAG,CAAC;AAC7B,KAAI,IAAI,KAAK,GAAG,OAAO,CAAC,KAAK;AAC7B,OAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;KAC5B,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;KACjC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;AACzC,KAAI,IAAI,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC;OACxB,GAAG,EAAE,GAAG;OACR,GAAG,EAAE,GAAG;AACd,MAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,YAAY,GAAG;OACnC,YAAY,EAAE,YAAY;MAC3B,GAAG,EAAE,CAAC,CAAC;AACZ,KAAI,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;AACvB,KAAI,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC;KAChC,OAAO,KAAK,CAAC;IACd;AACH;AACA,GAAE,IAAI,aAAa,GAAG,EAAE,CAAC;GACvB,SAAS,YAAY,GAAG;AAC1B,KAAI,IAAI,SAAS,GAAG,0BAA0B,CAAC,aAAa,CAAC;AAC7D,OAAM,KAAK,CAAC;AACZ,KAAI,IAAI;AACR,OAAM,KAAK,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,SAAS,CAAC,CAAC,EAAE,EAAE,IAAI,GAAG;AAC1D,SAAQ,IAAI,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC;SACrB,EAAE,EAAE,CAAC;QACN;MACF,CAAC,OAAO,GAAG,EAAE;AAClB,OAAM,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACvB,MAAK,SAAS;AACd,OAAM,SAAS,CAAC,CAAC,EAAE,CAAC;MACf;IACF;AACH,GAAE,IAAI,aAAa,GAAG,SAAS,aAAa,CAAC,YAAY,EAAE;AAC3D,KAAI,IAAI,aAAa,GAAG,SAAS,CAAC,YAAY,CAAC,CAAC;AAChD,KAAI,IAAI,UAAU,GAAG,CAAC,YAAY,CAAC,CAAC;AACpC,KAAI,IAAI,QAAQ,GAAG,SAAS,QAAQ,CAAC,IAAI,EAAE;AAC3C,OAAM,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK;AAC5B,SAAQ,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACjC,OAAM,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OACvB,OAAO,QAAQ,CAAC;AACtB,MAAK,CAAC;AACN,KAAI,aAAa,CAAC,IAAI,CAAC,YAAY;AACnC,OAAM,OAAO,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;AACnC,MAAK,CAAC,CAAC;KACH,IAAI,OAAO,GAAG;OACZ,IAAI,YAAY,GAAG;SACjB,OAAO,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC1C;AACP,OAAM,GAAG,EAAE,SAAS,GAAG,GAAG;AAC1B,SAAQ,UAAU,CAAC,GAAG,EAAE,CAAC;QAClB;OACD,QAAQ,EAAE,QAAQ;AACxB,OAAM,QAAQ,EAAE,SAAS,QAAQ,CAAC,KAAK,EAAE;AACzC,SAAQ,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;AACtC,SAAQ,OAAO,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACxC;AACP,MAAK,CAAC;AACN,KAAI,QAAQ,CAAC,QAAQ,GAAG,OAAO,CAAC;AAChC,KAAI,QAAQ,CAAC,WAAW,GAAG,eAAe,CAAC;KACvC,OAAO,OAAO,CAAC;AACnB,IAAG,CAAC;AACJ,GAAE,SAAS,WAAW,CAAC,OAAO,EAAE;AAChC,KAAI,OAAO,CAAC,GAAG,EAAE,CAAC;IACf;AACH;AACA,GAAE,SAAS,gBAAgB,CAAC,GAAG,EAAE,GAAG,EAAE;KAClC,IAAI,GAAG,EAAE,GAAG,CAAC,KAAK,IAAI,UAAU,CAAC,WAAW,CAAC;KAC7C,IAAI,GAAG,EAAE,GAAG,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;IAC/C;AACH,GAAE,SAAS,aAAa,CAAC,QAAQ,EAAE;AACnC,KAAI,IAAI,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC;AACtC,KAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,OAAO;AAChC,KAAI,IAAI,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC;AAClC,KAAI,IAAI,SAAS,GAAG,IAAI,CAAC;AACzB,KAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,QAAQ,GAAG,QAAQ,CAAC,OAAO,EAAE;OAC1D,IAAI,QAAQ,GAAG,cAAc,CAAC,QAAQ,EAAE,QAAQ,CAAC,YAAY,EAAE;SAC7D,MAAM,EAAE,QAAQ;SAChB,KAAK,EAAE,CAAC;SACR,SAAS,EAAE,QAAQ;AAC3B,QAAO,CAAC,CAAC;AACT,OAAM,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAC3C,OAAM,IAAI,SAAS,EAAE,SAAS,CAAC,OAAO,GAAG,QAAQ,CAAC,KAAK,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC;OAC3E,SAAS,GAAG,QAAQ,CAAC;AAC3B,OAAM,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;MAC3B;IACF;GACD,SAAS,sBAAsB,CAAC,QAAQ,EAAE,gBAAgB,EAAE,KAAK,EAAE;AACrE,KAAI,IAAI,QAAQ,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;AAC5C,KAAI,IAAI,UAAU,GAAG,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;AAC7D,KAAI,IAAI,QAAQ,GAAG,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;AACxE,KAAI,IAAI,QAAQ,GAAG,IAAI,CAAC;AACxB,KAAI,IAAI,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;KACpB,KAAK,IAAI,IAAI,GAAG,QAAQ,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE;OAC/D,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC;OACjC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;MACpB;AACL,KAAI,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;AAC1D,OAAM,IAAI,SAAS,GAAG,QAAQ,CAAC;AAC/B,OAAM,IAAI,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;AACpC,OAAM,IAAI,IAAI,GAAG,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,GAAG,IAAI,CAAC;OACvD,IAAI,SAAS,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;OAC9B,IAAI,SAAS,IAAI,SAAS,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,EAAE;SAChD,QAAQ,GAAG,cAAc,CAAC,SAAS,EAAE,OAAO,CAAC,KAAK,EAAE;WAClD,MAAM,EAAE,QAAQ;WAChB,SAAS,EAAE,SAAS;AAC9B,WAAU,aAAa,EAAE,SAAS,CAAC,YAAY;WACrC,KAAK,EAAE,KAAK;AACtB,WAAU,KAAK,EAAE,UAAU,GAAG,UAAU,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC,KAAK;AAClF,UAAS,CAAC,CAAC;AACX,SAAQ,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACzB,QAAO,MAAM;AACb,SAAQ,QAAQ,GAAG,eAAe,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,OAAO,CAAC,KAAK,EAAE;WACzD,MAAM,EAAE,QAAQ;WAChB,KAAK,EAAE,KAAK;AACtB,WAAU,aAAa,EAAE,OAAO,CAAC,KAAK;AACtC,WAAU,IAAI,EAAE,OAAO,CAAC,IAAI;WAClB,KAAK,EAAE,KAAK;AACtB,UAAS,CAAC,CAAC;QACJ;AACP;AACA,OAAM,IAAI,KAAK,KAAK,CAAC,EAAE;AACvB,SAAQ,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC;QAC3B,MAAM,IAAI,SAAS,EAAE,SAAS,CAAC,OAAO,GAAG,QAAQ,CAAC;MACpD;KACD,IAAI,SAAS,GAAG,0BAA0B,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;AAC5D,OAAM,KAAK,CAAC;AACZ,KAAI,IAAI;AACR,OAAM,KAAK,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,SAAS,CAAC,CAAC,EAAE,EAAE,IAAI,GAAG;AAC1D,SAAQ,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;AAChC,SAAQ,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC9B;MACF,CAAC,OAAO,GAAG,EAAE;AAClB,OAAM,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACvB,MAAK,SAAS;AACd,OAAM,SAAS,CAAC,CAAC,EAAE,CAAC;MACf;AACL,KAAI,GAAG,CAAC,KAAK,EAAE,CAAC;IACb;AACH,GAAE,SAAS,WAAW,CAAC,KAAK,EAAE,MAAM,EAAE;AACtC,KAAI,KAAK,CAAC,KAAK,IAAI,UAAU,CAAC,QAAQ,CAAC;AACvC,KAAI,MAAM,GAAG,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC;KAChC,IAAI,MAAM,EAAE;OACV,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;OACtC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MAC5B;IACF;AACH,GAAE,IAAI,gBAAgB,GAAG,EAAE,CAAC;GAC1B,SAAS,iBAAiB,GAAG;KAC3B,OAAO,gBAAgB,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACtD;GACD,SAAS,iBAAiB,GAAG;AAC/B,KAAI,gBAAgB,CAAC,GAAG,EAAE,CAAC;IACxB;AACH,GAAE,SAAS,kBAAkB,CAAC,KAAK,EAAE;AACrC,KAAI,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC9B;GACD,SAAS,mBAAmB,GAAG;AACjC,KAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC;IAC7B;AACH,GAAE,SAAS,eAAe,CAAC,KAAK,EAAE;AAClC,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC;KACvB,OAAO,IAAI,EAAE;OACX,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;OACpC,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,EAAE;SACvC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AAC9C,QAAO,MAAM;AACb,SAAQ,eAAe,CAAC,IAAI,CAAC,CAAC;QACvB;AACP,OAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;MACrB;IACF;AACH,GAAE,SAAS,iBAAiB,CAAC,KAAK,EAAE;AACpC,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC;KACvB,OAAO,IAAI,EAAE;OACX,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,EAAE;SACvC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;AAC1C,QAAO,MAAM;AACb,SAAQ,iBAAiB,CAAC,IAAI,CAAC,CAAC;QACzB;AACP,OAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;MACrB;IACF;AACH,GAAE,SAAS,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE;AACpC,KAAI,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;AAC5B,KAAI,IAAI,KAAK,IAAI,KAAK,KAAK,OAAO,EAAE;AACpC,OAAM,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC9B,OAAM,IAAI,KAAK,CAAC,MAAM,EAAE;SAChB,IAAI,YAAY,GAAG,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC;AAC/C,SAAQ,IAAI,UAAU,GAAG,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,WAAW,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;SACrE,IAAI,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;AACvD,SAAQ,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,MAAM,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;AAC9E,QAAO,MAAM;AACb,SAAQ,IAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC;AACnC,SAAQ,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC3B;MACF;KACD,QAAQ,KAAK,CAAC,GAAG;OACf,KAAK,QAAQ,CAAC,QAAQ;SACpB,iBAAiB,EAAE,CAAC;AAC5B,SAAQ,IAAI,KAAK,GAAG,KAAK,CAAC,aAAa,IAAI,EAAE,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC,EAAE;AACxE,WAAU,KAAK,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,aAAa,GAAG,KAAK,CAAC,UAAU,CAAC;UAC/D;SACD,OAAO,KAAK,CAAC;OACf,KAAK,QAAQ,CAAC,eAAe;SAC3B,IAAI,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC;AACtC,SAAQ,WAAW,CAAC,GAAG,CAAC,CAAC;AACzB,SAAQ,OAAO;MACV;IACF;AACH,GAAE,SAAS,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE;AACpC,KAAI,KAAK,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC;AAC1B,KAAI,KAAK,CAAC,UAAU,IAAI,CAAC,KAAK,CAAC;AAC/B,KAAI,IAAI,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC;KAC/B,IAAI,QAAQ,EAAE,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAC7C,KAAI,gBAAgB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;KAClC,QAAQ,KAAK,CAAC,GAAG;OACf,KAAK,QAAQ,CAAC,SAAS;AAC7B,SAAQ,OAAO,KAAK,CAAC,YAAY,CAAC,IAAI,KAAK,QAAQ,GAAG,eAAe,CAAC,KAAK,CAAC,GAAG,iBAAiB,CAAC,KAAK,CAAC,CAAC;MACnG;IACF;AACH,GAAE,SAAS,cAAc,CAAC,UAAU,EAAE,MAAM,EAAE;AAC9C,KAAI,IAAI,IAAI,GAAG,UAAU,CAAC;AAC1B,KAAI,MAAM,CAAC,KAAK,GAAG,UAAU,CAAC;KAC1B,OAAO,IAAI,EAAE;AACjB,OAAM,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AAC3B,OAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;MACrB;IACF;AACH,GAAE,SAAS,kBAAkB,CAAC,UAAU,EAAE,MAAM,EAAE;AAClD,KAAI,qBAAqB,CAAC,IAAI,CAAC,YAAY;AAC3C,OAAM,OAAO,cAAc,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;AAChD,MAAK,CAAC,CAAC;IACJ;AACH,GAAE,SAAS,cAAc,CAAC,KAAK,EAAE;AACjC,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC;AACrB,KAAI,OAAO,IAAI,CAAC,SAAS,EAAE;OACrB,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,KAAK,IAAI,EAAE;AAC7C,SAAQ,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,WAAW,EAAE,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;AACjF,SAAQ,MAAM;QACP;AACP,OAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;MACvB;KACD,OAAO,IAAI,CAAC;IACb;AACH;GACE,SAAS,YAAY,CAAC,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE;KAC9C,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,WAAW,CAAC;AAC1G,KAAI,OAAO;OACL,SAAS,EAAE,SAAS;OACpB,IAAI,EAAE,IAAI;OACV,GAAG,EAAE,GAAG;OACR,OAAO,EAAE,OAAO;OAChB,IAAI,EAAE,IAAI;AAChB,MAAK,CAAC;IACH;AACH,GAAE,SAAS,aAAa,CAAC,KAAK,EAAE,MAAM,EAAE;AACxC,KAAI,IAAI,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC;AACnC,KAAI,IAAI,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC;KAClC,IAAI,CAAC,OAAO,EAAE;AAClB,OAAM,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC;AAC3B,MAAK,MAAM;AACX,OAAM,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;AACjC,OAAM,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC;MACvB;AACL,KAAI,WAAW,CAAC,OAAO,GAAG,MAAM,CAAC;IAC9B;GACD,SAAS,kBAAkB,CAAC,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE;KACxD,QAAQ,MAAM,CAAC,GAAG;AACtB,OAAM,KAAK,WAAW,CAAC,YAAY,CAAC;OAC9B,KAAK,WAAW,CAAC,WAAW;SAC1B;AACR,WAAU,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;AACvC,WAAU,IAAI,YAAY,GAAG,OAAO,OAAO,KAAK,UAAU,GAAG,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,GAAG,OAAO,CAAC;WAC3F,OAAO,MAAM,CAAC,GAAG,KAAK,WAAW,CAAC,YAAY,GAAG,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;UAC5G;OACH;SACE,OAAO,SAAS,CAAC;MACpB;IACF;AACH,GAAE,SAAS,qBAAqB,CAAC,aAAa,EAAE;AAChD,KAAI,OAAO;OACL,SAAS,EAAE,aAAa;OACxB,eAAe,EAAE,IAAI;OACrB,cAAc,EAAE,IAAI;AAC1B,OAAM,MAAM,EAAE;SACN,OAAO,EAAE,IAAI;QACd;OACD,OAAO,EAAE,EAAE;AACjB,MAAK,CAAC;IACH;GACD,SAAS,kBAAkB,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE;AAC9D,KAAI,IAAI,CAAC,KAAK,EAAE,OAAO;AACvB,KAAI,IAAI,eAAe,GAAG,KAAK,CAAC,eAAe;AAC/C,OAAM,cAAc,GAAG,KAAK,CAAC,cAAc;AAC3C,OAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;AAC5B,KAAI,IAAI,YAAY,GAAG,MAAM,CAAC,OAAO,CAAC;KAClC,IAAI,YAAY,EAAE;AACtB,OAAM,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;AAC5B,OAAM,IAAI,iBAAiB,GAAG,YAAY,CAAC;AAC3C,OAAM,IAAI,kBAAkB,GAAG,iBAAiB,CAAC,IAAI,CAAC;AACtD,OAAM,iBAAiB,CAAC,IAAI,GAAG,IAAI,CAAC;OAC9B,IAAI,cAAc,EAAE;AAC1B,SAAQ,cAAc,CAAC,IAAI,GAAG,kBAAkB,CAAC;AACjD,QAAO,MAAM;SACL,eAAe,GAAG,kBAAkB,CAAC;QACtC;OACD,cAAc,GAAG,iBAAiB,CAAC;MACpC;KACD,IAAI,eAAe,EAAE;AACzB,OAAM,IAAI,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC;AACrC,OAAM,IAAI,YAAY,GAAG,IAAI,CAAC;AAC9B,OAAM,IAAI,kBAAkB,GAAG,IAAI,CAAC;AACpC,OAAM,IAAI,iBAAiB,GAAG,IAAI,CAAC;AACnC,OAAM,IAAI,MAAM,GAAG,eAAe,CAAC;AACnC,OAAM,GAAG;AACT,SAAQ,IAAI,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC;SAC7B,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,UAAU,CAAC,EAAE;WAC7C,IAAI,KAAK,GAAG;AACtB,aAAY,SAAS,EAAE,MAAM,CAAC,SAAS;aAC3B,IAAI,EAAE,UAAU;AAC5B,aAAY,GAAG,EAAE,MAAM,CAAC,GAAG;AAC3B,aAAY,OAAO,EAAE,MAAM,CAAC,OAAO;aACvB,IAAI,EAAE,IAAI;AACtB,YAAW,CAAC;WACF,IAAI,CAAC,iBAAiB,EAAE;AAClC,aAAY,kBAAkB,GAAG,iBAAiB,GAAG,KAAK,CAAC;aAC/C,YAAY,GAAG,QAAQ,CAAC;AACpC,YAAW,MAAM;AACjB,aAAY,iBAAiB,CAAC,IAAI,GAAG,KAAK,CAAC;AAC3C,aAAY,iBAAiB,GAAG,iBAAiB,CAAC,IAAI,CAAC;YAC5C;AACX,UAAS,MAAM;AACf,WAAU,QAAQ,GAAG,kBAAkB,CAAC,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAC,YAAY,CAAC,CAAC;UACnE;AACT,SAAQ,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC;QACtB,QAAQ,MAAM,EAAE;OACjB,IAAI,CAAC,iBAAiB,EAAE;SACtB,YAAY,GAAG,QAAQ,CAAC;QACzB;OACD,IAAI,KAAK,EAAE;AACjB,SAAQ,KAAK,CAAC,KAAK,GAAG,YAAY,CAAC;AACnC,QAAO,MAAM;AACb,SAAQ,GAAG,CAAC,aAAa,GAAG,YAAY,CAAC;QAClC;AACP,OAAM,KAAK,CAAC,SAAS,GAAG,YAAY,CAAC;AACrC,OAAM,KAAK,CAAC,eAAe,GAAG,kBAAkB,CAAC;AACjD,OAAM,KAAK,CAAC,cAAc,GAAG,iBAAiB,CAAC;MAC1C;IACF;AACH,GAAE,SAAS,yBAAyB,CAAC,KAAK,EAAE;AAC5C,KAAI,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM;OACvB,IAAI,GAAG,KAAK,CAAC;KACf,OAAO,MAAM,EAAE;AACnB,OAAM,MAAM,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;OAC7D,IAAI,GAAG,MAAM,CAAC;AACpB,OAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;MACxB;KACD,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EAAE;OAClC,OAAO,IAAI,CAAC;MACb;AACL,KAAI,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;AAC9B,KAAI,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KAC5D,OAAO,IAAI,CAAC;IACb;AACH,GAAE,IAAI,iBAAiB,GAAG,KAAK,CAAC;AAChC,GAAE,SAAS,cAAc,CAAC,EAAE,EAAE,CAAC,EAAE;AACjC,KAAI,IAAI,yBAAyB,GAAG,iBAAiB,CAAC;KAClD,iBAAiB,GAAG,IAAI,CAAC;AAC7B,KAAI,IAAI;AACR,OAAM,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;AACnB,MAAK,SAAS;OACR,iBAAiB,GAAG,yBAAyB,CAAC;OAC9C,IAAI,CAAC,iBAAiB,EAAE;AAC9B,SAAQ,kBAAkB,IAAI,qBAAqB,CAAC,kBAAkB,CAAC,CAAC;QACjE;MACF;IACF;AACH,GAAE,SAAS,oBAAoB,CAAC,QAAQ,EAAE,KAAK,EAAE;KAC7C,IAAI,iBAAiB,CAAC;AAC1B,KAAI,IAAI,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC;AACtC,KAAI,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;AAC7B,KAAI,kBAAkB,CAAC,QAAQ,EAAE,IAAI,EAAE,QAAQ,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;AACpE,KAAI,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC;KACvC,IAAI,WAAW,GAAG,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,MAAM,IAAI,IAAI,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,iBAAiB,CAAC,YAAY,CAAC;AAChJ,KAAI,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,QAAQ,CAAC,YAAY,EAAE,SAAS,EAAE,WAAW,CAAC,EAAE;AACxF,OAAM,OAAO,aAAa,CAAC,QAAQ,CAAC,CAAC;MAChC;AACL,KAAI,IAAI,IAAI,CAAC,wBAAwB,EAAE;AACvC,OAAM,SAAS,GAAG,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;MAC7E;AACL,KAAI,IAAI,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;AACnC,KAAI,IAAI,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;AACnC,KAAI,QAAQ,CAAC,OAAO,GAAG,WAAW,CAAC;AACnC,KAAI,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,YAAY,CAAC;AAC3C,KAAI,QAAQ,CAAC,KAAK,GAAG,SAAS,CAAC;AAC/B,KAAI,QAAQ,CAAC,aAAa,GAAG,SAAS,CAAC;KACnC,sBAAsB,CAAC,QAAQ,EAAE,QAAQ,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,CAAC;AAC/D,KAAI,IAAI,QAAQ,CAAC,uBAAuB,EAAE;AAC1C,OAAM,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,uBAAuB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;MAC7E;IACF;GACD,SAAS,8BAA8B,CAAC,KAAK,EAAE,eAAe,EAAE,gBAAgB,EAAE,KAAK,EAAE;KACvF,IAAI,gBAAgB,CAAC;KACrB,IAAI,QAAQ,GAAG,CAAC,gBAAgB,GAAG,KAAK,CAAC,SAAS,MAAM,IAAI,IAAI,gBAAgB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,gBAAgB,CAAC,KAAK,CAAC;AAClI,KAAI,IAAI,SAAS,GAAG,cAAc,CAAC,QAAQ,EAAE;OACvC,IAAI,EAAE,QAAQ;OACd,QAAQ,EAAE,eAAe;AAC/B,MAAK,EAAE;OACD,MAAM,EAAE,KAAK;OACb,KAAK,EAAE,CAAC;OACR,KAAK,EAAE,KAAK;OACZ,SAAS,EAAE,QAAQ;AACzB,MAAK,CAAC,CAAC;AACP,KAAI,QAAQ,CAAC,SAAS,GAAG,SAAS,CAAC;AACnC,KAAI,IAAI,QAAQ,GAAG,QAAQ,CAAC,OAAO,GAAG,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE;OACjE,QAAQ,EAAE,gBAAgB;AAChC,MAAK,EAAE;OACD,MAAM,EAAE,KAAK;OACb,KAAK,EAAE,CAAC;OACR,KAAK,EAAE,UAAU,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC;AAC9C,MAAK,CAAC,GAAG,eAAe,CAAC,QAAQ,CAAC,QAAQ,EAAE;OACtC,QAAQ,EAAE,gBAAgB;AAChC,MAAK,EAAE;OACD,MAAM,EAAE,KAAK;OACb,KAAK,EAAE,CAAC;OACR,KAAK,EAAE,KAAK;AAClB,MAAK,CAAC,CAAC;AACP,KAAI,IAAI,QAAQ,CAAC,OAAO,EAAE,WAAW,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AAC/D,KAAI,SAAS,CAAC,OAAO,GAAG,QAAQ,CAAC;AACjC,KAAI,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;IACzB;GACD,SAAS,6BAA6B,CAAC,KAAK,EAAE,eAAe,EAAE,KAAK,EAAE;KACpE,IAAI,iBAAiB,CAAC;KACtB,IAAI,QAAQ,GAAG,CAAC,iBAAiB,GAAG,KAAK,CAAC,SAAS,MAAM,IAAI,IAAI,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,iBAAiB,CAAC,KAAK,CAAC;AACrI,KAAI,IAAI,SAAS,GAAG,cAAc,CAAC,QAAQ,EAAE;OACvC,IAAI,EAAE,SAAS;OACf,QAAQ,EAAE,eAAe;AAC/B,MAAK,EAAE;OACD,MAAM,EAAE,KAAK;OACb,KAAK,EAAE,CAAC;OACR,KAAK,EAAE,KAAK;OACZ,SAAS,EAAE,QAAQ;AACzB,MAAK,CAAC,CAAC;AACP,KAAI,QAAQ,CAAC,SAAS,GAAG,SAAS,CAAC;AACnC,KAAI,QAAQ,CAAC,OAAO,IAAI,WAAW,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AAC7D,KAAI,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;IACzB;AACH;AACA,GAAE,IAAI,MAAM,GAAG,CAAC,QAAQ,EAAE,eAAe,EAAE,cAAc,EAAE,SAAS,EAAE,gBAAgB,EAAE,kBAAkB,EAAE,yBAAyB,EAAE,oBAAoB,EAAE,2BAA2B,EAAE,qBAAqB,EAAE,4BAA4B,EAAE,SAAS,EAAE,OAAO,EAAE,gBAAgB,EAAE,QAAQ,EAAE,eAAe,EAAE,UAAU,EAAE,iBAAiB,EAAE,eAAe,EAAE,sBAAsB,EAAE,SAAS,EAAE,gBAAgB,EAAE,SAAS,EAAE,gBAAgB,EAAE,UAAU,EAAE,iBAAiB,EAAE,WAAW,EAAE,kBAAkB,EAAE,QAAQ,EAAE,eAAe,EAAE,SAAS,EAAE,gBAAgB,EAAE,WAAW,EAAE,kBAAkB,EAAE,YAAY,EAAE,mBAAmB,EAAE,SAAS,EAAE,gBAAgB,EAAE,SAAS,EAAE,gBAAgB,EAAE,WAAW,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,yBAAyB,EAAE,kBAAkB,EAAE,yBAAyB,EAAE,WAAW,EAAE,kBAAkB,EAAE,aAAa,EAAE,oBAAoB,EAAE,SAAS,EAAE,gBAAgB,EAAE,cAAc,EAAE,qBAAqB,EAAE,kBAAkB,EAAE,yBAAyB,EAAE,aAAa,EAAE,oBAAoB,EAAE,SAAS,EAAE,gBAAgB,EAAE,QAAQ,EAAE,eAAe,EAAE,WAAW,EAAE,kBAAkB,EAAE,YAAY,EAAE,mBAAmB,EAAE,cAAc,EAAE,qBAAqB,EAAE,UAAU,EAAE,iBAAiB,EAAE,UAAU,EAAE,iBAAiB,EAAE,WAAW,EAAE,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,cAAc,EAAE,qBAAqB,EAAE,gBAAgB,EAAE,uBAAuB,EAAE,WAAW,EAAE,kBAAkB,EAAE,YAAY,EAAE,mBAAmB,EAAE,SAAS,EAAE,gBAAgB,EAAE,eAAe,EAAE,sBAAsB,EAAE,eAAe,EAAE,sBAAsB,EAAE,QAAQ,EAAE,eAAe,EAAE,WAAW,EAAE,kBAAkB,EAAE,aAAa,EAAE,oBAAoB,EAAE,YAAY,EAAE,mBAAmB,EAAE,aAAa,EAAE,oBAAoB,EAAE,YAAY,EAAE,mBAAmB,EAAE,aAAa,EAAE,oBAAoB,EAAE,QAAQ,EAAE,eAAe,EAAE,aAAa,EAAE,oBAAoB,EAAE,cAAc,EAAE,cAAc,EAAE,aAAa,EAAE,oBAAoB,EAAE,YAAY,EAAE,mBAAmB,EAAE,aAAa,EAAE,oBAAoB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,EAAE,iBAAiB,EAAE,eAAe,EAAE,sBAAsB,EAAE,YAAY,EAAE,mBAAmB,EAAE,aAAa,EAAE,oBAAoB,EAAE,cAAc,EAAE,qBAAqB,EAAE,eAAe,EAAE,sBAAsB,EAAE,eAAe,EAAE,sBAAsB,EAAE,aAAa,EAAE,oBAAoB,EAAE,iBAAiB,EAAE,wBAAwB,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,eAAe,EAAE,sBAAsB,EAAE,cAAc,EAAE,qBAAqB,EAAE,qBAAqB,EAAE,4BAA4B,EAAE,sBAAsB,EAAE,6BAA6B,EAAE,UAAU,EAAE,iBAAiB,EAAE,SAAS,EAAE,gBAAgB,EAAE,kBAAkB,EAAE,yBAAyB,EAAE,gBAAgB,EAAE,uBAAuB,EAAE,sBAAsB,EAAE,6BAA6B,EAAE,iBAAiB,EAAE,wBAAwB,CAAC,CAAC;AACl2F,GAAE,IAAI,MAAM,GAAG,IAAI,OAAO,EAAE,CAAC;AAC7B,GAAE,IAAI,aAAa,GAAG,SAAS,aAAa,CAAC,IAAI,EAAE;AACnD,KAAI,IAAI,QAAQ,GAAG,SAAS,QAAQ,CAAC,SAAS,EAAE;OAC1C,OAAO,UAAU,CAAC,EAAE;SAClB,IAAI,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AACzC,SAAQ,IAAI,OAAO,GAAG,KAAK,CAAC;SACpB,OAAO,OAAO,EAAE;WACd,IAAI,OAAO,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,EAAE;aAC1C,IAAI,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9C,OAAO,IAAI,cAAc,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YACvC;AACX,WAAU,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;UAC1B;AACT,QAAO,CAAC;AACR,MAAK,CAAC;AACN,KAAI,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,OAAO,GAAG,MAAM,EAAE,EAAE,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;AAClE,OAAM,IAAI,SAAS,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC;AAClC,OAAM,IAAI,KAAK,GAAG,SAAS,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACnD,OAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,QAAQ,CAAC,SAAS,CAAC,EAAE,KAAK,CAAC,CAAC;MAC1D;AACL,IAAG,CAAC;AACJ;GACE,IAAI,SAAS,GAAG,CAAC,UAAU,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;AAC/C,GAAE,IAAI,OAAO,GAAG,SAAS,OAAO,CAAC,IAAI,EAAE;AACvC,KAAI,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AACjC,IAAG,CAAC;AACJ,GAAE,IAAI,WAAW,GAAG,SAAS,WAAW,CAAC,IAAI,EAAE;AAC/C,KAAI,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;AACxD,IAAG,CAAC;AACJ;GACE,IAAI,KAAK,GAAG,SAAS,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE;KACrC,OAAO,UAAU,GAAG,EAAE;OACpB,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC;AACrC,MAAK,CAAC;AACN,IAAG,CAAC;AACJ,GAAE,IAAI,MAAM,GAAG,SAAS,MAAM,CAAC,IAAI,EAAE;KACjC,OAAO,UAAU,GAAG,EAAE;AAC1B,OAAM,OAAO,EAAE,GAAG,IAAI,IAAI,CAAC,CAAC;AAC5B,MAAK,CAAC;AACN,IAAG,CAAC;AACJ,GAAE,SAAS,WAAW,CAAC,IAAI,EAAE;KACzB,OAAO,IAAI,KAAK,WAAW,GAAG,OAAO,GAAG,IAAI,CAAC;IAC9C;GACD,SAAS,mBAAmB,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE;KACtD,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AACjG;OACM,GAAG,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;AAC7C,MAAK,CAAC,CAAC;KACH,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AAC3G,OAAM,IAAI,GAAG,CAAC,YAAY,EAAE,GAAG,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;AAClH,MAAK,CAAC,CAAC;KACH,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,IAAI,EAAE,CAAC;KACxC,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,IAAI,EAAE,CAAC;KACxC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;AACxG,OAAM,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC5C,MAAK,CAAC,CAAC;KACH,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;OAClF,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AAC1B,MAAK,CAAC,CAAC;IACJ;AACH,GAAE,SAAS,gBAAgB,CAAC,KAAK,EAAE;KAC/B,IAAI,aAAa,GAAG,KAAK,CAAC,IAAI,KAAK,YAAY,CAAC;KAChD,IAAI,GAAG,GAAG,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KAC3F,mBAAmB,CAAC,GAAG,EAAE,EAAE,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC;KACjD,OAAO,GAAG,CAAC;IACZ;AACH;AACA,GAAE,SAAS,aAAa,CAAC,KAAK,EAAE;AAChC,KAAI,IAAI,cAAc,GAAG,KAAK,CAAC,MAAM,CAAC;KAClC,OAAO,cAAc,IAAI,cAAc,CAAC,MAAM,IAAI,cAAc,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,IAAI,cAAc,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EAAE;AACjJ,OAAM,cAAc,GAAG,cAAc,CAAC,MAAM,CAAC;MACxC;KACD,IAAI,CAAC,cAAc,EAAE,OAAO,KAAK,CAAC,SAAS,CAAC;AAChD,KAAI,OAAO,cAAc,CAAC,MAAM,GAAG,cAAc,CAAC,SAAS,GAAG,cAAc,CAAC,SAAS,CAAC,SAAS,CAAC;IAC9F;AACH,GAAE,SAAS,cAAc,CAAC,KAAK,EAAE;AACjC,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC;AACrB,KAAI,QAAQ,EAAE,OAAO,IAAI,EAAE;AAC3B,OAAM,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE;AAC5B,SAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,EAAE,OAAO,IAAI,CAAC;AACpF,SAAQ,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;QACpB;OACD,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACxC,OAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;AAC1B,OAAM,OAAO,IAAI,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EAAE;AACpF,SAAQ,IAAI,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,SAAS,QAAQ,CAAC;AAChF,SAAQ,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;AACjC,SAAQ,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACnB;OACD,IAAI,EAAE,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,SAAS,CAAC,EAAE;AAChD,SAAQ,OAAO,IAAI,CAAC,SAAS,CAAC;QACvB;MACF;IACF;AACH,GAAE,SAAS,UAAU,CAAC,KAAK,EAAE;KACzB,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC;AAC3F,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC,aAAa,CAAC;KAC/B,OAAO,IAAI,EAAE;OACX,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;OAC7B,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,MAAM,EAAE,CAAC;AACjD,OAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;MAClB;IACF;AACH,GAAE,SAAS,eAAe,CAAC,KAAK,EAAE;AAClC,KAAI,IAAI,SAAS,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC;AACzC,KAAI,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,KAAK,SAAS,EAAE;AAChG,OAAM,IAAI,MAAM,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;AACzC,OAAM,IAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC;AACjC,OAAM,IAAI,MAAM,EAAE,SAAS,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,KAAK,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;AACxF,OAAM,IAAI,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC;MACpD,MAAM,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,cAAc,EAAE;AACtD,OAAM,KAAK,CAAC,SAAS,CAAC,iBAAiB,EAAE,CAAC;MACrC,MAAM,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,iBAAiB,EAAE;AACzD,OAAM,UAAU,CAAC,KAAK,CAAC,CAAC;MACnB;KACD,KAAK,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC;IACtC;AACH,GAAE,SAAS,YAAY,CAAC,KAAK,EAAE;AAC/B,KAAI,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EAAE;AACjF,OAAM,mBAAmB,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,SAAS,CAAC,YAAY,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC;MACxF,MAAM,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,iBAAiB,EAAE;AACzD,OAAM,UAAU,CAAC,KAAK,CAAC,CAAC;AACxB,MAAK,MAAM,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,cAAc,IAAI,KAAK,CAAC,SAAS,YAAY,SAAS,EAAE;AAC9F,OAAM,IAAI,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC;OAC/B,IAAI,QAAQ,EAAE;AACpB,SAAQ,KAAK,CAAC,SAAS,CAAC,kBAAkB,CAAC,QAAQ,CAAC,YAAY,EAAE,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACrF;MACF;KACD,KAAK,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;IACnC;AACH,GAAE,SAAS,cAAc,CAAC,KAAK,EAAE;AACjC,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC;AACrB,KAAI,IAAI,SAAS,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC;KACrC,OAAO,SAAS,EAAE;AACtB,OAAM,IAAI,CAAC,IAAI,EAAE,MAAM;AACvB,OAAM,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,CAAC,aAAa,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EAAE;AACjF,SAAQ,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;AAC1B,SAAQ,SAAS;QACV;OACD,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAC5C,OAAM,OAAO,IAAI,KAAK,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;AACjE,OAAM,IAAI,IAAI,KAAK,KAAK,EAAE,MAAM;AAChC,OAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;MACrB;AACL,KAAI,IAAI,MAAM,GAAG,SAAS,MAAM,CAAC,IAAI,EAAE;OACjC,IAAI,IAAI,CAAC,KAAK,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC;AACxC,OAAM,IAAI,MAAM,GAAG,IAAI,CAAC;AACxB,OAAM,OAAO,MAAM,IAAI,MAAM,IAAI,KAAK,EAAE;AACxC,SAAQ,IAAI,MAAM,CAAC,GAAG,KAAK,QAAQ,CAAC,iBAAiB,EAAE,UAAU,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;AACrF,SAAQ,IAAI,MAAM,CAAC,SAAS,YAAY,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;SACtE,IAAI,MAAM,CAAC,OAAO,EAAE,OAAO,MAAM,CAAC,OAAO,CAAC;AAClD,SAAQ,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QACxB;AACP,MAAK,CAAC;KACF,OAAO,IAAI,EAAE,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;KACjC,KAAK,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;IACrC;AACH,GAAE,SAAS,UAAU,CAAC,KAAK,EAAE;KACzB,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EAAE,OAAO;AAChD,KAAI,IAAI,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,SAAS,EAAE,eAAe,CAAC,KAAK,CAAC,CAAC;AACnE,KAAI,IAAI,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,MAAM,EAAE,YAAY,CAAC,KAAK,CAAC,CAAC;AAC7D,KAAI,IAAI,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,cAAc,CAAC,KAAK,CAAC,CAAC;AACjE,KAAI,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB;AACH;AACA,GAAE,IAAI,kBAAkB,GAAG,IAAI,CAAC;AAChC,GAAE,IAAI,uBAAuB,GAAG,IAAI,CAAC;AACrC,GAAE,IAAI,sBAAsB,GAAG,IAAI,CAAC;AACpC,GAAE,IAAI,cAAc,GAAG,IAAI,CAAC;AAC5B,GAAE,SAAS,oBAAoB,CAAC,GAAG,EAAE;AACrC,KAAI,kBAAkB,GAAG,uBAAuB,GAAG,GAAG,CAAC,aAAa,CAAC;KACjE,cAAc,GAAG,GAAG,CAAC;IACtB;AACH,GAAE,SAAS,WAAW,CAAC,KAAK,EAAE;AAC9B,KAAI,OAAO;OACL,KAAK,EAAE,KAAK;OACZ,SAAS,EAAE,IAAI;OACf,UAAU,EAAE,IAAI;OAChB,KAAK,EAAE,IAAI;OACX,IAAI,EAAE,IAAI;AAChB,MAAK,CAAC;IACH;AACH,GAAE,SAAS,wBAAwB,CAAC,KAAK,EAAE;KACvC,IAAI,CAAC,uBAAuB,EAAE;OAC5B,uBAAuB,GAAG,kBAAkB,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;AACxE,OAAM,cAAc,CAAC,aAAa,GAAG,uBAAuB,CAAC;AAC7D,MAAK,MAAM,IAAI,CAAC,kBAAkB,EAAE;OAC9B,sBAAsB,CAAC,IAAI,GAAG,kBAAkB,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;MACvE;KACD,sBAAsB,GAAG,kBAAkB,CAAC;AAChD,KAAI,kBAAkB,GAAG,kBAAkB,CAAC,IAAI,CAAC;KAC7C,OAAO,sBAAsB,CAAC;IAC/B;AACH,GAAE,SAAS,gBAAgB,CAAC,IAAI,EAAE;AAClC,KAAI,IAAI,cAAc,CAAC,SAAS,EAAE,kBAAkB,CAAC,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,6BAA6B,CAAC,CAAC;IACnH;AACH,GAAE,SAAS,iBAAiB,CAAC,IAAI,EAAE;KAC/B,IAAI,CAAC,KAAK,GAAG,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACnD,KAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,CAAC;IACtE;GACD,SAAS,aAAa,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE;AAC7C,KAAI,IAAI,CAAC,KAAK,EAAE,OAAO;AACvB,KAAI,IAAI,OAAO,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;AACxC,KAAI,IAAI,IAAI,GAAG,iBAAiB,EAAE,CAAC;AACnC,KAAI,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC;AAC1B,KAAI,IAAI,MAAM,GAAG,YAAY,CAAC,KAAK,EAAE,cAAc,EAAE,EAAE,IAAI,EAAE,WAAW,CAAC,YAAY,CAAC,CAAC;KACnF,aAAa,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;AACtC,KAAI,qBAAqB,CAAC,OAAO,CAAC,CAAC;IAChC;AACH;AACA,GAAE,SAAS,mBAAmB,CAAC,QAAQ,EAAE,KAAK,EAAE;KAC5C,IAAI,iBAAiB,CAAC;KACtB,IAAI,QAAQ,GAAG,QAAQ,CAAC,SAAS,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAC;AACjE,KAAI,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;AAC7B,KAAI,IAAI,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;KAClD,IAAI,WAAW,GAAG,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,MAAM,IAAI,IAAI,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,iBAAiB,CAAC,YAAY,CAAC;AAChJ,KAAI,IAAI,IAAI,CAAC,wBAAwB,EAAE,SAAS,GAAG,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;AACnH,KAAI,QAAQ,CAAC,OAAO,GAAG,WAAW,CAAC;AACnC,KAAI,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,YAAY,CAAC;AAC3C,KAAI,QAAQ,CAAC,KAAK,GAAG,SAAS,CAAC;AAC/B,KAAI,QAAQ,CAAC,aAAa,GAAG,SAAS,CAAC;KACnC,sBAAsB,CAAC,QAAQ,EAAE,QAAQ,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,CAAC;IAC5D;GACD,SAAS,6BAA6B,CAAC,KAAK,EAAE,eAAe,EAAE,gBAAgB,EAAE,KAAK,EAAE;KACtF,IAAI,SAAS,GAAG,eAAe,CAAC,QAAQ,CAAC,SAAS,EAAE;OAClD,IAAI,EAAE,QAAQ;OACd,QAAQ,EAAE,eAAe;AAC/B,MAAK,EAAE;OACD,MAAM,EAAE,KAAK;OACb,KAAK,EAAE,CAAC;OACR,KAAK,EAAE,KAAK;AAClB,MAAK,CAAC,CAAC;KACH,IAAI,QAAQ,GAAG,eAAe,CAAC,QAAQ,CAAC,QAAQ,EAAE;OAChD,QAAQ,EAAE,gBAAgB;AAChC,MAAK,EAAE;OACD,MAAM,EAAE,KAAK;OACb,KAAK,EAAE,CAAC;OACR,KAAK,EAAE,KAAK;AAClB,MAAK,CAAC,CAAC;AACP,KAAI,SAAS,CAAC,OAAO,GAAG,QAAQ,CAAC;AACjC,KAAI,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;IACzB;GACD,SAAS,4BAA4B,CAAC,KAAK,EAAE,eAAe,EAAE,KAAK,EAAE;KACnE,IAAI,SAAS,GAAG,eAAe,CAAC,QAAQ,CAAC,SAAS,EAAE;OAClD,IAAI,EAAE,SAAS;OACf,QAAQ,EAAE,eAAe;AAC/B,MAAK,EAAE;OACD,MAAM,EAAE,KAAK;OACb,KAAK,EAAE,KAAK;AAClB,MAAK,CAAC,CAAC;AACP,KAAI,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;IACzB;AACH;AACA,GAAE,SAAS,SAAS,CAAC,QAAQ,EAAE,WAAW,EAAE;KACxC,IAAI,qBAAqB,CAAC;AAC9B,KAAI,oBAAoB,CAAC,QAAQ,CAAC,CAAC;KAC/B,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,KAAK,EAAE,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,UAAU,EAAE,WAAW,CAAC,EAAE;OACrG,IAAI,mBAAmB,CAAC;AAC9B,OAAM,kBAAkB,CAAC,CAAC,CAAC,mBAAmB,GAAG,QAAQ,CAAC,SAAS,MAAM,IAAI,IAAI,mBAAmB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,mBAAmB,CAAC,KAAK,KAAK,IAAI,EAAE,QAAQ,CAAC,CAAC;OACnK,OAAO,IAAI,CAAC;MACb;KACD,QAAQ,QAAQ,CAAC,GAAG;AACxB,OAAM,KAAK,QAAQ,CAAC,iBAAiB,CAAC;OAChC,KAAK,QAAQ,CAAC,eAAe;AACnC,SAAQ,wBAAwB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AACxD,SAAQ,MAAM;OACR,KAAK,QAAQ,CAAC,cAAc;AAClC,SAAQ,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AACrD,SAAQ,MAAM;OACR,KAAK,QAAQ,CAAC,QAAQ;SACpB,IAAI,wBAAwB,CAAC,QAAQ,EAAE,WAAW,CAAC,EAAE,OAAO,IAAI,CAAC;AACzE,SAAQ,MAAM;OACR,KAAK,QAAQ,CAAC,SAAS;SACrB,IAAI,yBAAyB,CAAC,QAAQ,EAAE,WAAW,CAAC,EAAE,OAAO,IAAI,CAAC;AAC1E,SAAQ,MAAM;OACR,KAAK,QAAQ,CAAC,QAAQ;SACpB,sBAAsB,CAAC,QAAQ,EAAE,CAAC,qBAAqB,GAAG,QAAQ,CAAC,YAAY,MAAM,IAAI,IAAI,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AAC9L,SAAQ,MAAM;AACd,OAAM,KAAK,QAAQ,CAAC,QAAQ,CAAC;AAC7B,OAAM,KAAK,QAAQ,CAAC,aAAa,CAAC;OAC5B,KAAK,QAAQ,CAAC,QAAQ;AAC5B,SAAQ,oBAAoB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AACpD,SAAQ,MAAM;MACT;KACD,OAAO,KAAK,CAAC;IACd;AACH,GAAE,IAAI,IAAI,GAAG,KAAK,CAAC;AACnB,GAAE,SAAS,yBAAyB,CAAC,KAAK,EAAE,KAAK,EAAE;KAC/C,IAAI,QAAQ,GAAG,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC;KAC3C,IAAI,KAAK,CAAC,YAAY,CAAC,IAAI,KAAK,QAAQ,EAAE;OACxC,IAAI,gBAAgB,CAAC;AAC3B,OAAM,KAAK,CAAC,KAAK,IAAI,QAAQ,CAAC;AAC9B,OAAM,kBAAkB,CAAC,CAAC,CAAC,gBAAgB,GAAG,KAAK,CAAC,SAAS,MAAM,IAAI,IAAI,gBAAgB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,gBAAgB,CAAC,KAAK,KAAK,IAAI,EAAE,KAAK,CAAC,CAAC;OACpJ,OAAO,IAAI,CAAC;MACb;KACD,IAAI,cAAc,CAAC,KAAK,CAAC,KAAK,EAAE,eAAe,CAAC,IAAI,IAAI,EAAE;OACxD,IAAI,iBAAiB,CAAC;OACtB,IAAI,GAAG,KAAK,CAAC;AACnB,OAAM,kBAAkB,CAAC,CAAC,CAAC,iBAAiB,GAAG,KAAK,CAAC,SAAS,MAAM,IAAI,IAAI,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,iBAAiB,CAAC,KAAK,KAAK,IAAI,EAAE,KAAK,CAAC,CAAC;OACvJ,OAAO,IAAI,CAAC;MACb;KACD,sBAAsB,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;IAChD;AACH,GAAE,SAAS,wBAAwB,CAAC,QAAQ,EAAE,KAAK,EAAE;AACrD,KAAI,IAAI,OAAO,GAAG,QAAQ,CAAC,SAAS,CAAC;KACjC,IAAI,mBAAmB,GAAG,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC;KACzD,IAAI,oBAAoB,GAAG,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC;AAC9D,KAAI,IAAI,YAAY,GAAG,KAAK,CAAC;AAC7B,KAAI,IAAI,UAAU,GAAG,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC,UAAU,MAAM,KAAK,CAAC,IAAI,CAAC;KACpE,IAAI,UAAU,EAAE;AACpB,OAAM,IAAI,cAAc,CAAC,QAAQ,CAAC,UAAU,EAAE,eAAe,CAAC,IAAI,QAAQ,CAAC,SAAS,EAAE;SAC9E,IAAI,oBAAoB,CAAC;SACzB,kBAAkB,CAAC,CAAC,oBAAoB,GAAG,QAAQ,CAAC,SAAS,MAAM,IAAI,IAAI,oBAAoB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,oBAAoB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;SAC5J,OAAO,IAAI,CAAC;QACb;OACD,YAAY,GAAG,IAAI,CAAC;OACpB,QAAQ,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;MAC1C;AACL,KAAI,kBAAkB,CAAC,QAAQ,CAAC,CAAC;KAC7B,IAAI,OAAO,EAAE;OACX,IAAI,YAAY,EAAE,8BAA8B,CAAC,QAAQ,EAAE,mBAAmB,EAAE,oBAAoB,EAAE,KAAK,CAAC,CAAC,KAAK,6BAA6B,CAAC,QAAQ,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;AAC5L,MAAK,MAAM;OACL,IAAI,YAAY,EAAE,6BAA6B,CAAC,QAAQ,EAAE,mBAAmB,EAAE,oBAAoB,EAAE,KAAK,CAAC,CAAC,KAAK,4BAA4B,CAAC,QAAQ,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;MACrL;KACD,OAAO,KAAK,CAAC;IACd;AACH,GAAE,SAAS,wBAAwB,CAAC,QAAQ,EAAE,KAAK,EAAE;KACjD,IAAI,gBAAgB,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;KAC5D,sBAAsB,CAAC,QAAQ,EAAE,gBAAgB,EAAE,KAAK,CAAC,CAAC;IAC3D;AACH,GAAE,SAAS,qBAAqB,CAAC,QAAQ,EAAE,KAAK,EAAE;AAClD,KAAI,IAAI,QAAQ,CAAC,SAAS,EAAE,oBAAoB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC,KAAK,mBAAmB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;IACzG;AACH,GAAE,SAAS,oBAAoB,CAAC,QAAQ,EAAE,KAAK,EAAE;AACjD,KAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;OACvB,QAAQ,CAAC,SAAS,GAAG,gBAAgB,CAAC,QAAQ,CAAC,CAAC;AACtD,OAAM,IAAI,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,OAAO,GAAG,QAAQ,CAAC,SAAS,CAAC;MAC7D;KACD,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;KACzC,IAAI,gBAAgB,GAAG,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC;KACtD,sBAAsB,CAAC,QAAQ,EAAE,gBAAgB,EAAE,KAAK,CAAC,CAAC;IAC3D;AACH;AACA,GAAE,IAAI,cAAc,GAAG,IAAI,CAAC;AAC5B,GAAE,IAAI,kBAAkB,GAAG,IAAI,CAAC;AAChC,GAAE,IAAI,6BAA6B,GAAG,OAAO,CAAC;GAC5C,IAAI,kBAAkB,GAAG;KACvB,UAAU,EAAE,IAAI;AACpB,IAAG,CAAC;AACJ,GAAE,IAAI,WAAW,GAAG,EAAE,CAAC;AACvB,GAAE,IAAI,qBAAqB,GAAG,EAAE,CAAC;AACjC,GAAE,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AAClE,GAAE,SAAS,MAAM,CAAC,QAAQ,EAAE,YAAY,EAAE;AAC1C,KAAI,IAAI,CAAC,YAAY,EAAE,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;KAChE,IAAI,aAAa,GAAG,YAAY;AACpC,OAAM,aAAa,GAAG,aAAa,CAAC,WAAW,CAAC;AAChD,KAAI,IAAI,CAAC,aAAa,EAAE,aAAa,GAAG,YAAY,CAAC,WAAW,GAAG,eAAe,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;KAC1G,iBAAiB,CAAC,QAAQ,EAAE,YAAY,EAAE,aAAa,CAAC,CAAC;KACzD,OAAO,YAAY,CAAC;IACrB;GACD,SAAS,UAAU,GAAG;KACpB,IAAI,aAAa,GAAG,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAC/D,KAAI,OAAO;OACL,MAAM,EAAE,SAAS,MAAM,CAAC,QAAQ,EAAE,GAAG,EAAE;SACrC,OAAO,iBAAiB,CAAC,QAAQ,EAAE,GAAG,EAAE,aAAa,CAAC,CAAC;QACxD;AACP,OAAM,OAAO,EAAE,SAAS,OAAO,GAAG,EAAE;AACpC,MAAK,CAAC;IACH;AACH,GAAE,SAAS,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE;AAC5C,KAAI,OAAO;OACL,SAAS,EAAE,SAAS;OACpB,IAAI,EAAE,IAAI;OACV,YAAY,EAAE,OAAO;OACrB,YAAY,EAAE,OAAO;OACrB,WAAW,EAAE,OAAO;OACpB,YAAY,EAAE,IAAI;OAClB,YAAY,EAAE,IAAI;OAClB,UAAU,EAAE,OAAO;AACzB,MAAK,CAAC;IACH;AACH,GAAE,SAAS,iBAAiB,CAAC,QAAQ,EAAE;KACnC,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AACvF,KAAI,IAAI,aAAa,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;AACxE,KAAI,IAAI,SAAS,GAAG,aAAa,CAAC,SAAS;AAC3C,OAAM,OAAO,GAAG,aAAa,CAAC,OAAO;AACrC,OAAM,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC;KAC5B,IAAI,CAAC,SAAS,EAAE,aAAa,CAAC,SAAS,GAAG,GAAG,CAAC;KAC9C,IAAI,YAAY,GAAG;OACjB,QAAQ,EAAE,QAAQ;AACxB,MAAK,CAAC;KACF,IAAI,IAAI,GAAG,OAAO,GAAG,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE;AAC/D,OAAM,KAAK,EAAE,OAAO,CAAC,KAAK;AAC1B,OAAM,OAAO,EAAE,OAAO,CAAC,OAAO;MACzB,CAAC,GAAG,eAAe,CAAC,QAAQ,CAAC,QAAQ,EAAE,YAAY,EAAE;OACpD,SAAS,EAAE,aAAa;OACxB,IAAI,EAAE,IAAI;AAChB,MAAK,CAAC,CAAC;AACP,KAAI,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC;AACjC,KAAI,aAAa,CAAC,YAAY,IAAI,QAAQ,CAAC;AAC3C,KAAI,IAAI,CAAC,KAAK,IAAI,QAAQ,CAAC;KACvB,kBAAkB,GAAG,aAAa,CAAC;AACvC,KAAI,cAAc,CAAC,aAAa,CAAC,CAAC;IAC/B;AACH,GAAE,SAAS,cAAc,CAAC,IAAI,EAAE;AAChC,KAAI,qBAAqB,CAAC,IAAI,CAAC,CAAC;IAC7B;AACH,GAAE,SAAS,qBAAqB,CAAC,KAAK,EAAE;AACxC,KAAI,IAAI,IAAI,GAAG,yBAAyB,CAAC,KAAK,CAAC,CAAC;KAC5C,kBAAkB,GAAG,IAAI,CAAC;AAC9B,KAAI,IAAI,CAAC,IAAI,EAAE,OAAO;KAClB,IAAI,CAAC,iBAAiB,EAAE,qBAAqB,CAAC,IAAI,CAAC,CAAC;IACrD;AACH,GAAE,SAAS,qBAAqB,CAAC,IAAI,EAAE;AACvC,KAAI,IAAI,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;KAC/B,6BAA6B,GAAG,KAAK,CAAC;AAC1C,KAAI,IAAI,CAAC,YAAY,IAAI,CAAC,KAAK,CAAC;KAC5B,IAAI,IAAI,CAAC,YAAY,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE;AACtD,OAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC;AACxC,OAAM,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAC/B,OAAM,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,CAAC;AAC3C,OAAM,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC;OAC1B,YAAY,EAAE,CAAC;MAChB;AACL,KAAI,IAAI,QAAQ,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;AACzC,KAAI,IAAI,KAAK,KAAK,OAAO,EAAE;AAC3B,OAAM,OAAO;AACb,MAAK,MAAM,IAAI,KAAK,KAAK,QAAQ,EAAE;AACnC,OAAM,OAAO,qBAAqB,CAAC,IAAI,CAAC,CAAC;AACzC,MAAK,MAAM;AACX,OAAM,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC,QAAQ,EAAE,2BAA2B,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;AACnG,OAAM,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;MACzB;IACF;AACH,GAAE,SAAS,YAAY,CAAC,IAAI,EAAE;AAC9B,KAAI,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AACzC,KAAI,OAAO,sBAAsB,CAAC,YAAY,CAAC,CAAC;IAC7C;AACH,GAAE,SAAS,qBAAqB,CAAC,IAAI,EAAE;AACvC,KAAI,WAAW,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IACjC;AACH,GAAE,SAAS,2BAA2B,CAAC,IAAI,EAAE;AAC7C,KAAI,OAAO,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IACpC;GACD,SAAS,YAAY,GAAG;KACtB,mBAAmB,EAAE,CAAC;KACtB,WAAW,GAAG,EAAE,CAAC;AACrB,KAAI,qBAAqB,CAAC,MAAM,GAAG,CAAC,CAAC;IAClC;AACH,GAAE,SAAS,WAAW,CAAC,IAAI,EAAE,QAAQ,EAAE;AACvC,KAAI,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC/B,KAAI,IAAI,CAAC,OAAO,EAAE,OAAO;KACrB,YAAY,EAAE,CAAC;KACf,cAAc,GAAG,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,YAAY,EAAE;OAC7D,SAAS,EAAE,OAAO;AACxB,MAAK,CAAC,CAAC;KACH,OAAO,cAAc,EAAE;AAC3B,OAAM,IAAI;AACV,SAAQ,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC,OAAO,KAAK,EAAE;SACd,cAAc,GAAG,UAAU,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QACpD;MACF;IACF;AACH,GAAE,SAAS,YAAY,CAAC,IAAI,EAAE;KAC1B,OAAO,cAAc,EAAE;AAC3B,OAAM,cAAc,GAAG,iBAAiB,CAAC,cAAc,CAAC,CAAC;MACpD;AACL,KAAI,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;KACrC,IAAI,YAAY,EAAE;AACtB,OAAM,aAAa,CAAC,YAAY,CAAC,CAAC;MAC7B;IACF;AACH,GAAE,SAAS,QAAQ,CAAC,IAAI,EAAE;AAC1B,KAAI,OAAO,cAAc,IAAI,CAAC,WAAW,EAAE,EAAE;AAC7C,OAAM,cAAc,GAAG,iBAAiB,CAAC,cAAc,CAAC,CAAC;MACpD;AACL,KAAI,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;KACrC,IAAI,YAAY,EAAE;AACtB,OAAM,aAAa,CAAC,YAAY,CAAC,CAAC;AAClC,MAAK,MAAM;AACX,OAAM,IAAI,QAAQ,GAAG,cAAc,CAAC;AACpC,OAAM,OAAO,YAAY;SACjB,cAAc,GAAG,QAAQ,CAAC;AAClC,SAAQ,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAC;AAC9B,QAAO,CAAC;MACH;IACF;AACH,GAAE,SAAS,iBAAiB,CAAC,QAAQ,EAAE;KACnC,IAAI,IAAI,GAAG,SAAS,CAAC,QAAQ,EAAE,6BAA6B,CAAC,CAAC;AAClE,KAAI,QAAQ,CAAC,aAAa,GAAG,QAAQ,CAAC,YAAY,CAAC;AACnD,KAAI,IAAI,QAAQ,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE;AACjC,OAAM,OAAO,QAAQ,CAAC,KAAK,CAAC;MACvB;AACL,KAAI,IAAI,GAAG,GAAG,QAAQ,CAAC;KACnB,OAAO,GAAG,EAAE;AAChB,OAAM,YAAY,CAAC,GAAG,CAAC,CAAC;AACxB,OAAM,IAAI,GAAG,CAAC,OAAO,EAAE;AACvB,SAAQ,OAAO,GAAG,CAAC,OAAO,CAAC;QACpB;AACP,OAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;MAClB;IACF;AACH,GAAE,SAAS,YAAY,CAAC,KAAK,EAAE;AAC/B,KAAI,UAAU,CAAC,KAAK,EAAE,6BAA6B,CAAC,CAAC;IAClD;GACD,SAAS,YAAY,GAAG;AAC1B,KAAI,IAAI,SAAS,GAAG,0BAA0B,CAAC,qBAAqB,CAAC;AACrE,OAAM,KAAK,CAAC;AACZ,KAAI,IAAI;AACR,OAAM,KAAK,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,SAAS,CAAC,CAAC,EAAE,EAAE,IAAI,GAAG;AAC1D,SAAQ,IAAI,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC;SACrB,EAAE,EAAE,CAAC;QACN;MACF,CAAC,OAAO,GAAG,EAAE;AAClB,OAAM,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACvB,MAAK,SAAS;AACd,OAAM,SAAS,CAAC,CAAC,EAAE,CAAC;MACf;AACL,KAAI,IAAI,UAAU,GAAG,0BAA0B,CAAC,WAAW,CAAC;AAC5D,OAAM,MAAM,CAAC;AACb,KAAI,IAAI;AACR,OAAM,KAAK,UAAU,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC,EAAE,EAAE,IAAI,GAAG;AAC7D,SAAQ,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;AAC7B,SAAQ,UAAU,CAAC,CAAC,EAAE,6BAA6B,CAAC,CAAC;QAC9C;MACF,CAAC,OAAO,GAAG,EAAE;AAClB,OAAM,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACxB,MAAK,SAAS;AACd,OAAM,UAAU,CAAC,CAAC,EAAE,CAAC;MAChB;IACF;AACH,GAAE,SAAS,aAAa,CAAC,KAAK,EAAE;KAC5B,YAAY,EAAE,CAAC;KACf,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,EAAE,OAAO,CAAC,UAAU,CAAC,EAAE;AAC/C,OAAM,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC;AAC3B,MAAK,CAAC,CAAC;AACP,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC;AAC/B,KAAI,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,KAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KACzB,cAAc,GAAG,IAAI,CAAC;AAC1B,KAAI,qBAAqB,CAAC,IAAI,CAAC,CAAC;IAC7B;AACH;AACA,GAAE,SAAS,kBAAkB,CAAC,KAAK,EAAE;AACrC,KAAI,IAAI,IAAI,GAAG,KAAK,CAAC;AACrB,KAAI,OAAO,IAAI,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,CAAC,QAAQ,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;KAClE,OAAO,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;IAC3C;AACH,GAAE,SAAS,kBAAkB,CAAC,KAAK,EAAE,OAAO,EAAE;AAC9C,KAAI,IAAI,IAAI,GAAG,SAAS,IAAI,GAAG;AAC/B,OAAM,IAAI,QAAQ,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC;OACzC,IAAI,QAAQ,EAAE,QAAQ,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC;OAC5C,IAAI,IAAI,GAAG,QAAQ,GAAG,yBAAyB,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;AACvE,OAAM,IAAI,IAAI,qBAAqB,CAAC,IAAI,CAAC,CAAC;AAC1C,MAAK,CAAC;KACF,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC1B;GACD,SAAS,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE;AACtD,KAAI,IAAI,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC;AACjC,KAAI,IAAI,QAAQ,GAAG,IAAI,CAAC;AACxB,KAAI,IAAI,KAAK,YAAY,iBAAiB,EAAE;AAC5C,OAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC;AAC5B,OAAM,IAAI,gBAAgB,GAAG,iBAAiB,EAAE,CAAC;OAC3C,IAAI,gBAAgB,EAAE;AAC5B,SAAQ,gBAAgB,CAAC,KAAK,IAAI,KAAK,CAAC,aAAa,CAAC;SAC9C,IAAI,gBAAgB,CAAC,aAAa,KAAK,KAAK,EAAE,QAAQ,GAAG,KAAK,CAAC;AACvE,SAAQ,gBAAgB,CAAC,aAAa,GAAG,KAAK,CAAC;QACxC;MACF;AACL,KAAI,IAAI,KAAK,YAAY,OAAO,IAAI,QAAQ,EAAE;AAC9C,OAAM,kBAAkB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;MAClC;AACL,KAAI,KAAK,IAAI,OAAO,GAAG,KAAK,EAAE,OAAO,EAAE,OAAO,GAAG,OAAO,CAAC,MAAM,EAAE;AACjE,OAAM,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC;AAC3B,OAAM,IAAI,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;AACrC,OAAM,IAAI,IAAI,EAAE,OAAO,IAAI,CAAC;OACtB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,KAAK,SAAS,YAAY,SAAS,EAAE;AAC3E,SAAQ,IAAI;AACZ,WAAU,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;AAC5B,WAAU,IAAI,IAAI,IAAI,IAAI,CAAC,wBAAwB,EAAE;aACzC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC,CAAC;aACzD,OAAO,GAAG,IAAI,CAAC;YAChB;AACX,WAAU,IAAI,SAAS,CAAC,iBAAiB,EAAE;aAC/B,SAAS,CAAC,iBAAiB,CAAC,KAAK,EAAE,SAAS,IAAI,EAAE,CAAC,CAAC;aACpD,OAAO,GAAG,IAAI,CAAC;YAChB;WACD,IAAI,OAAO,EAAE;AACvB,aAAY,OAAO;YACR;UACF,CAAC,OAAO,CAAC,EAAE;WACV,KAAK,GAAG,CAAC,CAAC;UACX;QACF;MACF;KACD,MAAM,KAAK,CAAC;IACb;GACD,IAAI,iBAAiB,gBAAgB,YAAY,CAAC,SAAS,iBAAiB,CAAC,OAAO,EAAE;AACxF,KAAI,eAAe,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;KACzC,eAAe,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;AAC7C,KAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC3B,IAAG,CAAC,CAAC;AACL;AACA,GAAE,SAAS,YAAY,CAAC,QAAQ,EAAE,UAAU,EAAE;AAC9C,KAAI,IAAI,SAAS,GAAG,QAAQ,CAAC,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,CAAC;KACxF,OAAO,SAAS,EAAE;AACtB,OAAM,IAAI,SAAS,KAAK,UAAU,CAAC,SAAS,EAAE;SACtC,OAAO,IAAI,CAAC;QACb;OACD,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;MAC9C;KACD,OAAO,KAAK,CAAC;IACd;GACD,IAAI,IAAI,GAAG,SAAS,IAAI,CAAC,EAAE,EAAE,IAAI,EAAE;AACrC,KAAI,OAAO,YAAY;OACjB,KAAK,IAAI,IAAI,GAAG,SAAS,CAAC,MAAM,EAAE,IAAI,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,EAAE,IAAI,EAAE,EAAE;SACvF,IAAI,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;QAC9B;AACP,OAAM,OAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE;SACpC,UAAU,CAAC,YAAY;AAC/B,WAAU,OAAO,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;UACxC,EAAE,IAAI,CAAC,CAAC;AACjB,QAAO,CAAC,CAAC;AACT,MAAK,CAAC;AACN,IAAG,CAAC;AACJ,GAAE,IAAI,SAAS,GAAG,SAAS,SAAS,CAAC,UAAU,EAAE;AACjD,KAAI,OAAO;OACL,OAAO,EAAE,UAAU;AACzB,MAAK,CAAC;AACN,IAAG,CAAC;AACJ,GAAE,IAAI,UAAU,GAAG,SAAS,UAAU,CAAC,MAAM,EAAE;KAC3C,OAAO,UAAU,KAAK,EAAE;OACtB,OAAO,MAAM,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AACtC,MAAK,CAAC;AACN,IAAG,CAAC;AACJ,GAAE,IAAI,WAAW,GAAG,SAAS,WAAW,CAAC,OAAO,EAAE;KAC9C,IAAI,MAAM,GAAG,SAAS;AAC1B,OAAM,MAAM,CAAC;KACT,IAAI,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE;OACrC,MAAM,GAAG,WAAW,CAAC;OACrB,MAAM,GAAG,GAAG,CAAC;MACd,EAAE,UAAU,MAAM,EAAE;OACnB,MAAM,GAAG,UAAU,CAAC;OACpB,MAAM,GAAG,MAAM,CAAC;AACtB,MAAK,CAAC,CAAC;AACP,KAAI,OAAO;AACX,OAAM,IAAI,EAAE,SAAS,IAAI,GAAG;AAC5B,SAAQ,QAAQ,MAAM;AACtB,WAAU,KAAK,SAAS;AACxB,aAAY,MAAM,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAC9C,WAAU,KAAK,WAAW;aACd,OAAO,MAAM,CAAC;WAChB,KAAK,UAAU,CAAC;WAChB;aACE,MAAM,MAAM,CAAC;UAChB;QACF;AACP,MAAK,CAAC;AACN,IAAG,CAAC;AACJ,GAAE,IAAI,IAAI,GAAG,SAAS,IAAI,CAAC,IAAI,EAAE;AACjC,KAAI,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC;AACnB,KAAI,IAAI,YAAY,GAAG,WAAW,CAAC,CAAC,CAAC;AACrC,OAAM,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC;KAC3B,OAAO,UAAU,KAAK,EAAE;OACtB,OAAO,aAAa,CAAC,IAAI,EAAE,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AAClD,MAAK,CAAC;AACN,IAAG,CAAC;AACJ;AACA,GAAE,IAAI,YAAY,GAAG,cAAc,CAAC;GAClC,IAAI,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;GAC9C,IAAI,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;GAC5C,IAAI,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;GAC9C,IAAI,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;GAChD,IAAI,eAAe,GAAG,MAAM,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;AAC9D,GAAE,IAAI,MAAM,GAAG,SAAS,MAAM,CAAC,IAAI,EAAE;AACrC,KAAI,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI;AACxB,OAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC/B,KAAI,QAAQ,QAAQ;AACpB,OAAM,KAAK,QAAQ;AACnB,SAAQ,OAAO,QAAQ,CAAC,QAAQ,CAAC;AACjC,OAAM,KAAK,QAAQ;AACnB,SAAQ,OAAO,QAAQ,CAAC,QAAQ,CAAC;AACjC,OAAM,KAAK,SAAS;AACpB,SAAQ,OAAO,QAAQ,CAAC,SAAS,CAAC;AAClC,OAAM,KAAK,eAAe;AAC1B,SAAQ,OAAO,QAAQ,CAAC,eAAe,CAAC;MACnC;AACL,KAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,OAAO,IAAI,KAAK,YAAY,GAAG,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC;KACxG,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE,OAAO,YAAY,CAAC,IAAI,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAC,cAAc,GAAG,QAAQ,CAAC,iBAAiB,CAAC;AAChI,KAAI,OAAO,QAAQ,CAAC,OAAO,CAAC;AAC5B,IAAG,CAAC;AACJ,GAAE,SAAS,aAAa,CAAC,IAAI,EAAE;AAC/B,KAAI,IAAI,OAAO,EAAE,QAAQ,CAAC;KACtB,IAAI,MAAM,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACxF,KAAI,IAAI,QAAQ,GAAG,EAAE,CAAC;AACtB,KAAI,KAAK,IAAI,IAAI,GAAG,SAAS,CAAC,MAAM,EAAE,IAAI,GAAG,IAAI,KAAK,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,EAAE,IAAI,EAAE,EAAE;OAC1G,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;MAClC;KACD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,QAAQ,IAAI,CAAC,OAAO,GAAG,MAAM,MAAM,IAAI,IAAI,OAAO,KAAK,KAAK,CAAC,IAAI,OAAO,CAAC,QAAQ,EAAE;OACzG,QAAQ,GAAG,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;OACjC,MAAM,GAAG,EAAE,CAAC;MACb,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;OAChC,QAAQ,GAAG,MAAM,CAAC;OAClB,MAAM,GAAG,EAAE,CAAC;MACb,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;AACvC,OAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACzB,MAAK,MAAM,IAAI,CAAC,QAAQ,GAAG,MAAM,MAAM,IAAI,IAAI,QAAQ,KAAK,KAAK,CAAC,IAAI,QAAQ,CAAC,QAAQ,EAAE;AACzF,OAAM,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAC/D,MAAK,MAAM;OACL,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;MAC5B;KACD,IAAI,MAAM,KAAK,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,KAAK,CAAC,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AAC1G,KAAI,IAAI,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC;OACxB,QAAQ,EAAE,IAAI;MACf,EAAE,MAAM,CAAC,CAAC;AACf;KACI,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;AAClD,OAAM,OAAO,CAAC,IAAI,SAAS,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC;AACxD,MAAK,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;OAClB,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,QAAQ,GAAG,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC;AACjF,MAAK,CAAC,CAAC;KACH,IAAI,IAAI,GAAG;OACT,QAAQ,EAAE,OAAO;OACjB,KAAK,EAAE,KAAK;OACZ,IAAI,EAAE,IAAI;AAChB,MAAK,CAAC;AACN,KAAI,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,QAAQ,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACzD,KAAI,IAAI,OAAO,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC,WAAW,KAAK,eAAe,EAAE,IAAI,CAAC,QAAQ,GAAG,eAAe,CAAC;KACxG,OAAO,IAAI,CAAC;IACb;AACH,GAAE,SAAS,MAAM,CAAC,GAAG,EAAE;AACvB,KAAI,OAAO,GAAG,IAAI,IAAI,GAAG,EAAE,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;IAC5D;AACH,GAAE,SAAS,iBAAiB,CAAC,KAAK,EAAE;AACpC,KAAI,OAAO,aAAa,CAAC,YAAY,EAAE;OACjC,SAAS,EAAE,KAAK;AACtB,MAAK,CAAC,CAAC;IACJ;GACD,IAAI,OAAO,GAAG,SAAS,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE;AACrD,KAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;AAChC,KAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;OACxC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAC1B;AACL,IAAG,CAAC;GACF,IAAI,GAAG,GAAG,SAAS,GAAG,CAAC,QAAQ,EAAE,QAAQ,EAAE;AAC7C,KAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;AAChC,KAAI,IAAI,WAAW,GAAG,EAAE,CAAC;AACzB,KAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC9C,OAAM,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MAC5C;KACD,OAAO,WAAW,CAAC;AACvB,IAAG,CAAC;AACJ,GAAE,IAAI,cAAc,GAAG,SAAS,cAAc,CAAC,GAAG,EAAE;KAChD,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,QAAQ,EAAE,OAAO,KAAK,CAAC;AAChD,KAAI,IAAI,GAAG,CAAC,QAAQ,EAAE,OAAO,IAAI,CAAC;KAC9B,OAAO,KAAK,CAAC;AACjB,IAAG,CAAC;AACJ;AACA,GAAE,IAAI,MAAM,GAAG,SAAS,MAAM,CAAC,SAAS,EAAE;AAC1C,KAAI,IAAI,IAAI,GAAG,wBAAwB,CAAC;OAClC,OAAO,EAAE,SAAS;AACxB,MAAK,CAAC,CAAC;AACP,KAAI,OAAO,IAAI,CAAC,KAAK,CAAC;AACtB,IAAG,CAAC;AACJ,GAAE,IAAI,QAAQ,GAAG,SAAS,QAAQ,CAAC,YAAY,EAAE;AACjD,KAAI,IAAI,IAAI,GAAG,wBAAwB,CAAC,OAAO,YAAY,KAAK,UAAU,GAAG,YAAY,EAAE,GAAG,YAAY,CAAC,CAAC;KACxG,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAC7C,KAAI,gBAAgB,CAAC,IAAI,CAAC,CAAC;AAC3B,KAAI,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AAC7C,IAAG,CAAC;AACJ,GAAE,SAAS,oBAAoB,CAAC,QAAQ,EAAE,IAAI,EAAE;AAChD,KAAI,IAAI,QAAQ,KAAK,IAAI,EAAE,OAAO,KAAK,CAAC;KACpC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,EAAE,OAAO,KAAK,CAAC;AACzC,KAAI,IAAI,EAAE,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,OAAO,KAAK,CAAC;AACxE,KAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;OACpC,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE;SAC3B,OAAO,KAAK,CAAC;QACd;MACF;KACD,OAAO,IAAI,CAAC;IACb;GACD,SAAS,eAAe,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAE;KACnD,IAAI,IAAI,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AACxF,KAAI,IAAI,GAAG,GAAG,oBAAoB,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,YAAY,EAAE,GAAG,IAAI,GAAG,YAAY;AAChG,OAAM,UAAU,CAAC,OAAO,GAAG,QAAQ,EAAE,CAAC;MACjC,GAAG,IAAI,CAAC,YAAY;AACzB,OAAM,OAAO,UAAU,CAAC,OAAO,GAAG,QAAQ,EAAE,CAAC;MACxC,EAAE,EAAE,CAAC,CAAC;AACX,KAAI,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC;KACvB,OAAO,GAAG,CAAC;IACZ;GACD,IAAI,eAAe,GAAG,SAAS,eAAe,CAAC,QAAQ,EAAE,IAAI,EAAE;KAC7D,IAAI,UAAU,GAAG;OACf,MAAM,EAAE,QAAQ;AACtB,MAAK,CAAC;AACN,KAAI,IAAI,IAAI,GAAG,wBAAwB,CAAC,UAAU,CAAC,CAAC;AACpD,KAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,eAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACpE,IAAG,CAAC;GACF,IAAI,SAAS,GAAG,SAAS,SAAS,CAAC,QAAQ,EAAE,IAAI,EAAE;KACjD,IAAI,UAAU,GAAG;OACf,MAAM,EAAE,QAAQ;AACtB,MAAK,CAAC;AACN,KAAI,IAAI,IAAI,GAAG,wBAAwB,CAAC,UAAU,CAAC,CAAC;AACpD,KAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,eAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AAC3E,IAAG,CAAC;GACF,IAAI,OAAO,GAAG,SAAS,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE;KAC7C,IAAI,UAAU,GAAG;OACf,KAAK,EAAE,IAAI;AACjB,MAAK,CAAC;AACN,KAAI,IAAI,IAAI,GAAG,wBAAwB,CAAC,UAAU,CAAC,CAAC;AACpD,KAAI,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE;OAChD,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,EAAE,CAAC;MAC/B;AACL,KAAI,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;AAC3B,KAAI,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;AAC5B,IAAG,CAAC;GACF,IAAI,WAAW,GAAG,SAAS,WAAW,CAAC,QAAQ,EAAE,IAAI,EAAE;KACrD,OAAO,OAAO,CAAC,YAAY;OACzB,OAAO,QAAQ,CAAC;MACjB,EAAE,IAAI,CAAC,CAAC;AACb,IAAG,CAAC;AACJ,GAAE,IAAI,UAAU,GAAG,SAAS,UAAU,CAAC,OAAO,EAAE;AAChD,KAAI,OAAO,OAAO,CAAC,YAAY,CAAC;AAChC,IAAG,CAAC;AACJ,GAAE,SAAS,gBAAgB,CAAC,UAAU,EAAE,EAAE,EAAE;AAC5C,KAAI,UAAU,CAAC,IAAI,CAAC,CAAC;AACrB,KAAI,IAAI,cAAc,GAAG,kBAAkB,CAAC,UAAU,CAAC;AACvD,KAAI,kBAAkB,CAAC,UAAU,GAAG,CAAC,CAAC;AACtC,KAAI,UAAU,CAAC,KAAK,CAAC,CAAC;KAClB,EAAE,EAAE,CAAC;AACT,KAAI,kBAAkB,CAAC,UAAU,GAAG,cAAc,CAAC;IAChD;AACH,GAAE,SAAS,eAAe,CAAC,EAAE,EAAE;AAC/B,KAAI,gBAAgB,CAAC,YAAY,EAAE,EAAE,EAAE,CAAC,CAAC;IACtC;AACH,GAAE,IAAI,aAAa,GAAG,SAAS,aAAa,GAAG;AAC/C,KAAI,IAAI,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;AACnC,OAAM,UAAU,GAAG,cAAc,CAAC,SAAS,EAAE,CAAC,CAAC;AAC/C,OAAM,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC;AAC/B,OAAM,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;AACjC,KAAI,OAAO,CAAC,SAAS,EAAE,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;AAChE,IAAG,CAAC;AACJ;AACA;GACE,IAAI,QAAQ,GAAG;KACb,GAAG,EAAE,GAAG;KACR,OAAO,EAAE,OAAO;AACpB,IAAG,CAAC;GACF,IAAI,KAAK,GAAG;KACV,aAAa,EAAE,aAAa;KAC5B,MAAM,EAAE,MAAM;KACd,UAAU,EAAE,UAAU;KACtB,QAAQ,EAAE,QAAQ;KAClB,SAAS,EAAE,SAAS;KACpB,UAAU,EAAE,UAAU;KACtB,QAAQ,EAAE,QAAQ;KAClB,cAAc,EAAE,cAAc;KAC9B,SAAS,EAAE,SAAS;KACpB,SAAS,EAAE,SAAS;KACpB,eAAe,EAAE,eAAe;KAChC,QAAQ,EAAE,QAAQ;KAClB,OAAO,EAAE,OAAO;KAChB,WAAW,EAAE,WAAW;KACxB,MAAM,EAAE,MAAM;KACd,UAAU,EAAE,UAAU;KACtB,aAAa,EAAE,aAAa;KAC5B,eAAe,EAAE,eAAe;KAChC,aAAa,EAAE,aAAa;KAC5B,SAAS,EAAE,SAAS;KACpB,QAAQ,EAAE,QAAQ;KAClB,IAAI,EAAE,IAAI;AACd,IAAG,CAAC;AACJ;AACA,GAAE,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC9B,GAAE,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;AAChC,GAAE,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC9B,GAAE,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;AAChC,GAAE,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC9B,GAAE,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC;AACxC,GAAE,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC;AACxC,GAAE,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;AAChC,GAAE,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC;AAClC,GAAE,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC;AAC1B,GAAE,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC;AAClC,GAAE,OAAO,CAAC,cAAc,GAAG,cAAc,CAAC;AAC1C,GAAE,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AACtB,GAAE,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAC1B,GAAE,OAAO,CAAC,eAAe,GAAG,eAAe,CAAC;AAC5C,GAAE,OAAO,CAAC,WAAW,GAAG,WAAW,CAAC;AACpC,GAAE,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC;AAClC,GAAE,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;AAChC,GAAE,OAAO,CAAC,eAAe,GAAG,eAAe,CAAC;AAC5C,GAAE,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC;AAC5B,GAAE,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAC1B,GAAE,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC9B,GAAE,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC;AACxC,GAAE,OAAO,CAAC,WAAW,GAAG,WAAW,CAAC;AACpC;AACA,GAAE,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAChE;AACA,EAAC,EAAE,CAAC;AACJ,CAAA;;;;;ACz5DO,MAAMC,YAAY,CAAqB;EAK7CC,SAAS,GAAuBA,MAAM,EAAE,CAAA;AACxCC,EAAAA,WAAWA,CACHlD,IAAU,EACVU,IAAgB,EACtB;IAAA,IAFMV,CAAAA,IAAU,GAAVA,IAAU,CAAA;IAAA,IACVU,CAAAA,IAAgB,GAAhBA,IAAgB,CAAA;AAEvB,IAAA,IAAI,CAACsB,GAAG,GAAGZ,aAAa,CAAC,KAAK,CAAC,CAAA;AAC/B,IAAA,IAAI,CAAC+B,UAAU,GAAGC,sBAAU,EAAE,CAAA;AAC/B,GAAA;EAEAC,MAAMA,CAACC,KAAU,EAAE;AAClB,IAAA,IAAI,CAACH,UAAU,CAACE,MAAM,CAACE,yBAAC,CAAC,IAAI,CAACN,SAAS,EAAEK,KAAK,CAAC,CAAC,CAAA;AACjD,GAAA;EAEAE,cAAcA,CAACC,QAAwB,EAAE;AACxC,IAAA,IAAI,IAAI,CAACC,UAAU,IAAID,QAAQ,CAACE,MAAM,KAAK,IAAI,CAACD,UAAU,EAAE,OAAO,IAAI,CAAA;AACvE,IAAA,OAAO,KAAK,CAAA;AACb,GAAA;AAEAE,EAAAA,MAAMA,CACL5D,IAAU,EACV6D,WAAmC,EACnCC,gBAAmC,EAClC;IACD,IAAI9D,IAAI,CAAC+D,IAAI,KAAK,IAAI,CAAC/D,IAAI,CAAC+D,IAAI,EAAE,OAAO,KAAK,CAAA;AAC9C,IAAA,IAAI/D,IAAI,CAACN,KAAK,CAACsE,MAAM,KAAK,IAAI,CAAChE,IAAI,CAACN,KAAK,CAACsE,MAAM,EAAE;AACjD,MAAA,IAAIhE,IAAI,CAACN,KAAK,CAACsE,MAAM,EAAE;QACtB,IAAI,CAAChC,GAAG,CAACiC,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC,CAAA;AACjC,OAAC,MAAM;QACN,IAAI,CAAClC,GAAG,CAACiC,SAAS,CAACE,MAAM,CAAC,QAAQ,CAAC,CAAA;AACpC,OAAA;AACD,KAAA;IACA,IAAI,CAACnE,IAAI,GAAGA,IAAI,CAAA;AAChB,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;AACD;;ACxCO,MAAMoE,QAAkB,GAAG;AACjClF,EAAAA,OAAO,EAAE,kBAAkB;AAC3BC,EAAAA,KAAK,EAAE,OAAO;AACdO,EAAAA,KAAK,EAAE;AACN2E,IAAAA,OAAO,EAAE;AAAEzE,MAAAA,OAAO,EAAE,KAAA;AAAM,KAAA;GAC1B;EACDG,KAAKA,CAACC,IAAI,EAAE;IACX,OAAO,CACN,IAAI,EACJ;AAAEsE,MAAAA,KAAK,EAAE,WAAA;KAAa,EACtB,CACC,KAAK,EACL;AAAEA,MAAAA,KAAK,EAAE,oBAAA;KAAsB,EAC/B,CACC,OAAO,EACP;AACCP,MAAAA,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAErE,IAAI,CAACN,KAAK,CAAC2E,OAAO,GAAG,SAAS,GAAG,IAAI;AAC9CE,MAAAA,eAAe,EAAE,OAAO;AACxBC,MAAAA,QAAQ,EAAE,IAAA;AACX,KAAC,CACD,CACD,EACD,CAAC,GAAG,EAAE;AAAEF,MAAAA,KAAK,EAAE,mBAAA;KAAqB,EAAE,CAAC,CAAC,CACxC,CAAA;GACD;AACDrE,EAAAA,QAAQ,EAAE,CACT;AACCC,IAAAA,GAAG,EAAE,mBAAmB;IACxBE,QAAQ,EAAG4B,GAAG,KAAM;AACnBqC,MAAAA,OAAO,EAAErC,GAAG,CAACyC,aAAa,CAAmB,sBAAsB,CAAC,EACjEJ,OAAAA;KACH,CAAA;GACD,CAAA;AAEH,CAAC,CAAA;AAEM,MAAMK,QAAkB,GAAG;AACjCxF,EAAAA,OAAO,EAAE,WAAW;AACpBC,EAAAA,KAAK,EAAE,OAAO;AACdY,EAAAA,KAAK,EAAEA,MAAM,CAAC,IAAI,EAAE;AAAEuE,IAAAA,KAAK,EAAE,WAAA;GAAa,EAAE,CAAC,CAAC;AAC9CrE,EAAAA,QAAQ,EAAE,CAAC;AAAEC,IAAAA,GAAG,EAAE,cAAA;GAAgB,CAAA;AACnC,CAAC,CAAA;AAEM,MAAMyE,cAAuB,GAAGA,CAACnE,KAAK,EAAEC,QAAQ,KAAK;EAC3D,MAAM;IAAEiE,QAAQ;AAAEN,IAAAA,QAAAA;AAAS,GAAC,GAAG5D,KAAK,CAACI,MAAM,CAACE,KAAK,CAAA;AACjD,EAAA,IAAIL,QAAQ,EAAE;IACbA,QAAQ,CACPD,KAAK,CAACS,EAAE,CACNC,oBAAoB,CAACwD,QAAQ,CAAC1D,MAAM,CAAC,IAAI,EAAEoD,QAAQ,CAACQ,aAAa,EAAE,CAAC,CAAC,CACrEzD,cAAc,EACjB,CAAC,CAAA;AACD,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;AACA,EAAA,OAAO,KAAK,CAAA;AACb,CAAC,CAAA;AAEM,MAAM0D,YAAY,SAAS7B,YAAY,CAAC;AAE9CE,EAAAA,WAAWA,GAA2C;AAAA,IAAA,KAAA,IAAAvB,IAAA,GAAAL,SAAA,CAAAC,MAAA,EAAvCuD,IAAI,GAAAjD,IAAAA,KAAA,CAAAF,IAAA,GAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;AAAJgD,MAAAA,IAAI,CAAAhD,IAAA,CAAAR,GAAAA,SAAA,CAAAQ,IAAA,CAAA,CAAA;AAAA,KAAA;IAClB,MAAM,CAAC9B,IAAI,EAAEU,IAAI,EAAEqE,MAAM,CAAC,GAAGD,IAAI,CAAA;AACjC,IAAA,KAAK,CAAC9E,IAAI,EAAEU,IAAI,CAAC,CAAA;AACjB,IAAA,IAAI,CAACgD,UAAU,GAAGtC,aAAa,CAAC,KAAK,EAAE;AAAEkD,MAAAA,KAAK,EAAE,mBAAA;AAAoB,KAAC,CAAC,CAAA;IACtE,IAAI,CAAC5D,IAAI,GAAGA,IAAI,CAAA;AAChB,IAAA,IAAI,CAACsB,GAAG,GAAGZ,aAAa,CACvB,IAAI,EACJ;AAAEkD,MAAAA,KAAK,EAAE,WAAA;AAAY,KAAC,EACtBlD,aAAa,CACZ,KAAK,EACL;AAAEkD,MAAAA,KAAK,EAAE,oBAAA;AAAqB,KAAC,EAC/BlD,aAAa,CAAC,OAAO,EAAE;AACtB2C,MAAAA,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAErE,IAAI,CAACN,KAAK,CAAC2E,OAAO,GAAG,MAAM,GAAG,KAAK,CAAC;MAC7CW,QAAQ,EAAGC,CAAC,IAAK;AAChB,QAAA,MAAM5C,GAAG,GAAI4C,CAAC,CAACtB,MAAM,EAAuBU,OAAO,CAAA;AACnD,QAAA,IAAIpD,EAAE,GAAGP,IAAI,CAACF,KAAK,CAACS,EAAE,CAAA;AACtBP,QAAAA,IAAI,CAACD,QAAQ,CACZQ,EAAE,CAACiE,gBAAgB,CAACH,MAAM,EAAE,EAAY,SAAS,EAAE,CAAC,CAAC1C,GAAG,CACzD,CAAC,CAAA;AACF,OAAA;AACD,KAAC,CACF,CAAC,EACD,IAAI,CAACqB,UACN,CAAC,CAAA;AACF,GAAA;EACAE,MAAMA,CAAC5D,IAAU,EAAE;IAClB,IAAI,CAAC,KAAK,CAAC4D,MAAM,CAAC5D,IAAI,CAAC,EAAE,OAAO,KAAK,CAAA;AACrC8C,IAAAA,aAAa,CAAC,IAAI,CAACd,GAAG,EAAE;MACvBsC,KAAK,EAAE,CAAYtE,SAAAA,EAAAA,IAAI,CAACN,KAAK,CAAC2E,OAAO,GAAG,UAAU,GAAG,EAAE,CAAA,CAAA;AACxD,KAAC,CAAC,CAAA;AACF,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;AACD,CAAA;AAEO,MAAMc,uBAAuB,GAAG,YAAA;AAAA,EAAA,KAAA,IAAAC,KAAA,GAAA9D,SAAA,CAAAC,MAAA,EACnCuD,IAAI,GAAAjD,IAAAA,KAAA,CAAAuD,KAAA,GAAAC,KAAA,GAAA,CAAA,EAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA,EAAA,EAAA;AAAJP,IAAAA,IAAI,CAAAO,KAAA,CAAA/D,GAAAA,SAAA,CAAA+D,KAAA,CAAA,CAAA;AAAA,GAAA;AAAA,EAAA,OACH,IAAIR,YAAY,CAAC,GAAGC,IAAI,CAAC,CAAA;AAAA,CAAA;;AC1G9B,IAAIQ,aAAkD,CAAA;AACtD,IAAIC,UAAoD,CAAA;AAExD,IAAI,OAAOC,OAAO,KAAK,WAAW,EAAE;AACnC,EAAA,IAAIC,KAAK,GAAG,IAAID,OAAO,EAAkB,CAAA;EACzCF,aAAa,GAAIpD,GAAG,IAAKuD,KAAK,CAACC,GAAG,CAACxD,GAAG,CAAC,CAAA;AACvCqD,EAAAA,UAAU,GAAGA,CAACrD,GAAG,EAAEyD,KAAK,KAAK;AAC5BF,IAAAA,KAAK,CAACG,GAAG,CAAC1D,GAAG,EAAEyD,KAAK,CAAC,CAAA;AACrB,IAAA,OAAOA,KAAK,CAAA;GACZ,CAAA;AACF,CAAC,MAAM;EACN,MAAMF,KAA0B,GAAG,EAAE,CAAA;EACrC,MAAMI,SAAS,GAAG,EAAE,CAAA;EACpB,IAAIC,QAAQ,GAAG,CAAC,CAAA;EAChBR,aAAa,GAAIpD,GAAG,IAAK;AACxB,IAAA,KAAK,IAAI6D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,KAAK,CAAClE,MAAM,EAAEwE,CAAC,IAAI,CAAC,EAAE;AACzC,MAAA,IAAIN,KAAK,CAACM,CAAC,CAAC,IAAI7D,GAAG,EAAE,OAAOuD,KAAK,CAACM,CAAC,GAAG,CAAC,CAAC,CAAA;AACzC,KAAA;GACA,CAAA;AAEDR,EAAAA,UAAU,GAAGA,CAACrD,GAAG,EAAEyD,KAAK,KAAK;AAC5B,IAAA,IAAIG,QAAQ,IAAID,SAAS,EAAEC,QAAQ,GAAG,CAAC,CAAA;AACvCL,IAAAA,KAAK,CAACK,QAAQ,EAAE,CAAC,GAAG5D,GAAG,CAAA;AACvB,IAAA,OAAQuD,KAAK,CAACK,QAAQ,EAAE,CAAC,GAAGH,KAAK,CAAA;GACjC,CAAA;AACF,CAAA;AAgCO,MAAMK,QAAQ,CAAC;AACrB9C,EAAAA,WAAWA,CACH+C,KAAa,EACbC,MAAc,EACdC,GAAa,EAEnB;AAAA,IAAA,IADMC,QAAmB,GAAA9E,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IAAA,IAHxB2E,CAAAA,KAAa,GAAbA,KAAa,CAAA;IAAA,IACbC,CAAAA,MAAc,GAAdA,MAAc,CAAA;IAAA,IACdC,CAAAA,GAAa,GAAbA,GAAa,CAAA;IAAA,IACbC,CAAAA,QAAmB,GAAnBA,QAAmB,CAAA;AACxB,GAAA;AAEHC,EAAAA,WAAWA,CAACC,CAAS,EAAEC,CAAS,EAAQ;IACvC,MAAM;AACLC,MAAAA,IAAI,EAAEC,KAAK;AACXC,MAAAA,GAAG,EAAEC,IAAI;AACTC,MAAAA,KAAK,EAAEC,MAAM;AACbC,MAAAA,MAAM,EAAEC,OAAAA;AACT,KAAC,GAAG,IAAI,CAACC,QAAQ,CAACV,CAAC,CAAC,CAAA;IAEpB,MAAM;AACLE,MAAAA,IAAI,EAAES,KAAK;AACXP,MAAAA,GAAG,EAAEQ,IAAI;AACTN,MAAAA,KAAK,EAAEO,MAAM;AACbL,MAAAA,MAAM,EAAEM,OAAAA;AACT,KAAC,GAAG,IAAI,CAACJ,QAAQ,CAACT,CAAC,CAAC,CAAA;IAEpB,OAAO;MACNC,IAAI,EAAEa,IAAI,CAACC,GAAG,CAACb,KAAK,EAAEQ,KAAK,CAAC;MAC5BP,GAAG,EAAEW,IAAI,CAACC,GAAG,CAACX,IAAI,EAAEO,IAAI,CAAC;MACzBN,KAAK,EAAES,IAAI,CAACE,GAAG,CAACV,MAAM,EAAEM,MAAM,CAAC;AAC/BL,MAAAA,MAAM,EAAEO,IAAI,CAACE,GAAG,CAACR,OAAO,EAAEK,OAAO,CAAA;KACjC,CAAA;AACF,GAAA;EAEAJ,QAAQA,CAACQ,GAAW,EAAQ;AAC3B,IAAA,KAAK,IAAIzB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACI,GAAG,CAAC5E,MAAM,EAAEwE,CAAC,EAAE,EAAE;AACzC,MAAA,MAAM0B,MAAM,GAAG,IAAI,CAACtB,GAAG,CAACJ,CAAC,CAAC,CAAA;MAC1B,IAAI0B,MAAM,IAAID,GAAG,EAAE,SAAA;AACnB,MAAA,MAAMhB,IAAI,GAAGT,CAAC,GAAG,IAAI,CAACE,KAAK,CAAA;MAC3B,MAAMS,GAAG,GAAGW,IAAI,CAACK,KAAK,CAAC3B,CAAC,GAAG,IAAI,CAACE,KAAK,CAAC,CAAA;AACtC,MAAA,IAAIW,KAAK,GAAGJ,IAAI,GAAG,CAAC,CAAA;AACpB,MAAA,IAAIM,MAAM,GAAGJ,GAAG,GAAG,CAAC,CAAA;MAEpB,KAAK,IAAIiB,CAAC,GAAG,CAAC,EAAEf,KAAK,GAAG,IAAI,CAACX,KAAK,IAAI,IAAI,CAACE,GAAG,CAACJ,CAAC,GAAG4B,CAAC,CAAC,IAAIF,MAAM,EAAEE,CAAC,EAAE,EACnEf,KAAK,EAAE,CAAA;AACR,MAAA,KACC,IAAIe,CAAC,GAAG,CAAC,EACTb,MAAM,GAAG,IAAI,CAACZ,MAAM,IAAI,IAAI,CAACC,GAAG,CAACJ,CAAC,GAAG,IAAI,CAACE,KAAK,GAAG0B,CAAC,CAAC,IAAIF,MAAM,EAC9DE,CAAC,EAAE,EAEHb,MAAM,EAAE,CAAA;MACT,OAAO;QAAEN,IAAI;QAAEE,GAAG;QAAEE,KAAK;AAAEE,QAAAA,MAAAA;OAAQ,CAAA;AACpC,KAAA;AACA,IAAA,MAAM,IAAIc,UAAU,CAAC,CAAuBJ,oBAAAA,EAAAA,GAAG,QAAQ,CAAC,CAAA;AACzD,GAAA;AAEAK,EAAAA,QAAQA,CAACL,GAAW,EAAEM,IAAsB,EAAEC,GAAW,EAAiB;IACzE,MAAM;MAAEvB,IAAI;MAAEE,GAAG;MAAEE,KAAK;AAAEE,MAAAA,MAAAA;AAAO,KAAC,GAAG,IAAI,CAACE,QAAQ,CAACQ,GAAG,CAAC,CAAA;IACvD,IAAIM,IAAI,KAAK,OAAO,EAAE;AACrB,MAAA,IAAIC,GAAG,GAAG,CAAC,GAAGvB,IAAI,KAAK,CAAC,GAAGI,KAAK,IAAI,IAAI,CAACX,KAAK,EAAE,OAAO,IAAI,CAAA;MAC3D,OAAO,IAAI,CAACE,GAAG,CAACO,GAAG,GAAG,IAAI,CAACT,KAAK,IAAI8B,GAAG,GAAG,CAAC,GAAGvB,IAAI,GAAG,CAAC,GAAGI,KAAK,CAAC,CAAC,CAAA;AACjE,KAAC,MAAM;AACN,MAAA,IAAImB,GAAG,GAAG,CAAC,GAAGrB,GAAG,IAAI,CAAC,GAAGI,MAAM,IAAI,IAAI,CAACZ,MAAM,EAAE,OAAO,IAAI,CAAA;MAC3D,OAAO,IAAI,CAACC,GAAG,CAACK,IAAI,GAAG,IAAI,CAACP,KAAK,IAAI8B,GAAG,GAAG,CAAC,GAAGrB,GAAG,GAAG,CAAC,GAAGI,MAAM,CAAC,CAAC,CAAA;AAClE,KAAA;AACD,GAAA;EAEAkB,QAAQA,CAACR,GAAW,EAAU;AAC7B,IAAA,KAAK,IAAIzB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACI,GAAG,CAAC5E,MAAM,EAAEwE,CAAC,EAAE,EAAE;MACzC,IAAI,IAAI,CAACI,GAAG,CAACJ,CAAC,CAAC,IAAIyB,GAAG,EAAE;AACvB,QAAA,OAAOzB,CAAC,GAAG,IAAI,CAACE,KAAK,CAAA;AACtB,OAAA;AACD,KAAA;AACA,IAAA,MAAM,IAAI2B,UAAU,CAAC,CAAwBJ,qBAAAA,EAAAA,GAAG,QAAQ,CAAC,CAAA;AAC1D,GAAA;EAEAS,WAAWA,CAACC,IAAU,EAAY;IACjC,MAAMC,MAAgB,GAAG,EAAE,CAAA;IAC3B,MAAMC,IAA6B,GAAG,EAAE,CAAA;AAExC,IAAA,KAAK,IAAIC,GAAG,GAAGH,IAAI,CAACxB,GAAG,EAAE2B,GAAG,GAAGH,IAAI,CAACpB,MAAM,EAAEuB,GAAG,EAAE,EAAE;AAClD,MAAA,KAAK,IAAIC,GAAG,GAAGJ,IAAI,CAAC1B,IAAI,EAAE8B,GAAG,GAAGJ,IAAI,CAACtB,KAAK,EAAE0B,GAAG,EAAE,EAAE;QAClD,MAAMC,KAAK,GAAGF,GAAG,GAAG,IAAI,CAACpC,KAAK,GAAGqC,GAAG,CAAA;AACpC,QAAA,MAAMd,GAAG,GAAG,IAAI,CAACrB,GAAG,CAACoC,KAAK,CAAC,CAAA;AAE3B,QAAA,IAAIH,IAAI,CAACZ,GAAG,CAAC,EAAE,SAAA;AAEfY,QAAAA,IAAI,CAACZ,GAAG,CAAC,GAAG,IAAI,CAAA;AAEhB,QAAA,IACEc,GAAG,IAAIJ,IAAI,CAAC1B,IAAI,IAAI8B,GAAG,IAAI,IAAI,CAACnC,GAAG,CAACoC,KAAK,GAAG,CAAC,CAAC,IAAIf,GAAG,IACrDa,GAAG,IAAIH,IAAI,CAACxB,GAAG,IAAI2B,GAAG,IAAI,IAAI,CAAClC,GAAG,CAACoC,KAAK,GAAG,IAAI,CAACtC,KAAK,CAAC,IAAIuB,GAAI,EAE/D,SAAA;AAEDW,QAAAA,MAAM,CAACK,IAAI,CAAChB,GAAG,CAAC,CAAA;AACjB,OAAA;AACD,KAAA;AACA,IAAA,OAAOW,MAAM,CAAA;AACd,GAAA;AAEAM,EAAAA,UAAUA,CAACJ,GAAW,EAAEC,GAAW,EAAEI,KAAW,EAAU;IACzD,KAAK,IAAI3C,CAAC,GAAG,CAAC,EAAE4C,QAAQ,GAAG,CAAC,GAAI5C,CAAC,EAAE,EAAE;MACpC,MAAM6C,MAAM,GAAGD,QAAQ,GAAGD,KAAK,CAAC/F,KAAK,CAACoD,CAAC,CAAC,CAAC8C,QAAQ,CAAA;MACjD,IAAI9C,CAAC,IAAIsC,GAAG,EAAE;QACb,IAAIE,KAAK,GAAGD,GAAG,GAAGD,GAAG,GAAG,IAAI,CAACpC,KAAK,CAAA;QAClC,MAAM6C,WAAW,GAAG,CAACT,GAAG,GAAG,CAAC,IAAI,IAAI,CAACpC,KAAK,CAAA;AAC1C,QAAA,OAAOsC,KAAK,GAAGO,WAAW,IAAI,IAAI,CAAC3C,GAAG,CAACoC,KAAK,CAAC,GAAGI,QAAQ,EAAEJ,KAAK,EAAE,CAAA;AACjE,QAAA,OAAOA,KAAK,IAAIO,WAAW,GAAGF,MAAM,GAAG,CAAC,GAAG,IAAI,CAACzC,GAAG,CAACoC,KAAK,CAAC,CAAA;AAC3D,OAAA;AACAI,MAAAA,QAAQ,GAAGC,MAAM,CAAA;AAClB,KAAA;AACD,GAAA;EACA,OAAOlD,GAAGA,CAACgD,KAAW,EAAY;AACjC,IAAA,OAAOpD,aAAa,CAACoD,KAAK,CAAC,IAAInD,UAAU,CAACmD,KAAK,EAAEK,UAAU,CAACL,KAAK,CAAC,CAAC,CAAA;AACpE,GAAA;AACD,CAAA;AAEA,SAASK,UAAUA,CAACL,KAAW,EAAY;EAC1C,IAAIA,KAAK,CAAC3E,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,OAAO,EACvC,MAAM,IAAIrB,UAAU,CAAC,oBAAoB,GAAGc,KAAK,CAAC3E,IAAI,CAACmF,IAAI,CAAC,CAAA;AAE7D,EAAA,MAAMjD,KAAK,GAAGkD,SAAS,CAACT,KAAK,CAAC;IAC7BxC,MAAM,GAAGwC,KAAK,CAACU,UAAU,CAAA;AAC1B,EAAA,MAAMjD,GAAG,GAAGtE,KAAK,CAACoE,KAAK,GAAGC,MAAM,CAAC,CAACmD,IAAI,CAAC,CAAC,CAAC,CAAA;EACzC,IAAIC,MAAM,GAAG,CAAC,CAAA;AACd,EAAA,IAAIlD,QAA+B,CAAA;EACnC,MAAMmD,SAAoB,GAAG,EAAE,CAAA;AAC/B,EAAA,KAAK,IAAIlB,GAAG,GAAG,CAAC,EAAEb,GAAG,GAAG,CAAC,EAAEa,GAAG,GAAGnC,MAAM,EAAEmC,GAAG,EAAE,EAAE;AAC/C,IAAA,MAAMmB,OAAO,GAAGd,KAAK,CAAC/F,KAAK,CAAC0F,GAAG,CAAC,CAAA;AAChCb,IAAAA,GAAG,EAAE,CAAA;AACL,IAAA,KAAK,IAAIzB,CAAC,GAAG,CAAC,GAAIA,CAAC,EAAE,EAAE;AACtB,MAAA,OAAOuD,MAAM,GAAGnD,GAAG,CAAC5E,MAAM,IAAI4E,GAAG,CAACmD,MAAM,CAAC,IAAI,CAAC,EAAEA,MAAM,EAAE,CAAA;AACxD,MAAA,IAAIvD,CAAC,IAAIyD,OAAO,CAACJ,UAAU,EAAE,MAAA;AAC7B,MAAA,MAAMK,QAAQ,GAAGD,OAAO,CAAC7G,KAAK,CAACoD,CAAC,CAAC,CAAA;MACjC,MAAM;QAAE2D,OAAO;QAAEC,OAAO;AAAEC,QAAAA,QAAAA;OAAU,GAAGH,QAAQ,CAAC/J,KAAK,CAAA;MACrD,KAAK,IAAI6D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoG,OAAO,EAAEpG,CAAC,EAAE,EAAE;AACjC,QAAA,IAAIA,CAAC,GAAG8E,GAAG,IAAInC,MAAM,EAAE;UACtB,CAACE,QAAQ,KAAKA,QAAQ,GAAG,EAAE,CAAC,EAAEoC,IAAI,CAAC;AAClCzE,YAAAA,IAAI,EAAE,kBAAkB;YACxByD,GAAG;YACHqC,CAAC,EAAEF,OAAO,GAAGpG,CAAAA;AACd,WAAC,CAAC,CAAA;AACF,UAAA,MAAA;AACD,SAAA;AACA,QAAA,MAAMuG,KAAK,GAAGR,MAAM,GAAG/F,CAAC,GAAG0C,KAAK,CAAA;QAChC,KAAK,IAAI8D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,OAAO,EAAEK,CAAC,EAAE,EAAE;AACjC,UAAA,IAAI5D,GAAG,CAAC2D,KAAK,GAAGC,CAAC,CAAC,IAAI,CAAC,EAAE5D,GAAG,CAAC2D,KAAK,GAAGC,CAAC,CAAC,GAAGvC,GAAG,CAAC,KACzC;YACJ,CAACpB,QAAQ,KAAKA,QAAQ,GAAG,EAAE,CAAC,EAAEoC,IAAI,CAAC;AAClCzE,cAAAA,IAAI,EAAE,WAAW;cACjBsE,GAAG;cACHb,GAAG;cACHqC,CAAC,EAAEH,OAAO,GAAGK,CAAAA;AACd,aAAC,CAAC,CAAA;AACH,WAAA;AACA,UAAA,MAAMC,IAAI,GAAGJ,QAAQ,IAAIA,QAAQ,CAACG,CAAC,CAAC,CAAA;AACpC,UAAA,IAAIC,IAAI,EAAE;YACT,MAAMC,UAAU,GAAI,CAACH,KAAK,GAAGC,CAAC,IAAI9D,KAAK,GAAI,CAAC;AAC3CiE,cAAAA,IAAI,GAAGX,SAAS,CAACU,UAAU,CAAC,CAAA;AAC7B,YAAA,IACCC,IAAI,IAAI,IAAI,IACXA,IAAI,IAAIF,IAAI,IAAIT,SAAS,CAACU,UAAU,GAAG,CAAC,CAAC,IAAI,CAAE,EAC/C;AACDV,cAAAA,SAAS,CAACU,UAAU,CAAC,GAAGD,IAAI,CAAA;AAC5BT,cAAAA,SAAS,CAACU,UAAU,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;AAC9B,aAAC,MAAM,IAAIC,IAAI,IAAIF,IAAI,EAAE;AACxBT,cAAAA,SAAS,CAACU,UAAU,GAAG,CAAC,CAAC,EAAE,CAAA;AAC5B,aAAA;AACD,WAAA;AACD,SAAA;AACD,OAAA;AAEAX,MAAAA,MAAM,IAAII,OAAO,CAAA;MACjBlC,GAAG,IAAIiC,QAAQ,CAACZ,QAAQ,CAAA;AACzB,KAAA;AACA,IAAA,MAAMsB,WAAW,GAAG,CAAC9B,GAAG,GAAG,CAAC,IAAIpC,KAAK,CAAA;IACrC,IAAImE,OAAO,GAAG,CAAC,CAAA;AACf,IAAA,OAAOd,MAAM,GAAGa,WAAW,EAAE,IAAIhE,GAAG,CAACmD,MAAM,EAAE,CAAC,IAAI,CAAC,EAAEc,OAAO,EAAE,CAAA;AAC9D,IAAA,IAAIA,OAAO,EAAE;MACZ,CAAChE,QAAQ,KAAKA,QAAQ,GAAG,EAAE,CAAC,EAAEoC,IAAI,CAAC;AAAEzE,QAAAA,IAAI,EAAE,SAAS;QAAEsE,GAAG;AAAEwB,QAAAA,CAAC,EAAEO,OAAAA;AAAQ,OAAC,CAAC,CAAA;AACzE,KAAA;AACA5C,IAAAA,GAAG,EAAE,CAAA;AACN,GAAA;EAEA,MAAM6C,QAAQ,GAAG,IAAIrE,QAAQ,CAACC,KAAK,EAAEC,MAAM,EAAEC,GAAG,CAAC,CAAA;EACjD,IAAImE,SAAS,GAAG,KAAK,CAAA;AAErB,EAAA,KAAK,IAAIvE,CAAC,GAAG,CAAC,EAAE,CAACuE,SAAS,IAAIvE,CAAC,GAAGwD,SAAS,CAAChI,MAAM,EAAEwE,CAAC,IAAI,CAAC,EACzD,IAAIwD,SAAS,CAACxD,CAAC,CAAC,IAAI,IAAI,IAAIwD,SAAS,CAACxD,CAAC,GAAG,CAAC,CAAC,GAAGG,MAAM,EAAEoE,SAAS,GAAG,IAAI,CAAA;EAExE,IAAIA,SAAS,EAAEC,gBAAgB,CAACF,QAAQ,EAAEd,SAAS,EAAEb,KAAK,CAAC,CAAA;AAE3D,EAAA,OAAO2B,QAAQ,CAAA;AAChB,CAAA;AAEA,SAASlB,SAASA,CAACT,KAAW,EAAU;EACvC,IAAIzC,KAAK,GAAG,CAAC,CAAC,CAAA;EACd,IAAIuE,UAAU,GAAG,KAAK,CAAA;AACtB,EAAA,KAAK,IAAInC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGK,KAAK,CAACU,UAAU,EAAEf,GAAG,EAAE,EAAE;AAChD,IAAA,MAAMmB,OAAO,GAAGd,KAAK,CAAC/F,KAAK,CAAC0F,GAAG,CAAC,CAAA;IAChC,IAAIoC,QAAQ,GAAG,CAAC,CAAA;AAChB,IAAA,IAAID,UAAU,EACb,KAAK,IAAI7C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGU,GAAG,EAAEV,CAAC,EAAE,EAAE;AAC7B,MAAA,MAAM+C,OAAO,GAAGhC,KAAK,CAAC/F,KAAK,CAACgF,CAAC,CAAC,CAAA;AAC9B,MAAA,KAAK,IAAI5B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2E,OAAO,CAACtB,UAAU,EAAErD,CAAC,EAAE,EAAE;AAC5C,QAAA,MAAM4E,IAAI,GAAGD,OAAO,CAAC/H,KAAK,CAACoD,CAAC,CAAC,CAAA;AAC7B,QAAA,IAAI4B,CAAC,GAAGgD,IAAI,CAACjL,KAAK,CAACiK,OAAO,GAAGtB,GAAG,EAAEoC,QAAQ,IAAIE,IAAI,CAACjL,KAAK,CAACgK,OAAO,CAAA;AACjE,OAAA;AACD,KAAA;AACD,IAAA,KAAK,IAAI3D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyD,OAAO,CAACJ,UAAU,EAAErD,CAAC,EAAE,EAAE;AAC5C,MAAA,MAAM4E,IAAI,GAAGnB,OAAO,CAAC7G,KAAK,CAACoD,CAAC,CAAC,CAAA;AAC7B0E,MAAAA,QAAQ,IAAIE,IAAI,CAACjL,KAAK,CAACgK,OAAO,CAAA;MAC9B,IAAIiB,IAAI,CAACjL,KAAK,CAACiK,OAAO,GAAG,CAAC,EAAEa,UAAU,GAAG,IAAI,CAAA;AAC9C,KAAA;AACA,IAAA,IAAIvE,KAAK,IAAI,CAAC,CAAC,EAAEA,KAAK,GAAGwE,QAAQ,CAAA;IACjCxE,KAAK,GAAGoB,IAAI,CAACE,GAAG,CAACtB,KAAK,EAAEwE,QAAQ,CAAC,CAAA;AAClC,GAAA;AACA,EAAA,OAAOxE,KAAK,CAAA;AACb,CAAA;AAEA,SAASsE,gBAAgBA,CACxBpE,GAAa,EACboD,SAAoB,EACpBb,KAAW,EACJ;EACP,IAAI,CAACvC,GAAG,CAACC,QAAQ,EAAED,GAAG,CAACC,QAAQ,GAAG,EAAE,CAAA;EACpC,MAAMgC,IAA6B,GAAG,EAAE,CAAA;AACxC,EAAA,KAAK,IAAIrC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGI,GAAG,CAACA,GAAG,CAAC5E,MAAM,EAAEwE,CAAC,EAAE,EAAE;AACxC,IAAA,MAAMyB,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACJ,CAAC,CAAC,CAAA;AACtB,IAAA,IAAIqC,IAAI,CAACZ,GAAG,CAAC,EAAE,SAAA;AACfY,IAAAA,IAAI,CAACZ,GAAG,CAAC,GAAG,IAAI,CAAA;AAChB,IAAA,MAAMxH,IAAI,GAAG0I,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAC,CAAA;IAC9B,IAAI,CAACxH,IAAI,EAAE;AACV,MAAA,MAAM,IAAI4H,UAAU,CAAC,CAAuBJ,oBAAAA,EAAAA,GAAG,QAAQ,CAAC,CAAA;AACzD,KAAA;IAEA,IAAIqD,OAAO,GAAG,IAAI,CAAA;AAClB,IAAA,MAAMnL,KAAK,GAAGM,IAAI,CAACN,KAAkB,CAAA;AACrC,IAAA,KAAK,IAAIiI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjI,KAAK,CAACgK,OAAO,EAAE/B,CAAC,EAAE,EAAE;MACvC,MAAMW,GAAG,GAAG,CAACvC,CAAC,GAAG4B,CAAC,IAAIxB,GAAG,CAACF,KAAK,CAAA;AAC/B,MAAA,MAAM6E,QAAQ,GAAGvB,SAAS,CAACjB,GAAG,GAAG,CAAC,CAAC,CAAA;AACnC,MAAA,IACCwC,QAAQ,IAAI,IAAI,KACf,CAACpL,KAAK,CAACkK,QAAQ,IAAIlK,KAAK,CAACkK,QAAQ,CAACjC,CAAC,CAAC,IAAImD,QAAQ,CAAC,EAElD,CAACD,OAAO,KAAKA,OAAO,GAAGE,aAAa,CAACrL,KAAK,CAAC,CAAC,EAAEiI,CAAC,CAAC,GAAGmD,QAAQ,CAAA;AAC7D,KAAA;AACA,IAAA,IAAID,OAAO,EACV1E,GAAG,CAACC,QAAQ,CAAC4E,OAAO,CAAC;AACpBjH,MAAAA,IAAI,EAAE,mBAAmB;MACzByD,GAAG;AACHoC,MAAAA,QAAQ,EAAEiB,OAAAA;AACX,KAAC,CAAC,CAAA;AACJ,GAAA;AACD,CAAA;AAEA,SAASE,aAAaA,CAACrL,KAAY,EAAa;EAC/C,IAAIA,KAAK,CAACkK,QAAQ,EAAE,OAAOlK,KAAK,CAACkK,QAAQ,CAACqB,KAAK,EAAE,CAAA;EACjD,MAAM9C,MAAiB,GAAG,EAAE,CAAA;AAC5B,EAAA,KAAK,IAAIpC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrG,KAAK,CAACgK,OAAO,EAAE3D,CAAC,EAAE,EAAEoC,MAAM,CAACK,IAAI,CAAC,CAAC,CAAC,CAAA;AAEtD,EAAA,OAAOL,MAAM,CAAA;AACd;;AClSA,MAAM+C,YAAY,GAAGA,CAAClJ,GAAyB,EAAEmJ,UAAiB,KAAY;AAC7E,EAAA,IAAI,OAAOnJ,GAAG,KAAK,QAAQ,EAAE,OAAO,EAAE,CAAA;AAEtC,EAAA,MAAMoJ,SAAS,GAAGpJ,GAAG,CAAC1B,YAAY,CAAC,eAAe,CAAC,CAAA;EACnD,MAAM+K,MAAM,GACXD,SAAS,IAAI,cAAc,CAACE,IAAI,CAACF,SAAS,CAAC,GACxCA,SAAS,CAACG,KAAK,CAAC,GAAG,CAAC,CAACpF,GAAG,CAACqF,MAAM,CAAC,GAChC,IAAI,CAAA;AACR,EAAA,MAAM9B,OAAO,GAAG8B,MAAM,CAACxJ,GAAG,CAAC1B,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA;AACxD,EAAA,MAAMqJ,OAAO,GAAG6B,MAAM,CAACxJ,GAAG,CAAC1B,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA;AACxD,EAAA,MAAM6H,MAAoB,GAAG;IAC5BuB,OAAO;IACPC,OAAO;IACPC,QAAQ,EAAEyB,MAAM,IAAIA,MAAM,CAAC9J,MAAM,IAAImI,OAAO,GAAG2B,MAAM,GAAG,IAAA;GACpC,CAAA;EAErB,KAAK,MAAMI,IAAI,IAAItJ,MAAM,CAACC,IAAI,CAAC+I,UAAU,CAAC,EAAE;AAC3C,IAAA,MAAMO,MAAM,GAAGP,UAAU,CAACM,IAAI,CAAC,CAACE,UAAU,CAAA;AAC1C,IAAA,MAAMhG,KAAK,GAAG+F,MAAM,IAAIA,MAAM,CAAC1J,GAAG,CAAC,CAAA;IACnC,IAAI2D,KAAK,KAAK,IAAI,EAAEwC,MAAM,CAACsD,IAAI,CAAC,GAAG9F,KAAK,CAAA;AACzC,GAAA;AACA,EAAA,OAAOwC,MAAM,CAAA;AACd,CAAC,CAAA;AAED,MAAMyD,YAAY,GAAGA,CAAC5L,IAAU,EAAEmL,UAAiB,KAAY;EAC9D,MAAMzL,KAAmB,GAAG,EAAE,CAAA;AAC9B,EAAA,IAAIM,IAAI,CAACN,KAAK,CAACgK,OAAO,IAAI,CAAC,EAAEhK,KAAK,CAACgK,OAAO,GAAG1J,IAAI,CAACN,KAAK,CAACgK,OAAO,CAAA;AAC/D,EAAA,IAAI1J,IAAI,CAACN,KAAK,CAACiK,OAAO,IAAI,CAAC,EAAEjK,KAAK,CAACiK,OAAO,GAAG3J,IAAI,CAACN,KAAK,CAACiK,OAAO,CAAA;EAC/D,IAAI3J,IAAI,CAACN,KAAK,CAACkK,QAAQ,EACtBlK,KAAK,CAAC,eAAe,CAAC,GAAGM,IAAI,CAACN,KAAK,CAACkK,QAAQ,CAACiC,IAAI,CAAC,GAAG,CAAC,CAAA;AAEvD,EAAA,KAAK,MAAMJ,IAAI,IAAIN,UAAU,EAAE;AAC9B,IAAA,MAAMW,MAAM,GAAGX,UAAU,CAACM,IAAI,CAAC,CAACM,UAAU,CAAA;AAC1C,IAAA,IAAID,MAAM,EAAEA,MAAM,CAAC9L,IAAI,CAACN,KAAK,CAAC+L,IAAI,CAAC,EAAE/L,KAAK,CAAC,CAAA;AAC5C,GAAA;AACA,EAAA,OAAOA,KAAK,CAAA;AACb,CAAC,CAAA;AAEM,MAAMsM,UAAU,GAAI3K,OAA0B,IAAiB;AACrE,EAAA,MAAM8J,UAAU,GAAG9J,OAAO,CAAC4K,cAAc,IAAI,EAAE,CAAA;AAC/C,EAAA,MAAMC,SAAwC,GAAG;AAChDxC,IAAAA,OAAO,EAAE;AAAE9J,MAAAA,OAAO,EAAE,CAAA;KAAG;AACvB+J,IAAAA,OAAO,EAAE;AAAE/J,MAAAA,OAAO,EAAE,CAAA;KAAG;AACvBgK,IAAAA,QAAQ,EAAE;AAAEhK,MAAAA,OAAO,EAAE,IAAA;AAAK,KAAA;GAC1B,CAAA;AAED,EAAA,KAAK,MAAM6L,IAAI,IAAItJ,MAAM,CAACC,IAAI,CAAC+I,UAAU,CAAC,EACzCe,SAAS,CAACT,IAAI,CAAC,GAAG;AAAE7L,IAAAA,OAAO,EAAEuL,UAAU,CAACM,IAAI,CAAC,CAAC7L,OAAAA;GAAS,CAAA;EACxD,OAAO;AACN8I,IAAAA,KAAK,EAAE;AACNhJ,MAAAA,KAAK,EAAE;AAAE4E,QAAAA,KAAK,EAAE;AAAE1E,UAAAA,OAAO,EAAE,EAAA;SAAI;AAAEoE,QAAAA,MAAM,EAAE;AAAEpE,UAAAA,OAAO,EAAE,KAAA;AAAM,SAAA;OAAG;AAC7DV,MAAAA,OAAO,EAAE,WAAW;AACpB+J,MAAAA,SAAS,EAAE,OAAO;AAClBxJ,MAAAA,SAAS,EAAE,IAAI;MACfN,KAAK,EAAEkC,OAAO,CAAC8K,UAAU;AACzBlM,MAAAA,QAAQ,EAAE,CACT;AACCC,QAAAA,GAAG,EAAE,OAAO;QACZE,QAAQA,CAAC4B,GAAG,EAAE;UACb,OAAO;AAAEsC,YAAAA,KAAK,EAAEtC,GAAG,CAAC1B,YAAY,CAAC,OAAO,CAAA;WAAG,CAAA;AAC5C,SAAA;AACD,OAAC,CACD;MACDP,KAAKA,CAACC,IAAI,EAAE;QACX,OAAO,CAAC,OAAO,EAAE;AAAEsE,UAAAA,KAAK,EAAEtE,IAAI,CAACN,KAAK,CAAC4E,KAAAA;AAAM,SAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAA;AAC5D,OAAA;KACA;AACD8H,IAAAA,QAAQ,EAAE;AACTlN,MAAAA,OAAO,EAAE,4BAA4B;AACrC+J,MAAAA,SAAS,EAAE,KAAK;AAChBhJ,MAAAA,QAAQ,EAAE,CAAC;AAAEC,QAAAA,GAAG,EAAE,IAAA;AAAK,OAAC,CAAC;AACzBH,MAAAA,KAAKA,GAAG;AACP,QAAA,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;AACjB,OAAA;KACA;AACDsM,IAAAA,SAAS,EAAE;MACVnN,OAAO,EAAEmC,OAAO,CAACiL,WAAW;AAC5B5M,MAAAA,KAAK,EAAEwM,SAAS;AAChBjD,MAAAA,SAAS,EAAE,MAAM;AACjBxJ,MAAAA,SAAS,EAAE,IAAI;AACfQ,MAAAA,QAAQ,EAAE,CACT;AAAEC,QAAAA,GAAG,EAAE,IAAI;AAAEE,QAAAA,QAAQ,EAAG4B,GAAG,IAAKkJ,YAAY,CAAClJ,GAAG,EAAEmJ,UAAU,CAAA;AAAE,OAAC,CAC/D;MACDpL,KAAKA,CAACC,IAAI,EAAE;QACX,OAAO,CAAC,IAAI,EAAE4L,YAAY,CAAC5L,IAAI,EAAEmL,UAAU,CAAC,EAAE,CAAC,CAAC,CAAA;AACjD,OAAA;KACA;AACDoB,IAAAA,WAAW,EAAE;MACZrN,OAAO,EAAEmC,OAAO,CAACiL,WAAW;AAC5B5M,MAAAA,KAAK,EAAEwM,SAAS;AAChBjD,MAAAA,SAAS,EAAE,YAAY;AACvBxJ,MAAAA,SAAS,EAAE,IAAI;AACfQ,MAAAA,QAAQ,EAAE,CACT;AAAEC,QAAAA,GAAG,EAAE,IAAI;AAAEE,QAAAA,QAAQ,EAAG4B,GAAG,IAAKkJ,YAAY,CAAClJ,GAAG,EAAEmJ,UAAU,CAAA;AAAE,OAAC,CAC/D;MACDpL,KAAKA,CAACC,IAAI,EAAE;QACX,OAAO,CAAC,IAAI,EAAE4L,YAAY,CAAC5L,IAAI,EAAEmL,UAAU,CAAC,EAAE,CAAC,CAAC,CAAA;AACjD,OAAA;AACD,KAAA;GACA,CAAA;AACF,CAAC,CAAA;AAIM,SAASqB,cAAcA,CAAC5L,MAAc,EAA+B;AAC3E,EAAA,IAAIuH,MAAM,GAAGvH,MAAM,CAACC,MAAM,CAAC2L,cAAc,CAAA;EACzC,IAAI,CAACrE,MAAM,EAAE;IACZA,MAAM,GAAGvH,MAAM,CAACC,MAAM,CAAC2L,cAAc,GAAG,EAAE,CAAA;AAC1C,IAAA,KAAK,MAAMtD,IAAI,IAAItI,MAAM,CAACE,KAAK,EAAE;AAChC,MAAA,MAAMiD,IAAI,GAAGnD,MAAM,CAACE,KAAK,CAACoI,IAAI,CAAC,CAAA;AAC/B,MAAA,IAAIuD,IAAI,GAAG1I,IAAI,CAACiF,IAAI,CAACC,SAAS,CAAA;AAC9B,MAAA,IAAIwD,IAAI,EAAEtE,MAAM,CAACsE,IAAI,CAAC,GAAG1I,IAAI,CAAA;AAC9B,KAAA;AACD,GAAA;AACA,EAAA,OAAOoE,MAAM,CAAA;AACd;;ACrIO,MAAMuE,eAAe,GAAG,IAAIC,SAAS,CAAa,gBAAgB,CAAC,CAAA;AAUnE,MAAMC,UAAU,GAAG,UAAClN,KAAgB,EAAE8H,GAAW,EAAmB;AAAA,EAAA,IAAjBqC,CAAC,GAAAvI,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,CAAC,CAAA;AAC9D,EAAA,MAAM6G,MAAM,GAAG;AAAE,IAAA,GAAGzI,KAAK;AAAEgK,IAAAA,OAAO,EAAEhK,KAAK,CAACgK,OAAO,GAAGG,CAAAA;GAAG,CAAA;EACvD,IAAI1B,MAAM,CAACyB,QAAQ,EAAE;IACpBzB,MAAM,CAACyB,QAAQ,GAAGzB,MAAM,CAACyB,QAAQ,CAACqB,KAAK,EAAE,CAAA;IACzC,KAAK,IAAIlF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8D,CAAC,EAAE9D,CAAC,EAAE,EAAEoC,MAAM,CAACyB,QAAQ,CAACiD,MAAM,CAACrF,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AAC9D,GAAA;AACA,EAAA,OAAOW,MAAM,CAAA;AACd,CAAC,CAAA;AAEM,SAAS2E,cAAcA,CAC7B3G,GAAa,EACbuC,KAAW,EACXJ,GAAW,EACD;EACV,MAAMyE,UAAU,GAAGP,cAAc,CAAC9D,KAAK,CAAC3E,IAAI,CAACnD,MAAM,CAAC,CAACmM,UAAU,CAAA;AAC/D,EAAA,KAAK,IAAI1E,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGlC,GAAG,CAACD,MAAM,EAAEmC,GAAG,EAAE,EAAE;IAC1C,IAAIK,KAAK,CAACkC,MAAM,CAACzE,GAAG,CAACA,GAAG,CAACmC,GAAG,GAAGD,GAAG,GAAGlC,GAAG,CAACF,KAAK,CAAC,CAAC,CAAElC,IAAI,IAAIgJ,UAAU,EACnE,OAAO,KAAK,CAAA;AACd,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACZ,CAAA;AAEO,SAASC,SAASA,CAACxM,KAAkB,EAAW;AACtD,EAAA,MAAMyM,KAAK,GAAGzM,KAAK,CAAC0M,SAAS,CAACD,KAAK,CAAA;AACnC,EAAA,KAAK,IAAIE,CAAC,GAAGF,KAAK,CAACG,KAAK,EAAED,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EACnC,IAAIF,KAAK,CAACjN,IAAI,CAACmN,CAAC,CAAC,CAACpJ,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,KAAK,EAAE,OAAO,IAAI,CAAA;AAE5D,EAAA,OAAO,KAAK,CAAA;AACb,CAAA;AAEO,SAASoE,YAAYA,CAACC,IAAiB,EAAW;AACxD,EAAA,OAAOA,IAAI,CAACC,MAAM,CAACxJ,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,KAAK,IAAI,CAAC,CAACqE,IAAI,CAACE,SAAS,CAAA;AACpE,CAAA;AAEO,SAASC,WAAWA,CAACC,MAAmB,EAAEC,MAAmB,EAAW;AAC9E,EAAA,OACCD,MAAM,CAACN,KAAK,IAAIO,MAAM,CAACP,KAAK,IAC5BM,MAAM,CAAClG,GAAG,IAAImG,MAAM,CAAC7D,KAAK,CAAC,CAAC,CAAC,CAAC,IAC9B4D,MAAM,CAAClG,GAAG,IAAImG,MAAM,CAACC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AAE9B,CAAA;AAMO,SAAS/F,QAAQA,CACvByF,IAAiB,EACjBxF,IAAsB,EACtBC,GAAW,EACU;EACrB,MAAMW,KAAK,GAAG4E,IAAI,CAACtN,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AAC3B,EAAA,MAAMmG,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;EAC/B,MAAMmF,UAAU,GAAGP,IAAI,CAACxD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AACjC,EAAA,MAAMgE,KAAK,GAAG3H,GAAG,CAAC0B,QAAQ,CAACyF,IAAI,CAAC9F,GAAG,GAAGqG,UAAU,EAAE/F,IAAI,EAAEC,GAAG,CAAC,CAAA;AAC5D,EAAA,OAAO+F,KAAK,IAAI,IAAI,GAAG,IAAI,GAAGR,IAAI,CAACtN,IAAI,CAAC,CAAC,CAAC,CAAC+N,OAAO,CAACF,UAAU,GAAGC,KAAK,CAAC,CAAA;AACvE,CAAA;AAEO,SAASE,aAAaA,CAACtO,KAAgB,EAAE8H,GAAW,EAAoB;AAAA,EAAA,IAAlBqC,CAAC,GAAAvI,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,CAAC,CAAA;AACjE,EAAA,MAAM6G,MAAiB,GAAG;AAAE,IAAA,GAAGzI,KAAK;AAAEgK,IAAAA,OAAO,EAAEhK,KAAK,CAACgK,OAAO,GAAGG,CAAAA;GAAG,CAAA;EAElE,IAAI1B,MAAM,CAACyB,QAAQ,EAAE;IACpBzB,MAAM,CAACyB,QAAQ,GAAGzB,MAAM,CAACyB,QAAQ,CAACqB,KAAK,EAAE,CAAA;IACzC9C,MAAM,CAACyB,QAAQ,CAACiD,MAAM,CAACrF,GAAG,EAAEqC,CAAC,CAAC,CAAA;AAC9B,IAAA,IAAI,CAAC1B,MAAM,CAACyB,QAAQ,CAACqE,IAAI,CAAElE,CAAC,IAAKA,CAAC,GAAG,CAAC,CAAC,EAAE5B,MAAM,CAACyB,QAAQ,GAAG,IAAI,CAAA;AAChE,GAAA;AACA,EAAA,OAAOzB,MAAM,CAAA;AACd,CAAA;AAEO,SAAS+F,UAAUA,CAACZ,IAAiB,EAAsB;EACjE,KAAK,IAAIH,CAAC,GAAGG,IAAI,CAACF,KAAK,GAAG,CAAC,EAAED,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EACtC,IAAIG,IAAI,CAACtN,IAAI,CAACmN,CAAC,CAAC,CAACpJ,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,KAAK,EAC5C,OAAOqE,IAAI,CAACtN,IAAI,CAAC,CAAC,CAAC,CAAC+N,OAAO,CAACT,IAAI,CAACa,MAAM,CAAChB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;AAEjD,EAAA,OAAO,IAAI,CAAA;AACZ,CAAA;AAMO,SAASiB,QAAQA,CAACd,IAAiB,EAA2B;EACpE,KACC,IAAIe,KAAK,GAAGf,IAAI,CAACE,SAAS,EAAEhG,GAAG,GAAG8F,IAAI,CAAC9F,GAAG,EAC1C6G,KAAK,EACLA,KAAK,GAAGA,KAAK,CAACC,UAAU,EAAE9G,GAAG,EAAE,EAC9B;IACD,MAAMiF,IAAI,GAAG4B,KAAK,CAACtK,IAAI,CAACiF,IAAI,CAACC,SAAS,CAAA;AACtC,IAAA,IAAIwD,IAAI,IAAI,MAAM,IAAIA,IAAI,IAAI,YAAY,EAAE,OAAOa,IAAI,CAACiB,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAA;AACzE,GAAA;EAEA,KACC,IAAI2G,MAAM,GAAGb,IAAI,CAACkB,UAAU,EAAEhH,GAAG,GAAG8F,IAAI,CAAC9F,GAAG,EAC5C2G,MAAM,EACNA,MAAM,GAAGA,MAAM,CAACM,SAAS,EAAEjH,GAAG,EAAE,EAC/B;IACD,MAAMiF,IAAI,GAAG0B,MAAM,CAACpK,IAAI,CAACiF,IAAI,CAACC,SAAS,CAAA;AACvC,IAAA,IAAIwD,IAAI,IAAI,MAAM,IAAIA,IAAI,IAAI,YAAY,EAAE;MAC3C,OAAOa,IAAI,CAACiB,GAAG,CAACR,OAAO,CAACvG,GAAG,GAAG2G,MAAM,CAACtF,QAAQ,CAAC,CAAA;AAC/C,KAAA;AACD,GAAA;AACD,CAAA;AAEO,SAAS6F,aAAaA,CAAClO,KAAkB,EAAe;AAC9D,EAAA,MAAMmO,GAAG,GAAGnO,KAAK,CAAC0M,SAA0C,CAAA;AAC5D,EAAA,IAAI,aAAa,IAAIyB,GAAG,IAAIA,GAAG,CAACC,WAAW,EAAE;AAC5C,IAAA,OAAOD,GAAG,CAACC,WAAW,CAACpH,GAAG,GAAGmH,GAAG,CAACE,SAAS,CAACrH,GAAG,GAC3CmH,GAAG,CAACC,WAAW,GACfD,GAAG,CAACE,SAAS,CAAA;GAChB,MAAM,IACN,MAAM,IAAIF,GAAG,IACbA,GAAG,CAAC3O,IAAI,IACR2O,GAAG,CAAC3O,IAAI,CAAC+D,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,MAAM,EACrC;IACD,OAAO0F,GAAG,CAACG,OAAO,CAAA;AACnB,GAAA;AACA,EAAA,MAAMC,KAAK,GAAGb,UAAU,CAACS,GAAG,CAAC1B,KAAK,CAAC,IAAImB,QAAQ,CAACO,GAAG,CAAC1B,KAAK,CAAC,CAAA;EAC1D,IAAI8B,KAAK,EAAE,OAAOA,KAAK,CAAA;EAEvB,MAAM,IAAInH,UAAU,CAAC,CAAA,8BAAA,EAAiC+G,GAAG,CAACK,IAAI,EAAE,CAAC,CAAA;AAClE,CAAA;AAEO,MAAMC,SAAO,GAAI5M,GAAY,IACnCA,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKb,SAAS,IAAIgK,MAAM,CAAC0D,KAAK,CAAC7M,GAAG,CAAC;;AC7HhD,MAAM8M,aAAa,SAASC,SAAS,CAAC;EAI5ClM,WAAWA,CAAC0L,WAAwB,EAAwC;AAAA,IAAA,IAAtCC,SAAsB,GAAAvN,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAGsN,WAAW,CAAA;IACzE,MAAMlG,KAAK,GAAGkG,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AAClC,IAAA,MAAMmG,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;IAC/B,MAAMmF,UAAU,GAAGe,WAAW,CAAC9E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AACxC,IAAA,MAAM5B,IAAI,GAAG/B,GAAG,CAACE,WAAW,CAC3BuI,WAAW,CAACpH,GAAG,GAAGqG,UAAU,EAC5BgB,SAAS,CAACrH,GAAG,GAAGqG,UACjB,CAAC,CAAA;AACD,IAAA,MAAMU,GAAG,GAAGK,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAA;IAC/B,MAAMqP,KAAK,GAAGlJ,GAAG,CACf8B,WAAW,CAACC,IAAI,CAAC,CACjBoH,MAAM,CAAEC,CAAC,IAAKA,CAAC,IAAIV,SAAS,CAACrH,GAAG,GAAGqG,UAAU,CAAC,CAAA;IAEhDwB,KAAK,CAACrE,OAAO,CAAC6D,SAAS,CAACrH,GAAG,GAAGqG,UAAU,CAAC,CAAA;AACzC,IAAA,MAAM2B,MAAM,GAAGH,KAAK,CAAClJ,GAAG,CAAEqB,GAAG,IAAK;AACjC,MAAA,MAAMmD,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAC,CAAA;MAC9B,IAAI,CAACmD,IAAI,EAAE;AACV,QAAA,MAAM,IAAI/C,UAAU,CAAC,CAAuBJ,oBAAAA,EAAAA,GAAG,QAAQ,CAAC,CAAA;AACzD,OAAA;AACA,MAAA,MAAMiI,IAAI,GAAG5B,UAAU,GAAGrG,GAAG,GAAG,CAAC,CAAA;MACjC,OAAO,IAAIkI,cAAc,CACxBnB,GAAG,CAACR,OAAO,CAAC0B,IAAI,CAAC,EACjBlB,GAAG,CAACR,OAAO,CAAC0B,IAAI,GAAG9E,IAAI,CAACzL,OAAO,CAACyQ,IAAI,CACrC,CAAC,CAAA;AACF,KAAC,CAAC,CAAA;AACF,IAAA,KAAK,CAACH,MAAM,CAAC,CAAC,CAAC,CAACI,KAAK,EAAEJ,MAAM,CAAC,CAAC,CAAC,CAACK,GAAG,EAAEL,MAAM,CAAC,CAAA;IAC7C,IAAI,CAACZ,WAAW,GAAGA,WAAW,CAAA;IAC9B,IAAI,CAACC,SAAS,GAAGA,SAAS,CAAA;AAC3B,GAAA;EACAiB,EAAEA,CAAC5C,SAAkB,EAAW;IAC/B,OACCA,SAAS,YAAYiC,aAAa,IAClCjC,SAAS,CAAC0B,WAAW,CAACpH,GAAG,IAAI,IAAI,CAACoH,WAAW,CAACpH,GAAG,IACjD0F,SAAS,CAAC2B,SAAS,CAACrH,GAAG,IAAI,IAAI,CAACqH,SAAS,CAACrH,GAAG,CAAA;AAE/C,GAAA;AACArB,EAAAA,GAAGA,CAACoI,GAAS,EAAEwB,OAAiB,EAA6B;AAC5D,IAAA,MAAMnB,WAAW,GAAGL,GAAG,CAACR,OAAO,CAACgC,OAAO,CAAC5J,GAAG,CAAC,IAAI,CAACyI,WAAW,CAACpH,GAAG,CAAC,CAAC,CAAA;AAClE,IAAA,MAAMqH,SAAS,GAAGN,GAAG,CAACR,OAAO,CAACgC,OAAO,CAAC5J,GAAG,CAAC,IAAI,CAAC0I,SAAS,CAACrH,GAAG,CAAC,CAAC,CAAA;AAE9D,IAAA,IACC6F,YAAY,CAACuB,WAAW,CAAC,IACzBvB,YAAY,CAACwB,SAAS,CAAC,IACvBpB,WAAW,CAACmB,WAAW,EAAEC,SAAS,CAAC,EAClC;AACD,MAAA,MAAMmB,YAAY,GAAG,IAAI,CAACpB,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI4O,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;MACtE,IAAIgQ,YAAY,IAAI,IAAI,CAACC,cAAc,EAAE,EACxC,OAAOd,aAAa,CAACe,YAAY,CAACtB,WAAW,EAAEC,SAAS,CAAC,CAAC,KACtD,IAAImB,YAAY,IAAI,IAAI,CAACG,cAAc,EAAE,EAC7C,OAAOhB,aAAa,CAACiB,YAAY,CAACxB,WAAW,EAAEC,SAAS,CAAC,CAAC,KACtD,OAAO,IAAIM,aAAa,CAACP,WAAW,EAAEC,SAAS,CAAC,CAAA;AACtD,KAAA;AAEA,IAAA,OAAOwB,aAAa,CAACC,OAAO,CAAC1B,WAAW,EAAEC,SAAS,CAAC,CAAA;AACrD,GAAA;AACA0B,EAAAA,MAAMA,GAAG;IACR,OAAO;AACNxM,MAAAA,IAAI,EAAE,MAAM;AACZyM,MAAAA,MAAM,EAAE,IAAI,CAAC5B,WAAW,CAACpH,GAAG;AAC5BwH,MAAAA,IAAI,EAAE,IAAI,CAACH,SAAS,CAACrH,GAAAA;KACrB,CAAA;AACF,GAAA;AAEOyI,EAAAA,cAAcA,GAAY;IAChC,MAAMvH,KAAK,GAAG,IAAI,CAACkG,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AACvC,IAAA,MAAMmG,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;IAC/B,MAAMmF,UAAU,GAAG,IAAI,CAACe,WAAW,CAAC9E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AAE7C,IAAA,MAAM2G,UAAU,GAAGtK,GAAG,CAAC6B,QAAQ,CAAC,IAAI,CAAC4G,WAAW,CAACpH,GAAG,GAAGqG,UAAU,CAAC,CAAA;AAClE,IAAA,MAAM6C,QAAQ,GAAGvK,GAAG,CAAC6B,QAAQ,CAAC,IAAI,CAAC6G,SAAS,CAACrH,GAAG,GAAGqG,UAAU,CAAC,CAAA;AAC9D,IAAA,IAAIxG,IAAI,CAACC,GAAG,CAACmJ,UAAU,EAAEC,QAAQ,CAAC,GAAG,CAAC,EAAE,OAAO,KAAK,CAAA;AACpD,IAAA,MAAMC,WAAW,GAAGF,UAAU,GAAG,IAAI,CAAC7B,WAAW,CAACpB,SAAS,CAAE9N,KAAK,CAACgK,OAAO,CAAA;AAC1E,IAAA,MAAMkH,SAAS,GAAGF,QAAQ,GAAG,IAAI,CAAC7B,SAAS,CAACrB,SAAS,CAAE9N,KAAK,CAACgK,OAAO,CAAA;IACpE,OAAOrC,IAAI,CAACE,GAAG,CAACoJ,WAAW,EAAEC,SAAS,CAAC,IAAIzK,GAAG,CAACF,KAAK,CAAA;AACrD,GAAA;AAEOkK,EAAAA,cAAcA,GAAY;IAChC,MAAMU,SAAS,GAAG,IAAI,CAACjC,WAAW,CAACrG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IAC5C,MAAMuI,OAAO,GAAG,IAAI,CAACjC,SAAS,CAACtG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AACxC,IAAA,IAAIlB,IAAI,CAACC,GAAG,CAACuJ,SAAS,EAAEC,OAAO,CAAC,GAAG,CAAC,EAAE,OAAO,KAAK,CAAA;AAElD,IAAA,MAAMC,YAAY,GAAGF,SAAS,GAAG,IAAI,CAACjC,WAAW,CAACpB,SAAS,CAAE9N,KAAK,CAACiK,OAAO,CAAA;AAC1E,IAAA,MAAMqH,UAAU,GAAGF,OAAO,GAAG,IAAI,CAACjC,SAAS,CAACrB,SAAS,CAAE9N,KAAK,CAACiK,OAAO,CAAA;AAEpE,IAAA,OACCtC,IAAI,CAACE,GAAG,CAACwJ,YAAY,EAAEC,UAAU,CAAC,IAAI,IAAI,CAACnC,SAAS,CAAC7O,IAAI,CAAC,CAAC,CAAC,CAAC,CAACoJ,UAAU,CAAA;AAE1E,GAAA;EAEA,OAAcgH,YAAYA,CACzBxB,WAAwB,EAER;AAAA,IAAA,IADhBC,SAAsB,GAAAvN,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAGsN,WAAW,CAAA;IAEpC,MAAMlG,KAAK,GAAGkG,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AAClC,IAAA,MAAMmG,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;IAC/B,MAAMmF,UAAU,GAAGe,WAAW,CAAC9E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IAExC,MAAMmH,UAAU,GAAG9K,GAAG,CAACa,QAAQ,CAAC4H,WAAW,CAACpH,GAAG,GAAGqG,UAAU,CAAC,CAAA;IAC7D,MAAMqD,QAAQ,GAAG/K,GAAG,CAACa,QAAQ,CAAC6H,SAAS,CAACrH,GAAG,GAAGqG,UAAU,CAAC,CAAA;AACzD,IAAA,MAAMU,GAAG,GAAGK,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAA;AAE/B,IAAA,IAAIiR,UAAU,CAACvK,GAAG,IAAIwK,QAAQ,CAACxK,GAAG,EAAE;MACnC,IAAIuK,UAAU,CAACvK,GAAG,GAAG,CAAC,EACrBkI,WAAW,GAAGL,GAAG,CAACR,OAAO,CAACF,UAAU,GAAG1H,GAAG,CAACA,GAAG,CAAC8K,UAAU,CAACzK,IAAI,CAAC,CAAC,CAAA;AACjE,MAAA,IAAI0K,QAAQ,CAACpK,MAAM,GAAGX,GAAG,CAACD,MAAM,EAC/B2I,SAAS,GAAGN,GAAG,CAACR,OAAO,CACtBF,UAAU,GACT1H,GAAG,CAACA,GAAG,CAACA,GAAG,CAACF,KAAK,IAAIE,GAAG,CAACD,MAAM,GAAG,CAAC,CAAC,GAAGgL,QAAQ,CAACtK,KAAK,GAAG,CAAC,CAC3D,CAAC,CAAA;AACH,KAAC,MAAM;MACN,IAAIsK,QAAQ,CAACxK,GAAG,GAAG,CAAC,EACnBmI,SAAS,GAAGN,GAAG,CAACR,OAAO,CAACF,UAAU,GAAG1H,GAAG,CAACA,GAAG,CAAC+K,QAAQ,CAAC1K,IAAI,CAAC,CAAC,CAAA;AAC7D,MAAA,IAAIyK,UAAU,CAACnK,MAAM,GAAGX,GAAG,CAACD,MAAM,EACjC0I,WAAW,GAAGL,GAAG,CAACR,OAAO,CACxBF,UAAU,GACT1H,GAAG,CAACA,GAAG,CAACA,GAAG,CAACF,KAAK,IAAIE,GAAG,CAACD,MAAM,GAAG,CAAC,CAAC,GAAG+K,UAAU,CAACrK,KAAK,GAAG,CAAC,CAC7D,CAAC,CAAA;AACH,KAAA;AACA,IAAA,OAAO,IAAIuI,aAAa,CAACP,WAAW,EAAEC,SAAS,CAAC,CAAA;AACjD,GAAA;EAEOsC,WAAWA,CAACC,CAAoC,EAAE;IACxD,MAAM1I,KAAK,GAAG,IAAI,CAACkG,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AACvC,IAAA,MAAMmG,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;IAC/B,MAAMmF,UAAU,GAAG,IAAI,CAACe,WAAW,CAAC9E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IAE7C,MAAMuF,KAAK,GAAGlJ,GAAG,CAAC8B,WAAW,CAC5B9B,GAAG,CAACE,WAAW,CACd,IAAI,CAACuI,WAAW,CAACpH,GAAG,GAAGqG,UAAU,EACjC,IAAI,CAACgB,SAAS,CAACrH,GAAG,GAAGqG,UACtB,CACD,CAAC,CAAA;AACD,IAAA,KAAK,IAAI9H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsJ,KAAK,CAAC9N,MAAM,EAAEwE,CAAC,EAAE,EAAE;AACtCqL,MAAAA,CAAC,CAAC1I,KAAK,CAACkC,MAAM,CAACyE,KAAK,CAACtJ,CAAC,CAAC,CAAC,EAAG8H,UAAU,GAAGwB,KAAK,CAACtJ,CAAC,CAAC,CAAC,CAAA;AAClD,KAAA;AACD,GAAA;AAEO7G,EAAAA,OAAOA,GAAU;IACvB,MAAMwJ,KAAK,GAAG,IAAI,CAACkG,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AACvC,IAAA,MAAMmG,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;IAC/B,MAAMmF,UAAU,GAAG,IAAI,CAACe,WAAW,CAAC9E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IAE7C,MAAM5B,IAAI,GAAG/B,GAAG,CAACE,WAAW,CAC3B,IAAI,CAACuI,WAAW,CAACpH,GAAG,GAAGqG,UAAU,EACjC,IAAI,CAACgB,SAAS,CAACrH,GAAG,GAAGqG,UACtB,CAAC,CAAA;IACD,MAAMzF,IAA6B,GAAG,EAAE,CAAA;IACxC,MAAMiJ,IAAI,GAAG,EAAE,CAAA;AACf,IAAA,KAAK,IAAIhJ,GAAG,GAAGH,IAAI,CAACxB,GAAG,EAAE2B,GAAG,GAAGH,IAAI,CAACpB,MAAM,EAAEuB,GAAG,EAAE,EAAE;MAClD,MAAMiJ,UAAU,GAAG,EAAE,CAAA;AACrB,MAAA,KACC,IAAI/I,KAAK,GAAGF,GAAG,GAAGlC,GAAG,CAACF,KAAK,GAAGiC,IAAI,CAAC1B,IAAI,EAAE8B,GAAG,GAAGJ,IAAI,CAAC1B,IAAI,EACxD8B,GAAG,GAAGJ,IAAI,CAACtB,KAAK,EAChB0B,GAAG,EAAE,EAAEC,KAAK,EAAE,EACb;AACD,QAAA,MAAMf,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,CAAA;AAC1B,QAAA,IAAIH,IAAI,CAACZ,GAAG,CAAC,EAAE,SAAA;AACfY,QAAAA,IAAI,CAACZ,GAAG,CAAC,GAAG,IAAI,CAAA;AAEhB,QAAA,MAAM+J,QAAQ,GAAGpL,GAAG,CAACa,QAAQ,CAACQ,GAAG,CAAC,CAAA;AAClC,QAAA,IAAImD,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAC,CAAA;QAC5B,IAAI,CAACmD,IAAI,EAAE;AACV,UAAA,MAAM/C,UAAU,CAAC,CAAuBJ,oBAAAA,EAAAA,GAAG,QAAQ,CAAC,CAAA;AACrD,SAAA;QAEA,MAAMgK,SAAS,GAAGtJ,IAAI,CAAC1B,IAAI,GAAG+K,QAAQ,CAAC/K,IAAI,CAAA;QAC3C,MAAMiL,UAAU,GAAGF,QAAQ,CAAC3K,KAAK,GAAGsB,IAAI,CAACtB,KAAK,CAAA;AAE9C,QAAA,IAAI4K,SAAS,GAAG,CAAC,IAAIC,UAAU,GAAG,CAAC,EAAE;AACpC,UAAA,IAAI/R,KAAK,GAAGiL,IAAI,CAACjL,KAAkB,CAAA;UACnC,IAAI8R,SAAS,GAAG,CAAC,EAAE;YAClB9R,KAAK,GAAGsO,aAAa,CAACtO,KAAK,EAAE,CAAC,EAAE8R,SAAS,CAAC,CAAA;AAC3C,WAAA;UACA,IAAIC,UAAU,GAAG,CAAC,EAAE;AACnB/R,YAAAA,KAAK,GAAGsO,aAAa,CACpBtO,KAAK,EACLA,KAAK,CAACgK,OAAO,GAAG+H,UAAU,EAC1BA,UACD,CAAC,CAAA;AACF,WAAA;AACA,UAAA,IAAIF,QAAQ,CAAC/K,IAAI,GAAG0B,IAAI,CAAC1B,IAAI,EAAE;YAC9BmE,IAAI,GAAGA,IAAI,CAAC5G,IAAI,CAACa,aAAa,CAAClF,KAAK,CAAC,CAAA;YACrC,IAAI,CAACiL,IAAI,EAAE;cACV,MAAM/C,UAAU,CACf,CAAA,iCAAA,EAAoC8J,IAAI,CAACC,SAAS,CAACjS,KAAK,CAAC,CAAA,CAC1D,CAAC,CAAA;AACF,aAAA;AACD,WAAC,MAAM;AACNiL,YAAAA,IAAI,GAAGA,IAAI,CAAC5G,IAAI,CAAC/C,MAAM,CAACtB,KAAK,EAAEiL,IAAI,CAACzL,OAAO,CAAC,CAAA;AAC7C,WAAA;AACD,SAAA;AACA,QAAA,IAAIqS,QAAQ,CAAC7K,GAAG,GAAGwB,IAAI,CAACxB,GAAG,IAAI6K,QAAQ,CAACzK,MAAM,GAAGoB,IAAI,CAACpB,MAAM,EAAE;AAC7D,UAAA,MAAMpH,KAAK,GAAG;YACb,GAAGiL,IAAI,CAACjL,KAAK;YACbiK,OAAO,EACNtC,IAAI,CAACC,GAAG,CAACiK,QAAQ,CAACzK,MAAM,EAAEoB,IAAI,CAACpB,MAAM,CAAC,GACtCO,IAAI,CAACE,GAAG,CAACgK,QAAQ,CAAC7K,GAAG,EAAEwB,IAAI,CAACxB,GAAG,CAAA;WAChC,CAAA;AACD,UAAA,IAAI6K,QAAQ,CAAC7K,GAAG,GAAGwB,IAAI,CAACxB,GAAG,EAAE;YAC5BiE,IAAI,GAAGA,IAAI,CAAC5G,IAAI,CAACa,aAAa,CAAClF,KAAK,CAAE,CAAA;AACvC,WAAC,MAAM;AACNiL,YAAAA,IAAI,GAAGA,IAAI,CAAC5G,IAAI,CAAC/C,MAAM,CAACtB,KAAK,EAAEiL,IAAI,CAACzL,OAAO,CAAC,CAAA;AAC7C,WAAA;AACD,SAAA;AACAoS,QAAAA,UAAU,CAAC9I,IAAI,CAACmC,IAAI,CAAC,CAAA;AACtB,OAAA;AACA0G,MAAAA,IAAI,CAAC7I,IAAI,CAACE,KAAK,CAAC/F,KAAK,CAAC0F,GAAG,CAAC,CAACuJ,IAAI,CAACC,QAAQ,CAACpC,IAAI,CAAC6B,UAAU,CAAC,CAAC,CAAC,CAAA;AAC5D,KAAA;AAEA,IAAA,MAAM7O,QAAQ,GACb,IAAI,CAAC0N,cAAc,EAAE,IAAI,IAAI,CAACF,cAAc,EAAE,GAAGvH,KAAK,GAAG2I,IAAI,CAAA;AAC9D,IAAA,OAAO,IAAIS,KAAK,CAACD,QAAQ,CAACpC,IAAI,CAAChN,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AAChD,GAAA;EAEA,OAAcyN,YAAYA,CACzBtB,WAAwB,EAER;AAAA,IAAA,IADhBC,SAAsB,GAAAvN,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAGsN,WAAW,CAAA;IAEpC,MAAMlG,KAAK,GAAGkG,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AAClC,IAAA,MAAMmG,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;IAC/B,MAAMmF,UAAU,GAAGe,WAAW,CAAC9E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IAExC,MAAMmH,UAAU,GAAG9K,GAAG,CAACa,QAAQ,CAAC4H,WAAW,CAACpH,GAAG,GAAGqG,UAAU,CAAC,CAAA;IAC7D,MAAMqD,QAAQ,GAAG/K,GAAG,CAACa,QAAQ,CAAC6H,SAAS,CAACrH,GAAG,GAAGqG,UAAU,CAAC,CAAA;AACzD,IAAA,MAAMU,GAAG,GAAGK,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAA;AAE/B,IAAA,IAAIiR,UAAU,CAACzK,IAAI,IAAI0K,QAAQ,CAAC1K,IAAI,EAAE;MACrC,IAAIyK,UAAU,CAACzK,IAAI,GAAG,CAAC,EACtBoI,WAAW,GAAGL,GAAG,CAACR,OAAO,CACxBF,UAAU,GAAG1H,GAAG,CAACA,GAAG,CAAC8K,UAAU,CAACvK,GAAG,GAAGP,GAAG,CAACF,KAAK,CAChD,CAAC,CAAA;AACF,MAAA,IAAIiL,QAAQ,CAACtK,KAAK,GAAGT,GAAG,CAACF,KAAK,EAC7B4I,SAAS,GAAGN,GAAG,CAACR,OAAO,CACtBF,UAAU,GAAG1H,GAAG,CAACA,GAAG,CAACA,GAAG,CAACF,KAAK,IAAIiL,QAAQ,CAACxK,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CACxD,CAAC,CAAA;AACH,KAAC,MAAM;MACN,IAAIwK,QAAQ,CAAC1K,IAAI,GAAG,CAAC,EACpBqI,SAAS,GAAGN,GAAG,CAACR,OAAO,CAACF,UAAU,GAAG1H,GAAG,CAACA,GAAG,CAAC+K,QAAQ,CAACxK,GAAG,GAAGP,GAAG,CAACF,KAAK,CAAC,CAAC,CAAA;AACxE,MAAA,IAAIgL,UAAU,CAACrK,KAAK,GAAGT,GAAG,CAACF,KAAK,EAC/B2I,WAAW,GAAGL,GAAG,CAACR,OAAO,CACxBF,UAAU,GAAG1H,GAAG,CAACA,GAAG,CAACA,GAAG,CAACF,KAAK,IAAIgL,UAAU,CAACvK,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1D,CAAC,CAAA;AACH,KAAA;AACA,IAAA,OAAO,IAAIyI,aAAa,CAACP,WAAW,EAAEC,SAAS,CAAC,CAAA;AACjD,GAAA;AACA,EAAA,OAAOkD,QAAQA,CAACxD,GAAS,EAAEyD,IAAuB,EAAiB;IAClE,OAAO,IAAI7C,aAAa,CAACZ,GAAG,CAACR,OAAO,CAACiE,IAAI,CAACxB,MAAM,CAAC,EAAEjC,GAAG,CAACR,OAAO,CAACiE,IAAI,CAAChD,IAAI,CAAC,CAAC,CAAA;AAC3E,GAAA;AAEA,EAAA,OAAOhO,MAAMA,CACZuN,GAAS,EACT0D,UAAkB,EAEF;AAAA,IAAA,IADhBC,QAAgB,GAAA5Q,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG2Q,UAAU,CAAA;AAE7B,IAAA,OAAO,IAAI9C,aAAa,CAACZ,GAAG,CAACR,OAAO,CAACkE,UAAU,CAAC,EAAE1D,GAAG,CAACR,OAAO,CAACmE,QAAQ,CAAC,CAAC,CAAA;AACzE,GAAA;AAEAC,EAAAA,WAAWA,GAAiB;AAC3B,IAAA,OAAO,IAAIC,YAAY,CAAC,IAAI,CAACxD,WAAW,CAACpH,GAAG,EAAE,IAAI,CAACqH,SAAS,CAACrH,GAAG,CAAC,CAAA;AAClE,GAAA;AACD,CAAA;AACA2H,aAAa,CAACkD,SAAS,CAACC,OAAO,GAAG,KAAK,CAAA;AAEvClD,SAAS,CAACmD,MAAM,CAAC,MAAM,EAAEpD,aAAa,CAAC,CAAA;AAEhC,MAAMiD,YAAY,CAAC;AACzBlP,EAAAA,WAAWA,CACHsN,MAAc,EACdxB,IAAY,EAClB;IAAA,IAFMwB,CAAAA,MAAc,GAAdA,MAAc,CAAA;IAAA,IACdxB,CAAAA,IAAY,GAAZA,IAAY,CAAA;AACjB,GAAA;EAEH7I,GAAGA,CAAC4J,OAAiB,EAAgB;IACpC,OAAO,IAAIqC,YAAY,CAACrC,OAAO,CAAC5J,GAAG,CAAC,IAAI,CAACqK,MAAM,CAAC,EAAET,OAAO,CAAC5J,GAAG,CAAC,IAAI,CAAC6I,IAAI,CAAC,CAAC,CAAA;AAC1E,GAAA;EAEAjB,OAAOA,CAACQ,GAAS,EAA6B;IAC7C,MAAMK,WAAW,GAAGL,GAAG,CAACR,OAAO,CAAC,IAAI,CAACyC,MAAM,CAAC;MAC3C3B,SAAS,GAAGN,GAAG,CAACR,OAAO,CAAC,IAAI,CAACiB,IAAI,CAAC,CAAA;AACnC,IAAA,IACCJ,WAAW,CAACrB,MAAM,CAACxJ,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,KAAK,IAC/C4F,SAAS,CAACtB,MAAM,CAACxJ,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,KAAK,IAC7C2F,WAAW,CAACrG,KAAK,EAAE,GAAGqG,WAAW,CAACrB,MAAM,CAACnE,UAAU,IACnDyF,SAAS,CAACtG,KAAK,EAAE,GAAGsG,SAAS,CAACtB,MAAM,CAACnE,UAAU,IAC/CqE,WAAW,CAACmB,WAAW,EAAEC,SAAS,CAAC,EAEnC,OAAO,IAAIM,aAAa,CAACP,WAAW,EAAEC,SAAS,CAAC,CAAC,KAC7C,OAAOO,SAAS,CAACoD,IAAI,CAAC3D,SAAS,EAAE,CAAC,CAAC,CAAA;AACzC,GAAA;AACD,CAAA;AAEO,SAAS4D,iBAAiBA,CAACjS,KAAkB,EAAgB;EACnE,MAAM6O,KAAmB,GAAG,EAAE,CAAA;EAC9B,IAAI,EAAE7O,KAAK,CAAC0M,SAAS,YAAYiC,aAAa,CAAC,EAAE,OAAOE,KAAK,CAAA;EAC7D7O,KAAK,CAAC0M,SAAS,CAACiE,WAAW,CAAC,CAACnR,IAAI,EAAEwH,GAAG,KAAK;AAC1C6H,IAAAA,KAAK,CAAC7G,IAAI,CACTkK,UAAU,CAAC1S,IAAI,CAACwH,GAAG,EAAEA,GAAG,GAAGxH,IAAI,CAAC6I,QAAQ,EAAE;AAAEvE,MAAAA,KAAK,EAAE,cAAA;AAAe,KAAC,CACpE,CAAC,CAAA;AACF,GAAC,CAAC,CAAA;AAEF,EAAA,OAAO+K,KAAK,CAAA;AACb,CAAA;AAEA,SAASsD,uBAAuBA,CAAAC,IAAA,EAAgC;EAAA,IAA/B;IAAEhD,KAAK;AAAEC,IAAAA,GAAAA;AAAmB,GAAC,GAAA+C,IAAA,CAAA;EAC7D,IAAIhD,KAAK,CAACpI,GAAG,IAAIqI,GAAG,CAACrI,GAAG,IAAIoI,KAAK,CAACpI,GAAG,GAAGoI,KAAK,CAACpI,GAAG,GAAG,CAAC,EAAE,OAAO,KAAK,CAAC;AACpE,EAAA,IAAIqL,SAAS,GAAGjD,KAAK,CAACpI,GAAG,CAAA;AACzB,EAAA,IAAIsL,QAAQ,GAAGjD,GAAG,CAACrI,GAAG,CAAA;AACtB,EAAA,IAAI4F,KAAK,GAAGwC,KAAK,CAACxC,KAAK,CAAA;EACvB,OAAOA,KAAK,IAAI,CAAC,EAAEA,KAAK,EAAE,EAAEyF,SAAS,EAAE,EACtC,IAAIjD,KAAK,CAACvB,KAAK,CAACjB,KAAK,GAAG,CAAC,CAAC,GAAGwC,KAAK,CAAChC,GAAG,CAACR,KAAK,CAAC,EAAE,MAAA;AAChD,EAAA,KAAK,IAAID,CAAC,GAAG0C,GAAG,CAACzC,KAAK,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE2F,QAAQ,EAAE,EAC9C,IAAIjD,GAAG,CAAC1B,MAAM,CAAChB,CAAC,GAAG,CAAC,CAAC,GAAG0C,GAAG,CAAC/F,KAAK,CAACqD,CAAC,CAAC,EAAE,MAAA;EACvC,OACC0F,SAAS,IAAIC,QAAQ,IACrB,WAAW,CAACxH,IAAI,CAACsE,KAAK,CAAC5P,IAAI,CAACoN,KAAK,CAAC,CAACrJ,IAAI,CAACiF,IAAI,CAACC,SAAS,CAAC,CAAA;AAEzD,CAAA;AAEA,SAAS8J,0BAA0BA,CAAAC,KAAA,EAAgC;EAAA,IAA/B;IAAEpD,KAAK;AAAEC,IAAAA,GAAAA;AAAmB,GAAC,GAAAmD,KAAA,CAAA;AAChE,EAAA,IAAIC,oBAAsC,CAAA;AAC1C,EAAA,IAAIC,kBAAoC,CAAA;AAExC,EAAA,KAAK,IAAInN,CAAC,GAAG6J,KAAK,CAACxC,KAAK,EAAErH,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;AACrC,IAAA,MAAM/F,IAAI,GAAG4P,KAAK,CAAC5P,IAAI,CAAC+F,CAAC,CAAC,CAAA;AAC1B,IAAA,IACC/F,IAAI,CAAC+D,IAAI,CAACiF,IAAI,CAACC,SAAS,KAAK,MAAM,IACnCjJ,IAAI,CAAC+D,IAAI,CAACiF,IAAI,CAACC,SAAS,KAAK,YAAY,EACxC;AACDgK,MAAAA,oBAAoB,GAAGjT,IAAI,CAAA;AAC3B,MAAA,MAAA;AACD,KAAA;AACD,GAAA;AAEA,EAAA,KAAK,IAAI+F,CAAC,GAAG8J,GAAG,CAACzC,KAAK,EAAErH,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;AACnC,IAAA,MAAM/F,IAAI,GAAG6P,GAAG,CAAC7P,IAAI,CAAC+F,CAAC,CAAC,CAAA;AACxB,IAAA,IACC/F,IAAI,CAAC+D,IAAI,CAACiF,IAAI,CAACC,SAAS,KAAK,MAAM,IACnCjJ,IAAI,CAAC+D,IAAI,CAACiF,IAAI,CAACC,SAAS,KAAK,YAAY,EACxC;AACDiK,MAAAA,kBAAkB,GAAGlT,IAAI,CAAA;AACzB,MAAA,MAAA;AACD,KAAA;AACD,GAAA;EAEA,OAAOiT,oBAAoB,KAAKC,kBAAkB,IAAIrD,GAAG,CAACsD,YAAY,KAAK,CAAC,CAAA;AAC7E,CAAA;AAEO,SAASC,kBAAkBA,CACjC5S,KAAkB,EAClBS,EAA2B,EAC3BoS,uBAAgC,EAC/B;AACD,EAAA,MAAM1E,GAAG,GAAG,CAAC1N,EAAE,IAAIT,KAAK,EAAE0M,SAAS,CAAA;AACnC,EAAA,MAAMqB,GAAG,GAAG,CAACtN,EAAE,IAAIT,KAAK,EAAE+N,GAAG,CAAA;AAC7B,EAAA,IAAI+E,SAAgC,CAAA;AACpC,EAAA,IAAI7G,IAAwB,CAAA;AAC5B,EAAA,IAAIkC,GAAG,YAAY4E,aAAa,KAAK9G,IAAI,GAAGkC,GAAG,CAAC3O,IAAI,CAAC+D,IAAI,CAACiF,IAAI,CAACC,SAAS,CAAC,EAAE;AAC1E,IAAA,IAAIwD,IAAI,IAAI,MAAM,IAAIA,IAAI,IAAI,YAAY,EAAE;MAC3C6G,SAAS,GAAGnE,aAAa,CAACnO,MAAM,CAACuN,GAAG,EAAEI,GAAG,CAACc,IAAI,CAAC,CAAA;AAChD,KAAC,MAAM,IAAIhD,IAAI,IAAI,KAAK,EAAE;MACzB,MAAMsC,KAAK,GAAGR,GAAG,CAACR,OAAO,CAACY,GAAG,CAACc,IAAI,GAAG,CAAC,CAAC,CAAA;AACvC6D,MAAAA,SAAS,GAAGnE,aAAa,CAACe,YAAY,CAACnB,KAAK,CAAC,CAAA;AAC9C,KAAC,MAAM,IAAI,CAACsE,uBAAuB,EAAE;MACpC,MAAMlN,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACiJ,GAAG,CAAC3O,IAAI,CAAC,CAAA;AAClC,MAAA,MAAM8J,KAAK,GAAG6E,GAAG,CAACc,IAAI,GAAG,CAAC,CAAA;AAC1B,MAAA,MAAM+D,QAAQ,GAAG1J,KAAK,GAAG3D,GAAG,CAACA,GAAG,CAACA,GAAG,CAACF,KAAK,GAAGE,GAAG,CAACD,MAAM,GAAG,CAAC,CAAC,CAAA;AAC5DoN,MAAAA,SAAS,GAAGnE,aAAa,CAACnO,MAAM,CAACuN,GAAG,EAAEzE,KAAK,GAAG,CAAC,EAAE0J,QAAQ,CAAC,CAAA;AAC3D,KAAA;GACA,MAAM,IAAI7E,GAAG,YAAY0B,aAAa,IAAIsC,uBAAuB,CAAChE,GAAG,CAAC,EAAE;IACxE2E,SAAS,GAAGjD,aAAa,CAACrP,MAAM,CAACuN,GAAG,EAAEI,GAAG,CAACc,IAAI,CAAC,CAAA;GAC/C,MAAM,IAAId,GAAG,YAAY0B,aAAa,IAAI0C,0BAA0B,CAACpE,GAAG,CAAC,EAAE;IAC3E2E,SAAS,GAAGjD,aAAa,CAACrP,MAAM,CAACuN,GAAG,EAAEI,GAAG,CAACiB,KAAK,CAAC9F,KAAK,EAAE,EAAE6E,GAAG,CAACiB,KAAK,CAAChC,GAAG,EAAE,CAAC,CAAA;AAC1E,GAAA;AACA,EAAA,IAAI0F,SAAS,EAAE,CAACrS,EAAE,KAAKA,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAC,EAAEwS,YAAY,CAACH,SAAS,CAAC,CAAA;AAC9D,EAAA,OAAOrS,EAAE,CAAA;AACV;;ACxYO,MAAMyS,YAAY,GAAG,IAAI/G,SAAS,CAAyB,YAAY,CAAC,CAAA;AAC/E,SAASgH,kBAAkBA,CACzBC,GAAS,EACTC,GAAS,EACTC,MAAc,EACd1C,CAAoC,EAC9B;AACN,EAAA,MAAM2C,OAAO,GAAGH,GAAG,CAACxK,UAAU;IAC5B4K,OAAO,GAAGH,GAAG,CAACzK,UAAU,CAAA;AAC1B6K,EAAAA,KAAK,EAAE,KAAK,IAAIlO,CAAC,GAAG,CAAC,EAAE4B,CAAC,GAAG,CAAC,EAAE5B,CAAC,GAAGiO,OAAO,EAAEjO,CAAC,EAAE,EAAE;AAC9C,IAAA,MAAMpD,KAAK,GAAGkR,GAAG,CAAClR,KAAK,CAACoD,CAAC,CAAC,CAAA;IAC1B,KAAK,IAAImO,IAAI,GAAGvM,CAAC,EAAE1C,CAAC,GAAGoC,IAAI,CAACC,GAAG,CAACyM,OAAO,EAAEhO,CAAC,GAAG,CAAC,CAAC,EAAEmO,IAAI,GAAGjP,CAAC,EAAEiP,IAAI,EAAE,EAAE;MACjE,IAAIN,GAAG,CAACjR,KAAK,CAACuR,IAAI,CAAC,IAAIvR,KAAK,EAAE;QAC5BgF,CAAC,GAAGuM,IAAI,GAAG,CAAC,CAAA;QACZJ,MAAM,IAAInR,KAAK,CAACkG,QAAQ,CAAA;AACxB,QAAA,SAASoL,KAAK,CAAA;AAChB,OAAA;AACF,KAAA;AACA7C,IAAAA,CAAC,CAACzO,KAAK,EAAEmR,MAAM,CAAC,CAAA;IAChB,IAAInM,CAAC,GAAGoM,OAAO,IAAIH,GAAG,CAACjR,KAAK,CAACgF,CAAC,CAAC,CAACwM,UAAU,CAACxR,KAAK,CAAC,EAC/CgR,kBAAkB,CAACC,GAAG,CAACjR,KAAK,CAACgF,CAAC,CAAC,EAAEhF,KAAK,EAAEmR,MAAM,GAAG,CAAC,EAAE1C,CAAC,CAAC,CAAC,KACpDzO,KAAK,CAACyR,YAAY,CAAC,CAAC,EAAEzR,KAAK,CAACzD,OAAO,CAACyQ,IAAI,EAAEyB,CAAC,EAAE0C,MAAM,GAAG,CAAC,CAAC,CAAA;IAC7DA,MAAM,IAAInR,KAAK,CAACkG,QAAQ,CAAA;AAC1B,GAAA;AACF,CAAA;AAEO,SAASwL,SAASA,CACvB7T,KAAkB,EAClB8T,QAAsB,EACG;AACzB,EAAA,IAAIrT,EAA2B,CAAA;AAC/B,EAAA,MAAMsT,KAAK,GAAGA,CAACvU,IAAU,EAAEwH,GAAW,KAAK;IACzC,IAAIxH,IAAI,CAAC+D,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,OAAO,EACrChI,EAAE,GAAGuT,QAAQ,CAAChU,KAAK,EAAER,IAAI,EAAEwH,GAAG,EAAEvG,EAAE,CAAC,CAAA;GACtC,CAAA;AACD,EAAA,IAAI,CAACqT,QAAQ,EAAE9T,KAAK,CAAC+N,GAAG,CAACkG,WAAW,CAACF,KAAK,CAAC,CAAC,KACvC,IAAID,QAAQ,CAAC/F,GAAG,IAAI/N,KAAK,CAAC+N,GAAG,EAChCoF,kBAAkB,CAACW,QAAQ,CAAC/F,GAAG,EAAE/N,KAAK,CAAC+N,GAAG,EAAE,CAAC,EAAEgG,KAAK,CAAC,CAAA;AACvD,EAAA,OAAOtT,EAAE,CAAA;AACX,CAAA;AAEO,SAASuT,QAAQA,CACtBhU,KAAkB,EAClBkI,KAAW,EACXgM,QAAgB,EAChBzT,EAA2B,EACF;AACzB,EAAA,MAAMkF,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;AAC/B,EAAA,IAAI,CAACvC,GAAG,CAACC,QAAQ,EAAE,OAAOnF,EAAE,CAAA;AAC5B,EAAA,IAAI,CAACA,EAAE,EAAEA,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAA;;AAEtB;AACA;EACA,MAAM0T,OAAiB,GAAG,EAAE,CAAA;AAC5B,EAAA,KAAK,IAAI5O,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGI,GAAG,CAACD,MAAM,EAAEH,CAAC,EAAE,EAAE4O,OAAO,CAACnM,IAAI,CAAC,CAAC,CAAC,CAAA;AACpD,EAAA,KAAK,IAAIzC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGI,GAAG,CAACC,QAAQ,CAAC7E,MAAM,EAAEwE,CAAC,EAAE,EAAE;AAC5C,IAAA,MAAM6O,IAAI,GAAGzO,GAAG,CAACC,QAAQ,CAACL,CAAC,CAAC,CAAA;AAC5B,IAAA,IAAI6O,IAAI,CAAC7Q,IAAI,IAAI,WAAW,EAAE;MAC5B,MAAM4G,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACgK,IAAI,CAACpN,GAAG,CAAC,CAAA;MACnC,IAAI,CAACmD,IAAI,EAAE,SAAA;AACX,MAAA,MAAMjL,KAAK,GAAGiL,IAAI,CAACjL,KAAkB,CAAA;MACrC,KAAK,IAAIiI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjI,KAAK,CAACiK,OAAO,EAAEhC,CAAC,EAAE,EAAEgN,OAAO,CAACC,IAAI,CAACvM,GAAG,GAAGV,CAAC,CAAC,IAAIiN,IAAI,CAAC/K,CAAC,CAAA;AACvE5I,MAAAA,EAAE,CAAC4T,aAAa,CACd5T,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAACuO,QAAQ,GAAG,CAAC,GAAGE,IAAI,CAACpN,GAAG,CAAC,EACvC,IAAI,EACJwG,aAAa,CAACtO,KAAK,EAAEA,KAAK,CAACgK,OAAO,GAAGkL,IAAI,CAAC/K,CAAC,EAAE+K,IAAI,CAAC/K,CAAC,CACrD,CAAC,CAAA;AACH,KAAC,MAAM,IAAI+K,IAAI,CAAC7Q,IAAI,IAAI,SAAS,EAAE;MACjC4Q,OAAO,CAACC,IAAI,CAACvM,GAAG,CAAC,IAAIuM,IAAI,CAAC/K,CAAC,CAAA;AAC7B,KAAC,MAAM,IAAI+K,IAAI,CAAC7Q,IAAI,IAAI,kBAAkB,EAAE;MAC1C,MAAM4G,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACgK,IAAI,CAACpN,GAAG,CAAC,CAAA;MACnC,IAAI,CAACmD,IAAI,EAAE,SAAA;AACX1J,MAAAA,EAAE,CAAC4T,aAAa,CAAC5T,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAACuO,QAAQ,GAAG,CAAC,GAAGE,IAAI,CAACpN,GAAG,CAAC,EAAE,IAAI,EAAE;QAC9D,GAAGmD,IAAI,CAACjL,KAAK;QACbiK,OAAO,EAAEgB,IAAI,CAACjL,KAAK,CAACiK,OAAO,GAAGiL,IAAI,CAAC/K,CAAAA;AACrC,OAAC,CAAC,CAAA;AACJ,KAAC,MAAM,IAAI+K,IAAI,CAAC7Q,IAAI,IAAI,mBAAmB,EAAE;MAC3C,MAAM4G,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACgK,IAAI,CAACpN,GAAG,CAAC,CAAA;MACnC,IAAI,CAACmD,IAAI,EAAE,SAAA;AACX1J,MAAAA,EAAE,CAAC4T,aAAa,CAAC5T,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAACuO,QAAQ,GAAG,CAAC,GAAGE,IAAI,CAACpN,GAAG,CAAC,EAAE,IAAI,EAAE;QAC9D,GAAGmD,IAAI,CAACjL,KAAK;QACbkK,QAAQ,EAAEgL,IAAI,CAAChL,QAAAA;AACjB,OAAC,CAAC,CAAA;AACJ,KAAA;AACF,GAAA;EACA,IAAIkL,KAAK,EAAEC,IAAI,CAAA;AACf,EAAA,KAAK,IAAIhP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4O,OAAO,CAACpT,MAAM,EAAEwE,CAAC,EAAE,EACrC,IAAI4O,OAAO,CAAC5O,CAAC,CAAC,EAAE;AACd,IAAA,IAAI+O,KAAK,IAAI,IAAI,EAAEA,KAAK,GAAG/O,CAAC,CAAA;AAC5BgP,IAAAA,IAAI,GAAGhP,CAAC,CAAA;AACV,GAAA;AAEF,EAAA,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEyB,GAAG,GAAGkN,QAAQ,GAAG,CAAC,EAAE3O,CAAC,GAAGI,GAAG,CAACD,MAAM,EAAEH,CAAC,EAAE,EAAE;AACvD,IAAA,MAAMsC,GAAG,GAAGK,KAAK,CAAC/F,KAAK,CAACoD,CAAC,CAAC,CAAA;AAC1B,IAAA,MAAM6H,GAAG,GAAGpG,GAAG,GAAGa,GAAG,CAACQ,QAAQ,CAAA;AAC9B,IAAA,MAAM3E,GAAG,GAAGyQ,OAAO,CAAC5O,CAAC,CAAC,CAAA;IACtB,IAAI7B,GAAG,GAAG,CAAC,EAAE;MACX,IAAIuI,IAAe,GAAG,MAAM,CAAA;MAC5B,IAAIpE,GAAG,CAACiG,UAAU,EAAE;QAClB7B,IAAI,GAAGpE,GAAG,CAACiG,UAAU,CAACvK,IAAI,CAACiF,IAAI,CAACC,SAAS,CAAA;AAC3C,OAAA;MACA,MAAMnI,KAAa,GAAG,EAAE,CAAA;MACxB,KAAK,IAAI6G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGzD,GAAG,EAAEyD,CAAC,EAAE,EAAE;AAC5B,QAAA,MAAM3H,IAAI,GAAGwM,cAAc,CAAChM,KAAK,CAACI,MAAM,CAAC,CAAC6L,IAAI,CAAC,CAAC7H,aAAa,EAAE,CAAA;AAE/D,QAAA,IAAI5E,IAAI,EAAEc,KAAK,CAAC0H,IAAI,CAACxI,IAAI,CAAC,CAAA;AAC5B,OAAA;MACA,MAAMgV,IAAI,GAAG,CAACjP,CAAC,IAAI,CAAC,IAAI+O,KAAK,IAAI/O,CAAC,GAAG,CAAC,KAAKgP,IAAI,IAAIhP,CAAC,GAAGyB,GAAG,GAAG,CAAC,GAAGoG,GAAG,GAAG,CAAC,CAAA;AACxE3M,MAAAA,EAAE,CAACgU,MAAM,CAAChU,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAAC6O,IAAI,CAAC,EAAElU,KAAK,CAAC,CAAA;AACxC,KAAA;AACA0G,IAAAA,GAAG,GAAGoG,GAAG,CAAA;AACX,GAAA;AACA,EAAA,OAAO3M,EAAE,CAACiU,OAAO,CAACxB,YAAY,EAAE;AAAEW,IAAAA,SAAS,EAAE,IAAA;AAAK,GAAC,CAAC,CAAA;AACtD;;AClGO,MAAMc,WAAuD,GACnEA,CAAC9D,IAAI,EAAE+D,OAAO,KAAK,CAAC5U,KAAK,EAAEC,QAAQ,EAAEC,IAAI,KAAK;EAC7C,MAAM;IAAEgI,KAAK;IAAE0D,QAAQ;IAAEG,WAAW;IAAEF,SAAS;AAAEgJ,IAAAA,SAAAA;AAAU,GAAC,GAC3D7U,KAAK,CAACI,MAAM,CAACE,KAAK,CAAA;AAEnB,EAAA,MAAMwU,SAAS,GAAG5M,KAAK,CAAC1H,MAAM,CAC7B,IAAI,EACJa,KAAK,CAACwP,IAAI,GAAG,CAAC,CAAC,CACbhI,IAAI,CAAC,IAAI,CAAC,CACVlD,GAAG,CAAC,CAACoP,CAAC,EAAElN,GAAG,KACX+D,QAAQ,CAACpL,MAAM,CACd,IAAI,EACJa,KAAK,CAACuT,OAAO,CAAC,CACZ/L,IAAI,CAAC,IAAI,CAAC,CACVlD,GAAG,CAAC,CAACoP,CAAC,EAAEjN,GAAG,KACX,CAACD,GAAG,KAAK,CAAC,GAAGkE,WAAW,GAAGF,SAAS,EAAErL,MAAM,CAC3C,IAAI,EACJqU,SAAS,CAACrU,MAAM,CACf,IAAA;AACA;AACD,GACD,CACD,CACF,CACD,CACF,CAAC,CAAA;AACDgF,EAAAA,QAAQ,CAACN,GAAG,CAAC4P,SAAS,CAAC,CAAA;AACvB,EAAA,IAAI7U,QAAQ,EAAE;AACbA,IAAAA,QAAQ,CAACD,KAAK,CAACS,EAAE,CAACC,oBAAoB,CAACoU,SAAS,CAAC,CAACnU,cAAc,EAAE,CAAC,CAAA;AACnE,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;AAEA,EAAA,OAAO,KAAK,CAAA;AACb,CAAC,CAAA;AA0CK,SAASqU,YAAYA,CAAChV,KAAkB,EAAa;AAC3D,EAAA,MAAMmO,GAAG,GAAGnO,KAAK,CAAC0M,SAAS,CAAA;AAC3B,EAAA,MAAMI,IAAI,GAAGoB,aAAa,CAAClO,KAAK,CAAC,CAAA;EACjC,MAAMkI,KAAK,GAAG4E,IAAI,CAACtN,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;EAC3B,MAAM6N,UAAU,GAAGP,IAAI,CAACxD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AACjC,EAAA,MAAM3D,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;AAE/B,EAAA,MAAMR,IAAI,GACTyG,GAAG,YAAYQ,aAAa,GACzBhJ,GAAG,CAACE,WAAW,CACfsI,GAAG,CAACC,WAAW,CAACpH,GAAG,GAAGqG,UAAU,EAChCc,GAAG,CAACE,SAAS,CAACrH,GAAG,GAAGqG,UACrB,CAAC,GACA1H,GAAG,CAACa,QAAQ,CAACsG,IAAI,CAAC9F,GAAG,GAAGqG,UAAU,CAAC,CAAA;EAEvC,OAAO;AAAE,IAAA,GAAG3F,IAAI;IAAE2F,UAAU;IAAE1H,GAAG;AAAEuC,IAAAA,KAAAA;GAAO,CAAA;AAC3C,CAAA;AAEO,SAAS+M,SAASA,CACxBxU,EAAe,EAAA2R,IAAA,EAEftK,GAAW,EACV;EAAA,IAFD;IAAEnC,GAAG;IAAEuC,KAAK;AAAEmF,IAAAA,UAAAA;AAAqB,GAAC,GAAA+E,IAAA,CAAA;EAGpC,IAAI8C,SAAwB,GAAGpN,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;EAC/C,IAAIwE,cAAc,CAAC3G,GAAG,EAAEuC,KAAK,EAAEJ,GAAG,GAAGoN,SAAS,CAAC,EAAE;AAChDA,IAAAA,SAAS,GAAGpN,GAAG,IAAI,CAAC,IAAIA,GAAG,IAAInC,GAAG,CAACF,KAAK,GAAG,IAAI,GAAG,CAAC,CAAA;AACpD,GAAA;AAEA,EAAA,KAAK,IAAIoC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGlC,GAAG,CAACD,MAAM,EAAEmC,GAAG,EAAE,EAAE;IAC1C,MAAME,KAAK,GAAGF,GAAG,GAAGlC,GAAG,CAACF,KAAK,GAAGqC,GAAG,CAAA;IACnC,IAAIA,GAAG,GAAG,CAAC,IAAIA,GAAG,GAAGnC,GAAG,CAACF,KAAK,IAAIE,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAG,CAAC,CAAC,IAAIpC,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,EAAE;AACvE,MAAA,MAAMf,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,CAAA;AAC1B,MAAA,MAAMoC,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAE,CAAA;AAC/BvG,MAAAA,EAAE,CAAC4T,aAAa,CACf5T,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAAC0H,UAAU,GAAGrG,GAAG,CAAC,EAChC,IAAI,EACJoF,UAAU,CAACjC,IAAI,CAACjL,KAAK,EAAe4I,GAAG,GAAGnC,GAAG,CAAC6B,QAAQ,CAACR,GAAG,CAAC,CAC5D,CAAC,CAAA;AACDa,MAAAA,GAAG,IAAIsC,IAAI,CAACjL,KAAK,CAACiK,OAAO,GAAG,CAAC,CAAA;AAC9B,KAAC,MAAM;AACN,MAAA,MAAM5F,IAAI,GACT2R,SAAS,IAAI,IAAI,GACdlJ,cAAc,CAAC9D,KAAK,CAAC3E,IAAI,CAACnD,MAAM,CAAC,CAAC+J,IAAI,GACtCjC,KAAK,CAACkC,MAAM,CAACzE,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAGmN,SAAS,CAAC,CAAC,CAAE3R,IAAI,CAAA;MAClD,MAAMyD,GAAG,GAAGrB,GAAG,CAACsC,UAAU,CAACJ,GAAG,EAAEC,GAAG,EAAEI,KAAK,CAAC,CAAA;AAC3CzH,MAAAA,EAAE,CAACgU,MAAM,CAAChU,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAAC0H,UAAU,GAAGrG,GAAG,CAAC,EAAEzD,IAAI,CAACa,aAAa,EAAG,CAAC,CAAA;AACnE,KAAA;AACD,GAAA;AACA,EAAA,OAAO3D,EAAE,CAAA;AACV,CAAA;AAoBO,MAAM0U,cAAc,GAAGA,CAACnO,GAAW,EAAE9G,IAAgB,KAAK;EAChE,MAAM;IAAEF,KAAK;AAAEC,IAAAA,QAAAA;AAAS,GAAC,GAAGC,IAAI,CAAA;AAChC,EAAA,IAAIO,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAA;EACjB,MAAM4M,UAAU,GAAG5M,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAACqB,GAAG,CAAC,CAAA;EACtC,MAAMoO,MAAM,GAAGpV,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACF,UAAU,CAAC,CAAA;AAC5C,EAAA,MAAMnF,KAAK,GAAGkN,MAAM,CAACpI,SAAU,CAAA;AAC/B;AACA;;AAEA,EAAA,MAAMrH,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;AAC/BjI,EAAAA,QAAQ,CAACgV,SAAS,CAACxU,EAAE,EAAE;IAAEkF,GAAG;IAAEuC,KAAK;IAAEmF,UAAU,EAAErG,GAAG,GAAG,CAAA;AAAE,GAAC,EAAErB,GAAG,CAACF,KAAK,CAAC,CAAC,CAAA;AACxE,CAAC,CAAA;AAEM,MAAM4P,YAAY,GAAGA,CAC3B5U,EAAe,EAAA+R,KAAA,EAEf1K,GAAW,KACM;EAAA,IAFjB;IAAEnC,GAAG;IAAEuC,KAAK;AAAEmF,IAAAA,UAAAA;AAAqB,GAAC,GAAAmF,KAAA,CAAA;EAGpC,MAAM8C,QAAQ,GAAG7U,EAAE,CAAC8O,OAAO,CAACgG,IAAI,CAACxU,MAAM,CAAA;EACvC,KAAK,IAAI8G,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGlC,GAAG,CAACD,MAAM,GAAI;IACrC,MAAMqC,KAAK,GAAGF,GAAG,GAAGlC,GAAG,CAACF,KAAK,GAAGqC,GAAG,CAAA;AACnC,IAAA,MAAMd,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,CAAA;AAC1B,IAAA,MAAMoC,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAE,CAAA;AAC/B,IAAA,MAAM9H,KAAK,GAAGiL,IAAI,CAACjL,KAAkB,CAAA;AAErC,IAAA,IACE4I,GAAG,GAAG,CAAC,IAAInC,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAG,CAAC,CAAC,IAAIf,GAAG,IACpCc,GAAG,GAAGnC,GAAG,CAACF,KAAK,GAAG,CAAC,IAAIE,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAG,CAAC,CAAC,IAAIf,GAAI,EACjD;AACDvG,MAAAA,EAAE,CAAC4T,aAAa,CACf5T,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAAC6K,QAAQ,CAAC,CAAC3P,GAAG,CAAC0H,UAAU,GAAGrG,GAAG,CAAC,EAChD,IAAI,EACJwG,aAAa,CAACtO,KAAK,EAAE4I,GAAG,GAAGnC,GAAG,CAAC6B,QAAQ,CAACR,GAAG,CAAC,CAC7C,CAAC,CAAA;AACF,KAAC,MAAM;AACN,MAAA,MAAMsC,KAAK,GAAG7I,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAAC6K,QAAQ,CAAC,CAAC3P,GAAG,CAAC0H,UAAU,GAAGrG,GAAG,CAAC,CAAA;MAC9DvG,EAAE,CAAC+U,MAAM,CAAClM,KAAK,EAAEA,KAAK,GAAGa,IAAI,CAAC9B,QAAQ,CAAC,CAAA;AACxC,KAAA;IACAR,GAAG,IAAI3I,KAAK,CAACiK,OAAO,CAAA;AACrB,GAAA;AACA,EAAA,OAAO1I,EAAE,CAAA;AACV,CAAC,CAAA;AAuBM,MAAMgV,WAAW,GAAGA,CAC1B9P,GAAa,EACbuC,KAAW,EACXL,GAAW,KACE;EACb,MAAM0E,UAAU,GAAGP,cAAc,CAAC9D,KAAK,CAAC3E,IAAI,CAACnD,MAAM,CAAC,CAACmM,UAAU,CAAA;AAC/D,EAAA,KAAK,IAAIzE,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGnC,GAAG,CAACF,KAAK,EAAEqC,GAAG,EAAE,EACvC,IAAII,KAAK,CAACkC,MAAM,CAACzE,GAAG,CAACA,GAAG,CAACmC,GAAG,GAAGD,GAAG,GAAGlC,GAAG,CAACF,KAAK,CAAC,CAAC,EAAElC,IAAI,IAAIgJ,UAAU,EACnE,OAAO,KAAK,CAAA;AAEd,EAAA,OAAO,IAAI,CAAA;AACZ,CAAC,CAAA;AAEM,MAAMmJ,MAAM,GAAGA,CACrBjV,EAAe,EAAAkV,KAAA,EAEf9N,GAAW,KACM;EAAA,IAFjB;IAAElC,GAAG;IAAEuC,KAAK;AAAEmF,IAAAA,UAAAA;AAAqB,GAAC,GAAAsI,KAAA,CAAA;EAGpC,IAAIC,MAAM,GAAGvI,UAAU,CAAA;EACvB,KAAK,IAAI9H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsC,GAAG,EAAEtC,CAAC,EAAE,EAAEqQ,MAAM,IAAI1N,KAAK,CAAC/F,KAAK,CAACoD,CAAC,CAAC,CAAC8C,QAAQ,CAAA;EAC/D,MAAMwG,KAAK,GAAG,EAAE,CAAA;EAChB,IAAIgH,MAAqB,GAAGhO,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;EAE5C,IAAI4N,WAAW,CAAC9P,GAAG,EAAEuC,KAAK,EAAEL,GAAG,GAAGgO,MAAM,CAAC,EACxCA,MAAM,GAAGhO,GAAG,IAAI,CAAC,IAAIA,GAAG,IAAIlC,GAAG,CAACD,MAAM,GAAG,IAAI,GAAG,CAAC,CAAA;EAElD,KAAK,IAAIoC,GAAG,GAAG,CAAC,EAAEC,KAAK,GAAGpC,GAAG,CAACF,KAAK,GAAGoC,GAAG,EAAEC,GAAG,GAAGnC,GAAG,CAACF,KAAK,EAAEqC,GAAG,EAAE,EAAEC,KAAK,EAAE,EAAE;IAC3E,IACCF,GAAG,GAAG,CAAC,IACPA,GAAG,GAAGlC,GAAG,CAACD,MAAM,IAChBC,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,IAAIpC,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAGpC,GAAG,CAACF,KAAK,CAAC,EAC3C;AACD,MAAA,MAAMuB,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,CAAA;MAC1B,MAAM7I,KAAK,GAAGgJ,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAC,CAAE9H,KAAK,CAAA;MACtCuB,EAAE,CAAC4T,aAAa,CAAChH,UAAU,GAAGrG,GAAG,EAAE,IAAI,EAAE;AACxC,QAAA,GAAG9H,KAAK;AACRiK,QAAAA,OAAO,EAAEjK,KAAK,CAACiK,OAAO,GAAG,CAAA;AAC1B,OAAC,CAAC,CAAA;AACFrB,MAAAA,GAAG,IAAI5I,KAAK,CAACgK,OAAO,GAAG,CAAC,CAAA;AACzB,KAAC,MAAM;AACN,MAAA,MAAM3F,IAAI,GACTsS,MAAM,KAAK,IAAI,GACZ7J,cAAc,CAAC9D,KAAK,CAAC3E,IAAI,CAACnD,MAAM,CAAC,CAAC+J,IAAI,GACtCjC,KAAK,CAACkC,MAAM,CAACzE,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAG8N,MAAM,GAAGlQ,GAAG,CAACF,KAAK,CAAC,CAAC,EAAElC,IAAI,CAAA;AAC3D,MAAA,MAAM/D,IAAI,GAAG+D,IAAI,EAAEa,aAAa,EAAE,CAAA;AAClC,MAAA,IAAI5E,IAAI,EAAEqP,KAAK,CAAC7G,IAAI,CAACxI,IAAI,CAAC,CAAA;AAC3B,KAAA;AACD,GAAA;EACAiB,EAAE,CAACgU,MAAM,CAACmB,MAAM,EAAE5J,cAAc,CAAC9D,KAAK,CAAC3E,IAAI,CAACnD,MAAM,CAAC,CAACyH,GAAG,CAACrH,MAAM,CAAC,IAAI,EAAEqO,KAAK,CAAC,CAAC,CAAA;AAC5E,EAAA,OAAOpO,EAAE,CAAA;AACV,CAAC,CAAA;AAoBM,MAAMqV,WAAW,GAAGA,CAAC9O,GAAW,EAAE9G,IAAgB,KAAK;EAC7D,MAAM4M,IAAI,GAAG5M,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAA;AACxC,EAAA,MAAMkB,KAAK,GAAG4E,IAAI,CAACE,SAAU,CAAA;AAC7B,EAAA,MAAMrH,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;EAC/BhI,IAAI,CAACD,QAAQ,CACZyV,MAAM,CAACxV,IAAI,CAACF,KAAK,CAACS,EAAE,EAAE;IAAEkF,GAAG;IAAEuC,KAAK;IAAEmF,UAAU,EAAErG,GAAG,GAAG,CAAA;AAAE,GAAC,EAAErB,GAAG,CAACD,MAAM,CACtE,CAAC,CAAA;AACF,CAAC,CAAA;AAEM,MAAMqQ,SAAS,GAAGA,CACxBtV,EAAe,EAAAuV,KAAA,EAEfnO,GAAW,KACP;EAAA,IAFJ;IAAElC,GAAG;IAAEuC,KAAK;AAAEmF,IAAAA,UAAAA;AAAqB,GAAC,GAAA2I,KAAA,CAAA;EAGpC,IAAIJ,MAAM,GAAG,CAAC,CAAA;EACd,KAAK,IAAIrQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsC,GAAG,EAAEtC,CAAC,EAAE,EAAEqQ,MAAM,IAAI1N,KAAK,CAAC/F,KAAK,CAACoD,CAAC,CAAC,CAAC8C,QAAQ,CAAA;EAC/D,MAAM4N,OAAO,GAAGL,MAAM,GAAG1N,KAAK,CAAC/F,KAAK,CAAC0F,GAAG,CAAC,CAACQ,QAAQ,CAAA;EAClD,MAAM6N,OAAO,GAAGzV,EAAE,CAAC8O,OAAO,CAACgG,IAAI,CAACxU,MAAM,CAAA;EACtCN,EAAE,CAAC+U,MAAM,CAACI,MAAM,GAAGvI,UAAU,EAAE4I,OAAO,GAAG5I,UAAU,CAAC,CAAA;AAEpD,EAAA,MAAMzF,IAAI,GAAG,IAAIuO,GAAG,EAAU,CAAA;EAE9B,KAAK,IAAIrO,GAAG,GAAG,CAAC,EAAEC,KAAK,GAAGF,GAAG,GAAGlC,GAAG,CAACF,KAAK,EAAEqC,GAAG,GAAGnC,GAAG,CAACF,KAAK,EAAEqC,GAAG,EAAE,EAAEC,KAAK,EAAE,EAAE;AAC3E,IAAA,MAAMf,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,CAAA;AAE1B,IAAA,IAAIH,IAAI,CAACwO,GAAG,CAACpP,GAAG,CAAC,EAAE,SAAA;AAEnBY,IAAAA,IAAI,CAAClE,GAAG,CAACsD,GAAG,CAAC,CAAA;AACb,IAAA,IAAIa,GAAG,GAAG,CAAC,IAAIb,GAAG,IAAIrB,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAGpC,GAAG,CAACF,KAAK,CAAC,EAAE;MACjD,MAAMvG,KAAK,GAAGgJ,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAC,EAAE9H,KAAkB,CAAA;MACnDuB,EAAE,CAAC4T,aAAa,CAAC5T,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAACqB,GAAG,GAAGqG,UAAU,CAAC,EAAE,IAAI,EAAE;AACvE,QAAA,GAAGnO,KAAK;AACRiK,QAAAA,OAAO,EAAEjK,KAAK,CAACiK,OAAO,GAAG,CAAA;AAC1B,OAAC,CAAC,CAAA;AACFrB,MAAAA,GAAG,IAAI5I,KAAK,CAACgK,OAAO,GAAG,CAAC,CAAA;KACxB,MAAM,IAAIrB,GAAG,GAAGlC,GAAG,CAACD,MAAM,IAAIsB,GAAG,IAAIrB,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAGpC,GAAG,CAACF,KAAK,CAAC,EAAE;AACjE,MAAA,MAAM0E,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAE,CAAA;AAC/B,MAAA,MAAM9H,KAAK,GAAGiL,IAAI,EAAEjL,KAAkB,CAAA;AACtC,MAAA,MAAMkS,IAAI,GAAGjH,IAAI,CAAC5G,IAAI,CAAC/C,MAAM,CAC5B;AAAE,QAAA,GAAGtB,KAAK;AAAEiK,QAAAA,OAAO,EAAEgB,IAAI,CAACjL,KAAK,CAACiK,OAAO,GAAG,CAAA;AAAE,OAAC,EAC7CgB,IAAI,CAACzL,OACN,CAAC,CAAA;AACD,MAAA,MAAM2X,MAAM,GAAG1Q,GAAG,CAACsC,UAAU,CAACJ,GAAG,GAAG,CAAC,EAAEC,GAAG,EAAEI,KAAK,CAAC,CAAA;MAClDzH,EAAE,CAACgU,MAAM,CAAChU,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAAC0H,UAAU,GAAGgJ,MAAM,CAAC,EAAEjF,IAAI,CAAC,CAAA;AACnEtJ,MAAAA,GAAG,IAAI5I,KAAK,CAACgK,OAAO,GAAG,CAAC,CAAA;AACzB,KAAA;AACD,GAAA;AACA,EAAA,OAAOzI,EAAE,CAAA;AACV,CAAC,CAAA;AAuBD,MAAM6V,qBAAqB,GAAGA,CAAAC,KAAA,EAE7B7O,IAAU,KACG;EAAA,IAFb;IAAEjC,KAAK;IAAEC,MAAM;AAAEC,IAAAA,GAAAA;AAAc,GAAC,GAAA4Q,KAAA,CAAA;EAGhC,IAAIC,QAAQ,GAAG9O,IAAI,CAACxB,GAAG,GAAGT,KAAK,GAAGiC,IAAI,CAAC1B,IAAI;AAC1CyQ,IAAAA,SAAS,GAAGD,QAAQ,CAAA;AAErB,EAAA,IAAIE,WAAW,GAAG,CAAChP,IAAI,CAACpB,MAAM,GAAG,CAAC,IAAIb,KAAK,GAAGiC,IAAI,CAAC1B,IAAI;AACtD2Q,IAAAA,UAAU,GAAGH,QAAQ,IAAI9O,IAAI,CAACtB,KAAK,GAAGsB,IAAI,CAAC1B,IAAI,GAAG,CAAC,CAAC,CAAA;AAErD,EAAA,KAAK,IAAIT,CAAC,GAAGmC,IAAI,CAACxB,GAAG,EAAEX,CAAC,GAAGmC,IAAI,CAACpB,MAAM,EAAEf,CAAC,EAAE,EAAE;AAC5C,IAAA,IACEmC,IAAI,CAAC1B,IAAI,GAAG,CAAC,IAAIL,GAAG,CAAC8Q,SAAS,CAAC,IAAI9Q,GAAG,CAAC8Q,SAAS,GAAG,CAAC,CAAC,IACrD/O,IAAI,CAACtB,KAAK,GAAGX,KAAK,IAAIE,GAAG,CAACgR,UAAU,CAAC,IAAIhR,GAAG,CAACgR,UAAU,GAAG,CAAC,CAAE,EAE9D,OAAO,IAAI,CAAA;AACZF,IAAAA,SAAS,IAAIhR,KAAK,CAAA;AAClBkR,IAAAA,UAAU,IAAIlR,KAAK,CAAA;AACpB,GAAA;AACA,EAAA,KAAK,IAAIF,CAAC,GAAGmC,IAAI,CAAC1B,IAAI,EAAET,CAAC,GAAGmC,IAAI,CAACtB,KAAK,EAAEb,CAAC,EAAE,EAAE;AAC5C,IAAA,IACEmC,IAAI,CAACxB,GAAG,GAAG,CAAC,IAAIP,GAAG,CAAC6Q,QAAQ,CAAC,IAAI7Q,GAAG,CAAC6Q,QAAQ,GAAG/Q,KAAK,CAAC,IACtDiC,IAAI,CAACpB,MAAM,GAAGZ,MAAM,IAAIC,GAAG,CAAC+Q,WAAW,CAAC,IAAI/Q,GAAG,CAAC+Q,WAAW,GAAGjR,KAAK,CAAE,EAEtE,OAAO,IAAI,CAAA;AAEZ+Q,IAAAA,QAAQ,EAAE,CAAA;AACVE,IAAAA,WAAW,EAAE,CAAA;AACd,GAAA;AACA,EAAA,OAAO,KAAK,CAAA;AACb,CAAC,CAAA;AAED,MAAMjI,OAAO,GAAItE,IAAU,IAAc;AACxC,EAAA,MAAMyM,CAAC,GAAGzM,IAAI,CAACzL,OAAO,CAAA;EACtB,OACCkY,CAAC,CAAChO,UAAU,IAAI,CAAC,IAAIgO,CAAC,CAACzU,KAAK,CAAC,CAAC,CAAC,CAAC0U,WAAW,IAAID,CAAC,CAACzU,KAAK,CAAC,CAAC,CAAC,CAACyG,UAAU,IAAI,CAAC,CAAA;AAE3E,CAAC,CAAA;AAEM,MAAMkO,UAAmB,GAAGA,CAAC9W,KAAK,EAAEC,QAAQ,KAAK;AACvD,EAAA,MAAMkO,GAAG,GAAGnO,KAAK,CAAC0M,SAAS,CAAA;AAC3B,EAAA,IACC,EAAEyB,GAAG,YAAYQ,aAAa,CAAC,IAC/BR,GAAG,CAACC,WAAW,CAACpH,GAAG,IAAImH,GAAG,CAACE,SAAS,CAACrH,GAAG,EAExC,OAAO,KAAK,CAAA;AAEb,EAAA,MAAMU,IAAI,GAAGsN,YAAY,CAAChV,KAAK,CAAC;AAC/B,IAAA;AAAE2F,MAAAA,GAAAA;AAAI,KAAC,GAAG+B,IAAI,CAAA;EACf,IAAI4O,qBAAqB,CAAC3Q,GAAG,EAAE+B,IAAI,CAAC,EAAE,OAAO,KAAK,CAAA;AAElD,EAAA,IAAIzH,QAAQ,EAAE;AACb,IAAA,MAAMQ,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAA;IACnB,MAAMmH,IAA6B,GAAG,EAAE,CAAA;AACxC,IAAA,IAAIlJ,OAAO,GAAG2S,QAAQ,CAAC0F,KAAK,CAAA;AAC5B,IAAA,IAAIC,SAA6B,CAAA;AACjC,IAAA,IAAIC,UAA4B,CAAA;AAChC,IAAA,KAAK,IAAIpP,GAAG,GAAGH,IAAI,CAACxB,GAAG,EAAE2B,GAAG,GAAGH,IAAI,CAACpB,MAAM,EAAEuB,GAAG,EAAE,EAAE;AAClD,MAAA,KAAK,IAAIC,GAAG,GAAGJ,IAAI,CAAC1B,IAAI,EAAE8B,GAAG,GAAGJ,IAAI,CAACtB,KAAK,EAAE0B,GAAG,EAAE,EAAE;AAClD,QAAA,MAAMoP,OAAO,GAAGvR,GAAG,CAACA,GAAG,CAACkC,GAAG,GAAGlC,GAAG,CAACF,KAAK,GAAGqC,GAAG,CAAC,CAAA;QAC9C,MAAMqC,IAAI,GAAGzC,IAAI,CAACQ,KAAK,CAACkC,MAAM,CAAC8M,OAAO,CAAC,CAAA;AACvC,QAAA,IAAItP,IAAI,CAACsP,OAAO,CAAC,IAAI,CAAC/M,IAAI,EAAE,SAAA;AAC5BvC,QAAAA,IAAI,CAACsP,OAAO,CAAC,GAAG,IAAI,CAAA;QACpB,IAAIF,SAAS,IAAI,IAAI,EAAE;AACtBA,UAAAA,SAAS,GAAGE,OAAO,CAAA;AACnBD,UAAAA,UAAU,GAAG9M,IAAI,CAAA;AAClB,SAAC,MAAM;AACN,UAAA,IAAI,CAACsE,OAAO,CAACtE,IAAI,CAAC,EAAEzL,OAAO,GAAGA,OAAO,CAAC0D,MAAM,CAAC+H,IAAI,CAACzL,OAAO,CAAC,CAAA;AAC1D,UAAA,MAAMyY,MAAM,GAAG1W,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAACuR,OAAO,GAAGxP,IAAI,CAAC2F,UAAU,CAAC,CAAA;UACxD5M,EAAE,CAAC+U,MAAM,CAAC2B,MAAM,EAAEA,MAAM,GAAGhN,IAAI,CAAC9B,QAAQ,CAAC,CAAA;AAC1C,SAAA;AACD,OAAA;AACD,KAAA;IACA,IAAI2O,SAAS,IAAI,IAAI,IAAIC,UAAU,IAAI,IAAI,EAAE,OAAO,IAAI,CAAA;IAExDxW,EAAE,CAAC4T,aAAa,CAAC2C,SAAS,GAAGtP,IAAI,CAAC2F,UAAU,EAAE,IAAI,EAAE;MACnD,GAAGjB,UAAU,CACZ6K,UAAU,CAAC/X,KAAK,EAChB+X,UAAU,CAAC/X,KAAK,CAACgK,OAAO,EACxBxB,IAAI,CAACtB,KAAK,GAAGsB,IAAI,CAAC1B,IAAI,GAAGiR,UAAU,CAAC/X,KAAK,CAACgK,OAC3C,CAAC;AACDC,MAAAA,OAAO,EAAEzB,IAAI,CAACpB,MAAM,GAAGoB,IAAI,CAACxB,GAAAA;AAC7B,KAAC,CAAC,CAAA;IACF,IAAIxH,OAAO,CAACyQ,IAAI,EAAE;MACjB,MAAM/B,GAAG,GAAG4J,SAAS,GAAG,CAAC,GAAGC,UAAU,CAACvY,OAAO,CAACyQ,IAAI,CAAA;MACnD,MAAM7F,KAAK,GAAGmF,OAAO,CAACwI,UAAU,CAAC,GAAGD,SAAS,GAAG,CAAC,GAAG5J,GAAG,CAAA;AACvD3M,MAAAA,EAAE,CAAC2W,WAAW,CAAC9N,KAAK,GAAG5B,IAAI,CAAC2F,UAAU,EAAED,GAAG,GAAG1F,IAAI,CAAC2F,UAAU,EAAE3O,OAAO,CAAC,CAAA;AACxE,KAAA;AACA+B,IAAAA,EAAE,CAACwS,YAAY,CACd,IAAItE,aAAa,CAAClO,EAAE,CAACsN,GAAG,CAACR,OAAO,CAACyJ,SAAS,GAAGtP,IAAI,CAAC2F,UAAU,CAAC,CAC9D,CAAC,CAAA;IACDpN,QAAQ,CAACQ,EAAE,CAAC,CAAA;AACb,GAAA;AAEA,EAAA,OAAO,IAAI,CAAA;AACZ,CAAC;;AC3bD,MAAM4W,cAAc,GAAG,iCAAiC,CAAA;AACjD,MAAMC,SAAS,SAAS9U,YAAY,CAAC;EAO3CE,WAAWA,CACHlD,IAAU,EACVU,IAAgB,EACfqE,MAAgC,EACjCgT,YAAoB,EAC1B;AACDC,IAAAA,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAAA;AAC3B,IAAA,KAAK,CAACjY,IAAI,EAAEU,IAAI,CAAC,CAAA;IAAC,IANXV,CAAAA,IAAU,GAAVA,IAAU,CAAA;IAAA,IACVU,CAAAA,IAAgB,GAAhBA,IAAgB,CAAA;IAAA,IACfqE,CAAAA,MAAgC,GAAhCA,MAAgC,CAAA;IAAA,IACjCgT,CAAAA,YAAoB,GAApBA,YAAoB,CAAA;AAI3B,IAAA,IAAI,CAAC/V,GAAG,GAAGZ,aAAa,CAAC,KAAK,EAAE;AAC/BkD,MAAAA,KAAK,EAAEuT,cAAAA;AACR,KAAC,CAAC,CAAA;IACF,IAAI,CAAC7V,GAAG,CAACa,WAAW,CACnBzB,aAAa,CAAC,KAAK,EAAE;AAAEoD,MAAAA,QAAQ,EAAE,GAAG;AAAEF,MAAAA,KAAK,EAAE,aAAA;AAAc,KAAC,CAC7D,CAAC,CAAA;IACD,IAAI,CAACoE,KAAK,GAAG,IAAI,CAAC1G,GAAG,CAACa,WAAW,CAChCzB,aAAa,CACZ,OAAA;AACA;AACA;AACA;AACD,KACD,CAAC,CAAA;AACD,IAAA,IAAI,CAAC8W,QAAQ,GAAG,IAAI,CAACxP,KAAK,CAAC7F,WAAW,CAACzB,aAAa,CAAC,UAAU,CAAC,CAAC,CAAA;AACjE+W,IAAAA,qBAAqB,CACpB,IAAI,CAACnY,IAAI,EACT,IAAI,CAACkY,QAAQ,EACb,IAAI,CAACxP,KAAK,EACV,IAAI,CAACqP,YACN,CAAC,CAAA;AACD,IAAA,IAAI,CAACrU,UAAU,GAAG,IAAI,CAACgF,KAAK,CAAC7F,WAAW,CAACzB,aAAa,CAAC,OAAO,CAAC,CAAC,CAAA;IAChE,IAAI,CAACY,GAAG,CAACM,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC8V,eAAe,CAAC,CAAA;IAC5D,IAAI,CAACpW,GAAG,CAACM,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC+V,gBAAgB,CAAC,CAAA;AAC/D,GAAA;EAEAD,eAAe,GAAIE,KAAiB,IAAK;IACxC,MAAM;MAAEC,OAAO;AAAEC,MAAAA,OAAAA;AAAQ,KAAC,GAAGF,KAAK,CAAA;AAClC,IAAA,MAAMG,QAAQ,GAAG,IAAI,CAAC/X,IAAI,CAACgY,WAAW,CAAC;AAAElS,MAAAA,IAAI,EAAE+R,OAAO;AAAE7R,MAAAA,GAAG,EAAE8R,OAAAA;AAAQ,KAAC,CAAC,CAAA;IACvE,IAAI,CAACC,QAAQ,EAAE,OAAA;AACf,IAAA,MAAM1J,KAAK,GAAGb,UAAU,CAAC,IAAI,CAACxN,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAAC0K,QAAQ,CAACjR,GAAG,CAAC,CAAC,CAAA;IACnE,IAAI,CAACuH,KAAK,EAAE,OAAA;AACZ;IACA,MAAMlB,UAAU,GAAGkB,KAAK,CAACjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IAClC,MAAM3D,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAAC,IAAI,CAAC1F,IAAI,CAAC,CAAA;IACnC,MAAM;MAAEwG,IAAI;MAAEE,GAAG;MAAEE,KAAK;AAAEE,MAAAA,MAAAA;KAAQ,GAAGX,GAAG,CAACa,QAAQ,CAAC+H,KAAK,CAACvH,GAAG,GAAGqG,UAAU,CAAC,CAAA;AACzE;IACA,MAAM8K,IAAkB,GAAG,EAAE,CAAA;IAC7B,KAAK,IAAI5S,CAAC,GAAGW,GAAG,EAAEX,CAAC,GAAGe,MAAM,EAAEf,CAAC,EAAE,EAAE;AAClC,MAAA,MAAMyB,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACJ,CAAC,GAAGI,GAAG,CAACF,KAAK,CAAC,GAAG4H,UAAU,CAAA;AAC/C,MAAA,MAAMP,IAAI,GAAG,IAAI,CAAC5M,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAA;AAC7CmR,MAAAA,IAAI,CAACnQ,IAAI,CACRkK,UAAU,CAAC1S,IAAI,CAACwH,GAAG,EAAEA,GAAG,GAAG8F,IAAI,CAACE,SAAS,CAAE3E,QAAQ,EAAE;AACpDvE,QAAAA,KAAK,EAAE,YAAA;AACR,OAAC,CACF,CAAC,CAAA;AACF,KAAA;IAEA,KAAK,IAAIyB,CAAC,GAAGS,IAAI,EAAET,CAAC,GAAGa,KAAK,EAAEb,CAAC,EAAE,EAAE;MAClC,MAAMyB,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACJ,CAAC,CAAC,GAAG8H,UAAU,CAAA;AACnC,MAAA,MAAMP,IAAI,GAAG,IAAI,CAAC5M,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAA;AAC7CmR,MAAAA,IAAI,CAACnQ,IAAI,CACRkK,UAAU,CAAC1S,IAAI,CAACwH,GAAG,EAAEA,GAAG,GAAG8F,IAAI,CAACE,SAAS,CAAE3E,QAAQ,EAAE;AACpDvE,QAAAA,KAAK,EAAE,YAAA;AACR,OAAC,CACF,CAAC,CAAA;AACF,KAAA;IAEA,IAAIrD,EAAE,GAAG,IAAI,CAACP,IAAI,CAACF,KAAK,CAACS,EAAE,CAAA;IAC3B,MAAMgD,SAAS,GAAG,EAAE,CAAA;IACpB,IAAI6C,MAAM,IAAIX,GAAG,CAACD,MAAM,EAAEjC,SAAS,CAACuE,IAAI,CAAC,YAAY,CAAC,CAAA;IACtD,IAAI5B,KAAK,IAAIT,GAAG,CAACF,KAAK,EAAEhC,SAAS,CAACuE,IAAI,CAAC,YAAY,CAAC,CAAA;AACpD,IAAA,MAAMhB,GAAG,GAAG,IAAI,CAACzC,MAAM,EAAG,CAAA;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA9D,IAAAA,EAAE,CAAC4T,aAAa,CAACrN,GAAG,EAAG,IAAI,EAAE;AAC5B,MAAA,GAAG,IAAI,CAACxH,IAAI,CAACN,KAAK;MAClB4E,KAAK,EAAEuT,cAAc,GAAG,GAAG,GAAG5T,SAAS,CAAC4H,IAAI,CAAC,GAAG,CAAA;AACjD,KAAC,CAAC,CAAA;IAEF,IAAI8M,IAAI,CAACpX,MAAM,EAAE;AAChBN,MAAAA,EAAE,CAACiU,OAAO,CAACxI,eAAe,EAAE;AAAEkM,QAAAA,UAAU,EAAED,IAAAA;AAAK,OAAC,CAAC,CAAA;AAClD,KAAA;AACA,IAAA,IAAI,CAACjY,IAAI,CAACD,QAAQ,CAACQ,EAAE,CAAC,CAAA;GACtB,CAAA;EAEDoX,gBAAgB,GAAGA,MAAM;IACxB,IAAIpX,EAAE,GAAG,IAAI,CAACP,IAAI,CAACF,KAAK,CAACS,EAAE,CAAA;AAC3BA,IAAAA,EAAE,CAACiU,OAAO,CAACxI,eAAe,EAAE;AAAEkM,MAAAA,UAAU,EAAE,EAAA;AAAG,KAAC,CAAC,CAAA;IAC/C3X,EAAE,CAAC4T,aAAa,CAAC,IAAI,CAAC9P,MAAM,EAAE,EAAG,IAAI,EAAE;AACtCT,MAAAA,KAAK,EAAEuT,cAAAA;AACR,KAAC,CAAC,CAAA;AACF,IAAA,IAAI,CAACnX,IAAI,CAACD,QAAQ,CAACQ,EAAE,CAAC,CAAA;GACtB,CAAA;AAED4X,EAAAA,OAAOA,GAAG;AACTb,IAAAA,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAAA;IAE5B,IAAI,CAACjW,GAAG,CAAC8W,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAACV,eAAe,CAAC,CAAA;IAC/D,IAAI,CAACpW,GAAG,CAAC8W,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAACT,gBAAgB,CAAC,CAAA;AAClE,GAAA;EAEAzU,MAAMA,CAAC5D,IAAU,EAAW;IAC3B,IAAI,CAAC,KAAK,CAAC4D,MAAM,CAAC5D,IAAI,CAAC,EAAE,OAAO,KAAK,CAAA;IACrC,IAAI,CAACA,IAAI,GAAGA,IAAI,CAAA;IAEhB,IAAI,CAACgC,GAAG,CAAC+W,SAAS,GAAG/Y,IAAI,CAACN,KAAK,CAAC4E,KAAK,IAAIuT,cAAc,CAAA;AACvDM,IAAAA,qBAAqB,CACpB,IAAI,CAACnY,IAAI,EACT,IAAI,CAACkY,QAAQ,EACb,IAAI,CAACxP,KAAK,EACV,IAAI,CAACqP,YACN,CAAC,CAAA;AACD,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;EAEAvU,cAAcA,CAACwV,MAAsB,EAAW;IAC/C,OACCA,MAAM,CAACjV,IAAI,IAAI,YAAY,KAC1BiV,MAAM,CAACrV,MAAM,IAAI,IAAI,CAAC+E,KAAK,IAAI,IAAI,CAACwP,QAAQ,CAACe,QAAQ,CAACD,MAAM,CAACrV,MAAM,CAAC,CAAC,CAAA;AAExE,GAAA;AACAuV,EAAAA,UAAUA,GAAG;AACZlB,IAAAA,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA;AAC5B,GAAA;AACD,CAAA;AAEO,SAASE,qBAAqBA,CACpCnY,IAAU,EACVkY,QAA6B,EAC7BxP,KAAuB,EACvBqP,YAAoB,EACpBoB,WAAoB,EACpBC,aAAsB,EACrB;EACD,IAAIC,UAAU,GAAG,CAAC;AACjBC,IAAAA,UAAU,GAAG,IAAI;IACjBC,OAAO,GAAGrB,QAAQ,CAAC5J,UAAyB,CAAA;AAC7C,EAAA,MAAMjG,GAAG,GAAGrI,IAAI,CAACsO,UAAU,CAAA;EAC3B,IAAI,CAACjG,GAAG,EAAE,OAAA;AAEV,EAAA,KAAK,IAAItC,CAAC,GAAG,CAAC,EAAEuC,GAAG,GAAG,CAAC,EAAEvC,CAAC,GAAGsC,GAAG,CAACe,UAAU,EAAErD,CAAC,EAAE,EAAE;IACjD,MAAM;MAAE2D,OAAO;AAAEE,MAAAA,QAAAA;KAAU,GAAGvB,GAAG,CAAC1F,KAAK,CAACoD,CAAC,CAAC,CAACrG,KAAkB,CAAA;AAE7D,IAAA,KAAK,IAAIiI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+B,OAAO,EAAE/B,CAAC,EAAE,EAAEW,GAAG,EAAE,EAAE;AACxC,MAAA,MAAMkR,QAAQ,GACbL,WAAW,IAAI7Q,GAAG,GAAG8Q,aAAa,GAAGxP,QAAQ,IAAIA,QAAQ,CAACjC,CAAC,CAAC,CAAA;MAC7D,MAAM8R,QAAQ,GAAGD,QAAQ,GAAGA,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAA;MAChDH,UAAU,IAAIG,QAAQ,IAAIzB,YAAY,CAAA;AACtC,MAAA,IAAI,CAACyB,QAAQ,EAAEF,UAAU,GAAG,KAAK,CAAA;MACjC,IAAI,CAACC,OAAO,EAAE;AACbrB,QAAAA,QAAQ,CAACrV,WAAW,CAACzB,aAAa,CAAC,KAAK,CAAC,CAAC,CAACsY,KAAK,CAACzT,KAAK,GAAGwT,QAAQ,CAAA;AAClE,OAAC,MAAM;AACN,QAAA,IAAIF,OAAO,CAACG,KAAK,CAACzT,KAAK,IAAIwT,QAAQ,EAAEF,OAAO,CAACG,KAAK,CAACzT,KAAK,GAAGwT,QAAQ,CAAA;QACnEF,OAAO,GAAGA,OAAO,CAACI,WAA0B,CAAA;AAC7C,OAAA;AACD,KAAA;AACD,GAAA;AAEA,EAAA,OAAOJ,OAAO,EAAE;AACf,IAAA,MAAMlL,KAAK,GAAGkL,OAAO,CAACI,WAAW,CAAA;AACjCJ,IAAAA,OAAO,CAACK,UAAU,EAAEC,WAAW,CAACN,OAAO,CAAC,CAAA;AACxCA,IAAAA,OAAO,GAAGlL,KAAoB,CAAA;AAE9B,IAAA,IAAIiL,UAAU,EAAE;AACf5Q,MAAAA,KAAK,CAACgR,KAAK,CAACzT,KAAK,GAAGoT,UAAU,GAAG,IAAI,CAAA;AACrC3Q,MAAAA,KAAK,CAACgR,KAAK,CAACI,QAAQ,GAAG,EAAE,CAAA;AAC1B,KAAC,MAAM;AACNpR,MAAAA,KAAK,CAACgR,KAAK,CAACzT,KAAK,GAAG,EAAE,CAAA;AACtByC,MAAAA,KAAK,CAACgR,KAAK,CAACI,QAAQ,GAAGT,UAAU,GAAG,IAAI,CAAA;AACzC,KAAA;AACD,GAAA;AACD,CAAA;AAEO,MAAMU,oBAAyC,GAAGA,CAAC/Z,IAAI,EAAEU,IAAI,EAAEqE,MAAM,KAC3E,IAAI+S,SAAS,CAAC9X,IAAI,EAAEU,IAAI,EAAEqE,MAAM,EAAE,EAAE,CAAC,CAAA;AAE/B,MAAMiV,UAAU,GAAGA,CAACtR,KAAW,EAAEoB,KAAa,KAAmB;AACvE,EAAA,MAAM3D,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;EAC/B,IAAIN,IAA6B,GAAG,EAAE,CAAA;EACtC,MAAM;IAAEnC,KAAK;AAAEC,IAAAA,MAAAA;AAAO,GAAC,GAAGC,GAAG,CAAA;EAC7B,MAAMgC,MAAoB,GAAG,EAAE,CAAA;AAE/B,EAAA,KAAK,IAAIpC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,KAAK,GAAGC,MAAM,EAAEH,CAAC,IAAIE,KAAK,EAAE;AAC/C,IAAA,IAAImC,IAAI,CAACrC,CAAC,CAAC,EAAE,SAAA;AACbqC,IAAAA,IAAI,CAACrC,CAAC,CAAC,GAAG,IAAI,CAAA;IACdoC,MAAM,CAACK,IAAI,CACVkK,UAAU,CAACuH,MAAM,CAACnQ,KAAK,GAAG3D,GAAG,CAACA,GAAG,CAACJ,CAAC,CAAC,GAAG,CAAC,EAAGrF,IAAI,IAC9CU,aAAa,CAAC,KAAK,EAAE;AACpBkD,MAAAA,KAAK,EAAE,QAAQ;MACf4V,OAAO,EAAEA,MAAM;QACd,MAAM;UAAEzZ,QAAQ;AAAED,UAAAA,KAAAA;AAAM,SAAC,GAAGE,IAAI,CAAA;AAChC,QAAA,MAAM2H,GAAG,GAAGtC,CAAC,GAAGE,KAAK,CAAA;QACrB,MAAMyC,KAAK,GAAGlI,KAAK,CAAC+N,GAAG,CAAC3D,MAAM,CAACd,KAAK,CAAE,CAAA;AACtC,QAAA,MAAM3D,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;AAC/BjI,QAAAA,QAAQ,CACP8V,SAAS,CAAC/V,KAAK,CAACS,EAAE,EAAE;UAAEkF,GAAG;UAAEuC,KAAK;UAAEmF,UAAU,EAAE/D,KAAK,GAAG,CAAA;SAAG,EAAEzB,GAAG,CAC/D,CAAC,CAAA;AACF,OAAA;KACA,CACF,CACD,CAAC,CAAA;AACF,GAAA;EAEAD,IAAI,GAAG,EAAE,CAAA;EACT,KAAK,IAAIrC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,KAAK,EAAEF,CAAC,EAAE,EAAE;AAC/B,IAAA,IAAIqC,IAAI,CAACrC,CAAC,CAAC,EAAE,SAAA;AACbqC,IAAAA,IAAI,CAACrC,CAAC,CAAC,GAAG,IAAI,CAAA;IACdoC,MAAM,CAACK,IAAI,CACVkK,UAAU,CAACuH,MAAM,CAACnQ,KAAK,GAAG3D,GAAG,CAACA,GAAG,CAACJ,CAAC,CAAC,GAAG,CAAC,EAAGrF,IAAI,IAC9CU,aAAa,CAAC,KAAK,EAAE;AACpBkD,MAAAA,KAAK,EAAE,QAAQ;MACf4V,OAAO,EAAEA,MAAM;QACd,MAAM;UAAE1Z,KAAK;AAAEC,UAAAA,QAAAA;AAAS,SAAC,GAAGC,IAAI,CAAA;QAChC,MAAMgI,KAAK,GAAGlI,KAAK,CAAC+N,GAAG,CAAC3D,MAAM,CAACd,KAAK,CAAE,CAAA;AACtC,QAAA,MAAM3D,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;AAE/BjI,QAAAA,QAAQ,CACPoV,YAAY,CAACrV,KAAK,CAACS,EAAE,EAAE;UAAEkF,GAAG;UAAEuC,KAAK;UAAEmF,UAAU,EAAE/D,KAAK,GAAG,CAAA;SAAG,EAAE/D,CAAC,CAChE,CAAC,CAAA;AACF,OAAA;KACA,CACF,CACD,CAAC,CAAA;AACF,GAAA;AAEAoC,EAAAA,MAAM,CAACK,IAAI,CACVkK,UAAU,CAACuH,MAAM,CAACnQ,KAAK,GAAG,CAAC,EAAGpJ,IAAI,IACjCU,aAAa,CACZ,KAAK,EACL;AAAEkD,IAAAA,KAAK,EAAE,OAAA;AAAQ,GAAC,EAClBlD,aAAa,CACZ,KAAK,EACL;AAAEkD,IAAAA,KAAK,EAAE,QAAQ;AAAE4V,IAAAA,OAAO,EAAEA,MAAM5D,WAAW,CAACxM,KAAK,EAAEpJ,IAAI,CAAA;AAAE,GAAC,EAC5D,GACD,CAAC,EACDU,aAAa,CACZ,KAAK,EACL;AACCkD,IAAAA,KAAK,EAAE,QAAQ;AACf4V,IAAAA,OAAO,EAAEA,MAAMvE,cAAc,CAAC7L,KAAK,EAAEpJ,IAAI,CAAA;AAC1C,GAAC,EACD,GACD,CACD,CACD,CACD,CAAC,CAAA;AACD,EAAA,OAAOyH,MAAM,CAAA;AACd,CAAC;;ACvQD;AACA;AACA;AACO,MAAMgS,uBAAuB,GAAG,IAAIxN,SAAS,CACnD,qBACD,CAAC,CAAA;;AAED;AACA;AACA;;AAQA;AACA;AACA;;AAGA;AACA;AACA;AACO,SAASyN,cAAcA,GAKS;EAAA,IALR;AAC9BC,IAAAA,WAAW,GAAG,CAAC;AACftC,IAAAA,YAAY,GAAG,EAAE;AACjBuC,IAAAA,IAAI,GAAGxC,SAAS;AAChByC,IAAAA,mBAAmB,GAAG,IAAA;AACA,GAAC,GAAAjZ,SAAA,CAAAC,MAAA,GAAAD,CAAAA,IAAAA,SAAA,CAAAE,CAAAA,CAAAA,KAAAA,SAAA,GAAAF,SAAA,CAAG,CAAA,CAAA,GAAA,EAAE,CAAA;AAC5B,EAAA,MAAMkZ,MAAM,GAAG,IAAIC,MAAM,CAAc;AACtCvY,IAAAA,GAAG,EAAEiY,uBAAuB;AAC5B3Z,IAAAA,KAAK,EAAE;AACNka,MAAAA,IAAIA,CAACnF,CAAC,EAAE/U,KAAK,EAAE;AACdga,QAAAA,MAAM,CAACxR,IAAI,CAAE1F,KAAK,CAAEqX,SAAS,CAC5BnO,cAAc,CAAChM,KAAK,CAACI,MAAM,CAAC,CAAC8H,KAAK,CAACQ,IAAI,CACvC,GAAG,CAAClJ,IAAI,EAAEU,IAAI,EAAEqE,MAAM,KAAK,IAAIuV,IAAI,CAACta,IAAI,EAAEU,IAAI,EAAEqE,MAAM,EAAEgT,YAAY,CAAC,CAAA;AACtE,QAAA,OAAO,IAAI6C,WAAW,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAA;OACjC;AACDC,MAAAA,KAAKA,CAAC5Z,EAAE,EAAEiJ,IAAI,EAAE;AACf,QAAA,OAAOA,IAAI,CAAC2Q,KAAK,CAAC5Z,EAAE,CAAC,CAAA;AACtB,OAAA;KACA;AACDqC,IAAAA,KAAK,EAAE;MACNwX,UAAU,EAAGta,KAAK,IAA6B;AAC9C,QAAA,MAAMua,WAAW,GAAGZ,uBAAuB,CAACa,QAAQ,CAACxa,KAAK,CAAC,CAAA;QAC3D,OAAOua,WAAW,IAAIA,WAAW,CAACE,YAAY,GAAG,CAAC,CAAC,GAChD;AAAE3W,UAAAA,KAAK,EAAE,eAAA;SAAiB,GAC1B,EAAE,CAAA;OACL;AAED4W,MAAAA,eAAe,EAAE;AAChBC,QAAAA,SAAS,EAAEA,CAACza,IAAI,EAAE4X,KAAK,KAAK;UAC3B8C,eAAe,CACd1a,IAAI,EACJ4X,KAAK,EACL+B,WAAW,EACXtC,YAAY,EACZwC,mBACD,CAAC,CAAA;SACD;QACDc,UAAU,EAAG3a,IAAI,IAAK;UACrB2X,gBAAgB,CAAC3X,IAAI,CAAC,CAAA;SACtB;AACD4a,QAAAA,SAAS,EAAEA,CAAC5a,IAAI,EAAE4X,KAAK,KAAK;AAC3BiD,UAAAA,iBAAe,CAAC7a,IAAI,EAAE4X,KAAK,EAAEP,YAAY,CAAC,CAAA;AAC3C,SAAA;OACA;MAEDlU,WAAW,EAAGrD,KAAK,IAAK;AACvB,QAAA,MAAMua,WAAW,GAAGZ,uBAAuB,CAACa,QAAQ,CAACxa,KAAK,CAAC,CAAA;QAC3D,IAAIua,WAAW,IAAIA,WAAW,CAACE,YAAY,GAAG,CAAC,CAAC,EAAE;AACjD,UAAA,OAAOO,iBAAiB,CAAChb,KAAK,EAAEua,WAAW,CAACE,YAAY,CAAC,CAAA;AAC1D,SAAA;OACA;AAEDN,MAAAA,SAAS,EAAE,EAAC;AACb,KAAA;AACD,GAAC,CAAC,CAAA;AACF,EAAA,OAAOH,MAAM,CAAA;AACd,CAAA;;AAEA;AACA;AACA;AACO,MAAMI,WAAW,CAAC;AACxB1X,EAAAA,WAAWA,CACH+X,YAAoB,EACpBQ,QAA0B,EAChC;IAAA,IAFMR,CAAAA,YAAoB,GAApBA,YAAoB,CAAA;IAAA,IACpBQ,CAAAA,QAA0B,GAA1BA,QAA0B,CAAA;AAC/B,GAAA;EAEHZ,KAAKA,CAAC5Z,EAAe,EAAe;AACnC;IACA,MAAMT,KAAK,GAAG,IAAI,CAAA;AAClB,IAAA,MAAMkb,MAAM,GAAGza,EAAE,CAAC0a,OAAO,CAACxB,uBAAuB,CAAC,CAAA;AAClD,IAAA,IAAIuB,MAAM,IAAIA,MAAM,CAACE,SAAS,IAAI,IAAI,EACrC,OAAO,IAAIhB,WAAW,CAACc,MAAM,CAACE,SAAS,EAAE,KAAK,CAAC,CAAA;AAChD,IAAA,IAAIF,MAAM,IAAIA,MAAM,CAACG,WAAW,KAAKra,SAAS,EAC7C,OAAO,IAAIoZ,WAAW,CAACpa,KAAK,CAACya,YAAY,EAAES,MAAM,CAACG,WAAW,CAAC,CAAA;IAC/D,IAAIrb,KAAK,CAACya,YAAY,GAAG,CAAC,CAAC,IAAIha,EAAE,CAAC6a,UAAU,EAAE;AAC7C,MAAA,IAAIC,MAAM,GAAG9a,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAAC3F,KAAK,CAACya,YAAY,EAAE,CAAC,CAAC,CAAC,CAAA;AACnD,MAAA,IAAI,CAAC5N,YAAY,CAACpM,EAAE,CAACsN,GAAG,CAACR,OAAO,CAACgO,MAAM,CAAC,CAAC,EAAE;QAC1CA,MAAM,GAAG,CAAC,CAAC,CAAA;AACZ,OAAA;MACA,OAAO,IAAInB,WAAW,CAACmB,MAAM,EAAEvb,KAAK,CAACib,QAAQ,CAAC,CAAA;AAC/C,KAAA;AACA,IAAA,OAAOjb,KAAK,CAAA;AACb,GAAA;AACD,CAAA;AAEA,SAAS4a,eAAeA,CACvB1a,IAAgB,EAChB4X,KAAiB,EACjB+B,WAAmB,EACnBtC,YAAoB,EACpBwC,mBAA4B,EACrB;EACP,MAAMQ,WAAW,GAAGZ,uBAAuB,CAACa,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,CAAA;EAChE,IAAI,CAACua,WAAW,EAAE,OAAA;AAElB,EAAA,IAAI,CAACA,WAAW,CAACU,QAAQ,EAAE;AAC1B,IAAA,MAAM9X,MAAM,GAAGqY,aAAa,CAAC1D,KAAK,CAAC3U,MAAqB,CAAC,CAAA;IACzD,IAAIgH,IAAI,GAAG,CAAC,CAAC,CAAA;AACb,IAAA,IAAIhH,MAAM,EAAE;MACX,MAAM;QAAE6C,IAAI;AAAEI,QAAAA,KAAAA;AAAM,OAAC,GAAGjD,MAAM,CAACsY,qBAAqB,EAAE,CAAA;AACtD,MAAA,IAAI3D,KAAK,CAACC,OAAO,GAAG/R,IAAI,IAAI6T,WAAW,EACtC1P,IAAI,GAAGuR,QAAQ,CAACxb,IAAI,EAAE4X,KAAK,EAAE,MAAM,EAAE+B,WAAW,CAAC,CAAC,KAC9C,IAAIzT,KAAK,GAAG0R,KAAK,CAACC,OAAO,IAAI8B,WAAW,EAC5C1P,IAAI,GAAGuR,QAAQ,CAACxb,IAAI,EAAE4X,KAAK,EAAE,OAAO,EAAE+B,WAAW,CAAC,CAAA;AACpD,KAAA;AAEA,IAAA,IAAI1P,IAAI,IAAIoQ,WAAW,CAACE,YAAY,EAAE;AACrC,MAAA,IAAI,CAACV,mBAAmB,IAAI5P,IAAI,KAAK,CAAC,CAAC,EAAE;QACxC,MAAMoE,KAAK,GAAGrO,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACpD,IAAI,CAAC,CAAA;QAC1C,MAAMjC,KAAK,GAAGqG,KAAK,CAAC/O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AAC5B,QAAA,MAAMmG,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;QAC/B,MAAMmF,UAAU,GAAGkB,KAAK,CAACjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;QAClC,MAAMxB,GAAG,GACRnC,GAAG,CAAC6B,QAAQ,CAAC+G,KAAK,CAACvH,GAAG,GAAGqG,UAAU,CAAC,GACpCkB,KAAK,CAACvB,SAAS,CAAE9N,KAAK,CAACgK,OAAO,GAC9B,CAAC,CAAA;AAEF,QAAA,IAAIpB,GAAG,IAAInC,GAAG,CAACF,KAAK,GAAG,CAAC,EAAE;AACzB,UAAA,OAAA;AACD,SAAA;AACD,OAAA;AAEAkW,MAAAA,YAAY,CAACzb,IAAI,EAAEiK,IAAI,CAAC,CAAA;AACzB,KAAA;AACD,GAAA;AACD,CAAA;AAEA,SAAS0N,gBAAgBA,CAAC3X,IAAgB,EAAQ;EACjD,MAAMqa,WAAW,GAAGZ,uBAAuB,CAACa,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,CAAA;EAChE,IAAIua,WAAW,IAAIA,WAAW,CAACE,YAAY,GAAG,CAAC,CAAC,IAAI,CAACF,WAAW,CAACU,QAAQ,EACxEU,YAAY,CAACzb,IAAI,EAAE,CAAC,CAAC,CAAC,CAAA;AACxB,CAAA;AAEA,SAAS6a,iBAAeA,CACvB7a,IAAgB,EAChB4X,KAAiB,EACjBP,YAAoB,EACV;EACV,MAAMqE,GAAG,GAAG1b,IAAI,CAACsB,GAAG,CAACqa,aAAa,CAACC,WAAW,IAAIC,MAAM,CAAA;EAExD,MAAMxB,WAAW,GAAGZ,uBAAuB,CAACa,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,CAAA;AAChE,EAAA,IAAI,CAACua,WAAW,IAAIA,WAAW,CAACE,YAAY,IAAI,CAAC,CAAC,IAAIF,WAAW,CAACU,QAAQ,EACzE,OAAO,KAAK,CAAA;AAEb,EAAA,MAAM9Q,IAAI,GAAGjK,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAAC3D,MAAM,CAACmQ,WAAW,CAACE,YAAY,CAAE,CAAA;AAC7D,EAAA,MAAMhV,KAAK,GAAGuW,eAAe,CAAC9b,IAAI,EAAEqa,WAAW,CAACE,YAAY,EAAEtQ,IAAI,CAACjL,KAAK,CAAC,CAAA;AACzEgB,EAAAA,IAAI,CAACD,QAAQ,CACZC,IAAI,CAACF,KAAK,CAACS,EAAE,CAACiU,OAAO,CAACiF,uBAAuB,EAAE;AAC9C0B,IAAAA,WAAW,EAAE;MAAEY,MAAM,EAAEnE,KAAK,CAACC,OAAO;AAAEmE,MAAAA,UAAU,EAAEzW,KAAAA;AAAM,KAAA;AACzD,GAAC,CACF,CAAC,CAAA;EAED,SAAS0W,MAAMA,CAACrE,KAAiB,EAAE;AAClC8D,IAAAA,GAAG,CAACtD,mBAAmB,CAAC,SAAS,EAAE6D,MAAM,CAAC,CAAA;AAC1CP,IAAAA,GAAG,CAACtD,mBAAmB,CAAC,WAAW,EAAE8D,IAAI,CAAC,CAAA;IAC1C,MAAM7B,WAAW,GAAGZ,uBAAuB,CAACa,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,CAAA;IAChE,IAAIua,WAAW,EAAEU,QAAQ,EAAE;AAC1BoB,MAAAA,iBAAiB,CAChBnc,IAAI,EACJqa,WAAW,CAACE,YAAY,EACxB6B,YAAY,CAAC/B,WAAW,CAACU,QAAQ,EAAEnD,KAAK,EAAEP,YAAY,CACvD,CAAC,CAAA;AACDrX,MAAAA,IAAI,CAACD,QAAQ,CACZC,IAAI,CAACF,KAAK,CAACS,EAAE,CAACiU,OAAO,CAACiF,uBAAuB,EAAE;AAAE0B,QAAAA,WAAW,EAAE,IAAA;AAAK,OAAC,CACrE,CAAC,CAAA;AACF,KAAA;AACD,GAAA;EAEA,SAASe,IAAIA,CAACtE,KAAiB,EAAQ;IACtC,IAAI,CAACA,KAAK,CAACyE,KAAK,EAAE,OAAOJ,MAAM,CAACrE,KAAK,CAAC,CAAA;IACtC,MAAMyC,WAAW,GAAGZ,uBAAuB,CAACa,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,CAAA;IAChE,IAAI,CAACua,WAAW,EAAE,OAAA;IAClB,IAAIA,WAAW,CAACU,QAAQ,EAAE;MACzB,MAAMuB,OAAO,GAAGF,YAAY,CAAC/B,WAAW,CAACU,QAAQ,EAAEnD,KAAK,EAAEP,YAAY,CAAC,CAAA;MACvEkF,kBAAkB,CAACvc,IAAI,EAAEqa,WAAW,CAACE,YAAY,EAAE+B,OAAO,EAAEjF,YAAY,CAAC,CAAA;AAC1E,KAAA;AACD,GAAA;AAEAqE,EAAAA,GAAG,CAAC9Z,gBAAgB,CAAC,SAAS,EAAEqa,MAAM,CAAC,CAAA;AACvCP,EAAAA,GAAG,CAAC9Z,gBAAgB,CAAC,WAAW,EAAEsa,IAAI,CAAC,CAAA;EACvCtE,KAAK,CAAC4E,cAAc,EAAE,CAAA;AACtB,EAAA,OAAO,IAAI,CAAA;AACZ,CAAA;AAEA,SAASV,eAAeA,CACvB9b,IAAgB,EAChBgX,OAAe,EAAA9E,IAAA,EAEN;EAAA,IADT;IAAElJ,OAAO;AAAEE,IAAAA,QAAAA;AAAgB,GAAC,GAAAgJ,IAAA,CAAA;EAE5B,MAAM3M,KAAK,GAAG2D,QAAQ,IAAIA,QAAQ,CAACA,QAAQ,CAACrI,MAAM,GAAG,CAAC,CAAC,CAAA;EACvD,IAAI0E,KAAK,EAAE,OAAOA,KAAK,CAAA;AACvB,EAAA,MAAMjE,GAAG,GAAGtB,IAAI,CAACyc,QAAQ,CAACzF,OAAO,CAAC,CAAA;EAClC,MAAM1X,IAAI,GAAGgC,GAAG,CAAChC,IAAI,CAACod,UAAU,CAACpb,GAAG,CAAC8R,MAAM,CAAgB,CAAA;AAC3D,EAAA,IAAIuJ,QAAQ,GAAGrd,IAAI,CAACsd,WAAW;AAC9BC,IAAAA,KAAK,GAAG7T,OAAO,CAAA;EAChB,IAAIE,QAAQ,EACX,KAAK,IAAI7D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2D,OAAO,EAAE3D,CAAC,EAAE,EAC/B,IAAI6D,QAAQ,CAAC7D,CAAC,CAAC,EAAE;AAChBsX,IAAAA,QAAQ,IAAIzT,QAAQ,CAAC7D,CAAC,CAAC,CAAA;AACvBwX,IAAAA,KAAK,EAAE,CAAA;AACR,GAAA;EACF,OAAOF,QAAQ,GAAGE,KAAK,CAAA;AACxB,CAAA;AAEA,SAASvB,aAAaA,CAACrY,MAA0B,EAAsB;AACtE,EAAA,OAAOA,MAAM,IAAIA,MAAM,CAAC6Z,QAAQ,IAAI,IAAI,IAAI7Z,MAAM,CAAC6Z,QAAQ,IAAI,IAAI,EAClE7Z,MAAM,GACLA,MAAM,CAACM,SAAS,IAAIN,MAAM,CAACM,SAAS,CAACgV,QAAQ,CAAC,aAAa,CAAC,GACzD,IAAI,GACHtV,MAAM,CAACiW,UAA0B,CAAA;AACvC,EAAA,OAAOjW,MAAM,CAAA;AACd,CAAA;AAEA,SAASuY,QAAQA,CAChBxb,IAAgB,EAChB4X,KAAiB,EACjBtD,IAAsB,EACtBqF,WAAmB,EACV;AACT;AACA;AACA;EACA,MAAMvG,MAAM,GAAGkB,IAAI,IAAI,OAAO,GAAG,CAACqF,WAAW,GAAGA,WAAW,CAAA;AAC3D,EAAA,MAAMoD,KAAK,GAAG/c,IAAI,CAACgY,WAAW,CAAC;AAC9BlS,IAAAA,IAAI,EAAE8R,KAAK,CAACC,OAAO,GAAGzE,MAAM;IAC5BpN,GAAG,EAAE4R,KAAK,CAACE,OAAAA;AACZ,GAAC,CAAC,CAAA;AACF,EAAA,IAAI,CAACiF,KAAK,EAAE,OAAO,CAAC,CAAC,CAAA;EACrB,MAAM;AAAEjW,IAAAA,GAAAA;AAAI,GAAC,GAAGiW,KAAK,CAAA;AACrB,EAAA,MAAM1O,KAAK,GAAGb,UAAU,CAACxN,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAC,CAAA;AACrD,EAAA,IAAI,CAACuH,KAAK,EAAE,OAAO,CAAC,CAAC,CAAA;AACrB,EAAA,IAAIiG,IAAI,IAAI,OAAO,EAAE,OAAOjG,KAAK,CAACvH,GAAG,CAAA;AACrC,EAAA,MAAMrB,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACqJ,KAAK,CAAC/O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACvC8J,IAAAA,KAAK,GAAGiF,KAAK,CAACjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AACxB,EAAA,MAAMvB,KAAK,GAAGpC,GAAG,CAACA,GAAG,CAACuX,OAAO,CAAC3O,KAAK,CAACvH,GAAG,GAAGsC,KAAK,CAAC,CAAA;EAChD,OAAOvB,KAAK,GAAGpC,GAAG,CAACF,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG6D,KAAK,GAAG3D,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAG,CAAC,CAAC,CAAA;AAChE,CAAA;AAEA,SAASuU,YAAYA,CACpBrB,QAAkB,EAClBnD,KAAiB,EACjBP,YAAoB,EACX;EACT,MAAMjE,MAAM,GAAGwE,KAAK,CAACC,OAAO,GAAGkD,QAAQ,CAACgB,MAAM,CAAA;EAC9C,OAAOpV,IAAI,CAACE,GAAG,CAACwQ,YAAY,EAAE0D,QAAQ,CAACiB,UAAU,GAAG5I,MAAM,CAAC,CAAA;AAC5D,CAAA;AAEA,SAASqI,YAAYA,CAACzb,IAAgB,EAAEiF,KAAa,EAAQ;AAC5DjF,EAAAA,IAAI,CAACD,QAAQ,CACZC,IAAI,CAACF,KAAK,CAACS,EAAE,CAACiU,OAAO,CAACiF,uBAAuB,EAAE;AAAEyB,IAAAA,SAAS,EAAEjW,KAAAA;AAAM,GAAC,CACpE,CAAC,CAAA;AACF,CAAA;AAEA,SAASkX,iBAAiBA,CACzBnc,IAAgB,EAChBiK,IAAY,EACZ1E,KAAa,EACN;EACP,MAAM8I,KAAK,GAAGrO,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACpD,IAAI,CAAC,CAAA;EAC1C,MAAMjC,KAAK,GAAGqG,KAAK,CAAC/O,IAAI,CAAC,CAAC,CAAC,CAAC;AAC3BmG,IAAAA,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC;AACzBoB,IAAAA,KAAK,GAAGiF,KAAK,CAACjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;EACxB,MAAMxB,GAAG,GACRnC,GAAG,CAAC6B,QAAQ,CAAC+G,KAAK,CAACvH,GAAG,GAAGsC,KAAK,CAAC,GAAGiF,KAAK,CAACvB,SAAS,CAAE9N,KAAK,CAACgK,OAAO,GAAG,CAAC,CAAA;AACrE,EAAA,MAAMzI,EAAE,GAAGP,IAAI,CAACF,KAAK,CAACS,EAAE,CAAA;AACxB,EAAA,KAAK,IAAIoH,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGlC,GAAG,CAACD,MAAM,EAAEmC,GAAG,EAAE,EAAE;IAC1C,MAAMsV,QAAQ,GAAGtV,GAAG,GAAGlC,GAAG,CAACF,KAAK,GAAGqC,GAAG,CAAA;AACtC;AACA,IAAA,IAAID,GAAG,IAAIlC,GAAG,CAACA,GAAG,CAACwX,QAAQ,CAAC,IAAIxX,GAAG,CAACA,GAAG,CAACwX,QAAQ,GAAGxX,GAAG,CAACF,KAAK,CAAC,EAAE,SAAA;AAC/D,IAAA,MAAMuB,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACwX,QAAQ,CAAC,CAAA;IAC7B,MAAMje,KAAK,GAAGgJ,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAC,CAAE9H,KAAkB,CAAA;AACnD,IAAA,MAAM6I,KAAK,GAAG7I,KAAK,CAACgK,OAAO,IAAI,CAAC,GAAG,CAAC,GAAGpB,GAAG,GAAGnC,GAAG,CAAC6B,QAAQ,CAACR,GAAG,CAAC,CAAA;AAC9D,IAAA,IAAI9H,KAAK,CAACkK,QAAQ,IAAIlK,KAAK,CAACkK,QAAQ,CAACrB,KAAK,CAAC,IAAItC,KAAK,EAAE,SAAA;AACtD,IAAA,MAAM2D,QAAQ,GAAGlK,KAAK,CAACkK,QAAQ,GAC5BlK,KAAK,CAACkK,QAAQ,CAACqB,KAAK,EAAE,GACtB2S,MAAM,CAACle,KAAK,CAACgK,OAAO,CAAC,CAAA;AACxBE,IAAAA,QAAQ,CAACrB,KAAK,CAAC,GAAGtC,KAAK,CAAA;IACvBhF,EAAE,CAAC4T,aAAa,CAAC/K,KAAK,GAAGtC,GAAG,EAAE,IAAI,EAAE;AAAE,MAAA,GAAG9H,KAAK;AAAEkK,MAAAA,QAAQ,EAAEA,QAAAA;AAAS,KAAC,CAAC,CAAA;AACtE,GAAA;EACA,IAAI3I,EAAE,CAAC6a,UAAU,EAAEpb,IAAI,CAACD,QAAQ,CAACQ,EAAE,CAAC,CAAA;AACrC,CAAA;AAEA,SAASgc,kBAAkBA,CAC1Bvc,IAAgB,EAChBiK,IAAY,EACZ1E,KAAa,EACb8R,YAAoB,EACb;EACP,MAAMhJ,KAAK,GAAGrO,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACpD,IAAI,CAAC,CAAA;EAC1C,MAAMjC,KAAK,GAAGqG,KAAK,CAAC/O,IAAI,CAAC,CAAC,CAAC,CAAC;AAC3B8J,IAAAA,KAAK,GAAGiF,KAAK,CAACjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;EACxB,MAAMxB,GAAG,GACRtC,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAACV,QAAQ,CAAC+G,KAAK,CAACvH,GAAG,GAAGsC,KAAK,CAAC,GAC/CiF,KAAK,CAACvB,SAAS,CAAE9N,KAAK,CAACgK,OAAO,GAC9B,CAAC,CAAA;AACF,EAAA,IAAI1H,GAAgB,GAAGtB,IAAI,CAACyc,QAAQ,CAACpO,KAAK,CAACjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC9J,IAAI,CAAA;AAC1D,EAAA,OAAOgC,GAAG,IAAIA,GAAG,CAACwb,QAAQ,IAAI,OAAO,EAAE;IACtCxb,GAAG,GAAGA,GAAG,CAAC4X,UAAU,CAAA;AACrB,GAAA;EACA,IAAI,CAAC5X,GAAG,EAAE,OAAA;AACVmW,EAAAA,qBAAqB,CACpBzP,KAAK,EACL1G,GAAG,CAACsM,UAAU,EACdtM,GAAG,EACH+V,YAAY,EACZzP,GAAG,EACHrC,KACD,CAAC,CAAA;AACF,CAAA;AAEA,SAAS2X,MAAMA,CAAC/T,CAAS,EAAO;EAC/B,OAAOhI,KAAK,CAACgI,CAAC,CAAC,CAACR,IAAI,CAAC,CAAC,CAAC,CAAA;AACxB,CAAA;AAEO,SAASmS,iBAAiBA,CAChChb,KAAkB,EAClBmK,IAAY,EACI;EAChB,MAAM9G,WAAW,GAAG,EAAE,CAAA;EACtB,MAAMkL,KAAK,GAAGvO,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACpD,IAAI,CAAC,CAAA;EACrC,MAAMjC,KAAK,GAAGqG,KAAK,CAAC/O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;EAC5B,IAAI,CAAC0I,KAAK,EAAE;IACX,OAAOmV,aAAa,CAACtG,KAAK,CAAA;AAC3B,GAAA;AACA,EAAA,MAAMpR,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;EAC/B,MAAMoB,KAAK,GAAGiF,KAAK,CAACjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AAC7B,EAAA,MAAMxB,GAAG,GAAGnC,GAAG,CAAC6B,QAAQ,CAAC+G,KAAK,CAACvH,GAAG,GAAGsC,KAAK,CAAC,GAAGiF,KAAK,CAACvB,SAAS,CAAE9N,KAAK,CAACgK,OAAO,CAAA;AAC5E,EAAA,KAAK,IAAIrB,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGlC,GAAG,CAACD,MAAM,EAAEmC,GAAG,EAAE,EAAE;IAC1C,MAAME,KAAK,GAAGD,GAAG,GAAGD,GAAG,GAAGlC,GAAG,CAACF,KAAK,GAAG,CAAC,CAAA;AACvC;AACA;AACA;IACA,IACC,CAACqC,GAAG,IAAInC,GAAG,CAACF,KAAK,IAAIE,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,IAAIpC,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAG,CAAC,CAAC,MACxDF,GAAG,IAAI,CAAC,IAAIlC,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,IAAIpC,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAGpC,GAAG,CAACF,KAAK,CAAC,CAAC,EACzD;AACD,MAAA,MAAMyR,OAAO,GAAGvR,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,CAAA;AAC9B,MAAA,MAAMf,GAAG,GAAGsC,KAAK,GAAG4N,OAAO,GAAGhP,KAAK,CAACkC,MAAM,CAAC8M,OAAO,CAAC,CAAE7O,QAAQ,GAAG,CAAC,CAAA;AACjE,MAAA,MAAM7G,GAAG,GAAGC,QAAQ,CAACb,aAAa,CAAC,KAAK,CAAC,CAAA;MACzCY,GAAG,CAAC+W,SAAS,GAAG,sBAAsB,CAAA;MACtClV,WAAW,CAAC2E,IAAI,CAACkK,UAAU,CAACuH,MAAM,CAACzS,GAAG,EAAExF,GAAG,CAAC,CAAC,CAAA;AAC9C,KAAA;AACD,GAAA;EACA,OAAO6b,aAAa,CAAC7c,MAAM,CAACR,KAAK,CAAC+N,GAAG,EAAE1K,WAAW,CAAC,CAAA;AACpD;;ACzXO,MAAMia,WAAW,GAAI7S,KAAY,IAAkB;AACzD,EAAA,IAAI,CAACA,KAAK,CAAC0E,IAAI,EAAE,OAAO,IAAI,CAAA;EAC5B,IAAI;IAAEzQ,OAAO;IAAE6e,SAAS;AAAEC,IAAAA,OAAAA;AAAQ,GAAC,GAAG/S,KAAK,CAAA;AAE3C,EAAA,OACC/L,OAAO,CAACkK,UAAU,IAAI,CAAC,KACrB2U,SAAS,GAAG,CAAC,IAAIC,OAAO,GAAG,CAAC,IAC7B9e,OAAO,CAACyD,KAAK,CAAC,CAAC,CAAC,CAACoB,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,OAAO,CAAC,EAChD;AACD8U,IAAAA,SAAS,EAAE,CAAA;AACXC,IAAAA,OAAO,EAAE,CAAA;IACT9e,OAAO,GAAGA,OAAO,CAACyD,KAAK,CAAC,CAAC,CAAC,CAACzD,OAAO,CAAA;AACnC,GAAA;AACA,EAAA,MAAM4V,KAAK,GAAG5V,OAAO,CAACyD,KAAK,CAAC,CAAC,CAAC,CAAA;EAC9B,MAAM8J,IAAI,GAAGqI,KAAK,CAAC/Q,IAAI,CAACiF,IAAI,CAACC,SAAS,CAAA;AACtC,EAAA,MAAMrI,MAAM,GAAGkU,KAAK,CAAC/Q,IAAI,CAACnD,MAAM;AAC/ByQ,IAAAA,IAAI,GAAG,EAAE,CAAA;EAEV,IAAI5E,IAAI,IAAI,KAAK,EAAE;AAClB,IAAA,KAAK,IAAI1G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7G,OAAO,CAACkK,UAAU,EAAErD,CAAC,EAAE,EAAE;MAC5C,IAAIsJ,KAAK,GAAGnQ,OAAO,CAACyD,KAAK,CAACoD,CAAC,CAAC,CAAC7G,OAAO,CAAA;AACpC,MAAA,MAAMsH,IAAI,GAAGT,CAAC,GAAG,CAAC,GAAGsB,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEwW,SAAS,GAAG,CAAC,CAAC,CAAA;MAC/C,MAAMnX,KAAK,GAAGb,CAAC,GAAG7G,OAAO,CAACkK,UAAU,GAAG,CAAC,GAAG,CAAC,GAAG/B,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEyW,OAAO,GAAG,CAAC,CAAC,CAAA;MACvE,IAAIxX,IAAI,IAAII,KAAK,EAChByI,KAAK,GAAG4O,QAAQ,CACfzR,cAAc,CAAC5L,MAAM,CAAC,CAACyH,GAAG,EAC1B,IAAIyJ,KAAK,CAACzC,KAAK,EAAE7I,IAAI,EAAEI,KAAK,CAC7B,CAAC,CAAC1H,OAAO,CAAA;AACVmS,MAAAA,IAAI,CAAC7I,IAAI,CAAC6G,KAAK,CAAC,CAAA;AACjB,KAAA;GACA,MAAM,IAAI5C,IAAI,IAAI,MAAM,IAAIA,IAAI,IAAI,YAAY,EAAE;AAClD4E,IAAAA,IAAI,CAAC7I,IAAI,CACRuV,SAAS,IAAIC,OAAO,GACjBC,QAAQ,CACRzR,cAAc,CAAC5L,MAAM,CAAC,CAACyH,GAAG,EAC1B,IAAIyJ,KAAK,CAAC5S,OAAO,EAAE6e,SAAS,EAAEC,OAAO,CACtC,CAAC,CAAC9e,OAAO,GACRA,OACJ,CAAC,CAAA;AACF,GAAC,MAAM;AACN,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;AACA,EAAA,OAAOgf,iBAAiB,CAACtd,MAAM,EAAEyQ,IAAI,CAAC,CAAA;AACvC,CAAC,CAAA;AAED,SAAS6M,iBAAiBA,CAACtd,MAAc,EAAEyQ,IAAgB,EAAQ;EAClE,MAAMhG,MAAiB,GAAG,EAAE,CAAA;AAC5B,EAAA,KAAK,IAAItF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsL,IAAI,CAAC9P,MAAM,EAAEwE,CAAC,EAAE,EAAE;AACrC,IAAA,MAAMsC,GAAG,GAAGgJ,IAAI,CAACtL,CAAC,CAAC,CAAA;AACnB,IAAA,KAAK,IAAI4B,CAAC,GAAGU,GAAG,CAACe,UAAU,GAAG,CAAC,EAAEzB,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC7C,MAAM;QAAEgC,OAAO;AAAED,QAAAA,OAAAA;OAAS,GAAGrB,GAAG,CAAC1F,KAAK,CAACgF,CAAC,CAAC,CAACjI,KAAK,CAAA;MAC/C,KAAK,IAAIye,CAAC,GAAGpY,CAAC,EAAEoY,CAAC,GAAGpY,CAAC,GAAG4D,OAAO,EAAEwU,CAAC,EAAE,EACnC9S,MAAM,CAAC8S,CAAC,CAAC,GAAG,CAAC9S,MAAM,CAAC8S,CAAC,CAAC,IAAI,CAAC,IAAIzU,OAAO,CAAA;AACxC,KAAA;AACD,GAAA;EACA,IAAIzD,KAAK,GAAG,CAAC,CAAA;EACb,KAAK,IAAIkY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9S,MAAM,CAAC9J,MAAM,EAAE4c,CAAC,EAAE,EAAElY,KAAK,GAAGoB,IAAI,CAACE,GAAG,CAACtB,KAAK,EAAEoF,MAAM,CAAC8S,CAAC,CAAC,CAAC,CAAA;AAC1E,EAAA,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9S,MAAM,CAAC9J,MAAM,EAAE4c,CAAC,EAAE,EAAE;AACvC,IAAA,IAAIA,CAAC,GAAG9M,IAAI,CAAC9P,MAAM,EAAE8P,IAAI,CAAC7I,IAAI,CAACqJ,QAAQ,CAAC0F,KAAK,CAAC,CAAA;AAC9C,IAAA,IAAIlM,MAAM,CAAC8S,CAAC,CAAC,GAAGlY,KAAK,EAAE;MACtB,MAAMsR,KAAK,GAAG/K,cAAc,CAAC5L,MAAM,CAAC,CAAC+J,IAAI,CAAC/F,aAAa,EAAG,CAAA;MAC1D,MAAMyK,KAAK,GAAG,EAAE,CAAA;AAChB,MAAA,KAAK,IAAItJ,CAAC,GAAGsF,MAAM,CAAC8S,CAAC,CAAC,EAAEpY,CAAC,GAAGE,KAAK,EAAEF,CAAC,EAAE,EAAE;AACvCsJ,QAAAA,KAAK,CAAC7G,IAAI,CAAC+O,KAAK,CAAC,CAAA;AAClB,OAAA;AACAlG,MAAAA,IAAI,CAAC8M,CAAC,CAAC,GAAG9M,IAAI,CAAC8M,CAAC,CAAC,CAACvb,MAAM,CAACiP,QAAQ,CAACpC,IAAI,CAACJ,KAAK,CAAC,CAAC,CAAA;AAC/C,KAAA;AACD,GAAA;EACA,OAAO;IAAEnJ,MAAM,EAAEmL,IAAI,CAAC9P,MAAM;IAAE0E,KAAK;AAAEoL,IAAAA,IAAAA;GAAM,CAAA;AAC5C,CAAA;AAEO,MAAM4M,QAAQ,GAAGA,CAACG,QAAkB,EAAEnT,KAAY,KAAW;AACnE,EAAA,MAAMjL,IAAI,GAAGoe,QAAQ,CAACxZ,aAAa,EAAG,CAAA;AACtC,EAAA,MAAM3D,EAAE,GAAG,IAAIod,SAAS,CAACre,IAAI,CAAC,CAACuC,OAAO,CAAC,CAAC,EAAEvC,IAAI,CAACd,OAAO,CAACyQ,IAAI,EAAE1E,KAAK,CAAC,CAAA;EACnE,OAAOhK,EAAE,CAACsN,GAAG,CAAA;AACd,CAAC,CAAA;AAEM,MAAM+P,SAAS,GAAGA,CAAA1L,IAAA,EAExB2L,QAAgB,EAChBC,SAAiB,KACP;EAAA,IAHV;IAAEvY,KAAK;IAAEC,MAAM;AAAEmL,IAAAA,IAAAA;AAAW,GAAC,GAAAuB,IAAA,CAAA;EAI7B,IAAI3M,KAAK,IAAIsY,QAAQ,EAAE;IACtB,MAAME,KAAe,GAAG,EAAE,CAAA;IAC1B,MAAMC,OAAmB,GAAG,EAAE,CAAA;AAC9B,IAAA,KAAK,IAAIrW,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGgJ,IAAI,CAAC9P,MAAM,EAAE8G,GAAG,EAAE,EAAE;AAC3C,MAAA,MAAMsW,IAAI,GAAGtN,IAAI,CAAChJ,GAAG,CAAC;AACrBgH,QAAAA,KAAK,GAAG,EAAE,CAAA;MACX,KAAK,IAAI/G,GAAG,GAAGmW,KAAK,CAACpW,GAAG,CAAC,IAAI,CAAC,EAAEtC,CAAC,GAAG,CAAC,EAAEuC,GAAG,GAAGiW,QAAQ,EAAExY,CAAC,EAAE,EAAE;QAC3D,IAAI4E,IAAI,GAAGgU,IAAI,CAAChc,KAAK,CAACoD,CAAC,GAAG4Y,IAAI,CAACvV,UAAU,CAAC,CAAA;QAC1C,IAAId,GAAG,GAAGqC,IAAI,CAACjL,KAAK,CAACgK,OAAO,GAAG6U,QAAQ,EACtC5T,IAAI,GAAGA,IAAI,CAAC5G,IAAI,CAAC6a,aAAa,CAC7B5Q,aAAa,CACZrD,IAAI,CAACjL,KAAK,EACViL,IAAI,CAACjL,KAAK,CAACgK,OAAO,EAClBpB,GAAG,GAAGqC,IAAI,CAACjL,KAAK,CAACgK,OAAO,GAAG6U,QAC5B,CAAC,EACD5T,IAAI,CAACzL,OACN,CAAC,CAAA;AACFmQ,QAAAA,KAAK,CAAC7G,IAAI,CAACmC,IAAI,CAAC,CAAA;AAChBrC,QAAAA,GAAG,IAAIqC,IAAI,CAACjL,KAAK,CAACgK,OAAO,CAAA;AACzB,QAAA,KAAK,IAAI/B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgD,IAAI,CAACjL,KAAK,CAACiK,OAAO,EAAEhC,CAAC,EAAE,EAC1C8W,KAAK,CAACpW,GAAG,GAAGV,CAAC,CAAC,GAAG,CAAC8W,KAAK,CAACpW,GAAG,GAAGV,CAAC,CAAC,IAAI,CAAC,IAAIgD,IAAI,CAACjL,KAAK,CAACgK,OAAO,CAAA;AAC7D,OAAA;MACAgV,OAAO,CAAClW,IAAI,CAACqJ,QAAQ,CAACpC,IAAI,CAACJ,KAAK,CAAC,CAAC,CAAA;AACnC,KAAA;AACAgC,IAAAA,IAAI,GAAGqN,OAAO,CAAA;AACdzY,IAAAA,KAAK,GAAGsY,QAAQ,CAAA;AACjB,GAAA;EACA,IAAIrY,MAAM,IAAIsY,SAAS,EAAE;IACxB,MAAME,OAAO,GAAG,EAAE,CAAA;AAClB,IAAA,KAAK,IAAIrW,GAAG,GAAG,CAAC,EAAEtC,CAAC,GAAG,CAAC,EAAEsC,GAAG,GAAGmW,SAAS,EAAEnW,GAAG,EAAE,EAAEtC,CAAC,EAAE,EAAE;MACrD,MAAMsJ,KAAK,GAAG,EAAE;AACfwP,QAAAA,MAAM,GAAGxN,IAAI,CAACtL,CAAC,GAAGG,MAAM,CAAC,CAAA;AAC1B,MAAA,KAAK,IAAIyB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkX,MAAM,CAACzV,UAAU,EAAEzB,CAAC,EAAE,EAAE;AAC3C,QAAA,IAAIgD,IAAI,GAAGkU,MAAM,CAAClc,KAAK,CAACgF,CAAC,CAAC,CAAA;AAC1B,QAAA,IAAIU,GAAG,GAAGsC,IAAI,CAACjL,KAAK,CAACiK,OAAO,GAAG6U,SAAS,EACvC7T,IAAI,GAAGA,IAAI,CAAC5G,IAAI,CAAC/C,MAAM,CACtB;UACC,GAAG2J,IAAI,CAACjL,KAAK;AACbiK,UAAAA,OAAO,EAAEtC,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEiX,SAAS,GAAG7T,IAAI,CAACjL,KAAK,CAACiK,OAAO,CAAA;AACpD,SAAC,EACDgB,IAAI,CAACzL,OACN,CAAC,CAAA;AACFmQ,QAAAA,KAAK,CAAC7G,IAAI,CAACmC,IAAI,CAAC,CAAA;AACjB,OAAA;MACA+T,OAAO,CAAClW,IAAI,CAACqJ,QAAQ,CAACpC,IAAI,CAACJ,KAAK,CAAC,CAAC,CAAA;AACnC,KAAA;AACAgC,IAAAA,IAAI,GAAGqN,OAAO,CAAA;AACdxY,IAAAA,MAAM,GAAGsY,SAAS,CAAA;AACnB,GAAA;EAEA,OAAO;IAAEvY,KAAK;IAAEC,MAAM;AAAEmL,IAAAA,IAAAA;GAAM,CAAA;AAC/B,CAAC,CAAA;AAED,SAASyN,SAASA,CACjB7d,EAAe,EACfkF,GAAa,EACbuC,KAAW,EACXoB,KAAa,EACb7D,KAAa,EACbC,MAAc,EACdwQ,OAAe,EACL;EACV,MAAM9V,MAAM,GAAGK,EAAE,CAACsN,GAAG,CAACxK,IAAI,CAACnD,MAAM,CAAA;AACjC,EAAA,MAAMme,KAAK,GAAGvS,cAAc,CAAC5L,MAAM,CAAC,CAAA;AACpC,EAAA,IAAI2W,KAAK,CAAA;AACT,EAAA,IAAIyH,SAAS,CAAA;AACb,EAAA,IAAI/Y,KAAK,GAAGE,GAAG,CAACF,KAAK,EAAE;AACtB,IAAA,KAAK,IAAIoC,GAAG,GAAG,CAAC,EAAEO,MAAM,GAAG,CAAC,EAAEP,GAAG,GAAGlC,GAAG,CAACD,MAAM,EAAEmC,GAAG,EAAE,EAAE;AACtD,MAAA,MAAMmB,OAAO,GAAGd,KAAK,CAAC/F,KAAK,CAAC0F,GAAG,CAAC,CAAA;MAChCO,MAAM,IAAIY,OAAO,CAACX,QAAQ,CAAA;MAC1B,MAAMwG,KAAa,GAAG,EAAE,CAAA;AACxB,MAAA,IAAInL,GAAS,CAAA;MACb,IAAIsF,OAAO,CAACiF,SAAS,IAAI,IAAI,IAAIjF,OAAO,CAACiF,SAAS,CAAC1K,IAAI,IAAIgb,KAAK,CAACpU,IAAI,EACpEzG,GAAG,GAAGqT,KAAK,KAAKA,KAAK,GAAGwH,KAAK,CAACpU,IAAI,CAAC/F,aAAa,EAAG,CAAC,CAAC,KACjDV,GAAG,GAAG8a,SAAS,KAAKA,SAAS,GAAGD,KAAK,CAAChS,UAAU,CAACnI,aAAa,EAAG,CAAC,CAAA;AACvE,MAAA,KAAK,IAAImB,CAAC,GAAGI,GAAG,CAACF,KAAK,EAAEF,CAAC,GAAGE,KAAK,EAAEF,CAAC,EAAE,EAAEsJ,KAAK,CAAC7G,IAAI,CAACtE,GAAG,CAAC,CAAA;MACvDjD,EAAE,CAACgU,MAAM,CAAChU,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAACyC,MAAM,GAAG,CAAC,GAAGkB,KAAK,CAAC,EAAEuF,KAAK,CAAC,CAAA;AACpE,KAAA;AACD,GAAA;AACA,EAAA,IAAInJ,MAAM,GAAGC,GAAG,CAACD,MAAM,EAAE;IACxB,MAAMmJ,KAAK,GAAG,EAAE,CAAA;AAChB,IAAA,KACC,IAAItJ,CAAC,GAAG,CAAC,EAAE+D,KAAK,GAAG,CAAC3D,GAAG,CAACD,MAAM,GAAG,CAAC,IAAIC,GAAG,CAACF,KAAK,EAC/CF,CAAC,GAAGsB,IAAI,CAACE,GAAG,CAACpB,GAAG,CAACF,KAAK,EAAEA,KAAK,CAAC,EAC9BF,CAAC,EAAE,EACF;AACD,MAAA,MAAMkZ,MAAM,GACXlZ,CAAC,IAAII,GAAG,CAACF,KAAK,GACX,KAAK,GACLyC,KAAK,CAACkC,MAAM,CAACzE,GAAG,CAACA,GAAG,CAAC2D,KAAK,GAAG/D,CAAC,CAAC,CAAC,CAAEhC,IAAI,IAAIgb,KAAK,CAAChS,UAAU,CAAA;AAC9DsC,MAAAA,KAAK,CAAC7G,IAAI,CACTyW,MAAM,GACHD,SAAS,KAAKA,SAAS,GAAGD,KAAK,CAAChS,UAAU,CAACnI,aAAa,EAAG,CAAC,GAC5D2S,KAAK,KAAKA,KAAK,GAAGwH,KAAK,CAACpU,IAAI,CAAC/F,aAAa,EAAG,CACjD,CAAC,CAAA;AACF,KAAA;AAEA,IAAA,MAAMsa,QAAQ,GAAGH,KAAK,CAAC1W,GAAG,CAACrH,MAAM,CAAC,IAAI,EAAE6Q,QAAQ,CAACpC,IAAI,CAACJ,KAAK,CAAC,CAAC;AAC5DgC,MAAAA,IAAI,GAAG,EAAE,CAAA;AACV,IAAA,KAAK,IAAItL,CAAC,GAAGI,GAAG,CAACD,MAAM,EAAEH,CAAC,GAAGG,MAAM,EAAEH,CAAC,EAAE,EAAEsL,IAAI,CAAC7I,IAAI,CAAC0W,QAAQ,CAAC,CAAA;IAC7Dje,EAAE,CAACgU,MAAM,CAAChU,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAAC2D,KAAK,GAAGpB,KAAK,CAACG,QAAQ,GAAG,CAAC,CAAC,EAAEwI,IAAI,CAAC,CAAA;AAC3E,GAAA;AACA,EAAA,OAAO,CAAC,EAAEkG,KAAK,IAAIyH,SAAS,CAAC,CAAA;AAC9B,CAAA;AAEA,SAASG,iBAAiBA,CACzBle,EAAe,EACfkF,GAAa,EACbuC,KAAW,EACXoB,KAAa,EACbtD,IAAY,EACZI,KAAa,EACbF,GAAW,EACXgQ,OAAe,EACL;EACV,IAAIhQ,GAAG,IAAI,CAAC,IAAIA,GAAG,IAAIP,GAAG,CAACD,MAAM,EAAE,OAAO,KAAK,CAAA;EAC/C,IAAIuX,KAAK,GAAG,KAAK,CAAA;EACjB,KAAK,IAAInV,GAAG,GAAG9B,IAAI,EAAE8B,GAAG,GAAG1B,KAAK,EAAE0B,GAAG,EAAE,EAAE;IACxC,MAAMC,KAAK,GAAG7B,GAAG,GAAGP,GAAG,CAACF,KAAK,GAAGqC,GAAG;AAClCd,MAAAA,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,CAAA;AACrB,IAAA,IAAIpC,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAGpC,GAAG,CAACF,KAAK,CAAC,IAAIuB,GAAG,EAAE;AACtCiW,MAAAA,KAAK,GAAG,IAAI,CAAA;AACZ,MAAA,MAAM9S,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAE,CAAA;MAC/B,MAAM;AAAEd,QAAAA,GAAG,EAAE0Y,OAAO;AAAE5Y,QAAAA,IAAI,EAAE6Y,QAAAA;AAAS,OAAC,GAAGlZ,GAAG,CAACa,QAAQ,CAACQ,GAAG,CAAC,CAAA;MAC1DvG,EAAE,CAAC4T,aAAa,CAAC5T,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAACqB,GAAG,GAAGsC,KAAK,CAAC,EAAE,IAAI,EAAE;QAClE,GAAGa,IAAI,CAACjL,KAAK;QACbiK,OAAO,EAAEjD,GAAG,GAAG0Y,OAAAA;AAChB,OAAC,CAAC,CAAA;AACFne,MAAAA,EAAE,CAACgU,MAAM,CACRhU,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAACA,GAAG,CAACsC,UAAU,CAAC/B,GAAG,EAAE2Y,QAAQ,EAAE3W,KAAK,CAAC,CAAC,EACnEiC,IAAI,CAAC5G,IAAI,CAACa,aAAa,CAAC;QACvB,GAAG+F,IAAI,CAACjL,KAAK;QACbiK,OAAO,EAAEyV,OAAO,GAAGzU,IAAI,CAACjL,KAAK,CAACiK,OAAO,GAAGjD,GAAAA;AACzC,OAAC,CACF,CAAC,CAAA;AACD4B,MAAAA,GAAG,IAAIqC,IAAI,CAACjL,KAAK,CAACgK,OAAO,GAAG,CAAC,CAAA;AAC9B,KAAA;AACD,GAAA;AACA,EAAA,OAAO+T,KAAK,CAAA;AACb,CAAA;AAEA,SAAS6B,eAAeA,CACvBre,EAAe,EACfkF,GAAa,EACbuC,KAAW,EACXoB,KAAa,EACbpD,GAAW,EACXI,MAAc,EACdN,IAAY,EACZkQ,OAAe,EACL;EACV,IAAIlQ,IAAI,IAAI,CAAC,IAAIA,IAAI,IAAIL,GAAG,CAACF,KAAK,EAAE,OAAO,KAAK,CAAA;EAChD,IAAIwX,KAAK,GAAG,KAAK,CAAA;EACjB,KAAK,IAAIpV,GAAG,GAAG3B,GAAG,EAAE2B,GAAG,GAAGvB,MAAM,EAAEuB,GAAG,EAAE,EAAE;IACxC,MAAME,KAAK,GAAGF,GAAG,GAAGlC,GAAG,CAACF,KAAK,GAAGO,IAAI;AACnCgB,MAAAA,GAAG,GAAGrB,GAAG,CAACA,GAAG,CAACoC,KAAK,CAAC,CAAA;IACrB,IAAIpC,GAAG,CAACA,GAAG,CAACoC,KAAK,GAAG,CAAC,CAAC,IAAIf,GAAG,EAAE;AAC9BiW,MAAAA,KAAK,GAAG,IAAI,CAAA;AACZ,MAAA,MAAM9S,IAAI,GAAGjC,KAAK,CAACkC,MAAM,CAACpD,GAAG,CAAE,CAAA;AAC/B,MAAA,MAAM6X,QAAQ,GAAGlZ,GAAG,CAAC6B,QAAQ,CAACR,GAAG,CAAC,CAAA;AAClC,MAAA,MAAM+X,SAAS,GAAGte,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAACqB,GAAG,GAAGsC,KAAK,CAAC,CAAA;AAC5D7I,MAAAA,EAAE,CAAC4T,aAAa,CACf0K,SAAS,EACT,IAAI,EACJvR,aAAa,CACZrD,IAAI,CAACjL,KAAK,EACV8G,IAAI,GAAG6Y,QAAQ,EACf1U,IAAI,CAACjL,KAAK,CAACgK,OAAO,IAAIlD,IAAI,GAAG6Y,QAAQ,CACtC,CACD,CAAC,CAAA;AACDpe,MAAAA,EAAE,CAACgU,MAAM,CACRsK,SAAS,GAAG5U,IAAI,CAAC9B,QAAQ,EACzB8B,IAAI,CAAC5G,IAAI,CAACa,aAAa,CACtBoJ,aAAa,CAACrD,IAAI,CAACjL,KAAK,EAAe,CAAC,EAAE8G,IAAI,GAAG6Y,QAAQ,CAC1D,CACD,CAAC,CAAA;AACDhX,MAAAA,GAAG,IAAIsC,IAAI,CAACjL,KAAK,CAACiK,OAAO,GAAG,CAAC,CAAA;AAC9B,KAAA;AACD,GAAA;AACA,EAAA,OAAO8T,KAAK,CAAA;AACb,CAAA;AAEO,MAAM+B,WAAW,GAAGA,CAC1Bhf,KAAkB,EAClBC,QAAgC,EAChCoN,UAAkB,EAClB3F,IAAU,EACVmH,KAAW,KACP;AACJ,EAAA,IAAI3G,KAAK,GAAGmF,UAAU,GAAGrN,KAAK,CAAC+N,GAAG,CAAC3D,MAAM,CAACiD,UAAU,GAAG,CAAC,CAAC,GAAGrN,KAAK,CAAC+N,GAAG,CAAA;EACrE,IAAI,CAAC7F,KAAK,EAAE,MAAM,IAAI+W,KAAK,CAAC,gBAAgB,CAAC,CAAA;AAC7C,EAAA,IAAItZ,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;EAC7B,MAAM;IAAEhC,GAAG;AAAEF,IAAAA,IAAAA;AAAK,GAAC,GAAG0B,IAAI,CAAA;AAC1B,EAAA,MAAMtB,KAAK,GAAGJ,IAAI,GAAG6I,KAAK,CAACpJ,KAAK;AAC/Ba,IAAAA,MAAM,GAAGJ,GAAG,GAAG2I,KAAK,CAACnJ,MAAM,CAAA;AAC5B,EAAA,MAAMjF,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAA;EACnB,IAAIyV,OAAO,GAAG,CAAC,CAAA;EACf,SAASgJ,MAAMA,GAAG;AACjBhX,IAAAA,KAAK,GAAGmF,UAAU,GAAG5M,EAAE,CAACsN,GAAG,CAAC3D,MAAM,CAACiD,UAAU,GAAG,CAAC,CAAC,GAAG5M,EAAE,CAACsN,GAAG,CAAA;IAC3D,IAAI,CAAC7F,KAAK,EAAE,MAAM,IAAI+W,KAAK,CAAC,gBAAgB,CAAC,CAAA;AAC7CtZ,IAAAA,GAAG,GAAGH,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAAA;AACzBgO,IAAAA,OAAO,GAAGzV,EAAE,CAAC8O,OAAO,CAACgG,IAAI,CAACxU,MAAM,CAAA;AACjC,GAAA;AAEA,EAAA,IAAIud,SAAS,CAAC7d,EAAE,EAAEkF,GAAG,EAAEuC,KAAK,EAAEmF,UAAU,EAAEjH,KAAK,EAAEE,MAAM,EAAE4P,OAAO,CAAC,EAAEgJ,MAAM,EAAE,CAAA;EAC3E,IAAIP,iBAAiB,CAACle,EAAE,EAAEkF,GAAG,EAAEuC,KAAK,EAAEmF,UAAU,EAAErH,IAAI,EAAEI,KAAK,EAAEF,GAAG,EAAEgQ,OAAO,CAAC,EAC3EgJ,MAAM,EAAE,CAAA;EACT,IACCP,iBAAiB,CAACle,EAAE,EAAEkF,GAAG,EAAEuC,KAAK,EAAEmF,UAAU,EAAErH,IAAI,EAAEI,KAAK,EAAEE,MAAM,EAAE4P,OAAO,CAAC,EAE3EgJ,MAAM,EAAE,CAAA;EACT,IAAIJ,eAAe,CAACre,EAAE,EAAEkF,GAAG,EAAEuC,KAAK,EAAEmF,UAAU,EAAEnH,GAAG,EAAEI,MAAM,EAAEN,IAAI,EAAEkQ,OAAO,CAAC,EAC1EgJ,MAAM,EAAE,CAAA;EACT,IAAIJ,eAAe,CAACre,EAAE,EAAEkF,GAAG,EAAEuC,KAAK,EAAEmF,UAAU,EAAEnH,GAAG,EAAEI,MAAM,EAAEF,KAAK,EAAE8P,OAAO,CAAC,EAC3EgJ,MAAM,EAAE,CAAA;EAET,KAAK,IAAIrX,GAAG,GAAG3B,GAAG,EAAE2B,GAAG,GAAGvB,MAAM,EAAEuB,GAAG,EAAE,EAAE;IACxC,MAAMoH,IAAI,GAAGtJ,GAAG,CAACsC,UAAU,CAACJ,GAAG,EAAE7B,IAAI,EAAEkC,KAAK,CAAC;MAC5CiX,EAAE,GAAGxZ,GAAG,CAACsC,UAAU,CAACJ,GAAG,EAAEzB,KAAK,EAAE8B,KAAK,CAAC,CAAA;IACvCzH,EAAE,CAACsB,OAAO,CACTtB,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAACsJ,IAAI,GAAG5B,UAAU,CAAC,EAChD5M,EAAE,CAAC8O,OAAO,CAAC9E,KAAK,CAACyL,OAAO,CAAC,CAACvQ,GAAG,CAACwZ,EAAE,GAAG9R,UAAU,CAAC,EAC9C,IAAIiE,KAAK,CAACzC,KAAK,CAACgC,IAAI,CAAChJ,GAAG,GAAG3B,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CACtC,CAAC,CAAA;AACF,GAAA;AACAgZ,EAAAA,MAAM,EAAE,CAAA;EAERze,EAAE,CAACwS,YAAY,CACd,IAAItE,aAAa,CAChBlO,EAAE,CAACsN,GAAG,CAACR,OAAO,CAACF,UAAU,GAAG1H,GAAG,CAACsC,UAAU,CAAC/B,GAAG,EAAEF,IAAI,EAAEkC,KAAK,CAAC,CAAC,EAC7DzH,EAAE,CAACsN,GAAG,CAACR,OAAO,CAACF,UAAU,GAAG1H,GAAG,CAACsC,UAAU,CAAC3B,MAAM,GAAG,CAAC,EAAEF,KAAK,GAAG,CAAC,EAAE8B,KAAK,CAAC,CACzE,CACD,CAAC,CAAA;EACDjI,QAAQ,CAACQ,EAAE,CAAC,CAAA;AACb,CAAC;;AC3SD,MAAM2e,mBAA4B,GAAGA,CAACpf,KAAK,EAAEC,QAAQ,KAAK;AACzD,EAAA,MAAMkO,GAAG,GAAGnO,KAAK,CAAC0M,SAAS,CAAA;AAC3B,EAAA,IAAI,EAAEyB,GAAG,YAAYQ,aAAa,CAAC,EAAE,OAAO,KAAK,CAAA;AACjD,EAAA,IAAI1O,QAAQ,EAAE;AACb,IAAA,MAAMQ,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAA;AACnB,IAAA,MAAM4e,WAAW,GAAGrT,cAAc,CAAChM,KAAK,CAACI,MAAM,CAAC,CAAC+J,IAAI,CAAC/F,aAAa,EAAE,CACnE1F,OAAO,CAAA;AACTyP,IAAAA,GAAG,CAACwC,WAAW,CAAC,CAACxG,IAAI,EAAEnD,GAAG,KAAK;MAC9B,IAAI,CAACmD,IAAI,CAACzL,OAAO,CAAC4Q,EAAE,CAAC+P,WAAW,CAAC,EAChC5e,EAAE,CAACsB,OAAO,CACTtB,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAACqB,GAAG,GAAG,CAAC,CAAC,EACvBvG,EAAE,CAAC8O,OAAO,CAAC5J,GAAG,CAACqB,GAAG,GAAGmD,IAAI,CAAC9B,QAAQ,GAAG,CAAC,CAAC,EACvC,IAAIiJ,KAAK,CAAC+N,WAAW,EAAE,CAAC,EAAE,CAAC,CAC5B,CAAC,CAAA;AACH,KAAC,CAAC,CAAA;AACF,IAAA,IAAI5e,EAAE,CAAC6a,UAAU,EAAErb,QAAQ,CAACQ,EAAE,CAAC,CAAA;AAChC,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACZ,CAAC,CAAA;AAEM,MAAM6e,aAAa,GAAGC,cAAc,CAAC;AAC3CC,EAAAA,SAAS,EAAEC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AAC7BC,EAAAA,UAAU,EAAED,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;AAC7BE,EAAAA,OAAO,EAAEF,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AAC1BG,EAAAA,SAAS,EAAEH,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC;AAC3B,EAAA,iBAAiB,EAAEI,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AAC1C,EAAA,kBAAkB,EAAEA,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC;AAC1C,EAAA,eAAe,EAAEA,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AACvC,EAAA,iBAAiB,EAAEA,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;AACxCC,EAAAA,SAAS,EAAEV,mBAAmB;AAC9B,EAAA,eAAe,EAAEA,mBAAmB;AACpCW,EAAAA,MAAM,EAAEX,mBAAmB;AAC3B,EAAA,YAAY,EAAEA,mBAAAA;AACf,CAAC,CAAC,CAAA;AAEF,SAASY,iBAAiBA,CACzBhgB,KAAkB,EAClBC,QAA4C,EAC5CyM,SAAoB,EACV;EACV,IAAIA,SAAS,CAAC4C,EAAE,CAACtP,KAAK,CAAC0M,SAAS,CAAC,EAAE,OAAO,KAAK,CAAA;AAC/C,EAAA,IAAIzM,QAAQ,EAAEA,QAAQ,CAACD,KAAK,CAACS,EAAE,CAACwS,YAAY,CAACvG,SAAS,CAAC,CAAC/L,cAAc,EAAE,CAAC,CAAA;AACzE,EAAA,OAAO,IAAI,CAAA;AACZ,CAAA;AAEO,SAAS8e,KAAKA,CAACnY,IAAU,EAAEC,GAAc,EAAW;AAC1D,EAAA,OAAO,CAACvH,KAAK,EAAEC,QAAQ,EAAEC,IAAI,KAAK;AACjC,IAAA,IAAI,CAACA,IAAI,EAAE,OAAO,KAAK,CAAA;AACvB,IAAA,MAAMiO,GAAG,GAAGnO,KAAK,CAAC0M,SAAS,CAAA;IAC3B,IAAIyB,GAAG,YAAYQ,aAAa,EAAE;AACjC,MAAA,OAAOqR,iBAAiB,CACvBhgB,KAAK,EACLC,QAAQ,EACR2O,SAAS,CAACoD,IAAI,CAAC7D,GAAG,CAACE,SAAS,EAAE9G,GAAG,CAClC,CAAC,CAAA;AACF,KAAA;IACA,IAAID,IAAI,IAAI,OAAO,IAAI,CAAC6G,GAAG,CAAC4I,KAAK,EAAE,OAAO,KAAK,CAAA;IAC/C,MAAM3J,GAAG,GAAG6S,WAAW,CAAC/f,IAAI,EAAEoH,IAAI,EAAEC,GAAG,CAAC,CAAA;AACxC,IAAA,IAAI6F,GAAG,IAAI,IAAI,EAAE,OAAO,KAAK,CAAA;IAC7B,IAAI9F,IAAI,IAAI,OAAO,EAAE;MACpB,OAAO0Y,iBAAiB,CACvBhgB,KAAK,EACLC,QAAQ,EACR2O,SAAS,CAACoD,IAAI,CAAChS,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACY,GAAG,CAACK,IAAI,GAAGjH,GAAG,CAAC,EAAEA,GAAG,CACtD,CAAC,CAAA;AACF,KAAC,MAAM;MACN,MAAMgH,KAAK,GAAGvO,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACH,GAAG,CAAC,CAAA;MACpC,MAAM8S,KAAK,GAAG7Y,QAAQ,CAACkH,KAAK,EAAEjH,IAAI,EAAEC,GAAG,CAAC,CAAA;AACxC,MAAA,IAAI4Y,MAAM,CAAA;AACV,MAAA,IAAID,KAAK,EAAEC,MAAM,GAAGvR,SAAS,CAACoD,IAAI,CAACkO,KAAK,EAAE,CAAC,CAAC,CAAC,KACxC,IAAI3Y,GAAG,GAAG,CAAC,EACf4Y,MAAM,GAAGvR,SAAS,CAACoD,IAAI,CAAChS,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACgB,KAAK,CAACZ,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAC7DwS,MAAM,GAAGvR,SAAS,CAACoD,IAAI,CAAChS,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACgB,KAAK,CAACV,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;AACnE,MAAA,OAAOmS,iBAAiB,CAAChgB,KAAK,EAAEC,QAAQ,EAAEkgB,MAAM,CAAC,CAAA;AAClD,KAAA;GACA,CAAA;AACF,CAAA;AAEA,SAASN,UAAUA,CAACvY,IAAU,EAAEC,GAAc,EAAW;AACxD,EAAA,OAAO,CAACvH,KAAK,EAAEC,QAAQ,EAAEC,IAAI,KAAK;AACjC,IAAA,IAAI,CAACA,IAAI,EAAE,OAAO,KAAK,CAAA;AACvB,IAAA,IAAIkgB,OAAsB,CAAA;AAC1B,IAAA,MAAMjS,GAAG,GAAGnO,KAAK,CAAC0M,SAAS,CAAA;IAC3B,IAAIyB,GAAG,YAAYQ,aAAa,EAAE;AACjCyR,MAAAA,OAAO,GAAGjS,GAAG,CAAA;AACd,KAAC,MAAM;MACN,MAAMf,GAAG,GAAG6S,WAAW,CAAC/f,IAAI,EAAEoH,IAAI,EAAEC,GAAG,CAAC,CAAA;AACxC,MAAA,IAAI6F,GAAG,IAAI,IAAI,EAAE,OAAO,KAAK,CAAA;AAC7BgT,MAAAA,OAAO,GAAG,IAAIzR,aAAa,CAAC3O,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACH,GAAG,CAAC,CAAC,CAAA;AACpD,KAAA;IACA,MAAMX,KAAK,GAAGpF,QAAQ,CAAC+Y,OAAO,CAAC/R,SAAS,EAAE/G,IAAI,EAAEC,GAAG,CAAC,CAAA;AACpD,IAAA,IAAI,CAACkF,KAAK,EAAE,OAAO,KAAK,CAAA;AACxB,IAAA,OAAOuT,iBAAiB,CACvBhgB,KAAK,EACLC,QAAQ,EACR,IAAI0O,aAAa,CAACyR,OAAO,CAAChS,WAAW,EAAE3B,KAAK,CAC7C,CAAC,CAAA;GACD,CAAA;AACF,CAAA;AAEO,MAAM4T,WAAW,GAAGA,CAC1BngB,IAAgB,EAChBuE,CAAiB,EACjBgG,KAAY,KACC;EACb,IAAI,CAAC+B,SAAS,CAACtM,IAAI,CAACF,KAAK,CAAC,EAAE,OAAO,KAAK,CAAA;AACxC,EAAA,IAAI6O,KAAK,GAAGyO,WAAW,CAAC7S,KAAK,CAAC,CAAA;AAC9B,EAAA,MAAM0D,GAAG,GAAGjO,IAAI,CAACF,KAAK,CAAC0M,SAAS,CAAA;EAChC,IAAIyB,GAAG,YAAYQ,aAAa,EAAE;AACjC,IAAA,IAAI,CAACE,KAAK,EACTA,KAAK,GAAG;AACPpJ,MAAAA,KAAK,EAAE,CAAC;AACRC,MAAAA,MAAM,EAAE,CAAC;MACTmL,IAAI,EAAE,CACLQ,QAAQ,CAACpC,IAAI,CAACwO,QAAQ,CAACzR,cAAc,CAAC9L,IAAI,CAACF,KAAK,CAACI,MAAM,CAAC,CAAC+J,IAAI,EAAEM,KAAK,CAAC,CAAC,CAAA;KAEvE,CAAA;IACF,MAAMvC,KAAK,GAAGiG,GAAG,CAACC,WAAW,CAAC5O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;IACtC,MAAM8J,KAAK,GAAG6E,GAAG,CAACC,WAAW,CAAC9E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;IACvC,MAAM5B,IAAI,GAAGlC,QAAQ,CAACN,GAAG,CAACgD,KAAK,CAAC,CAACrC,WAAW,CAC3CsI,GAAG,CAACC,WAAW,CAACpH,GAAG,GAAGsC,KAAK,EAC3B6E,GAAG,CAACE,SAAS,CAACrH,GAAG,GAAGsC,KACrB,CAAC,CAAA;IACDuF,KAAK,GAAGiP,SAAS,CAACjP,KAAK,EAAEnH,IAAI,CAACtB,KAAK,GAAGsB,IAAI,CAAC1B,IAAI,EAAE0B,IAAI,CAACpB,MAAM,GAAGoB,IAAI,CAACxB,GAAG,CAAC,CAAA;AACxE8Y,IAAAA,WAAW,CAAC9e,IAAI,CAACF,KAAK,EAAEE,IAAI,CAACD,QAAQ,EAAEqJ,KAAK,EAAE5B,IAAI,EAAEmH,KAAK,CAAC,CAAA;AAC1D,IAAA,OAAO,IAAI,CAAA;GACX,MAAM,IAAIA,KAAK,EAAE;AACjB,IAAA,MAAMN,KAAK,GAAGL,aAAa,CAAChO,IAAI,CAACF,KAAK,CAAC,CAAA;IACvC,MAAMsJ,KAAK,GAAGiF,KAAK,CAACjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AAC7B0V,IAAAA,WAAW,CACV9e,IAAI,CAACF,KAAK,EACVE,IAAI,CAACD,QAAQ,EACbqJ,KAAK,EACL9D,QAAQ,CAACN,GAAG,CAACqJ,KAAK,CAAC/O,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAACgH,QAAQ,CAAC+H,KAAK,CAACvH,GAAG,GAAGsC,KAAK,CAAC,EACxDuF,KACD,CAAC,CAAA;AAED,IAAA,OAAO,IAAI,CAAA;AACZ,GAAC,MAAM;AACN,IAAA,OAAO,KAAK,CAAA;AACb,GAAA;AACD,CAAC,CAAA;AAEM,SAASkM,eAAeA,CAC9B7a,IAAgB,EAChBogB,UAAsB,EACf;AACP,EAAA,IAAIA,UAAU,CAACC,OAAO,IAAID,UAAU,CAACE,OAAO,EAAE,OAAA;EAE9C,MAAMC,YAAY,GAAGC,SAAS,CAACxgB,IAAI,EAAEogB,UAAU,CAACnd,MAAc,CAAC,CAAA;AAC/D,EAAA,MAAMoL,KAAK,GAAGoS,cAAc,CAACzgB,IAAI,EAAEogB,UAAU,CAAC,CAAA;AAC9C,EAAA,IAAIG,YAAY,EAAE;IACjBH,UAAU,CAAC5D,cAAc,EAAE,CAAA;AAC5B,GAAA;AACA,EAAA,IAAIpO,OAAO,CAAA;EACX,IAAIgS,UAAU,CAACM,QAAQ,IAAI1gB,IAAI,CAACF,KAAK,CAAC0M,SAAS,YAAYiC,aAAa,EAAE;AACzE;IACAkS,gBAAgB,CAAC3gB,IAAI,CAACF,KAAK,CAAC0M,SAAS,CAAC0B,WAAW,EAAEkS,UAAU,CAAC,CAAA;IAC9DA,UAAU,CAAC5D,cAAc,EAAE,CAAA;AAC5B,GAAC,MAAM,IACN4D,UAAU,CAACM,QAAQ,IACnBH,YAAY,IACZ,CAACnS,OAAO,GAAGZ,UAAU,CAACxN,IAAI,CAACF,KAAK,CAAC0M,SAAS,CAAC4B,OAAO,CAAC,KAAK,IAAI,IAC5DqS,cAAc,CAACzgB,IAAI,EAAEogB,UAAU,CAAC,EAAEtZ,GAAG,IAAIsH,OAAO,CAACtH,GAAG,EACnD;AACD6Z,IAAAA,gBAAgB,CAACvS,OAAO,EAAEgS,UAAU,CAAC,CAAA;IACrCA,UAAU,CAAC5D,cAAc,EAAE,CAAA;AAC5B,GAAC,MAAM,IAAI,CAAC+D,YAAY,EAAE;AACzB,IAAA,OAAA;AACD,GAAA;AAEA,EAAA,SAASI,gBAAgBA,CAACvS,OAAoB,EAAEwJ,KAAiB,EAAQ;AACxE,IAAA,IAAIrL,KAAK,GAAGkU,cAAc,CAACzgB,IAAI,EAAE4X,KAAK,CAAC,CAAA;AACvC,IAAA,MAAMgJ,QAAQ,GAAG5U,eAAe,CAACsO,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,EAAEoF,GAAG,IAAI,IAAI,CAAA;IAClE,IAAI,CAACqH,KAAK,IAAI,CAACQ,WAAW,CAACqB,OAAO,EAAE7B,KAAK,CAAC,EAAE;AAC3C,MAAA,IAAIqU,QAAQ,EAAErU,KAAK,GAAG6B,OAAO,CAAC,KACzB,OAAA;AACN,KAAA;IACA,MAAM5B,SAAS,GAAG,IAAIiC,aAAa,CAACL,OAAO,EAAE7B,KAAK,CAAC,CAAA;AACnD,IAAA,IAAIqU,QAAQ,IAAI,CAAC5gB,IAAI,CAACF,KAAK,CAAC0M,SAAS,CAAC4C,EAAE,CAAC5C,SAAS,CAAC,EAAE;MACpD,MAAMjM,EAAE,GAAGP,IAAI,CAACF,KAAK,CAACS,EAAE,CAACwS,YAAY,CAACvG,SAAS,CAAC,CAAA;AAEhD,MAAA,IAAIoU,QAAQ,EAAErgB,EAAE,CAACiU,OAAO,CAACxI,eAAe,EAAE;QAAE9G,GAAG,EAAEkJ,OAAO,CAACtH,GAAAA;AAAI,OAAC,CAAC,CAAA;AAC/D9G,MAAAA,IAAI,CAACD,QAAQ,CAACQ,EAAE,CAAC,CAAA;AAClB,KAAA;AACD,GAAA;EACA,MAAM;AAAEsX,IAAAA,OAAO,EAAEgJ,EAAE;AAAE/I,IAAAA,OAAO,EAAEgJ,EAAAA;AAAG,GAAC,GAAGV,UAAU,CAAA;EAC/C,SAASW,IAAIA,CAACxc,CAAS,EAAQ;AAC9B,IAAA,IAAIA,CAAC,EAAElB,IAAI,IAAI,SAAS,EAAE;MACzB,MAAM2d,MAAkB,GAAGzc,CAAe,CAAA;MAC1C,MAAM;AAAEsT,QAAAA,OAAO,EAAEoJ,EAAE;AAAEnJ,QAAAA,OAAO,EAAEoJ,EAAAA;AAAG,OAAC,GAAGF,MAAM,CAAA;MAC3C,IAAIra,IAAI,CAACwa,GAAG,CAACN,EAAE,GAAGI,EAAE,CAAC,GAAG,CAAC,IAAIta,IAAI,CAACwa,GAAG,CAACL,EAAE,GAAGI,EAAE,CAAC,GAAG,CAAC,EAAE;AACnD,QAAA,MAAMpa,GAAG,GAAG9G,IAAI,CAACgY,WAAW,CAAC;AAC5BlS,UAAAA,IAAI,EAAEmb,EAAE;AACRjb,UAAAA,GAAG,EAAEkb,EAAAA;AACN,SAAC,CAAC,CAAA;AACF,QAAA,IAAIpa,GAAG,EAAE;AACR,UAAA,MAAMsa,YAAY,GAAGzR,aAAa,CAACrP,MAAM,CACxCN,IAAI,CAACF,KAAK,CAAC+N,GAAG,EACd/G,GAAG,CAACA,GAAG,EACPA,GAAG,CAACA,GACL,CAAC,CAAA;UACD,MAAMvG,EAAE,GAAGP,IAAI,CAACF,KAAK,CAACS,EAAE,CAACwS,YAAY,CAACqO,YAAY,CAAC,CAAA;AACnDphB,UAAAA,IAAI,CAACD,QAAQ,CAACQ,EAAE,CAAC,CAAA;UACjBP,IAAI,CAACqhB,KAAK,EAAE,CAAA;AACb,SAAA;AACD,OAAC,MAAM;AACN,QAAA,MAAMC,QAAQ,GAAGthB,IAAI,CAACuhB,OAAO,CAAClT,KAAK,CAAEjF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;AAC9CkY,QAAAA,QAAQ,EAAE1T,UAAU,EAAqByT,KAAK,EAAE,CAAA;;AAEjD;AACD,OAAA;AACD,KAAA;IAEArhB,IAAI,CAACwhB,IAAI,CAACpJ,mBAAmB,CAAC,SAAS,EAAE2I,IAAI,CAAC,CAAA;IAC9C/gB,IAAI,CAACwhB,IAAI,CAACpJ,mBAAmB,CAAC,WAAW,EAAE2I,IAAI,CAAC,CAAA;IAChD/gB,IAAI,CAACwhB,IAAI,CAACpJ,mBAAmB,CAAC,WAAW,EAAE8D,IAAI,CAAC,CAAA;AAChD,IAAA,IAAI,CAAC3N,SAAO,CAACvC,eAAe,CAACsO,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,EAAEoF,GAAG,CAAC,EACtDlF,IAAI,CAACD,QAAQ,CAACC,IAAI,CAACF,KAAK,CAACS,EAAE,CAACiU,OAAO,CAACxI,eAAe,EAAE;AAAE9G,MAAAA,GAAG,EAAE,CAAC,CAAA;AAAE,KAAC,CAAC,CAAC,CAAA;AACpE,GAAA;AAEA,EAAA,IAAIuc,QAAQ,GAAGzhB,IAAI,CAACgY,WAAW,CAAC;AAAElS,IAAAA,IAAI,EAAE+a,EAAE;AAAE7a,IAAAA,GAAG,EAAE8a,EAAAA;AAAG,GAAC,CAAC,CAAA;EAEtD,SAAS5E,IAAIA,CAAC8E,MAAa,EAAQ;IAClC,MAAMpJ,KAAK,GAAGoJ,MAAoB,CAAA;IAElC,MAAMlR,MAAM,GAAG9D,eAAe,CAACsO,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,EAAEoF,GAAG,CAAA;AACxD,IAAA,IAAIkJ,OAAO,CAAA;AACX,IAAA,IAAI0B,MAAM,IAAIA,MAAM,IAAI,CAAC,EAAE;MAC1B1B,OAAO,GAAGpO,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACyC,MAAM,CAAC,CAAA;AACzC,KAAC,MAAM,IAAI0Q,SAAS,CAACxgB,IAAI,EAAE4X,KAAK,CAAC3U,MAAc,CAAC,IAAIsd,YAAY,EAAE;AACjEnS,MAAAA,OAAO,GAAGqS,cAAc,CAACzgB,IAAI,EAAEogB,UAAU,CAAC,CAAA;AAC1C,MAAA,IAAI,CAAChS,OAAO,EAAE,OAAO2S,IAAI,EAAE,CAAA;AAC3B/gB,MAAAA,IAAI,CAACsB,GAAG,CAACogB,IAAI,EAAE,CAAA;AAChB,KAAC,MAAM;AACN,MAAA,MAAMpT,IAAI,GAAGtO,IAAI,CAACgY,WAAW,CAAC;QAC7BlS,IAAI,EAAE8R,KAAK,CAACC,OAAO;QACnB7R,GAAG,EAAE4R,KAAK,CAACE,OAAAA;AACZ,OAAC,CAAC,CAAA;AACF9X,MAAAA,IAAI,CAACD,QAAQ,CACZC,IAAI,CAACF,KAAK,CAACS,EAAE,CAACwS,YAAY,CACzBpD,aAAa,CAACrP,MAAM,CAACN,IAAI,CAACF,KAAK,CAAC+N,GAAG,EAAE4T,QAAQ,CAAE3a,GAAG,EAAEwH,IAAI,CAAExH,GAAG,CAC9D,CACD,CAAC,CAAA;AACF,KAAA;AACA,IAAA,IAAIsH,OAAO,EAAEuS,gBAAgB,CAACvS,OAAO,EAAEwJ,KAAK,CAAC,CAAA;AAC9C,GAAA;EAEA5X,IAAI,CAACwhB,IAAI,CAAC5f,gBAAgB,CAAC,SAAS,EAAEmf,IAAI,CAAC,CAAA;EAC3C/gB,IAAI,CAACwhB,IAAI,CAAC5f,gBAAgB,CAAC,WAAW,EAAEmf,IAAI,CAAC,CAAA;EAC7C/gB,IAAI,CAACwhB,IAAI,CAAC5f,gBAAgB,CAAC,WAAW,EAAEsa,IAAI,CAAC,CAAA;AAC9C,CAAA;AAEO,SAASsE,SAASA,CAACxgB,IAAgB,EAAEsB,GAAgB,EAAe;AAC1E,EAAA,OAAOA,GAAG,IAAIA,GAAG,IAAItB,IAAI,CAACsB,GAAG,EAAEA,GAAG,GAAGA,GAAG,CAAC4X,UAAU,EAAE;IACpD,IAAI5X,GAAG,CAACwb,QAAQ,IAAI,IAAI,IAAIxb,GAAG,CAACwb,QAAQ,IAAI,IAAI,EAAE;AACjD,MAAA,OAAOxb,GAAG,CAAA;AACX,KAAA;AACD,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACZ,CAAA;AAEA,SAASmf,cAAcA,CACtBzgB,IAAgB,EAChB4X,KAAiB,EACI;AACrB,EAAA,MAAMG,QAAQ,GAAG/X,IAAI,CAACgY,WAAW,CAAC;IACjClS,IAAI,EAAE8R,KAAK,CAACC,OAAO;IACnB7R,GAAG,EAAE4R,KAAK,CAACE,OAAAA;AACZ,GAAC,CAAC,CAAA;AACF,EAAA,IAAI,CAACC,QAAQ,EAAE,OAAO,IAAI,CAAA;AAC1B,EAAA,OAAOA,QAAQ,GAAGvK,UAAU,CAACxN,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAAC0K,QAAQ,CAACjR,GAAG,CAAC,CAAC,GAAG,IAAI,CAAA;AAC1E,CAAA;AAEA,SAASiZ,WAAWA,CAAC/f,IAAgB,EAAEoH,IAAU,EAAEC,GAAW,EAAiB;EAC9E,IAAI,EAAErH,IAAI,CAACF,KAAK,CAAC0M,SAAS,YAAYmD,aAAa,CAAC,EAAE,OAAO,IAAI,CAAA;EACjE,MAAM;AAAEpD,IAAAA,KAAAA;AAAM,GAAC,GAAGvM,IAAI,CAACF,KAAK,CAAC0M,SAAS,CAAA;AACtC,EAAA,KAAK,IAAIC,CAAC,GAAGF,KAAK,CAACG,KAAK,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;AAC1C,IAAA,MAAMI,MAAM,GAAGN,KAAK,CAACjN,IAAI,CAACmN,CAAC,CAAC;AAC3B5E,MAAAA,KAAK,GAAGR,GAAG,GAAG,CAAC,GAAGkF,KAAK,CAAC1E,KAAK,CAAC4E,CAAC,CAAC,GAAGF,KAAK,CAACoV,UAAU,CAAClV,CAAC,CAAC,CAAA;AAEvD,IAAA,IAAI5E,KAAK,KAAKR,GAAG,GAAG,CAAC,GAAG,CAAC,GAAGwF,MAAM,CAACnE,UAAU,CAAC,EAAE,OAAO,IAAI,CAAA;AAE3D,IAAA,IACCmE,MAAM,CAACxJ,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,MAAM,IACpCsE,MAAM,CAACxJ,IAAI,CAACiF,IAAI,CAACC,SAAS,IAAI,YAAY,EACzC;AACD,MAAA,MAAMyO,OAAO,GAAGzK,KAAK,CAACkB,MAAM,CAAChB,CAAC,CAAC,CAAA;MAC/B,MAAMmV,MAAwC,GAC7Cxa,IAAI,IAAI,MAAM,GAAIC,GAAG,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,GAAIA,GAAG,GAAG,CAAC,GAAG,OAAO,GAAG,MAAM,CAAA;MACxE,OAAOrH,IAAI,CAAC6hB,cAAc,CAACD,MAAM,CAAC,GAAG5K,OAAO,GAAG,IAAI,CAAA;AACpD,KAAA;AACD,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACZ,CAAA;AAEO,MAAM8K,iBAAiB,GAAGA,CAAC9hB,IAAgB,EAAE8G,GAAW,KAAc;AAC5E,EAAA,MAAM+G,GAAG,GAAG7N,IAAI,CAACF,KAAK,CAAC+N,GAAG;IACzBQ,KAAK,GAAGb,UAAU,CAACK,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAC,CAAA;AACrC,EAAA,IAAI,CAACuH,KAAK,EAAE,OAAO,KAAK,CAAA;EACxBrO,IAAI,CAACD,QAAQ,CACZC,IAAI,CAACF,KAAK,CAACS,EAAE,CACXwS,YAAY,CAAC,IAAItE,aAAa,CAACJ,KAAK,CAAC,CAAC,CACtCmG,OAAO,CAACxI,eAAe,EAAE;IAAE9G,GAAG,EAAEmJ,KAAK,CAACvH,GAAAA;AAAI,GAAC,CAC9C,CAAC,CAAA;AACD,EAAA,OAAO,IAAI,CAAA;AACZ,CAAC;;AClTM,SAASib,YAAYA,CAAA7P,IAAA,EAEI;EAAA,IAFH;AAC5BS,IAAAA,uBAAuB,GAAG,KAAA;AACN,GAAC,GAAAT,IAAA,CAAA;EACrB,MAAM8P,cAAc,GAAIliB,KAAkB,IAAK;IAC9C,IAAImY,IAAkB,GAAG,EAAE,CAAA;IAC3BA,IAAI,GAAGA,IAAI,CAACgK,MAAM,CAAClQ,iBAAiB,CAACjS,KAAK,CAAC,CAAC,CAAA;IAC5CA,KAAK,CAAC+N,GAAG,CAACkG,WAAW,CAAC,CAACzU,IAAI,EAAEwH,GAAG,KAAK;AACpC,MAAA,IAAIxH,IAAI,CAAC+D,IAAI,CAACmF,IAAI,KAAK,OAAO,EAAE,OAAA;MAChCyP,IAAI,GAAGA,IAAI,CAACgK,MAAM,CAAC3I,UAAU,CAACha,IAAI,EAAEwH,GAAG,CAAC,CAAC,CAAA;AAC1C,KAAC,CAAC,CAAA;AACF,IAAA,OAAOmR,IAAI,CAAA;GACX,CAAA;EAED,OAAO,IAAI8B,MAAM,CAAa;AAC7BvY,IAAAA,GAAG,EAAEwK,eAAe;AACpBlM,IAAAA,KAAK,EAAE;AACNka,MAAAA,IAAIA,CAACnF,CAAC,EAAE/U,KAAK,EAAE;QACd,OAAO;AACNqD,UAAAA,WAAW,EAAEga,aAAa,CAAC7c,MAAM,CAACR,KAAK,CAAC+N,GAAG,EAAEmU,cAAc,CAACliB,KAAK,CAAC,CAAC;AACnEoF,UAAAA,GAAG,EAAE,IAAA;SACL,CAAA;OACD;MACDiV,KAAKA,CAAC5Z,EAAE,EAAE0E,KAAK,EAAE4P,CAAC,EAAE/U,KAAK,EAAE;AAC1B,QAAA,MAAMoiB,EAAE,GAAG3hB,EAAE,CAAC0a,OAAO,CAACjP,eAAe,CAAC,CAAA;QACtC,IAAI;AAAE9G,UAAAA,GAAG,GAAG,IAAI;AAAEgT,UAAAA,UAAAA;AAAW,SAAC,GAAGgK,EAAE,IAAI,EAAE,CAAA;QACzC,MAAM/e,WAAW,GAAGga,aAAa,CAAC7c,MAAM,CACvCR,KAAK,CAAC+N,GAAG,EACTmU,cAAc,CAACliB,KAAK,CAAC,CAACmiB,MAAM,CAC3B/J,UAAU,GAAGA,UAAU,GAAGjT,KAAK,CAACiT,UAAU,IAAI,EAC/C,CACD,CAAC,CAAA;AAED,QAAA,IAAI,CAAC3J,SAAO,CAACtJ,KAAK,CAACC,GAAG,CAAC,IAAIqJ,SAAO,CAACrJ,GAAG,CAAC,EAAE;UACxC,MAAM;YAAEid,OAAO;AAAErb,YAAAA,GAAAA;WAAK,GAAGvG,EAAE,CAAC8O,OAAO,CAAC+S,SAAS,CAACnd,KAAK,CAACC,GAAI,CAAC,CAAA;AACzDA,UAAAA,GAAG,GAAGid,OAAO,GAAG,IAAI,GAAGrb,GAAG,CAAA;AAC3B,SAAA;QAEA,OAAO;AACN5B,UAAAA,GAAG,EAAEqJ,SAAO,CAACrJ,GAAG,CAAC,IAAIA,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,GAAGA,GAAG;UAC3C/B,WAAW;AACX+U,UAAAA,UAAAA;SACA,CAAA;AACF,OAAA;KACA;AACDtV,IAAAA,KAAK,EAAE;AACNqX,MAAAA,SAAS,EAAE;AACVjS,QAAAA,KAAK,EAAEqR,oBAAAA;OACP;MACDlW,WAAWA,CAACrD,KAAK,EAAE;AAClB,QAAA,OAAO,IAAI,CAACwa,QAAQ,CAACxa,KAAK,CAAC,EAAEqD,WAAW,CAAA;OACxC;AACDqX,MAAAA,eAAe,EAAE;AAChBI,QAAAA,SAAS,EAAEC,eAAAA;OACX;MACDsF,WAAW;MACX2B,iBAAiB;AACjB1C,MAAAA,aAAAA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;KACA;AACDiD,IAAAA,iBAAiBA,CAACxN,CAAC,EAAEjB,QAAQ,EAAE0O,QAAQ,EAAE;MACxC,OAAO5P,kBAAkB,CACxB4P,QAAQ;AACR;AACA3O,MAAAA,SAAS,CAAC2O,QAAQ,EAAE1O,QAAQ,CAAC,EAC7BjB,uBACD,CAAC,CAAA;AACF,KAAA;AACD,GAAC,CAAC,CAAA;AACH;;AChGO,MAAM4P,YAAsB,GAAG;AACrC9jB,EAAAA,KAAK,EAAE,QAAQ;AACf+jB,EAAAA,MAAM,EAAE,IAAI;AACZC,EAAAA,IAAI,EAAE,IAAI;AACVpjB,EAAAA,KAAK,EAAGC,IAAI,IAAK,CAAC,MAAM,EAAE;AAAEsE,IAAAA,KAAK,EAAE,WAAA;AAAY,GAAC,EAAEtE,IAAI,CAACN,KAAK,CAAC0jB,OAAO,CAAC;AACrEnjB,EAAAA,QAAQ,EAAE,CACT;AAAEC,IAAAA,GAAG,EAAE,gBAAgB;IAAEE,QAAQ,EAAG4B,GAAG,KAAM;MAAEohB,OAAO,EAAEphB,GAAG,CAACqhB,WAAAA;KAAa,CAAA;AAAE,GAAC,CAC5E;AACD3jB,EAAAA,KAAK,EAAE;AACN0jB,IAAAA,OAAO,EAAE,EAAC;AACX,GAAA;AACD,CAAC,CAAA;AAED,MAAME,UAAU,GAAIF,OAAe,IAAK;AACvC,EAAA,MAAMG,IAAI,GAAGniB,aAAa,CAAC,MAAM,EAAE;AAAEkD,IAAAA,KAAK,EAAE,WAAA;AAAY,GAAC,CAAC,CAAA;AAC1Dkf,EAAAA,KAAK,CAACngB,MAAM,CAAC+f,OAAO,EAAEG,IAAI,CAAC,CAAA;AAC3B,EAAA,OAAOA,IAAI,CAAA;AACZ,CAAC,CAAA;AAEM,MAAME,UAAU,GAAGA,MAAM;EAC/B,OAAO,IAAIhJ,MAAM,CAAC;AACjBnX,IAAAA,KAAK,EAAE;AACNqX,MAAAA,SAAS,EAAE;AACV+I,QAAAA,IAAIA,CAAC1jB,IAAI,EAAEU,IAAI,EAAEqE,MAAM,EAAE;UACxB,MAAM/C,GAAG,GAAGshB,UAAU,CAACtjB,IAAI,CAACN,KAAK,CAAC0jB,OAAO,CAAC,CAAA;UAC1C,OAAO;YACNphB,GAAG;YACH4B,MAAM,EAAG+f,OAAO,IAAK;cACpB,IACCA,OAAO,CAAC5f,IAAI,CAACmF,IAAI,KAAK,MAAM,IAC5Bya,OAAO,CAACjkB,KAAK,CAAC0jB,OAAO,KAAKpjB,IAAI,CAACN,KAAK,CAAC0jB,OAAO,EAE5C,OAAO,IAAI,CAAA;AACZ,cAAA,OAAO,KAAK,CAAA;AACb,aAAA;WACA,CAAA;AACF,SAAA;AACD,OAAA;AACD,KAAA;AACD,GAAC,CAAC,CAAA;AACH,CAAC,CAAA;AAEM,MAAMQ,UAAU,GAAGA,CAACljB,IAAgB,EAAE0iB,OAAe,KAAK;EAChE,MAAM;IAAE5iB,KAAK;AAAEC,IAAAA,QAAAA;AAAS,GAAC,GAAGC,IAAI,CAAA;EAChC,MAAMV,IAAI,GAAGQ,KAAK,CAACI,MAAM,CAACE,KAAK,CAAC4iB,IAAI,CAAC1iB,MAAM,CAAC;AAAEoiB,IAAAA,OAAAA;AAAQ,GAAC,CAAC,CAAA;EACxD3iB,QAAQ,CAACD,KAAK,CAACS,EAAE,CAACC,oBAAoB,CAAClB,IAAI,CAAC,CAAC,CAAA;AAC9C,CAAC;;ACpDD;AAaA,SAAS6jB,cAAcA,CAACC,MAAgB,EAAY;EACnDA,MAAM,CAACpkB,KAAK,GAAG;IAAE,GAAGokB,MAAM,CAACpkB,KAAK;AAAEsE,IAAAA,MAAM,EAAE;AAAEpE,MAAAA,OAAO,EAAE,KAAA;AAAM,KAAA;GAAG,CAAA;AAC9D,EAAA,MAAMG,KAAK,GAAG+jB,MAAM,CAAC/jB,KAAK,CAAA;AAC1B,EAAA,IAAIA,KAAK,EACR+jB,MAAM,CAAC/jB,KAAK,GAAIC,IAAU,IAAK;AAC9B,IAAA,MAAM+jB,GAAG,GAAGhkB,KAAK,CAACC,IAAI,CAAC,CAAA;AACvB,IAAA,IAAI6B,KAAK,CAACE,OAAO,CAACgiB,GAAG,CAAC,EAAE;MACvB,IAAI,CAAC7jB,GAAG,EAAER,KAAK,EAAER,OAAO,CAAC,GAAG6kB,GAAG,CAAA;AAC/B,MAAA,IAAIrkB,KAAK,KAAK,CAAC,EAAER,OAAO,GAAG,CAAC,CAAA;MAC5B,MAAM8E,MAAM,GAAGhE,IAAI,CAACN,KAAK,CAACsE,MAAM,GAAG,QAAQ,GAAG,EAAE,CAAA;AAChDtE,MAAAA,KAAK,GAAG;AACP,QAAA,GAAGA,KAAK;AACR4E,QAAAA,KAAK,EAAE5E,KAAK,CAAC4E,KAAK,GAAG5E,KAAK,CAAC4E,KAAK,GAAG,GAAG,GAAGN,MAAM,GAAGA,MAAAA;OAClD,CAAA;AACD,MAAA,OAAO,CAAC9D,GAAG,EAAER,KAAK,EAAER,OAAO,CAAC,CAAA;KAC5B,MAAM,OAAO6kB,GAAG,CAAA;GACjB,CAAA;AACF,EAAA,OAAOD,MAAM,CAAA;AACd,CAAA;AAEA,MAAMhjB,KAAK,GAAG;AACb;AACAyN,EAAAA,GAAG,EAAE;AACJ;AACArP,IAAAA,OAAO,EAAE,QAAA;GACT;AACD;AACA8kB,EAAAA,IAAI,EAAE;AACL;AACA7kB,IAAAA,KAAK,EAAE,QAAA;GACP;AAEDukB,EAAAA,IAAI,EAAEG,cAAc,CAACZ,YAAY,CAAC;AAElC;EACA5N,SAAS,EAAEwO,cAAc,CAAC;AACzB;AACA3kB,IAAAA,OAAO,EAAE,SAAS;AAClB;AACAC,IAAAA,KAAK,EAAE,OAAO;AACd;AACA;IACAY,KAAK,EAAEA,MAAM;AACZ,MAAA,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;KACf;AACD;AACAE,IAAAA,QAAQ,EAAE,CACT;AACCC,MAAAA,GAAG,EAAE,GAAA;KACL,CAAA;AAEH,GAAC,CAAC;AACFjB,EAAAA,SAAS,EAAE4kB,cAAc,CAAC5kB,SAAS,CAAC;EACpCglB,UAAU,EAAEJ,cAAc,CAAC;AAC1B3kB,IAAAA,OAAO,EAAE,kBAAkB;AAC3BC,IAAAA,KAAK,EAAE,OAAO;AACdY,IAAAA,KAAKA,GAAG;AACP,MAAA,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,CAAA;KACxB;AACDE,IAAAA,QAAQ,EAAE,CACT;AACCC,MAAAA,GAAG,EAAE,YAAA;KACL,CAAA;AAEH,GAAC,CAAC;AAEF;EACAgkB,OAAO,EAAEL,cAAc,CAAC;AACvB;AACAnkB,IAAAA,KAAK,EAAE;AACNykB,MAAAA,KAAK,EAAE;AACNvkB,QAAAA,OAAO,EAAE,CAAA;OACT;AACDwkB,MAAAA,EAAE,EAAE;AACHxkB,QAAAA,OAAO,EAAE,IAAA;OACT;AACDykB,MAAAA,IAAI,EAAE;AACLzkB,QAAAA,OAAO,EAAE,KAAA;AACV,OAAA;KACA;AACD;AACAV,IAAAA,OAAO,EAAE,SAAS;AAClB;AACAC,IAAAA,KAAK,EAAE,OAAO;AACd;AACA;AACA;AACAG,IAAAA,QAAQ,EAAE,IAAI;AACd;IACAS,KAAKA,CAACC,IAAI,EAAE;MACX,MAAME,GAAG,GAAG,CAAIF,CAAAA,EAAAA,IAAI,CAACN,KAAK,CAACykB,KAAK,CAAE,CAAA,CAAA;AAClC,MAAA,OAAO,CAACjkB,GAAG,EAAE,CAAC,CAAC,CAAA;KACf;AACD;AACAD,IAAAA,QAAQ,EAAE,CACT;AAAEC,MAAAA,GAAG,EAAE,IAAI;AAAER,MAAAA,KAAK,EAAE;AAAEykB,QAAAA,KAAK,EAAE,CAAA;AAAE,OAAA;AAAE,KAAC,EAClC;AAAEjkB,MAAAA,GAAG,EAAE,IAAI;AAAER,MAAAA,KAAK,EAAE;AAAEykB,QAAAA,KAAK,EAAE,CAAA;AAAE,OAAA;AAAE,KAAC,EAClC;AAAEjkB,MAAAA,GAAG,EAAE,IAAI;AAAER,MAAAA,KAAK,EAAE;AAAEykB,QAAAA,KAAK,EAAE,CAAA;AAAE,OAAA;AAAE,KAAC,EAClC;AAAEjkB,MAAAA,GAAG,EAAE,IAAI;AAAER,MAAAA,KAAK,EAAE;AAAEykB,QAAAA,KAAK,EAAE,CAAA;AAAE,OAAA;AAAE,KAAC,EAClC;AAAEjkB,MAAAA,GAAG,EAAE,IAAI;AAAER,MAAAA,KAAK,EAAE;AAAEykB,QAAAA,KAAK,EAAE,CAAA;AAAE,OAAA;AAAE,KAAC,EAClC;AAAEjkB,MAAAA,GAAG,EAAE,IAAI;AAAER,MAAAA,KAAK,EAAE;AAAEykB,QAAAA,KAAK,EAAE,CAAA;AAAE,OAAA;KAAG,CAAA;AAEpC,GAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAG,YAAY,EAAET,cAAc,CAAC;AAC5B3kB,IAAAA,OAAO,EAAE,YAAY;AACrBC,IAAAA,KAAK,EAAE,OAAO;AACdO,IAAAA,KAAK,EAAE;AAAE6kB,MAAAA,KAAK,EAAE;AAAE3kB,QAAAA,OAAO,EAAE,CAAA;AAAE,OAAA;KAAG;AAChCK,IAAAA,QAAQ,EAAE,CACT;AACCC,MAAAA,GAAG,EAAE,IAAI;MACTE,QAAQA,CAAC4B,GAAG,EAAE;QACb,OAAO;AACNuiB,UAAAA,KAAK,EAAEviB,GAAG,CAACwiB,YAAY,CAAC,OAAO,CAAC,GAC7BxiB,GAAG,CAAC1B,YAAY,GAAG,OAAO,CAAC,IAAI,EAAE,GACjC,CAAA;SACH,CAAA;AACF,OAAA;AACD,KAAC,CACD;IACDP,KAAKA,CAACC,IAAI,EAAE;AACX,MAAA,OAAOA,IAAI,CAACN,KAAK,CAAC6kB,KAAK,IAAI,CAAC,GACzB,CAAC,IAAI,EAAE,CAAC,CAAC,GACT,CAAC,IAAI,EAAE;AAAEza,QAAAA,KAAK,EAAE9J,IAAI,CAACN,KAAK,CAAC6kB,KAAAA;OAAO,EAAE,CAAC,CAAC,CAAA;AAC1C,KAAA;AACD,GAAC,CAAC;EACFE,WAAW,EAAEZ,cAAc,CAAC;AAC3B3kB,IAAAA,OAAO,EAAE,YAAY;AACrBC,IAAAA,KAAK,EAAE,OAAO;AACdc,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE,IAAA;AAAK,KAAC,CAAC;AACzBH,IAAAA,KAAKA,GAAG;AACP,MAAA,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;AACjB,KAAA;AACD,GAAC,CAAC;EACF2kB,SAAS,EAAEb,cAAc,CAAC;AACzB3kB,IAAAA,OAAO,EAAE,kBAAkB;AAC3Be,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE,IAAA;AAAK,KAAC,CAAC;AACzBH,IAAAA,KAAKA,GAAG;AACP,MAAA,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;AACjB,KAAA;AACD,GAAC,CAAC;AACF2E,EAAAA,QAAQ,EAAEmf,cAAc,CAACnf,QAAQ,CAAC;AAClCN,EAAAA,QAAQ,EAAEyf,cAAc,CAACzf,QAAQ,CAAC;AAClC,EAAA,GAAG4H,UAAU,CAAC;AACbG,IAAAA,UAAU,EAAE,OAAO;AACnBG,IAAAA,WAAW,EAAE,QAAQ;AACrBL,IAAAA,cAAc,EAAE,EAAC;AAClB,GAAC,CAAC;EACF0Y,cAAc,EAAEd,cAAc,CAAC;AAC9B1kB,IAAAA,KAAK,EAAE,OAAO;AACdc,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE,IAAA;AAAK,KAAC,CAAC;AACzBH,IAAAA,KAAK,EAAEA,MAAM,CAAC,IAAI,CAAA;AACnB,GAAC,CAAC;EACF6kB,KAAK,EAAEf,cAAc,CAAC;AACrBX,IAAAA,MAAM,EAAE,IAAI;AACZxjB,IAAAA,KAAK,EAAE;MACNmlB,GAAG,EAAE,EAAE;AACPC,MAAAA,GAAG,EAAE;AAAEllB,QAAAA,OAAO,EAAE,IAAA;OAAM;AACtBmlB,MAAAA,KAAK,EAAE;AAAEnlB,QAAAA,OAAO,EAAE,IAAA;AAAK,OAAA;KACvB;AACDT,IAAAA,KAAK,EAAE,QAAQ;AACfI,IAAAA,SAAS,EAAE,IAAI;AACfU,IAAAA,QAAQ,EAAE,CACT;AACCC,MAAAA,GAAG,EAAE,UAAU;MACfE,QAAQ,EAAG4B,GAAG,KAAM;AACnB6iB,QAAAA,GAAG,EAAE7iB,GAAG,CAAC1B,YAAY,CAAC,KAAK,CAAC;AAC5BykB,QAAAA,KAAK,EAAE/iB,GAAG,CAAC1B,YAAY,CAAC,OAAO,CAAC;AAChCwkB,QAAAA,GAAG,EAAE9iB,GAAG,CAAC1B,YAAY,CAAC,KAAK,CAAA;OAC3B,CAAA;AACF,KAAC,CACD;IACDP,KAAK,EAAGC,IAAI,IAAK;MAChB,MAAM;QAAE+kB,KAAK;QAAEF,GAAG;AAAEC,QAAAA,GAAAA;OAAK,GAAG9kB,IAAI,CAACN,KAAK,CAAA;MAEtC,OAAO,CAAC,KAAK,EAAE;QAAEqlB,KAAK;QAAEF,GAAG;AAAEC,QAAAA,GAAAA;AAAI,OAAC,CAAC,CAAA;AACpC,KAAA;AACD,GAAC,CAAC;EACFE,SAAS,EAAEnB,cAAc,CAAC;AACzBX,IAAAA,MAAM,EAAE,IAAI;AACZ/jB,IAAAA,KAAK,EAAE,QAAQ;AACfK,IAAAA,UAAU,EAAE,KAAK;AACjBS,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE,IAAA;AAAK,KAAC,CAAC;AACzBH,IAAAA,KAAK,EAAEA,MAAM,CAAC,IAAI,CAAA;GAClB,CAAA;AACF,CAAC,CAAA;AAUD,MAAMX,KAAiC,GAAG;AACzC;AACA6lB,EAAAA,IAAI,EAAE;AACLllB,IAAAA,KAAK,EAAEA,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;AAC1BE,IAAAA,QAAQ,EAAE,CACT;AAAEC,MAAAA,GAAG,EAAE,OAAA;AAAQ,KAAC,EAChB;AACCA,MAAAA,GAAG,EAAE,GAAG;MACRE,QAAQ,EAAG4B,GAAG,IAAKA,GAAG,CAAC0X,KAAK,CAACwL,UAAU,KAAK,QAAQ,IAAI,IAAA;AACzD,KAAC,EACD;AACCxL,MAAAA,KAAK,EAAE,aAAa;MACpBtZ,QAAQ,EAAGiC,GAAG,IAAK,0BAA0B,CAACiJ,IAAI,CAACjJ,GAAG,CAAC,IAAI,IAAA;KAC3D,CAAA;GAEF;AACD8iB,EAAAA,MAAM,EAAE;AACPhmB,IAAAA,KAAK,EAAE,SAAS;AAChBY,IAAAA,KAAK,EAAEA,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;AACtBE,IAAAA,QAAQ,EAAE,CACT;AAAEC,MAAAA,GAAG,EAAE,IAAA;AAAK,KAAC,EACb;AACCA,MAAAA,GAAG,EAAE,GAAG;MACRE,QAAQ,EAAG4B,GAAG,IAAKA,GAAG,CAAC0X,KAAK,CAAC0L,SAAS,KAAK,QAAQ,IAAI,IAAA;AACxD,KAAC,EACD;AAAE1L,MAAAA,KAAK,EAAE,mBAAA;KAAqB,CAAA;GAE/B;AACD2L,EAAAA,IAAI,EAAE;AACLlmB,IAAAA,KAAK,EAAE,SAAS;AAChBO,IAAAA,KAAK,EAAE;AACN4lB,MAAAA,IAAI,EAAE;AAAE1lB,QAAAA,OAAO,EAAE,IAAA;OAAM;AACvB2lB,MAAAA,GAAG,EAAE;AAAE3lB,QAAAA,OAAO,EAAE,8BAAA;OAAgC;AAChD+D,MAAAA,MAAM,EAAE;AAAE/D,QAAAA,OAAO,EAAE,QAAA;OAAU;AAC7BmlB,MAAAA,KAAK,EAAE;AAAEnlB,QAAAA,OAAO,EAAE,EAAA;AAAG,OAAA;KACrB;IACDG,KAAK,EAAGylB,IAAI,IAAK;MAChB,MAAM;QAAEF,IAAI;QAAEC,GAAG;QAAE5hB,MAAM;AAAEohB,QAAAA,KAAAA;OAAO,GAAGS,IAAI,CAAC9lB,KAAK,CAAA;MAC/C,OAAO,CAAC,GAAG,EAAE;QAAE4lB,IAAI;QAAEC,GAAG;QAAE5hB,MAAM;AAAEohB,QAAAA,KAAAA;OAAO,EAAE,CAAC,CAAC,CAAA;KAC7C;AACD9kB,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE,wCAAA;KAA0C,CAAA;GAC5D;AACDulB,EAAAA,SAAS,EAAE;AACVxlB,IAAAA,QAAQ,EAAE,CACT;AAAEC,MAAAA,GAAG,EAAE,GAAA;AAAI,KAAC,EACZ;AACCwZ,MAAAA,KAAK,EAAE,iBAAiB;AACxBtZ,MAAAA,QAAQ,EAAGiC,GAAG,IAAKA,GAAG,KAAK,WAAW,IAAI,IAAA;AAC3C,KAAC,CACD;AACDtC,IAAAA,KAAK,EAAEA,MAAM,CAAC,GAAG,EAAE,CAAC,CAAA;GACpB;AACD2lB,EAAAA,WAAW,EAAE;AACZzlB,IAAAA,QAAQ,EAAE,CACT;AAAEC,MAAAA,GAAG,EAAE,GAAA;AAAI,KAAC,EACZ;AAAEA,MAAAA,GAAG,EAAE,QAAA;AAAS,KAAC,EACjB;AACCwZ,MAAAA,KAAK,EAAE,iBAAiB;AACxBtZ,MAAAA,QAAQ,EAAGiC,GAAG,IAAKA,GAAG,KAAK,aAAa,IAAI,IAAA;AAC7C,KAAC,CACD;AACDtC,IAAAA,KAAK,EAAEA,MAAM,CAAC,GAAG,EAAE,CAAC,CAAA;GACpB;AACD2Z,EAAAA,KAAK,EAAE;AACNha,IAAAA,KAAK,EAAE;AACNimB,MAAAA,KAAK,EAAE;AAAE/lB,QAAAA,OAAO,EAAE,IAAA;OAAM;AACxBgmB,MAAAA,QAAQ,EAAE;AAAEhmB,QAAAA,OAAO,EAAE,IAAA;OAAM;AAC3BimB,MAAAA,eAAe,EAAE;AAAEjmB,QAAAA,OAAO,EAAE,IAAA;AAAK,OAAA;KACjC;AACDK,IAAAA,QAAQ,EAAE,CACT;AAAEyZ,MAAAA,KAAK,EAAE,OAAO;MAAEtZ,QAAQ,EAAGiC,GAAG,KAAM;AAAEsjB,QAAAA,KAAK,EAAEtjB,GAAAA;OAAK,CAAA;AAAE,KAAC,EACvD;AAAEqX,MAAAA,KAAK,EAAE,WAAW;MAAEtZ,QAAQ,EAAGiC,GAAG,KAAM;AAAEujB,QAAAA,QAAQ,EAAEvjB,GAAAA;OAAK,CAAA;AAAE,KAAC,EAC9D;AACCqX,MAAAA,KAAK,EAAE,kBAAkB;MACzBtZ,QAAQ,EAAGiC,GAAG,KAAM;AAAEwjB,QAAAA,eAAe,EAAExjB,GAAAA;OAAK,CAAA;AAC7C,KAAC,CACD;IACDtC,KAAK,EAAGylB,IAAI,IAAK;MAChB,MAAM;QAAEG,KAAK;QAAEC,QAAQ;AAAEC,QAAAA,eAAAA;OAAiB,GAAGL,IAAI,CAAC9lB,KAAK,CAAA;MACvD,IAAIga,KAAK,GAAG,EAAE,CAAA;AACd,MAAA,IAAIiM,KAAK,EAAEjM,KAAK,IAAI,CAAA,MAAA,EAASiM,KAAK,CAAI,EAAA,CAAA,CAAA;AACtC,MAAA,IAAIC,QAAQ,EAAElM,KAAK,IAAI,CAAA,UAAA,EAAakM,QAAQ,CAAI,EAAA,CAAA,CAAA;AAChD,MAAA,IAAIC,eAAe,EAAEnM,KAAK,IAAI,CAAA,iBAAA,EAAoBmM,eAAe,CAAI,EAAA,CAAA,CAAA;MACrE,OAAO,CAAC,MAAM,EAAE;AAAEnM,QAAAA,KAAAA;OAAO,EAAE,CAAC,CAAC,CAAA;AAC9B,KAAA;AACD,GAAA;AACD,CAAC,CAAA;AAED,MAAMoK,MAAM,GAAG;EACdhjB,KAAK;AACL1B,EAAAA,KAAAA;AACD,CAAC,CAAA;AAEM,MAAMwB,MAAM,GAAG,IAAIklB,MAAM,CAAChC,MAAM,CAAC;;AC7TjC,MAAMiC,aAAa,SAAS/iB,YAAY,CAAC;AAC/CkG,EAAAA,IAAI,GAAG,WAAW,CAAA;;AAIlB;;AAEAhG,EAAAA,WAAWA,GAA2C;AAAA,IAAA,KAAA,IAAAvB,IAAA,GAAAL,SAAA,CAAAC,MAAA,EAAvCuD,IAAI,GAAAjD,IAAAA,KAAA,CAAAF,IAAA,GAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;AAAJgD,MAAAA,IAAI,CAAAhD,IAAA,CAAAR,GAAAA,SAAA,CAAAQ,IAAA,CAAA,CAAA;AAAA,KAAA;IAClB,MAAM,CAAC9B,IAAI,EAAEU,IAAI,EAAEqE,MAAM,CAAC,GAAGD,IAAI,CAAA;AACjC,IAAA,KAAK,CAAC9E,IAAI,EAAEU,IAAI,CAAC,CAAA;IACjB,IAAI,CAACqE,MAAM,GAAGA,MAAM,CAAA;AACpB,IAAA,IAAI,CAACrB,UAAU,GAAGsiB,aAAI,CAAC,MAAM,EAAE;AAC9B1hB,MAAAA,KAAK,EAAE,oBAAoB;AAC3B,MAAA,eAAe,EAAEtE,IAAI,CAACN,KAAK,CAACC,QAAQ;AACpC,MAAA,YAAY,EAAEK,IAAI,CAACN,KAAK,CAACG,KAAK;AAC9B,MAAA,uBAAuB,EAAEG,IAAI,CAACN,KAAK,CAACI,cAAc;AAClD,MAAA,gBAAgB,EAAE,WAAA;AACnB,KAAC,CAAC,CAAA;AACF,IAAA,IAAI,CAACmmB,IAAI,GAAGD,aAAI,CAAC,KAAK,EAAE;AAAE1hB,MAAAA,KAAK,EAAE,2BAAA;AAA4B,KAAC,CAAC,CAAA;AAC/D,IAAA,IAAI,CAACtC,GAAG,GAAGgkB,aAAI,CAAC,KAAK,EAAE;AACtB1hB,MAAAA,KAAK,EAAE,0BAA0B;AACjC,MAAA,eAAe,EAAEtE,IAAI,CAACN,KAAK,CAACC,QAAQ;AACpC,MAAA,YAAY,EAAEK,IAAI,CAACN,KAAK,CAACG,KAAK;AAC9B,MAAA,uBAAuB,EAAEG,IAAI,CAACN,KAAK,CAACI,cAAc;AAClD,MAAA,gBAAgB,EAAE,WAAA;AACnB,KAAC,CAAC,CAAA;AACF;IACA,IAAI,CAACkC,GAAG,CAACa,WAAW,CAAC,IAAI,CAACojB,IAAI,CAAC,CAAA;IAC/B,IAAI,CAACjkB,GAAG,CAACa,WAAW,CAAC,IAAI,CAACa,UAAU,CAAC,CAAA;IACrC,IAAI,CAACwiB,eAAe,EAAE,CAAA;AACvB,GAAA;AAEAA,EAAAA,eAAeA,GAAG;AACjB;AAAA,GAAA;EAGDtiB,MAAMA,CAAC5D,IAAU,EAAE;AAClB,IAAA,MAAM+jB,GAAG,GAAG,KAAK,CAACngB,MAAM,CAAC5D,IAAI,CAAC,CAAA;AAC9B,IAAA,IAAI,CAAC+jB,GAAG,EAAE,OAAO,KAAK,CAAA;IACtB,IAAI,CAAC/jB,IAAI,GAAGA,IAAI,CAAA;AAChB8C,IAAAA,aAAa,CAAC,IAAI,CAACd,GAAG,EAAE;AACvB,MAAA,eAAe,EAAEhC,IAAI,CAACN,KAAK,CAACC,QAAQ;AACpC,MAAA,YAAY,EAAEK,IAAI,CAACN,KAAK,CAACG,KAAK;AAC9B,MAAA,uBAAuB,EAAEG,IAAI,CAACN,KAAK,CAACI,cAAAA;AACrC,KAAC,CAAC,CAAA;AACFgD,IAAAA,aAAa,CAAC,IAAI,CAACY,UAAU,EAAiB;AAC7C,MAAA,eAAe,EAAE1D,IAAI,CAACN,KAAK,CAACC,QAAQ;AACpC,MAAA,YAAY,EAAEK,IAAI,CAACN,KAAK,CAACG,KAAK;AAC9B,MAAA,uBAAuB,EAAEG,IAAI,CAACN,KAAK,CAACI,cAAAA;AACrC,KAAC,CAAC,CAAA;IAEF,IAAI,CAAComB,eAAe,EAAE,CAAA;AAEtB,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;AAEArN,EAAAA,OAAOA,GAAG;AACTb,IAAAA,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAAA;;AAE3B;AACD,GAAA;AACD,CAAA;AAEO,MAAMkO,wBAA6C,GAAG,YAAA;AAAA,EAAA,KAAA,IAAA/gB,KAAA,GAAA9D,SAAA,CAAAC,MAAA,EAAIuD,IAAI,GAAAjD,IAAAA,KAAA,CAAAuD,KAAA,GAAAC,KAAA,GAAA,CAAA,EAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA,EAAA,EAAA;AAAJP,IAAAA,IAAI,CAAAO,KAAA,CAAA/D,GAAAA,SAAA,CAAA+D,KAAA,CAAA,CAAA;AAAA,GAAA;AAAA,EAAA,OACpE,IAAI0gB,aAAa,CAAC,GAAGjhB,IAAI,CAAC,CAAA;AAAA,CAAA;;ACrEpB,MAAMshB,iBAAiB,CAAC;AAC7B;;AAEA;AACQC,EAAAA,mBAAmB,GAAiB,EAAE,CAAA;AAC9C;AACQC,EAAAA,uBAAuB,GAAiB,EAAE,CAAA;AAClD;;AAGApjB,EAAAA,WAAWA,CAACqjB,IAAS,EAAEC,aAAqB,EAAE;AAC5C;AACA;AACA,IAAA,IAAI,CAACC,UAAU,GAAGD,aAAa,GAAG,CAAC,CAAA;AACnC,IAAA,IAAI,CAACE,WAAW,GAAGH,IAAI,CAACllB,OAAO,CAACqlB,WAAW,CAAA;;AAE3C;AACAH,IAAAA,IAAI,CAACI,IAAI,CAAC,IAAI,CAAC,CAAA;AACjB,GAAA;;AAEA;EACAC,OAAOA,CAAC5C,IAAY,EAAE;AACpBhM,IAAAA,OAAO,CAACC,GAAG,CAAC+L,IAAI,EAAE,MAAM,CAAC,CAAA;AAEzB,IAAA,IAAIA,IAAI,EAAE;AACR,MAAA,IAAI,CAACyC,UAAU,IAAIzC,IAAI,CAACziB,MAAM,CAAA;AAChC,KAAA;AACF,GAAA;;AAEA;EACAslB,QAAQA,CAAC7mB,IAAS,EAAE;AAClB;AACAgY,IAAAA,OAAO,CAACC,GAAG,CAACjY,IAAI,EAAE,MAAM,CAAC,CAAA;AAEzB,IAAA,IAAI,CAACA,IAAI,CAAC8mB,KAAK,EAAE,OAAA;;AAEjB;AACA,IAAA,MAAMC,UAAU,GAAG,IAAI,CAACC,aAAa,CAAC;MACpCvX,IAAI,EAAE,IAAI,CAACgX,UAAU;MACrBQ,UAAU,EAAEjnB,IAAI,CAAC8mB,KAAK,CACnBvb,KAAK,CAAC,GAAG,CAAC,CACV+D,MAAM,CAAE4X,IAAS,IAAKA,IAAI,CAAC,CAC3B/gB,GAAG,CAAE+gB,IAAY,IAAK,IAAI,CAACR,WAAW,GAAGQ,IAAI,CAAC;MACjDJ,KAAK,EAAE9mB,IAAI,CAAC8mB,KAAAA;AACd,KAAC,CAAC,CAAA;;AAEF;AACA,IAAA,IAAI,CAACR,uBAAuB,CAAC9d,IAAI,CAACue,UAAU,CAAC,CAAA;AAC/C,GAAA;;AAEA;EACAI,SAASA,CAACnnB,IAAuB,EAAE;AACjCgY,IAAAA,OAAO,CAACC,GAAG,CAACjY,IAAI,EAAE,MAAM,CAAC,CAAA;AAEzB,IAAA,IAAI,CAACA,IAAI,CAAC8mB,KAAK,EAAE,OAAA;IACjB,MAAMC,UAAU,GAAG,IAAI,CAACT,uBAAuB,CAACc,GAAG,EAAE,CAAA;IACrD,IAAI,CAACL,UAAU,EACb,MAAM,IAAItH,KAAK,CAAC,mDAAmD,CAAC,CAAA;AAEtE,IAAA,IAAIzf,IAAI,CAAC8mB,KAAK,KAAKC,UAAU,CAACD,KAAK,EACjC,MAAM,IAAIrH,KAAK,CAAC,gDAAgD,CAAC,CAAA;AAEnEsH,IAAAA,UAAU,CAACpH,EAAE,GAAG,IAAI,CAAC8G,UAAU,CAAA;;AAE/B;AACA,IAAA,IAAI,CAACJ,mBAAmB,CAAC7d,IAAI,CAACue,UAAU,CAAC,CAAA;AAC3C,GAAA;;AAEA;EACAC,aAAaA,CAACK,IAAyB,EAAc;IACnD,OAAO;MACL5X,IAAI,EAAE,IAAI,CAACgX,UAAU;MACrB9G,EAAE,EAAE,CAAC,CAAC;AACNsH,MAAAA,UAAU,EAAE,EAAE;AACdH,MAAAA,KAAK,EAAE,EAAE;MACT,GAAGO,IAAAA;KACJ,CAAA;AACH,GAAA;;AAEA;EACA,IAAI1hB,KAAKA,GAAG;IACV,OAAO,IAAI,CAAC0gB,mBAAmB,CAAA;AACjC,GAAA;AACF;;AC1EO,MAAMiB,sBAAsB,GAAG,IAAI3a,SAAS,CACjD,gBACF,CAAC,CAAA;AAEM,SAAS4a,eAAeA,CAC7BhZ,GAAS,EACTxK,IAA+C,EAChC;EACf,MAAMjD,KAAoB,GAAG,EAAE,CAAA;AAC/B,EAAA,MAAMF,MAAM,GAAG2N,GAAG,CAACxK,IAAI,CAACnD,MAAM,CAAA;AAC9B,EAAA,MAAM4mB,SAAgC,GAAG3lB,KAAK,CAACE,OAAO,CAACgC,IAAI,CAAC,GACxDA,IAAI,GACH,CAACA,IAAI,CAA2B,CAAA;EAErC,MAAMgb,KAAK,GAAGyI,SAAS,CACpBrhB,GAAG,CAAE+gB,IAAI,IAAM,OAAOA,IAAI,KAAK,QAAQ,GAAGtmB,MAAM,CAACE,KAAK,CAAComB,IAAI,CAAC,GAAGA,IAAK,CAAC,CACrE5X,MAAM,CAACmY,OAAO,CAAC,CAAA;AAElBlZ,EAAAA,GAAG,CAACkG,WAAW,CAAC,CAACzU,IAAI,EAAEwH,GAAG,KAAK;IAC7B,IAAIuX,KAAK,CAAC2I,QAAQ,CAAC1nB,IAAI,CAAC+D,IAAI,CAAC,EAAE;MAC7BjD,KAAK,CAAC0H,IAAI,CAAC;QACTxI,IAAI;AACJwH,QAAAA,GAAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAA;AACF,GAAC,CAAC,CAAA;AAEF,EAAA,OAAO1G,KAAK,CAAA;AACd,CAAA;AA2BO,SAAS6mB,mBAAmBA,GAAG;EACpC,SAASC,OAAOA,CAACrZ,GAAS,EAAgB;AACxC,IAAA,IAAI,CAACA,GAAG,IAAI,CAACA,GAAG,CAAC1F,QAAQ,EAAE;AACzB,MAAA,OAAO,EAAE,CAAA;AACX,KAAA;AACA,IAAA,MAAMgf,MAAM,GAAGN,eAAe,CAAChZ,GAAG,EAAE,WAAW,CAAC,CAAA;IAChD,IAAI1K,WAAyB,GAAG,EAAE,CAAA;AAElCgkB,IAAAA,MAAM,CAACC,OAAO,CAAEC,KAAK,IAAK;MACxB,IAAIpoB,QAAgB,GAAGooB,KAAK,CAAC/nB,IAAI,CAACN,KAAK,CAACC,QAAQ,CAAA;AAEhD,MAAA,IAAIA,QAAQ,IAAI,CAACqoB,IAAI,CAACC,WAAW,CAACtoB,QAAQ,CAAC,EAAEA,QAAQ,GAAG,WAAW,CAAA;AAEnE,MAAA,MAAMuoB,eAAe,GAAGvoB,QAAQ,GAC5BqoB,IAAI,CAACG,SAAS,CAACJ,KAAK,CAAC/nB,IAAI,CAACqjB,WAAW,EAAE;AAAE1jB,QAAAA,QAAAA;OAAU,CAAC,GACpDqoB,IAAI,CAACI,aAAa,CAACL,KAAK,CAAC/nB,IAAI,CAACqjB,WAAW,CAAC,CAAA;AAE9C,MAAA,MAAMgF,OAAO,GAAGH,eAAe,CAACI,QAAQ,CAAA;MAExC,MAAMC,QAAQ,GAAG,IAAInC,iBAAiB,CAACiC,OAAO,EAAEN,KAAK,CAACvgB,GAAG,CAAC,CAAA;AAE1D,MAAA,IAAI+gB,QAAQ,CAAC5iB,KAAK,CAACpE,MAAM,EAAE;QACzB,MAAMinB,gBAAgB,GAAGD,QAAQ,CAAC5iB,KAAK,CAACQ,GAAG,CAAE4gB,UAAU,IACrDrU,UAAU,CAACwQ,MAAM,CAAC6D,UAAU,CAACtX,IAAI,EAAEsX,UAAU,CAACpH,EAAE,EAAE;AAChDrb,UAAAA,KAAK,EAAEyiB,UAAU,CAACE,UAAU,CAACpb,IAAI,CAAC,GAAG,CAAA;AACvC,SAAC,CACH,CAAC,CAAA;AAEDhI,QAAAA,WAAW,GAAGA,WAAW,CAAC8e,MAAM,CAAC6F,gBAAgB,CAAC,CAAA;AACpD,OAAA;;AAEA;AACA;AACA;AACA;AACF,KAAC,CAAC,CAAA;AACF,IAAA,OAAO3kB,WAAW,CAAA;AACpB,GAAA;EAEA,OAAO,IAAI4W,MAAM,CAAC;AAChBvY,IAAAA,GAAG,EAAEolB,sBAAsB;AAC3B9mB,IAAAA,KAAK,EAAE;AACLka,MAAAA,IAAIA,CAACoJ,MAAM,EAAE2E,QAAQ,EAAE;AACrB,QAAA,MAAM5kB,WAAW,GAAG+jB,OAAO,CAACa,QAAQ,CAACla,GAAG,CAAC,CAAA;QACzC,OAAO;UACL1K,WAAW,EAAEga,aAAa,CAAC7c,MAAM,CAACynB,QAAQ,CAACla,GAAG,EAAE1K,WAAW,CAAA;SAC5D,CAAA;OACF;MACDgX,KAAKA,CAAC5Z,EAAE,EAAE0E,KAAK,EAAE2O,QAAQ,EAAE0O,QAAQ,EAAE;AACnC,QAAA,IAAI,CAAC/hB,EAAE,CAAC6a,UAAU,EAAE,OAAOnW,KAAK,CAAA;AAChC,QAAA,MAAM9B,WAAW,GAAG+jB,OAAO,CAAC5E,QAAQ,CAACzU,GAAG,CAAC,CAAA;QACzC,OAAO;UACL1K,WAAW,EAAEga,aAAa,CAAC7c,MAAM,CAACC,EAAE,CAACsN,GAAG,EAAE1K,WAAW,CAAA;SACtD,CAAA;AACH,OAAA;KACD;AACDP,IAAAA,KAAK,EAAE;MACLO,WAAWA,CAACrD,KAAK,EAAE;AACjB,QAAA,MAAMua,WAAW,GAAGuM,sBAAsB,CAACtM,QAAQ,CAACxa,KAAK,CAAC,CAAA;QAC1D,OAAOua,WAAW,EAAElX,WAAW,CAAA;AACjC,OAAA;AACF,KAAA;AACF,GAAC,CAAC,CAAA;AACJ;;AC7GA,IAAI6kB,eAAe,GAAG,IAAI,CAAA;AACnB,SAASC,gBAAgBA,GAAG;AAClCD,EAAAA,eAAe,EAAE,CAAA;AACjB,EAAA,MAAME,MAAM,GAAGF,eAAe,CAACG,QAAQ,CAAC,EAAE,CAAC,CAAA;AAC3C,EAAA,MAAMC,UAAU,GAAGzhB,IAAI,CAAC0hB,MAAM,EAAE,CAACF,QAAQ,CAAC,EAAE,CAAC,CAACG,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;EAC7D,OAAOF,UAAU,GAAGF,MAAM,CAAA;AAC3B,CAAA;AAEO,SAASK,cAAcA,CAACjpB,IAAS,EAAE;AACzC,EAAA,IAAI,CAACA,IAAI,CAACN,KAAK,CAAC0kB,EAAE,EAAE;AACnBpkB,IAAAA,IAAI,CAACN,KAAK,CAAC0kB,EAAE,GAAGuE,gBAAgB,EAAE,CAAA;AACnC,GAAA;AACD,CAAA;AAEO,SAASO,sBAAsBA,CAACC,GAAW,EAAU;AAC3D,EAAA,MAAMC,KAAK,GAAG,CACb,EAAE,EACF,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,CACH,CAAA;EACD,MAAMC,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;AAEjE,EAAA,IAAIF,GAAG,KAAK,CAAC,EAAE,OAAO,GAAG,CAAA;AAEzB,EAAA,MAAMG,MAAM,GAAGH,GAAG,CAACN,QAAQ,EAAE,CAAA;EAC7B,IAAI1gB,MAAM,GAAG,EAAE,CAAA;EACf,IAAIohB,QAAQ,GAAG,KAAK,CAAA;AAEpB,EAAA,KAAK,IAAIxjB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGujB,MAAM,CAAC/nB,MAAM,EAAEwE,CAAC,EAAE,EAAE;IACvC,MAAMyjB,KAAK,GAAGC,QAAQ,CAACH,MAAM,CAACvjB,CAAC,CAAC,CAAC,CAAA;IACjC,MAAM2jB,OAAO,GAAGJ,MAAM,CAAC/nB,MAAM,GAAGwE,CAAC,GAAG,CAAC,CAAA;IAErC,IAAIyjB,KAAK,KAAK,CAAC,EAAE;AAChBD,MAAAA,QAAQ,GAAG,IAAI,CAAA;AAChB,KAAC,MAAM;AACN,MAAA,IAAIA,QAAQ,EAAE;AACbphB,QAAAA,MAAM,IAAI,GAAG,CAAA;AACbohB,QAAAA,QAAQ,GAAG,KAAK,CAAA;AACjB,OAAA;MACAphB,MAAM,IAAIkhB,MAAM,CAACG,KAAK,CAAC,GAAGJ,KAAK,CAACM,OAAO,CAAC,CAAA;AACzC,KAAA;AACD,GAAA;EACAvhB,MAAM,GAAGA,MAAM,CAAC5F,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAA;AACnC,EAAA,OAAO4F,MAAM,CAAC5F,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAA;AACjC,CAAA;AAEO,SAASonB,iBAAiBA,CAACR,GAAW,EAAU;AACtD,EAAA,IAAIA,GAAG,IAAI,CAAC,EAAE,OAAO,EAAE,CAAA;EAEvB,IAAIhhB,MAAM,GAAG,EAAE,CAAA;EACf,OAAOghB,GAAG,GAAG,CAAC,EAAE;AACfA,IAAAA,GAAG,EAAE,CAAA;AACLhhB,IAAAA,MAAM,GAAGyhB,MAAM,CAACC,YAAY,CAAEV,GAAG,GAAG,EAAE,GAAI,EAAE,CAAC,GAAGhhB,MAAM,CAAA;IACtDghB,GAAG,GAAG9hB,IAAI,CAACK,KAAK,CAACyhB,GAAG,GAAG,EAAE,CAAC,CAAA;AAC3B,GAAA;AAEA,EAAA,OAAOhhB,MAAM,CAAA;AACd,CAAA;AAEO,SAAS2hB,cAAcA,CAACX,GAAW,EAAU;AACnD,EAAA,MAAMY,aAAwC,GAAG;AAChD,IAAA,IAAI,EAAE,GAAG;AACT,IAAA,GAAG,EAAE,IAAI;AACT,IAAA,GAAG,EAAE,GAAG;AACR,IAAA,GAAG,EAAE,IAAI;AACT,IAAA,GAAG,EAAE,GAAG;AACR,IAAA,EAAE,EAAE,IAAI;AACR,IAAA,EAAE,EAAE,GAAG;AACP,IAAA,EAAE,EAAE,IAAI;AACR,IAAA,EAAE,EAAE,GAAG;AACP,IAAA,CAAC,EAAE,IAAI;AACP,IAAA,CAAC,EAAE,GAAG;AACN,IAAA,CAAC,EAAE,IAAI;AACP,IAAA,CAAC,EAAE,GAAA;GACH,CAAA;EAED,IAAI5hB,MAAM,GAAG,EAAE,CAAA;AACf,EAAA,KAAK,MAAM,CAACxC,KAAK,EAAEqkB,OAAO,CAAC,IAAI7nB,MAAM,CAAC8nB,OAAO,CAACF,aAAa,CAAC,CAACG,OAAO,EAAE,EAAE;AACvE,IAAA,OAAOf,GAAG,IAAIM,QAAQ,CAAC9jB,KAAK,CAAC,EAAE;AAC9BwC,MAAAA,MAAM,IAAI6hB,OAAO,CAAA;AACjBb,MAAAA,GAAG,IAAIM,QAAQ,CAAC9jB,KAAK,CAAC,CAAA;AACvB,KAAA;AACD,GAAA;AAEA,EAAA,OAAOwC,MAAM,CAAA;AACd;;AC7GO,MAAMgiB,WAAW,CAAC;AAGxBjnB,EAAAA,WAAWA,CACHkhB,EAAU,EACVpkB,IAAwB,EACxBmkB,KAAa,EACnB;IAAA,IAHMC,CAAAA,EAAU,GAAVA,EAAU,CAAA;IAAA,IACVpkB,CAAAA,IAAwB,GAAxBA,IAAwB,CAAA;IAAA,IACxBmkB,CAAAA,KAAa,GAAbA,KAAa,CAAA;IAEpB,IAAI,CAACziB,QAAQ,GAAG,EAAE,CAAA;IAClB,IAAI,CAAC6L,MAAM,GAAG,IAAI,CAAA;AACnB,GAAA;AACD,CAAA;AAIO,MAAM6c,WAAW,CAAC;AAGxBC,EAAAA,SAAS,GAAc,CAAC,CAAA;EACxBnnB,WAAWA,CAAQW,WAA6B,EAAE;IAAA,IAA/BA,CAAAA,WAA6B,GAA7BA,WAA6B,CAAA;IAC/C,IAAI,CAACqe,IAAI,GAAG,IAAIiI,WAAW,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAA;AAC5C,IAAA,IAAI,CAAChkB,GAAG,GAAG,IAAImkB,GAAG,EAAE,CAAA;AACrB,GAAA;EACAC,YAAYA,CAACxmB,IAAe,EAAE;IAC7B,IAAI,CAACsmB,SAAS,GAAGtmB,IAAI,CAAA;IACrB,IAAI,CAACymB,aAAa,EAAE,CAAA;AACrB,GAAA;AACAC,EAAAA,cAAcA,CAACvG,OAAoB,EAAE5W,IAAiB,EAAE;IACvD,MAAM;MAAEtN,IAAI;AAAEokB,MAAAA,EAAAA;AAAG,KAAC,GAAGF,OAAO,CAAA;AAC5B,IAAA,MAAMC,KAAK,GAAGnkB,IAAI,CAACN,KAAK,CAACykB,KAAK,CAAA;AAE9B,IAAA,MAAM5W,MAAM,GAAGD,IAAI,CAACC,MAAM,CAAA;AAC1B,IAAA,IAAImd,WAAW,GAAG,IAAI,CAACC,YAAY,CAACvG,EAAE,CAAC,CAAA;AACvC,IAAA,IAAIsG,WAAW,EAAE;MAChBA,WAAW,CAAC1qB,IAAI,GAAGkkB,OAAO,CAAA;AAC1B,MAAA,OAAOwG,WAAW,CAAA;KAClB,MAAMA,WAAW,GAAG,IAAIP,WAAW,CAAC/F,EAAE,EAAEF,OAAO,EAAEC,KAAK,CAAC,CAAA;IACxD,IAAI,CAAChe,GAAG,CAACP,GAAG,CAACwe,EAAE,EAAEsG,WAAW,CAAC,CAAA;IAC7B,IAAIniB,KAAK,GAAG+E,IAAI,CAAC/E,KAAK,CAAC+E,IAAI,CAACF,KAAK,CAAC,CAAA;AAClC,IAAA,IAAIwd,MAAM;AACTC,MAAAA,KAAK,GAAG,CAAC;AACTC,MAAAA,SAAS,GAAGC,QAAQ,CAAA;AACrB,IAAA,KAAK,IAAIhlB,CAAC,GAAGwC,KAAK,GAAG,CAAC,EAAExC,CAAC,GAAGwH,MAAM,CAACnE,UAAU,EAAErD,CAAC,EAAE,EAAE;AACnD6kB,MAAAA,MAAM,GAAGrd,MAAM,CAAC5K,KAAK,CAACoD,CAAC,CAAC,CAAA;AACxB,MAAA,IAAI6kB,MAAM,CAAC7mB,IAAI,CAACmF,IAAI,KAAK,SAAS,IAAI0hB,MAAM,CAAClrB,KAAK,CAACykB,KAAK,GAAG2G,SAAS,EACnE,SAAA;MAED,MAAME,MAAM,GAAG,IAAI,CAACL,YAAY,CAACC,MAAM,CAAClrB,KAAK,CAAC0kB,EAAE,CAAC,CAAA;MAEjD,IAAI,CAAC4G,MAAM,EAAE,MAAM,IAAIvL,KAAK,CAAC,oBAAoB,CAAC,CAAA;AAClD,MAAA,MAAMwL,CAAC,GAAGD,MAAM,CAAC7G,KAAK,CAAA;MACtB,IAAI8G,CAAC,IAAI9G,KAAK,EAAE,MAAA;AAEhB,MAAA,IAAI8G,CAAC,GAAGH,SAAS,EAAEA,SAAS,GAAGG,CAAC,CAAA;AAChCP,MAAAA,WAAW,CAAChpB,QAAQ,CAAC8G,IAAI,CAACwiB,MAAM,CAAC,CAAA;MACjC,MAAMziB,KAAK,GAAGyiB,MAAM,CAACzd,MAAM,CAAE7L,QAAQ,CAACgc,OAAO,CAACsN,MAAM,CAAC,CAAA;MACrDA,MAAM,CAACzd,MAAM,EAAE7L,QAAQ,CAACmL,MAAM,CAACtE,KAAK,EAAE,CAAC,CAAC,CAAA;AACzC,KAAA;IAEA,KAAK,MAAM5F,KAAK,IAAI+nB,WAAW,CAAChpB,QAAQ,EAAEiB,KAAK,CAAC4K,MAAM,GAAGmd,WAAW,CAAA;AAEpEI,IAAAA,SAAS,GAAGC,QAAQ,CAAA;AACpB,IAAA,KAAK,IAAIhlB,CAAC,GAAGwC,KAAK,GAAG,CAAC,EAAExC,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;AACpC6kB,MAAAA,MAAM,GAAGrd,MAAM,CAAC5K,KAAK,CAACoD,CAAC,CAAC,CAAA;AACxB,MAAA,IAAI6kB,MAAM,CAAC7mB,IAAI,CAACmF,IAAI,KAAK,SAAS,EAAE,SAAA;MAEpC,MAAM8hB,MAAM,GAAG,IAAI,CAACL,YAAY,CAACC,MAAM,CAAClrB,KAAK,CAAC0kB,EAAE,CAAC,CAAA;MACjD,IAAI,CAAC4G,MAAM,EAAE,MAAM,IAAIvL,KAAK,CAAC,oBAAoB,CAAC,CAAA;AAElD,MAAA,IAAIuL,MAAM,CAAC7G,KAAK,GAAGA,KAAK,EAAE;AACzB,QAAA,IAAI8G,CAAC,GAAGD,MAAM,CAAC7G,KAAK,CAAA;QACpB,IAAI8G,CAAC,GAAGH,SAAS,EAAE;AAClBD,UAAAA,KAAK,GAAG,CAAC,CAAA;AACTC,UAAAA,SAAS,GAAGG,CAAC,CAAA;AACd,SAAC,MAAM,IAAIA,CAAC,KAAKH,SAAS,EAAED,KAAK,EAAE,CAAA;AACpC,OAAC,MAAM,IAAIG,MAAM,CAAC7G,KAAK,GAAGA,KAAK,EAAE;AAChC6G,QAAAA,MAAM,CAACtpB,QAAQ,CAACsJ,OAAO,CAAC0f,WAAW,CAAC,CAAA;QACpCA,WAAW,CAACnd,MAAM,GAAGyd,MAAM,CAAA;QAC3BH,KAAK,GAAG,CAAC,CAAC,CAAA;AACV,QAAA,MAAA;AACD,OAAC,MAAM;QACN,MAAMtiB,KAAK,GAAGyiB,MAAM,CAACzd,MAAM,CAAE7L,QAAQ,CAACgc,OAAO,CAACsN,MAAM,CAAC,CAAA;QACrD,IAAIziB,KAAK,KAAK,CAAC,CAAC,EACfyiB,MAAM,CAACzd,MAAM,EAAE7L,QAAQ,CAACmL,MAAM,CAACtE,KAAK,GAAG,CAAC,EAAE,CAAC,EAAEmiB,WAAW,CAAC,CAAA;QAC1DG,KAAK,GAAG,CAAC,CAAC,CAAA;AACVH,QAAAA,WAAW,CAACnd,MAAM,GAAGyd,MAAM,CAACzd,MAAM,CAAA;AAClC,QAAA,MAAA;AACD,OAAA;AACD,KAAA;IAEA,IAAIsd,KAAK,IAAI,CAAC,EAAE;AACf,MAAA,IAAI,CAAC3I,IAAI,CAACxgB,QAAQ,CAACmL,MAAM,CAACge,KAAK,EAAE,CAAC,EAAEH,WAAW,CAAC,CAAA;AAChDA,MAAAA,WAAW,CAACnd,MAAM,GAAG,IAAI,CAAC2U,IAAI,CAAA;AAC/B,KAAA;AAEA,IAAA,OAAOwI,WAAW,CAAA;AACnB,GAAA;EAEAC,YAAYA,CAACvG,EAAU,EAAE;IACxB,OAAO,IAAI,CAACje,GAAG,CAACT,GAAG,CAAC0e,EAAE,CAAC,IAAI,IAAI,CAAA;AAChC,GAAA;EAEA8G,UAAUA,CAAC9G,EAAU,EAAE;AACtB,IAAA,MAAMsG,WAAW,GAAG,IAAI,CAACC,YAAY,CAACvG,EAAE,CAAC,CAAA;AACzC,IAAA,IAAIsG,WAAW,EAAE;MAChB,MAAMhpB,QAAQ,GAAGgpB,WAAW,CAACnd,MAAM,EAAE7L,QAAQ,IAAI,EAAE,CAAA;AACnD,MAAA,MAAM6G,KAAK,GAAG7G,QAAQ,CAACgc,OAAO,CAACgN,WAAW,CAAC,CAAA;MAC3ChpB,QAAQ,CAACmL,MAAM,CAACtE,KAAK,EAAE,CAAC,EAAE,GAAGmiB,WAAW,CAAChpB,QAAQ,CAAC,CAAA;AAClDgpB,MAAAA,WAAW,CAAChpB,QAAQ,CAAComB,OAAO,CAC1BnlB,KAAK,IAAMA,KAAK,CAAC4K,MAAM,GAAGmd,WAAW,CAACnd,MACxC,CAAC,CAAA;AACD,MAAA,IAAI,CAACpH,GAAG,CAAC6P,MAAM,CAACoO,EAAE,CAAC,CAAA;AACpB,KAAA;IAEA,IAAI,CAACoG,aAAa,EAAE,CAAA;IACpB,OAAO,CAAC,CAACE,WAAW,CAAA;AACrB,GAAA;AACAF,EAAAA,aAAaA,GAAG;AACf,IAAA,KAAK,MAAM,CAACtoB,GAAG,EAAEwoB,WAAW,CAAC,IAAI,IAAI,CAACvkB,GAAG,EAAEukB,WAAW,CAAC1qB,IAAI,EAAEmrB,YAAY,EAAE,CAAA;AAC5E,GAAA;EACAC,SAASA,CAAChH,EAAU,EAAE;AACrB,IAAA,IAAIiH,OAAO,GAAG,IAAI,CAACV,YAAY,CAACvG,EAAE,CAAC;MAClCtQ,MAAM,GAAG,CAAC,CAAC,CAAA;AACZ,IAAA,OAAOuX,OAAO,EAAE;AACfvX,MAAAA,MAAM,EAAE,CAAA;MACRuX,OAAO,GAAGA,OAAO,CAAC9d,MAAM,CAAA;AACzB,KAAA;AACA,IAAA,OAAOuG,MAAM,CAAA;AACd,GAAA;EACQwX,YAAYA,CAAClH,EAAU,EAAE;IAChC,MAAMmH,IAAI,GAAG,EAAE,CAAA;AACf,IAAA,IAAIF,OAAO,GAAG,IAAI,CAACV,YAAY,CAACvG,EAAE,CAAC,CAAA;AAEnC,IAAA,OAAOiH,OAAO,IAAIA,OAAO,CAAC9d,MAAM,EAAE;AACjC,MAAA,MAAMhF,KAAK,GAAG8iB,OAAO,CAAC9d,MAAM,CAAC7L,QAAQ,CAACgc,OAAO,CAAC2N,OAAO,CAAC,GAAG,CAAC,CAAA;AAE1DE,MAAAA,IAAI,CAACvgB,OAAO,CAACzC,KAAK,CAAC,CAAA;MACnB8iB,OAAO,GAAGA,OAAO,CAAC9d,MAAM,CAAA;AACzB,KAAA;AAEA,IAAA,OAAOge,IAAI,CAAC1f,IAAI,CAAC,GAAG,CAAC,CAAA;AACtB,GAAA;EACQ2f,YAAYA,CAACpH,EAAU,EAAE;AAChC,IAAA,IAAIiH,OAAO,GAAG,IAAI,CAACV,YAAY,CAACvG,EAAE,CAAC,CAAA;IACnC,MAAM7b,KAAK,GAAG8iB,OAAO,EAAE9d,MAAM,EAAE7L,QAAQ,CAACgc,OAAO,CAAC2N,OAAO,CAAC,CAAA;AACxD,IAAA,IAAI,OAAO9iB,KAAK,KAAK,QAAQ,EAAE,OAAO,EAAE,CAAA;AACxC,IAAA,MAAMuL,MAAM,GAAG,IAAI,CAACsX,SAAS,CAAChH,EAAE,CAAC,CAAA;IACjC,QAAQtQ,MAAM,GAAG,CAAC;AACjB,MAAA,KAAK,CAAC;AACL,QAAA,OAAOoV,sBAAsB,CAAC3gB,KAAK,GAAG,CAAC,CAAC,CAAA;AACzC,MAAA,KAAK,CAAC;AACL,QAAA,OAAO,IAAI2gB,sBAAsB,CAAC3gB,KAAK,GAAG,CAAC,CAAC,CAAG,CAAA,CAAA,CAAA;AAChD,MAAA,KAAK,CAAC;AACL,QAAA,OAAOA,KAAK,GAAG,CAAC,GAAG,EAAE,CAAA;AACvB,KAAA;AAEA,IAAA,OAAO,EAAE,CAAA;AACV,GAAA;EACQkjB,YAAYA,CAACrH,EAAU,EAAE;AAChC,IAAA,IAAIiH,OAAO,GAAG,IAAI,CAACV,YAAY,CAACvG,EAAE,CAAC,CAAA;IACnC,MAAM7b,KAAK,GAAG8iB,OAAO,EAAE9d,MAAM,EAAE7L,QAAQ,CAACgc,OAAO,CAAC2N,OAAO,CAAC,CAAA;AACxD,IAAA,IAAI,OAAO9iB,KAAK,KAAK,QAAQ,EAAE,OAAO,EAAE,CAAA;AACxC,IAAA,MAAMuL,MAAM,GAAG,IAAI,CAACsX,SAAS,CAAChH,EAAE,CAAC,CAAA;IACjC,QAAQtQ,MAAM,GAAG,CAAC;AACjB,MAAA,KAAK,CAAC;AACL,QAAA,OAAO6V,iBAAiB,CAACphB,KAAK,GAAG,CAAC,CAAC,CAAA;AACpC,MAAA,KAAK,CAAC;AACL,QAAA,OAAOuhB,cAAc,CAACvhB,KAAK,GAAG,CAAC,CAAC,CAAA;AACjC,MAAA,KAAK,CAAC;AACL,QAAA,OAAOA,KAAK,GAAG,CAAC,GAAG,EAAE,CAAA;AACvB,KAAA;AAEA,IAAA,OAAO,EAAE,CAAA;AACV,GAAA;EACAmjB,oBAAoBA,CAACtH,EAAU,EAAE;IAChC,QAAQ,IAAI,CAACiG,SAAS;AACrB,MAAA,KAAK,CAAC;AACL,QAAA,OAAO,IAAI,CAACiB,YAAY,CAAClH,EAAE,CAAC,CAAA;AAC7B,MAAA,KAAK,CAAC;AACL,QAAA,OAAO,IAAI,CAACoH,YAAY,CAACpH,EAAE,CAAC,CAAA;AAC7B,MAAA,KAAK,CAAC;AACL,QAAA,OAAO,IAAI,CAACqH,YAAY,CAACrH,EAAE,CAAC,CAAA;AAC9B,KAAA;AACA,IAAA,OAAO,EAAE,CAAA;AACV,GAAA;AACD,CAAA;AAEO,MAAMuH,cAAc,GAAG,IAAIhf,SAAS,CAAc,gBAAgB,CAAC,CAAA;AACnE,MAAMif,iBAAiB,GAAG,IAAInR,MAAM,CAAC;AAC3CvY,EAAAA,GAAG,EAAEypB,cAAc;AACnBnrB,EAAAA,KAAK,EAAE;AACNka,IAAAA,IAAIA,CAACnF,CAAC,EAAA3C,IAAA,EAAW;MAAA,IAAT;AAAErE,QAAAA,GAAAA;AAAI,OAAC,GAAAqE,IAAA,CAAA;AACd,MAAA,MAAMiZ,WAAW,GAAG,IAAIzB,WAAW,CAACvM,aAAa,CAAC7c,MAAM,CAACuN,GAAG,EAAE,EAAE,CAAC,CAAC,CAAA;AAClE,MAAA,OAAOsd,WAAW,CAAA;KAClB;AACDhR,IAAAA,KAAKA,CAAC5Z,EAAE,EAAE0E,KAAK,EAAE2O,QAAQ,EAAE;AAC1BrT,MAAAA,EAAE,CAAC6qB,KAAK,CAAChE,OAAO,CAAEiE,IAAI,IAAK;QAC1B,IAAIA,IAAI,YAAYC,WAAW,EAAE;UAChC,MAAM;YAAEvc,IAAI;AAAEkQ,YAAAA,EAAAA;AAAG,WAAC,GAAGoM,IAAI,CAAA;AAEzBzX,UAAAA,QAAQ,CAAC/F,GAAG,CAAC6F,YAAY,CAAC3E,IAAI,EAAEkQ,EAAE,EAAE,CAAC3f,IAAI,EAAEwH,GAAG,KAAK;YAClD,IAAIxH,IAAI,CAAC+D,IAAI,CAACmF,IAAI,KAAK,SAAS,IAAI1B,GAAG,IAAIiI,IAAI,EAAE;cAChD9J,KAAK,CAACulB,UAAU,CAAClrB,IAAI,CAACN,KAAK,CAAC0kB,EAAE,CAAC,CAAA;AAChC,aAAA;AACD,WAAC,CAAC,CAAA;AACH,SAAA;AACD,OAAC,CAAC,CAAA;AAEF,MAAA,OAAOze,KAAK,CAAA;AACb,KAAA;GACA;AACDod,EAAAA,iBAAiBA,CAACkJ,YAAY,EAAE3X,QAAQ,EAAE0O,QAAQ,EAAE;AACnD,IAAA,IAAI/hB,EAA2B,CAAA;AAC/B,IAAA,KAAK,MAAMirB,WAAW,IAAID,YAAY,EAAE;AACvC,MAAA,MAAME,IAAI,GAAGD,WAAW,CAACvQ,OAAO,CAAC,eAAe,CAAC,CAAA;MAEjD,IAAIwQ,IAAI,IAAI,OAAOA,IAAI,CAAC3kB,GAAG,KAAK,WAAW,EAAE;QAC5CvG,EAAE,GAAG+hB,QAAQ,CAAC/hB,EAAE,CAAA;AAChB,QAAA,MAAMuG,GAAG,GAAG2kB,IAAI,CAAC3kB,GAAG,CAAA;QACpB,MAAM8F,IAAI,GAAGgH,QAAQ,CAAC/F,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAA;AACtC,QAAA,MAAM+F,MAAM,GAAGD,IAAI,CAACC,MAAM,CAAA;QAC1B,MAAMhF,KAAK,GAAG+E,IAAI,CAAC/E,KAAK,CAAC+E,IAAI,CAACF,KAAK,CAAC,CAAA;AACpC,QAAA,MAAMpN,IAAI,GAAGuN,MAAM,CAAC5K,KAAK,CAAC4F,KAAK,CAAC,CAAA;AAChC,QAAA,IAAIuL,MAAM,GAAGtM,GAAG,GAAGxH,IAAI,CAAC6I,QAAQ,CAAA;AAEhC,QAAA,KAAK,IAAI9C,CAAC,GAAGwC,KAAK,GAAG,CAAC,EAAExC,CAAC,GAAGwH,MAAM,CAACnE,UAAU,EAAErD,CAAC,EAAE,EAAE;AACnD,UAAA,MAAMslB,OAAO,GAAG9d,MAAM,CAAC5K,KAAK,CAACoD,CAAC,CAAC,CAAA;AAE/B,UAAA,IACCslB,OAAO,CAACtnB,IAAI,CAACmF,IAAI,KAAK,SAAS,IAC/BmiB,OAAO,CAAC3rB,KAAK,CAACykB,KAAK,IAAInkB,IAAI,CAACN,KAAK,CAACykB,KAAK,EAEvC,MAAA;UAEDljB,EAAE,GAAGA,EAAE,CAAC4T,aAAa,CACpBf,MAAM,EACNuX,OAAO,CAACtnB,IAAI,EACZ;YACC,GAAGsnB,OAAO,CAAC3rB,KAAK;YAChBsE,MAAM,EAAEmoB,IAAI,CAACnoB,MAAAA;AACd,WAAC,EACDqnB,OAAO,CAACjsB,KACT,CAAC,CAAA;UACD0U,MAAM,IAAIuX,OAAO,CAACxiB,QAAQ,CAAA;AAC3B,SAAA;AACA,QAAA,MAAA;AACD,OAAA;AACD,KAAA;AACA,IAAA,OAAO5H,EAAE,CAAA;AACV,GAAA;AACD,CAAC,CAAC;;AC5PF;AACA,MAAMmrB,YAAY,GAAG,CACpBC,sBAAsB,CAAC,OAAO,EAAEzrB,MAAM,CAACE,KAAK,CAACojB,OAAO,EAAE;AAAEC,EAAAA,KAAK,EAAE,CAAA;AAAE,CAAC,CAAC,EACnEkI,sBAAsB,CAAC,QAAQ,EAAEzrB,MAAM,CAACE,KAAK,CAACojB,OAAO,EAAE;AAAEC,EAAAA,KAAK,EAAE,CAAA;AAAE,CAAC,CAAC,EACpEkI,sBAAsB,CAAC,SAAS,EAAEzrB,MAAM,CAACE,KAAK,CAACojB,OAAO,EAAE;AAAEC,EAAAA,KAAK,EAAE,CAAA;AAAE,CAAC,CAAC,EACrEkI,sBAAsB,CAAC,UAAU,EAAEzrB,MAAM,CAACE,KAAK,CAACojB,OAAO,EAAE;AAAEC,EAAAA,KAAK,EAAE,CAAA;AAAE,CAAC,CAAC,EACtEkI,sBAAsB,CAAC,WAAW,EAAEzrB,MAAM,CAACE,KAAK,CAACojB,OAAO,EAAE;AAAEC,EAAAA,KAAK,EAAE,CAAA;AAAE,CAAC,CAAC,EACvEkI,sBAAsB,CAAC,YAAY,EAAEzrB,MAAM,CAACE,KAAK,CAACojB,OAAO,EAAE;AAAEC,EAAAA,KAAK,EAAE,CAAA;AAAE,CAAC,CAAC,CACxE,CAAA;AAED,MAAMmI,SAAS,GAAG,CACjBC,iBAAiB,CAAC,gBAAgB,EAAE3rB,MAAM,CAACE,KAAK,CAAC2jB,WAAW,CAAC,EAC7D8H,iBAAiB,CAAC,aAAa,EAAE3rB,MAAM,CAACE,KAAK,CAACwjB,YAAY,EAAGkI,KAAK,KAAM;AACvEjI,EAAAA,KAAK,EAAE,CAACiI,KAAK,CAAC,CAAC,CAAA;AAChB,CAAC,CAAC,CAAC,EACHD,iBAAiB,CAAC,YAAY,EAAE3rB,MAAM,CAACE,KAAK,CAAC4D,QAAQ,CAAC,CACtD,CAAA;AACD,MAAMyB,GAA2B,GAAG;AACnCsmB,EAAAA,UAAU,EAAE,YAAY;AACxBC,EAAAA,UAAU,EAAE,YAAY;AACxBC,EAAAA,IAAI,EAAE,MAAM;AACZC,EAAAA,MAAM,EAAE,QAAQ;AAChBC,EAAAA,MAAM,EAAE,QAAQ;AAChBC,EAAAA,IAAI,EAAE,MAAM;AACZC,EAAAA,GAAG,EAAE,KAAK;AACVC,EAAAA,IAAI,EAAE,MAAM;AACZC,EAAAA,GAAG,EAAE,KAAK;AACVC,EAAAA,QAAQ,EAAE,UAAU;AACpBC,EAAAA,IAAI,EAAE,MAAM;AACZ,EAAA,KAAK,EAAE,KAAK;AACZ,EAAA,IAAI,EAAE,IAAI;AACV/V,EAAAA,CAAC,EAAE,GAAG;AACNgW,EAAAA,EAAE,EAAE,YAAY;AAChBC,EAAAA,EAAE,EAAE,YAAY;AAChBC,EAAAA,EAAE,EAAE,QAAQ;AACZC,EAAAA,EAAE,EAAE,QAAQ;AACZC,EAAAA,EAAE,EAAE,MAAM;AACVC,EAAAA,SAAS,EAAE,WAAA;AACZ,CAAC,CAAA;AACD,MAAMC,SAAS,GAAIC,IAAY,IAAK;AACnC,EAAA,OAAOxnB,GAAG,CAACwnB,IAAI,CAAC,IAAI,WAAW,CAAA;AAChC,CAAC,CAAA;AAED,MAAMC,KAAK,GAAG,CACb,GAAGxB,YAAY,EACf,GAAGE,SAAS,EACZD,sBAAsB,CACrB,kBAAkB,EAClBzrB,MAAM,CAACE,KAAK,CAAC7B,SAAS,EACrButB,KAAK,KAAM;AAAE7sB,EAAAA,QAAQ,EAAE+tB,SAAS,CAAClB,KAAK,CAAC,CAAC,CAAC,CAAA;AAAE,CAAC,CAC9C,CAAC,EACDD,iBAAiB,CAAC,WAAW,EAAE3rB,MAAM,CAACE,KAAK,CAACmjB,UAAU,CAAC,EACvD,IAAI4J,SAAS,CAAC,UAAU,EAAE,CAACrtB,KAAK,EAAEgsB,KAAK,EAAE1iB,KAAK,EAAE8D,GAAG,KAAK;AACvD,EAAA,IAAI3M,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAA;EACjB,MAAM2U,MAAM,GAAGpV,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACjE,KAAK,CAAC,CAAA;AACvC,EAAA,MAAMyD,MAAM,GAAGqI,MAAM,CAACrI,MAAM,CAAA;EAC5B,IAAIA,MAAM,CAACxJ,IAAI,KAAKnD,MAAM,CAACE,KAAK,CAACojB,OAAO,EAAE,OAAO,IAAI,CAAA;AACrD,EAAA,MAAMC,KAAK,GAAG5W,MAAM,CAAC7N,KAAK,CAACykB,KAAK,CAAA;AAChC,EAAA,MAAM2J,UAAU,GAAGnC,cAAc,CAAC3Q,QAAQ,CAACxa,KAAK,CAAC,CAAA;AAEjDstB,EAAAA,UAAU,IACT7sB,EAAE,CAAC2W,WAAW,CACb9N,KAAK,EACL8D,GAAG,EACHhN,MAAM,CAACE,KAAK,CAACitB,UAAU,CAAC/sB,MAAM,CAC7B;AAAEmjB,IAAAA,KAAAA;AAAM,GAAC,EACTvjB,MAAM,CAACojB,IAAI,CAAC8J,UAAU,CAACpC,oBAAoB,CAACne,MAAM,CAAC7N,KAAK,CAAC0kB,EAAE,CAAC,CAC7D,CACD,CAAC,CAAA;AACF,EAAA,OAAOnjB,EAAE,CAAA;AACV,CAAC,CAAC,CACF,CAAA;AAEM,MAAM+sB,eAAe,GAAGA,MAAMC,UAAU,CAAC;AAAEL,EAAAA,KAAAA;AAAM,CAAC,CAAC;;AC7D1D,MAAMM,aAAa,GAAGA,CAACC,SAAqB,EAAEC,SAAiB,KAAc;AAC5E,EAAA,OAAO,CAAC5tB,KAAK,EAAEC,QAAQ,KAAK;IAC3B,IAAI;MAAEmP,KAAK;MAAEC,GAAG;AAAE7P,MAAAA,IAAAA;KAAM,GAAGQ,KAAK,CAAC0M,SAA0B,CAAA;IAC3D,IAAKlN,IAAI,IAAIA,IAAI,CAACquB,OAAO,IAAKze,KAAK,CAACxC,KAAK,GAAG,CAAC,IAAI,CAACwC,KAAK,CAAC0e,UAAU,CAACze,GAAG,CAAC,EACtE,OAAO,KAAK,CAAA;IACb,IAAI0e,WAAW,GAAG3e,KAAK,CAAC5P,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;IAChC,IAAI,CAACmuB,SAAS,CAACzG,QAAQ,CAAC6G,WAAW,CAACxqB,IAAI,CAAC,EAAE,OAAO,KAAK,CAAA;IAEvD,MAAMyqB,OAAO,GAAG5e,KAAK,CAAC5P,IAAI,CAAC,CAAC,CAAC,CAAC,CAACoJ,UAAU,CAAA;IACzC,IACCwG,KAAK,CAACrC,MAAM,CAACrO,OAAO,CAACyQ,IAAI,IAAI,CAAC,IAC9BC,KAAK,CAAC5P,IAAI,CAAC,CAAC,CAAC,CAAC,CAACoJ,UAAU,IAAIwG,KAAK,CAACyS,UAAU,CAAC,CAAC,CAAC,CAAC,EAChD;AACD,MAAA,IACCzS,KAAK,CAACxC,KAAK,IAAI,CAAC,IAChB,CAAC+gB,SAAS,CAACzG,QAAQ,CAAC9X,KAAK,CAAC5P,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC+D,IAAI,CAAC,IACxC6L,KAAK,CAACrH,KAAK,CAAC,CAAC,CAAC,CAAC,IAAIimB,OAAO,GAAG,CAAC,EAE9B,OAAO,KAAK,CAAA;AACb,MAAA,IAAI/tB,QAAQ,EAAE;AACb,QAAA,IAAIguB,IAAI,GAAG5c,QAAQ,CAAC0F,KAAK,CAAA;QACzB,IAAImX,WAAW,GAAG9e,KAAK,CAACrH,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGqH,KAAK,CAACrH,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;AAC/DyP,QAAAA,OAAO,CAACC,GAAG,CAACyW,WAAW,EAAE9e,KAAK,CAAC,CAAA;;AAE/B;AACA;AACA,QAAA,KAAK,IAAIzC,CAAC,GAAGyC,KAAK,CAACxC,KAAK,GAAGshB,WAAW,EAAEvhB,CAAC,IAAIyC,KAAK,CAACxC,KAAK,GAAG,CAAC,EAAED,CAAC,EAAE,EAChEshB,IAAI,GAAG5c,QAAQ,CAACpC,IAAI,CAACG,KAAK,CAAC5P,IAAI,CAACmN,CAAC,CAAC,CAACyE,IAAI,CAAC6c,IAAI,CAAC,CAAC,CAAA;AAC/CzW,QAAAA,OAAO,CAACC,GAAG,CAACwW,IAAI,EAAE7e,KAAK,CAAC5P,IAAI,CAAC,CAAC,CAAC,EAAE4P,KAAK,CAAC5P,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AAE/C,QAAA,IAAI2uB,UAAU,GACb/e,KAAK,CAACyS,UAAU,CAAC,CAAC,CAAC,CAAC,GAAGzS,KAAK,CAAC5P,IAAI,CAAC,CAAC,CAAC,CAAC,CAACoJ,UAAU,GAC7C,CAAC,GACDwG,KAAK,CAACyS,UAAU,CAAC,CAAC,CAAC,CAAC,GAAGzS,KAAK,CAAC5P,IAAI,CAAC,CAAC,CAAC,CAAC,CAACoJ,UAAU,GAC/C,CAAC,GACD,CAAC,CAAA;AACN;AACAqlB,QAAAA,IAAI,GAAGA,IAAI,CAAC7rB,MAAM,CAACiP,QAAQ,CAACpC,IAAI,CAAC0e,SAAS,CAAC,CAAC,CAAC,CAACvpB,aAAa,EAAE,CAAC,CAAC,CAAA;AAE/D,QAAA,IAAIkF,KAAK,GAAG8F,KAAK,CAACzB,MAAM,CAACyB,KAAK,CAACxC,KAAK,IAAIshB,WAAW,GAAG,CAAC,CAAC,CAAC,CAAA;AACzD,QAAA,MAAME,CAAC,GAAG,IAAI9c,KAAK,CAAC2c,IAAI,EAAE,CAAC,GAAGC,WAAW,EAAE,CAAC,CAAC,CAAA;AAC7C,QAAA,IAAIztB,EAAE,GAAGT,KAAK,CAACS,EAAE,CAACsB,OAAO,CAACuH,KAAK,EAAE8F,KAAK,CAACvB,KAAK,CAAC,CAACsgB,UAAU,CAAC,EAAEC,CAAC,CAAC,CAAA;QAC7D,IAAIjgB,GAAG,GAAG,CAAC,CAAC,CAAA;AACZ1N,QAAAA,EAAE,CAACsN,GAAG,CAAC6F,YAAY,CAACtK,KAAK,EAAE7I,EAAE,CAACsN,GAAG,CAACrP,OAAO,CAACyQ,IAAI,EAAE,CAAC3P,IAAI,EAAEwH,GAAG,KAAK;AAC9D,UAAA,IAAImH,GAAG,GAAG,CAAC,CAAC,EAAE,OAAO,KAAK,CAAA;AAC1B,UAAA,IAAI3O,IAAI,CAACqX,WAAW,IAAIrX,IAAI,CAACd,OAAO,CAACyQ,IAAI,IAAI,CAAC,EAAEhB,GAAG,GAAGnH,GAAG,GAAG,CAAC,CAAA;AAC9D,SAAC,CAAC,CAAA;QACF,IAAImH,GAAG,GAAG,CAAC,CAAC,EAAE1N,EAAE,CAACwS,YAAY,CAACrE,SAAS,CAACoD,IAAI,CAACvR,EAAE,CAACsN,GAAG,CAACR,OAAO,CAACY,GAAG,CAAC,CAAC,CAAC,CAAA;AAClElO,QAAAA,QAAQ,CAACQ,EAAE,CAACE,cAAc,EAAE,CAAC,CAAA;AAC9B,OAAA;AACA,MAAA,OAAO,IAAI,CAAA;AACZ,KAAA;IACA,IAAI0tB,QAAQ,GACXhf,GAAG,CAACrI,GAAG,IAAIoI,KAAK,CAAChC,GAAG,EAAE,GAAG2gB,WAAW,CAACO,cAAc,CAAC,CAAC,CAAC,CAACC,WAAW,GAAG,IAAI,CAAA;AAC1E,IAAA,IAAI9tB,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAC+U,MAAM,CAACpG,KAAK,CAACpI,GAAG,EAAEqI,GAAG,CAACrI,GAAG,CAAC,CAAA;AAC5C,IAAA,IAAIuX,KAAK,GAAG8P,QAAQ,GACjB,CACuD,IAAI,EAC3D;AAAE9qB,MAAAA,IAAI,EAAE8qB,QAAAA;KAAU,CAClB,GACArtB,SAAS,CAAA;AACZ,IAAA,IAAI,CAACwtB,QAAQ,CAAC/tB,EAAE,CAACsN,GAAG,EAAEqB,KAAK,CAACpI,GAAG,EAAE,CAAC,EAAEuX,KAAK,CAAC,EAAE,OAAO,KAAK,CAAA;IACxD,IAAIte,QAAQ,EAAEA,QAAQ,CAACQ,EAAE,CAACsK,KAAK,CAACqE,KAAK,CAACpI,GAAG,EAAE,CAAC,EAAEuX,KAAK,CAAC,CAAC5d,cAAc,EAAE,CAAC,CAAA;AACtE,IAAA,OAAO,IAAI,CAAA;GACX,CAAA;AACF,CAAC,CAAA;AAEM,MAAM8tB,QAAoC,GAAG;AACnD,EAAA,GAAGC,UAAU;EACbC,KAAK,EAAEC,aAAa,CACnBlB,aAAa,CAAC,CAACttB,MAAM,CAACE,KAAK,CAAC4jB,SAAS,EAAE9jB,MAAM,CAACE,KAAK,CAACsD,QAAQ,CAAC,CAAC,EAC9DirB,aAAa,EACbC,mBAAmB,EACnBC,cAAc,EACdC,UACD,CAAC;AACD,EAAA,OAAO,EAAEC,IAAI;AACb,EAAA,OAAO,EAAEC,IAAI;AACbC,EAAAA,GAAG,EAAEA,CAACnvB,KAAkB,EAAEC,QAAiC,KAAK;IAC/D,MAAM;MAAEmP,KAAK;AAAEC,MAAAA,GAAAA;KAAK,GAAGrP,KAAK,CAAC0M,SAAS,CAAA;IACtC,IAAI,CAAC0C,KAAK,CAAC0e,UAAU,CAACze,GAAG,CAAC,IAAID,KAAK,CAACrC,MAAM,CAACxJ,IAAI,KAAKnD,MAAM,CAACE,KAAK,CAAC7B,SAAS,EACzE,OAAO,KAAK,CAAA;AACb,IAAA,IAAIwB,QAAQ,EAAE;MACbA,QAAQ,CAACD,KAAK,CAACS,EAAE,CAAC2uB,UAAU,CAAC,IAAI,CAAC,CAAC,CAAA;AACnC,MAAA,OAAO,IAAI,CAAA;AACZ,KAAA;AACA,IAAA,OAAO,KAAK,CAAA;GACZ;AACD,EAAA,cAAc,EAAEjrB,cAAAA;AACjB,CAAC;;AC3FM,MAAMkrB,QAAQ,CAAC;AAErB3sB,EAAAA,WAAWA,CACFxC,IAAgB,EAChBsI,IAAkB,EACzB;IAAA,IAFOtI,CAAAA,IAAgB,GAAhBA,IAAgB,CAAA;IAAA,IAChBsI,CAAAA,IAAkB,GAAlBA,IAAkB,CAAA;AAE1B,IAAA,MAAM8mB,GAAG,GAAG7tB,QAAQ,CAACb,aAAa,CAAC,QAAQ,CAAC,CAAA;IAC5C0uB,GAAG,CAACttB,YAAY,CAAC,OAAO,EAAEwG,IAAI,CAAC1E,KAAK,IAAI,EAAE,CAAC,CAAA;AAC3CwrB,IAAAA,GAAG,CAACxtB,gBAAgB,CAAC,OAAO,EAAGgW,KAAiB,IAAK;MACpDtP,IAAI,CAAC+mB,OAAO,CACX;QACCrvB,IAAI,EAAE,IAAI,CAACA,IAAI;AACfF,QAAAA,KAAK,EAAE,IAAI,CAACE,IAAI,CAACF,KAAK;QACtBC,QAAQ,EAAEC,IAAI,CAACD,QAAQ;AACvBQ,QAAAA,EAAE,EAAEP,IAAI,CAACF,KAAK,CAACS,EAAAA;OACf,EACDqX,KACD,CAAC,CAAA;AACF,KAAC,CAAC,CAAA;AACFwX,IAAAA,GAAG,CAAC7rB,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC,CAAA;AAC9B4rB,IAAAA,GAAG,CAACE,SAAS,GAAGhnB,IAAI,CAACinB,KAAK,CAAA;IAC1B,IAAI,CAACjuB,GAAG,GAAG8tB,GAAG,CAAA;AACf,GAAA;AAEAlsB,EAAAA,MAAMA,CAAClD,IAAgB,EAAEF,KAAkB,EAAE;IAC5C,IAAI,CAACE,IAAI,GAAGA,IAAI,CAAA;AAChB,IAAA,IAAI,CAACsI,IAAI,CAACpF,MAAM,GAAGlD,IAAI,EAAEF,KAAK,EAAE,IAAI,CAACwB,GAAG,CAAC,CAAA;AAC1C,GAAA;AACD;;ACpCO,MAAMkuB,SAAS,CAAC;AAGtBhtB,EAAAA,WAAWA,CACFxC,IAAgB,EAChBsI,IAAmB,EAC1B;IAAA,IAFOtI,CAAAA,IAAgB,GAAhBA,IAAgB,CAAA;IAAA,IAChBsI,CAAAA,IAAmB,GAAnBA,IAAmB,CAAA;AAE3B,IAAA,MAAMhH,GAAG,GAAGZ,aAAa,CAAC,KAAK,EAAE;AAChCkD,MAAAA,KAAK,EAAE0E,IAAI,CAAC1E,KAAK,IAAI,EAAE,GAAG,aAAA;AAC3B,KAAC,CAAC,CAAA;IAEF,IAAI,CAACtC,GAAG,GAAGA,GAAG,CAAA;IACd,IAAI,CAACmuB,KAAK,GAAGnnB,IAAI,CAACmnB,KAAK,CAAChqB,GAAG,CACzBiqB,QAAQ,IAAK,IAAIP,QAAQ,CAAC,IAAI,CAACnvB,IAAI,EAAE0vB,QAAQ,CAC/C,CAAC,CAAA;AAED,IAAA,IAAI,CAACD,KAAK,CAACrI,OAAO,CAAE7B,IAAI,IAAKjkB,GAAG,CAACa,WAAW,CAACojB,IAAI,CAACjkB,GAAG,CAAC,CAAC,CAAA;AACxD,GAAA;AAEA4B,EAAAA,MAAMA,CAAClD,IAAgB,EAAEF,KAAkB,EAAE;IAC5C,IAAI,CAACE,IAAI,GAAGA,IAAI,CAAA;AAChB,IAAA,IAAI,CAACyvB,KAAK,CAACrI,OAAO,CAAE7B,IAAI,IAAKA,IAAI,CAACriB,MAAM,CAAClD,IAAI,EAAEF,KAAK,CAAC,CAAC,CAAA;AACvD,GAAA;AACD;;AC7BO,MAAM6vB,OAAO,GAAG,UACtB3vB,IAAgB,EAChB4vB,QAA2B,EAEvB;AAAA,EAAA,IADJ5wB,KAAmB,GAAA4B,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,IAAI,CAAA;EAE1B,MAAM;IAAEV,MAAM;IAAEsM,SAAS;AAAEjM,IAAAA,EAAAA;GAAI,GAAGP,IAAI,CAACF,KAAK,CAAA;EAC5C,MAAM;IAAEoP,KAAK;AAAEC,IAAAA,GAAAA;AAAI,GAAC,GAAG3C,SAAS,CAAA;EAEhC,MAAMsY,IAAI,GAAG5kB,MAAM,CAAC4kB,IAAI,CAAC8K,QAAQ,EAAE5wB,KAAK,CAAC,CAAA;AAEzCgB,EAAAA,IAAI,CAACD,QAAQ,CAACQ,EAAE,CAACsvB,OAAO,CAAC3gB,KAAK,CAACpI,GAAG,EAAEqI,GAAG,CAACrI,GAAG,EAAEge,IAAI,CAAC,CAAC,CAAA;AACnD,EAAA,OAAO,IAAI,CAAA;AACZ,CAAC,CAAA;AACM,MAAMgL,SAAS,GAAGA,CAAC9vB,IAAgB,EAAE4vB,QAA2B,KAAK;EAC3E,MAAM;IAAEpjB,SAAS;IAAEjM,EAAE;AAAEL,IAAAA,MAAAA;GAAQ,GAAGF,IAAI,CAACF,KAAK,CAAA;EAC5C,MAAM;IAAEoP,KAAK;AAAEC,IAAAA,GAAAA;AAAI,GAAC,GAAG3C,SAAS,CAAA;EAEhCxM,IAAI,CAACD,QAAQ,CACZQ,EAAE,CAACwvB,UAAU,CAAC7gB,KAAK,CAACpI,GAAG,EAAEqI,GAAG,CAACrI,GAAG,EAAEkpB,WAAW,CAACJ,QAAQ,EAAE1vB,MAAM,CAAC,CAChE,CAAC,CAAA;AACF,CAAC,CAAA;AAED,SAAS8vB,WAAWA,CAACJ,QAA2B,EAAE1vB,MAAc,EAAE;AACjE,EAAA,OAAO,OAAO0vB,QAAQ,KAAK,QAAQ,GAAG1vB,MAAM,CAACxB,KAAK,CAACkxB,QAAQ,CAAC,GAAGA,QAAQ,CAAA;AACxE,CAAA;AAEA,SAASK,YAAYA,CAACjwB,IAAgB,EAAE4vB,QAA2B,EAAW;EAC7E,MAAM;IAAE1vB,MAAM;IAAEsM,SAAS;AAAEjM,IAAAA,EAAAA;GAAI,GAAGP,IAAI,CAACF,KAAK,CAAA;AAC5C,EAAA,IAAI,EAAE0M,SAAS,YAAYmD,aAAa,CAAC,EAAE,OAAO,KAAK,CAAA;EAEvD,MAAM;IAAET,KAAK;AAAEC,IAAAA,GAAAA;AAAI,GAAC,GAAG3C,SAAS,CAAA;AAChC,EAAA,MAAM0jB,YAAY,GAAGF,WAAW,CAACJ,QAAQ,EAAE1vB,MAAM,CAAC,CAAA;EAClD,IAAIiwB,QAAQ,GAAG,IAAI,CAAA;AAEnB5vB,EAAAA,EAAE,CAACsN,GAAG,CAAC6F,YAAY,CAACxE,KAAK,CAACpI,GAAG,EAAEqI,GAAG,CAACrI,GAAG,EAAGxH,IAAI,IAAK;AACjD,IAAA,IAAI,CAAC6wB,QAAQ,EAAE,OAAO,KAAK,CAAA;IAC3B,IAAI7wB,IAAI,CAAC8wB,QAAQ,EAAE;MAClB,MAAMtL,IAAI,GAAGoL,YAAY,CAACG,OAAO,CAAC/wB,IAAI,CAACZ,KAAK,CAAC,CAAA;AAC7C,MAAA,IAAI,CAAComB,IAAI,EAAEqL,QAAQ,GAAG,KAAK,CAAA;AAC5B,KAAA;AACD,GAAC,CAAC,CAAA;AAEF,EAAA,OAAOA,QAAQ,CAAA;AAChB,CAAA;AAEA,SAASG,UAAUA,CAACtwB,IAAgB,EAAE4vB,QAA2B,EAAE;EAClE,IAAIK,YAAY,CAACjwB,IAAI,EAAE4vB,QAAQ,CAAC,EAAE,OAAOE,SAAS,CAAC9vB,IAAI,EAAE4vB,QAAQ,CAAC,CAAC,KAC9D,OAAOD,OAAO,CAAC3vB,IAAI,EAAE4vB,QAAQ,CAAC,CAAA;AACpC,CAAA;AAEO,MAAMW,SAAS,GAAIvwB,IAAgB,IAAKswB,UAAU,CAACtwB,IAAI,EAAE,MAAM,CAAC,CAAA;AAChE,MAAMwwB,cAAc,GAAIxwB,IAAgB,IAC9CswB,UAAU,CAACtwB,IAAI,EAAE,WAAW,CAAC,CAAA;AACvB,MAAMywB,gBAAgB,GAAIzwB,IAAgB,IAChDswB,UAAU,CAACtwB,IAAI,EAAE,aAAa,CAAC,CAAA;AACzB,MAAM0wB,SAAS,GAAIC,GAAW,IAAM3wB,IAAgB,IAC1D2vB,OAAO,CAAC3vB,IAAI,EAAE,MAAM,EAAE;AAAE4kB,EAAAA,IAAI,EAAE+L,GAAAA;AAAI,CAAC,CAAC,CAAA;AAE9B,MAAMC,UAAU,GACrB5X,KAAoB,IACrB9G,IAAA,IAAqC;EAAA,IAApC;IAAEpS,KAAK;AAAEC,IAAAA,QAAAA;AAAqB,GAAC,GAAAmS,IAAA,CAAA;EAC/B,MAAM;IAAEhS,MAAM;AAAEsM,IAAAA,SAAAA;AAAU,GAAC,GAAG1M,KAAK,CAAA;AACnC,EAAA,MAAM8vB,QAAQ,GAAG1vB,MAAM,CAACxB,KAAK,CAACsa,KAAK,CAAA;AACnC,EAAA,IAAIzY,EAAE,GAAGT,KAAK,CAACS,EAAE,CAAA;AACjB+W,EAAAA,OAAO,CAACC,GAAG,CAAC/K,SAAS,EAAE,KAAK,CAAC,CAAA;EAC7B,MAAM;IAAEuC,IAAI;AAAEkQ,IAAAA,EAAAA;AAAG,GAAC,GAAGzS,SAAS,CAAA;AAC9B1M,EAAAA,KAAK,CAAC+N,GAAG,CAAC6F,YAAY,CAAC3E,IAAI,EAAEkQ,EAAE,EAAE,CAAC3f,IAAI,EAAEwH,GAAG,KAAK;IAC/C,IAAIxH,IAAI,CAACuxB,MAAM,EAAE;AAChB,MAAA,IAAIC,YAAY,GAAGxxB,IAAI,CAACZ,KAAK,CAACqyB,IAAI,CAAEjM,IAAI,IAAKA,IAAI,CAACzhB,IAAI,KAAKusB,QAAQ,CAAC,CAAA;MACpE,IAAI5wB,KAAK,GAAG8xB,YAAY,GAAG;QAAE,GAAGA,YAAY,CAAC9xB,KAAK;QAAE,GAAGga,KAAAA;AAAM,OAAC,GAAGA,KAAK,CAAA;AACtEzY,MAAAA,EAAE,GAAGA,EAAE,CAACsvB,OAAO,CACd/oB,GAAG,GAAGiI,IAAI,GAAGA,IAAI,GAAGjI,GAAG,EACvBA,GAAG,GAAGxH,IAAI,CAAC6I,QAAQ,GAAG8W,EAAE,GAAGA,EAAE,GAAGnY,GAAG,GAAGxH,IAAI,CAAC6I,QAAQ,EACnDynB,QAAQ,CAACtvB,MAAM,CAACtB,KAAK,CACtB,CAAC,CAAA;AACF,KAAA;AACD,GAAC,CAAC,CAAA;EACFe,QAAQ,CAACQ,EAAE,CAAC,CAAA;AACZ,EAAA,OAAO,IAAI,CAAA;AACZ,CAAC,CAAA;AAEK,MAAMywB,UAAU,GAAI/L,KAAc,IAAK2L,UAAU,CAAC;AAAE3L,EAAAA,KAAAA;AAAM,CAAC,CAAC;;AC9E5D,MAAMgM,QAAQ,CAAuB;AAG3CzuB,EAAAA,WAAWA,CAACxC,IAAgB,EAAEsI,IAAU,EAAE;AACzC,IAAA,IAAI,CAACmnB,KAAK,GAAGnnB,IAAI,CAACmnB,KAAK,CAAChqB,GAAG,CAAE8f,IAAI,IAAK,IAAI4J,QAAQ,CAACnvB,IAAI,EAAEulB,IAAI,CAAC,CAAC,CAAA;AAC/D,IAAA,IAAI,CAACjkB,GAAG,GAAGZ,aAAa,CACvB,KAAK,EACL;AAAEkD,MAAAA,KAAK,EAAE0E,IAAI,CAAC1E,KAAK,IAAI,cAAA;AAAe,KAAC,EACvC,IAAI,CAAC6rB,KAAK,CAAChqB,GAAG,CAAE8f,IAAI,IAAKA,IAAI,CAACjkB,GAAG,CAClC,CAAC,CAAA;AACF,GAAA;AAEA4B,EAAAA,MAAMA,CAAClD,IAAgB,EAAEF,KAAkB,EAAE;AAC5C,IAAA,IAAI,CAAC2vB,KAAK,CAACrI,OAAO,CAAE7B,IAAI,IAAKA,IAAI,CAACriB,MAAM,CAAClD,IAAI,EAAEF,KAAK,CAAC,CAAC,CAAA;AACvD,GAAA;EAEAqY,OAAOA,GAAG,EAAC;AACZ;;ACbO,MAAM+Y,OAAO,CAAC;AAIpBtf,EAAAA,OAAO,GAAY,KAAK,CAAA;AAExBpP,EAAAA,WAAWA,GAAG;AACb,IAAA,IAAI,CAAC2uB,OAAO,GAAGzwB,aAAa,CAAC,KAAK,EAAE;AAAEkD,MAAAA,KAAK,EAAE,YAAA;AAAa,KAAC,CAAC,CAAA;AAC5D,IAAA,IAAI,CAACstB,OAAO,CAACE,SAAS,EAAE;AACvB,MAAA,MAAMA,SAAS,GAAG1wB,aAAa,CAAC,KAAK,EAAE;AAAEkD,QAAAA,KAAK,EAAE,sBAAA;AAAuB,OAAC,CAAC,CAAA;MACzEstB,OAAO,CAACE,SAAS,GAAGA,SAAS,CAAA;AAC7B7vB,MAAAA,QAAQ,CAAC8vB,IAAI,CAAClvB,WAAW,CAACivB,SAAS,CAAC,CAAA;AACrC,KAAA;IACAF,OAAO,CAACE,SAAS,CAACjvB,WAAW,CAAC,IAAI,CAACgvB,OAAO,CAAC,CAAA;IAC3C,IAAI,CAACA,OAAO,CAACvvB,gBAAgB,CAAC,SAAS,EAAG2C,CAAC,IAAK;MAC/CA,CAAC,CAAC+sB,eAAe,EAAE,CAAA;MACnB/sB,CAAC,CAACiY,cAAc,EAAE,CAAA;AACnB,KAAC,CAAC,CAAA;AACH,GAAA;EAEAhe,OAAOA,CAAC8C,GAAgB,EAAE;AACzB,IAAA,IAAI,CAAC6vB,OAAO,CAACI,eAAe,CAACjwB,GAAG,CAAC,CAAA;AAClC,GAAA;EAEAkwB,MAAMA,CAAChqB,IAAU,EAAE;AAClB,IAAA,IAAI,CAAC2pB,OAAO,CAACnY,KAAK,CAACyY,UAAU,GAAG,SAAS,CAAA;AACzC,IAAA,IAAI,CAACN,OAAO,CAACnY,KAAK,CAAC0Y,OAAO,GAAG,GAAG,CAAA;IAChC,IAAI,CAAC9f,OAAO,GAAG,IAAI,CAAA;IAEnB,MAAM;MAAEpM,MAAM;AAAED,MAAAA,KAAAA;AAAM,KAAC,GAAG,IAAI,CAAC4rB,OAAO,CAAC5V,qBAAqB,EAAE,CAAA;IAC9D,MAAMvV,GAAG,GAAGwB,IAAI,CAACxB,GAAG,GAAGR,MAAM,GAAG,CAAC,CAAA;AACjC,IAAA,MAAMM,IAAI,GAAG0B,IAAI,CAAC1B,IAAI,GAAG,CAAC0B,IAAI,CAACjC,KAAK,GAAGA,KAAK,IAAI,CAAC,CAAA;IACjD,IAAI,CAAC4rB,OAAO,CAACnY,KAAK,CAAChT,GAAG,GAAGA,GAAG,GAAG,IAAI,CAAA;IACnC,IAAI,CAACmrB,OAAO,CAACnY,KAAK,CAAClT,IAAI,GAAGA,IAAI,GAAG,IAAI,CAAA;AACtC,GAAA;AAEA6rB,EAAAA,IAAIA,CAAC1uB,MAAmB,EAAEzE,OAA8B,EAAE;AACzD,IAAA,IAAI,CAAC,IAAI,CAAC2yB,OAAO,EAAE,OAAA;IACnB,IAAI,CAAC3yB,OAAO,EAAE,CACb,MAAM,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE,IAAI,CAAC2yB,OAAO,CAACS,SAAS,GAAGpzB,OAAO,CAAC,KACpE;AACJ,MAAA,IAAI,CAAC2yB,OAAO,CAACI,eAAe,CAAC/yB,OAAO,CAAC,CAAA;AACtC,KAAA;AACA,IAAA,IAAI,CAAC2yB,OAAO,CAACnY,KAAK,CAACyY,UAAU,GAAG,SAAS,CAAA;AACzC,IAAA,IAAI,CAACN,OAAO,CAACnY,KAAK,CAAC0Y,OAAO,GAAG,GAAG,CAAA;IAChC,IAAI,CAAC9f,OAAO,GAAG,IAAI,CAAA;AAEnB,IAAA,MAAMpK,IAAI,GAAGvE,MAAM,CAACsY,qBAAqB,EAAE,CAAA;IAC3C,MAAM;MAAE/V,MAAM;AAAED,MAAAA,KAAAA;AAAM,KAAC,GAAG,IAAI,CAAC4rB,OAAO,CAAC5V,qBAAqB,EAAE,CAAA;IAC9D,MAAMvV,GAAG,GAAGwB,IAAI,CAACxB,GAAG,GAAGR,MAAM,GAAG,CAAC,CAAA;AACjC,IAAA,MAAMM,IAAI,GAAG0B,IAAI,CAAC1B,IAAI,GAAG,CAAC0B,IAAI,CAACjC,KAAK,GAAGA,KAAK,IAAI,CAAC,CAAA;IACjD,IAAI,CAAC4rB,OAAO,CAACnY,KAAK,CAAChT,GAAG,GAAGA,GAAG,GAAG,IAAI,CAAA;IACnC,IAAI,CAACmrB,OAAO,CAACnY,KAAK,CAAClT,IAAI,GAAGA,IAAI,GAAG,IAAI,CAAA;AACtC,GAAA;AAEA+rB,EAAAA,IAAIA,GAAG;AACN,IAAA,IAAI,CAAC,IAAI,CAACV,OAAO,EAAE,OAAA;AACnB,IAAA,IAAI,CAACA,OAAO,CAACnY,KAAK,CAAC0Y,OAAO,GAAG,GAAG,CAAA;AAChC,IAAA,IAAI,CAACP,OAAO,CAACnY,KAAK,CAACyY,UAAU,GAAG,QAAQ,CAAA;IACxC,IAAI,CAAC7f,OAAO,GAAG,KAAK,CAAA;AACrB,GAAA;AAEAuG,EAAAA,OAAOA,GAAG;IACT,IAAI,CAACgZ,OAAO,CAACjY,UAAU,EAAEC,WAAW,CAAC,IAAI,CAACgY,OAAO,CAAC,CAAA;AACnD,GAAA;EAEA,OAAOnsB,GAAGA,GAAG;AACZ,IAAA,IAAI+iB,QAAQ,GAAGmJ,OAAO,CAACnJ,QAAQ,CAAA;IAC/B,IAAI,CAACA,QAAQ,EAAE;AACdA,MAAAA,QAAQ,GAAG,IAAImJ,OAAO,EAAE,CAAA;MACxBA,OAAO,CAACnJ,QAAQ,GAAGA,QAAQ,CAAA;AAC5B,KAAA;AACA,IAAA,OAAOA,QAAQ,CAAA;AAChB,GAAA;AACD;;AChEO,MAAM+J,OAAO,CAAuB;AAG1CtvB,EAAAA,WAAWA,CACFxC,IAAgB,EAChBsI,IAAiB,EACxB;IAAA,IAFOtI,CAAAA,IAAgB,GAAhBA,IAAgB,CAAA;IAAA,IAChBsI,CAAAA,IAAiB,GAAjBA,IAAiB,CAAA;AAEzB,IAAA,MAAMhH,GAAG,GAAGC,QAAQ,CAACb,aAAa,CAAC,KAAK,CAAC,CAAA;AACzCY,IAAAA,GAAG,CAACQ,YAAY,CAAC,OAAO,EAAE,IAAI,CAACwG,IAAI,CAAC1E,KAAK,IAAI,EAAE,CAAC,CAAA;AAChDtC,IAAAA,GAAG,CAACiC,SAAS,CAACC,GAAG,CAAC,SAAS,CAAC,CAAA;IAC5B,IAAI,CAAClC,GAAG,GAAGA,GAAG,CAAA;IAEd,IAAI,CAACywB,MAAM,GAAG,IAAI,CAACzpB,IAAI,CAACypB,MAAM,CAACtsB,GAAG,CAChCusB,aAAa,IAAK,IAAIxC,SAAS,CAAC,IAAI,CAACxvB,IAAI,EAAEgyB,aAAa,CAC1D,CAAC,CAAA;AACD,IAAA,IAAI,CAACD,MAAM,CAAC3K,OAAO,CAAE6K,SAAS,IAAK3wB,GAAG,CAACa,WAAW,CAAC8vB,SAAS,CAAC3wB,GAAG,CAAC,CAAC,CAAA;IAClE,IAAI,CAACqB,MAAM,EAAE,CAAA;AACd,GAAA;AAEAA,EAAAA,MAAMA,GAAG;AACR,IAAA,IAAI,IAAI,CAAC3C,IAAI,CAACsB,GAAG,CAAC4X,UAAU,EAAE;AAC7B,MAAA,IAAI,CAAClZ,IAAI,CAACsB,GAAG,CAAC4X,UAAU,CAACgZ,YAAY,CAAC,IAAI,CAAC5wB,GAAG,EAAE,IAAI,CAACtB,IAAI,CAACsB,GAAG,CAAC,CAAA;AAC/D,KAAA;AACD,GAAA;AAEA4B,EAAAA,MAAMA,CAAClD,IAAgB,EAAEF,KAAkB,EAAE;IAC5C,IAAI,CAACE,IAAI,GAAGA,IAAI,CAAA;AAChB,IAAA,IAAI,CAAC+xB,MAAM,CAAC3K,OAAO,CAAE3oB,KAAK,IAAKA,KAAK,CAACyE,MAAM,CAAClD,IAAI,EAAEF,KAAK,CAAC,CAAC,CAAA;AAC1D,GAAA;AAEAqY,EAAAA,OAAOA,GAAG;IACT,IAAI,CAAC7W,GAAG,CAAC4X,UAAU,EAAEC,WAAW,CAAC,IAAI,CAAC7X,GAAG,CAAC,CAAA;AAC3C,GAAA;AACD,CAAA;AAEO,MAAM6wB,YAAY,GAAGA,MAAM;AACjC,EAAA,IAAIC,OAAuB,CAAA;AAC3B,EAAA,MAAMC,aAAa,GAAG,IAAItY,MAAM,CAAC;AAChCvY,IAAAA,GAAG,EAAE,IAAIyK,SAAS,CAAC,SAAS,CAAC;IAE7BjM,IAAIA,CAACA,IAAI,EAAE;AACVoyB,MAAAA,OAAO,GAAG,IAAIN,OAAO,CAAC9xB,IAAI,EAAE;AAC3B+xB,QAAAA,MAAM,EAAE,CACP;AACCtC,UAAAA,KAAK,EAAE,CACN;AACCF,YAAAA,KAAK,EAAE,OAAO;AACdF,YAAAA,OAAOA,CAAAnd,IAAA,EAA4B0F,KAAK,EAAE;cAAA,IAAlC;gBAAE9X,KAAK;gBAAEC,QAAQ;AAAEC,gBAAAA,IAAAA;AAAK,eAAC,GAAAkS,IAAA,CAAA;AAChCrS,cAAAA,kBAAkB,CAACC,KAAK,EAAEC,QAAc,CAAC,CAAA;AAC1C,aAAA;AACD,WAAC,EACD;AACCwvB,YAAAA,KAAK,EAAE,YAAY;YACnBF,OAAOA,CAAA/c,KAAA,EAA4B;cAAA,IAA3B;gBAAExS,KAAK;gBAAEC,QAAQ;AAAEC,gBAAAA,IAAAA;AAAK,eAAC,GAAAsS,KAAA,CAAA;AAChCrO,cAAAA,cAAc,CAACnE,KAAK,EAAEC,QAAc,CAAC,CAAA;AACtC,aAAA;AACD,WAAC,EACD;AACCwvB,YAAAA,KAAK,EAAE,MAAM;YACbF,OAAOA,CAAA5Z,KAAA,EAA4B;cAAA,IAA3B;gBAAE3V,KAAK;gBAAEC,QAAQ;AAAEC,gBAAAA,IAAAA;AAAK,eAAC,GAAAyV,KAAA,CAAA;cAChChB,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC3U,KAAK,EAAEC,QAAQ,EAAEC,IAAI,CAAC,CAAA;AACxC;AACD,aAAA;AACD,WAAC,EACD;AACCuvB,YAAAA,KAAK,EAAE,OAAO;YACdF,OAAOA,CAAAvZ,KAAA,EAA4B;cAAA,IAA3B;gBAAEhW,KAAK;gBAAEC,QAAQ;AAAEC,gBAAAA,IAAAA;AAAK,eAAC,GAAA8V,KAAA,CAAA;AAChCc,cAAAA,UAAU,CAAC9W,KAAK,EAAEC,QAAc,CAAC,CAAA;AAClC,aAAA;AACD,WAAC,EACD;AACCwvB,YAAAA,KAAK,EAAE,MAAM;YACbF,OAAOA,CAAAhZ,KAAA,EAAW;cAAA,IAAV;AAAErW,gBAAAA,IAAAA;AAAK,eAAC,GAAAqW,KAAA,CAAA;AACf,cAAA,MAAMqM,OAAO,GAAG4P,MAAM,CAAC,iBAAiB,CAAC,CAAA;AACzC;;AAEA,cAAA,IAAI5P,OAAO,EAAEQ,UAAU,CAACljB,IAAI,EAAE0iB,OAAO,CAAC,CAAA;AACvC,aAAA;WACA,CAAA;SAEF,CAAA;AAEH,OAAC,CAAC,CAAA;MAEF,MAAM6P,WAAW,GAAIhuB,CAAQ,IAAK;QACjC,MAAM;AAAEsT,UAAAA,OAAO,EAAEgJ,EAAE;AAAE/I,UAAAA,OAAO,EAAEgJ,EAAAA;AAAG,SAAC,GAAGvc,CAAe,CAAA;QACpD,MAAMiuB,SAAS,GAAIjuB,CAAQ,IAAK;UAC/B,MAAM;AAAEsT,YAAAA,OAAO,EAAEoJ,EAAE;AAAEnJ,YAAAA,OAAO,EAAEoJ,EAAAA;AAAG,WAAC,GAAG3c,CAAe,CAAA;AACpD,UAAA,MAAM0J,GAAG,GAAGjO,IAAI,CAACF,KAAK,CAAC0M,SAAS,CAAA;UAChC,IAAI,CAACyB,GAAG,CAAC4I,KAAK,KAAKlQ,IAAI,CAACwa,GAAG,CAACN,EAAE,GAAGI,EAAE,CAAC,GAAG,CAAC,IAAIta,IAAI,CAACwa,GAAG,CAACL,EAAE,GAAGI,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE;YACnE,MAAMnS,IAAI,GAAG/O,IAAI,CAACyyB,WAAW,CAACxkB,GAAG,CAACiB,KAAK,CAACpI,GAAG,CAAC,CAAA;YAC5C,MAAMmY,EAAE,GAAGjf,IAAI,CAACyyB,WAAW,CAACxkB,GAAG,CAACkB,GAAG,CAACrI,GAAG,CAAC,CAAA;AACxC,YAAA,MAAMU,IAAI,GAAG;AACZ1B,cAAAA,IAAI,EAAEa,IAAI,CAACC,GAAG,CAACmI,IAAI,CAACjJ,IAAI,EAAEmZ,EAAE,CAACnZ,IAAI,CAAC;AAClCI,cAAAA,KAAK,EAAES,IAAI,CAACE,GAAG,CAACkI,IAAI,CAAC7I,KAAK,EAAE+Y,EAAE,CAAC/Y,KAAK,CAAC;AACrCF,cAAAA,GAAG,EAAEW,IAAI,CAACC,GAAG,CAACmI,IAAI,CAAC/I,GAAG,EAAEiZ,EAAE,CAACjZ,GAAG,CAAC;cAC/BI,MAAM,EAAEO,IAAI,CAACE,GAAG,CAACkI,IAAI,CAAC3I,MAAM,EAAE6Y,EAAE,CAAC7Y,MAAM,CAAA;aACvC,CAAA;YACD+qB,OAAO,CAACK,MAAM,CAAC;AACd,cAAA,GAAGhqB,IAAI;AACPjC,cAAAA,KAAK,EAAEoB,IAAI,CAACwa,GAAG,CAAC3Z,IAAI,CAAC1B,IAAI,GAAG0B,IAAI,CAACtB,KAAK,CAAC;cACvCV,MAAM,EAAEmB,IAAI,CAACwa,GAAG,CAAC3Z,IAAI,CAACxB,GAAG,GAAGwB,IAAI,CAACpB,MAAM,CAAA;AACxC,aAAC,CAAC,CAAA;AACH,WAAC,MAAM,IAAI+qB,OAAO,CAACvf,OAAO,EAAE;YAC3Buf,OAAO,CAACU,IAAI,EAAE,CAAA;AACf,WAAA;UACA7xB,IAAI,CAACwhB,IAAI,CAACpJ,mBAAmB,CAAC,SAAS,EAAEoa,SAAS,CAAC,CAAA;SACnD,CAAA;QACDxyB,IAAI,CAACwhB,IAAI,CAAC5f,gBAAgB,CAAC,SAAS,EAAE4wB,SAAS,CAAC,CAAA;OAChD,CAAA;MACDxyB,IAAI,CAACwhB,IAAI,CAAC5f,gBAAgB,CAAC,WAAW,EAAE2wB,WAAW,CAAC,CAAA;AACpD,MAAA,MAAMG,QAAQ,GAAG,IAAIzB,QAAQ,CAACjxB,IAAI,EAAE;AACnCyvB,QAAAA,KAAK,EAAE,CACN;AACCF,UAAAA,KAAK,EAAE,IAAI;UACXF,OAAOA,CAAAsD,KAAA,EAAW;YAAA,IAAV;AAAE3yB,cAAAA,IAAAA;AAAK,aAAC,GAAA2yB,KAAA,CAAA;YACfpC,SAAS,CAACvwB,IAAI,CAAC,CAAA;AAChB,WAAA;AACD,SAAC,EACD;AACCuvB,UAAAA,KAAK,EAAE,IAAI;UACXF,OAAOA,CAAAuD,KAAA,EAAW;YAAA,IAAV;AAAE5yB,cAAAA,IAAAA;AAAK,aAAC,GAAA4yB,KAAA,CAAA;AACflC,YAAAA,SAAS,CAAC,eAAe,CAAC,CAAC1wB,IAAI,CAAC,CAAA;AACjC,WAAA;AACD,SAAC,EACD;AACCuvB,UAAAA,KAAK,EAAE,KAAK;UACZF,OAAOA,CAAAwD,KAAA,EAAW;YAAA,IAAV;AAAE7yB,cAAAA,IAAAA;AAAK,aAAC,GAAA6yB,KAAA,CAAA;YACfrC,cAAc,CAACxwB,IAAI,CAAC,CAAA;AACrB,WAAA;AACD,SAAC,EACD;AACCuvB,UAAAA,KAAK,EAAE,KAAK;UACZF,OAAOA,CAAAyD,KAAA,EAAW;YAAA,IAAV;AAAE9yB,cAAAA,IAAAA;AAAK,aAAC,GAAA8yB,KAAA,CAAA;YACfrC,gBAAgB,CAACzwB,IAAI,CAAC,CAAA;AACvB,WAAA;AACD,SAAC,EACD;AACCuvB,UAAAA,KAAK,EAAE,IAAI;UACXF,OAAOA,CAAA0D,MAAA,EAAW;YAAA,IAAV;AAAE/yB,cAAAA,IAAAA;AAAK,aAAC,GAAA+yB,MAAA,CAAA;AACf/B,YAAAA,UAAU,CAAC,KAAK,CAAC,CAAChxB,IAAI,CAAC,CAAA;AACxB,WAAA;AACD,SAAC,EACD;AACCuvB,UAAAA,KAAK,EAAE,KAAK;UACZF,OAAOA,CAAA2D,MAAA,EAAW;YAAA,IAAV;AAAEhzB,cAAAA,IAAAA;AAAK,aAAC,GAAAgzB,MAAA,CAAA;AACfhC,YAAAA,UAAU,EAAE,CAAChxB,IAAI,CAAC,CAAA;AACnB,WAAA;SACA,CAAA;AAEH,OAAC,CAAC,CAAA;AACF,MAAA,MAAMmxB,OAAO,GAAG,IAAID,OAAO,EAAE,CAAA;AAC7BC,MAAAA,OAAO,CAAC3yB,OAAO,CAACk0B,QAAQ,CAACpxB,GAAG,CAAC,CAAA;MAC7B,OAAO;QACNA,GAAG,EAAE8wB,OAAO,CAAC9wB,GAAG;AAChB4B,QAAAA,MAAMA,CAAClD,IAAI,EAAEizB,SAAS,EAAE;AACvB,UAAA,MAAMhlB,GAAG,GAAGjO,IAAI,CAACF,KAAK,CAAC0M,SAAS,CAAA;UAChC,IAAI2kB,OAAO,CAACvf,OAAO,IAAI,CAAC3D,GAAG,CAACmB,EAAE,CAAC6jB,SAAS,CAACzmB,SAAS,CAAC,IAAIyB,GAAG,CAAC4I,KAAK,EAC/Dsa,OAAO,CAACU,IAAI,EAAE,CAAA;AACfO,UAAAA,OAAO,EAAElvB,MAAM,CAAClD,IAAI,EAAEizB,SAAS,CAAC,CAAA;SAChC;AACD9a,QAAAA,OAAOA,GAAG;UACTia,OAAO,EAAEja,OAAO,EAAE,CAAA;UAClBnY,IAAI,CAACwhB,IAAI,CAACpJ,mBAAmB,CAAC,WAAW,EAAEma,WAAW,CAAC,CAAA;AACxD,SAAA;OACA,CAAA;AACF,KAAA;AACD,GAAC,CAAC,CAAA;EACF,OAAO;AACNzY,IAAAA,MAAM,EAAEuY,aAAa;AACrBnvB,IAAAA,MAAM,EAAEA,CAAClD,IAAgB,EAAEF,KAAkB,KAC5CsyB,OAAO,EAAElvB,MAAM,CAAClD,IAAI,EAAEF,KAAK,CAAC;IAC7BqY,OAAO,EAAEA,MAAM;MACdia,OAAO,EAAEja,OAAO,EAAE,CAAA;AAClBia,MAAAA,OAAO,GAAG,IAAI,CAAA;AACf,KAAA;GACA,CAAA;AACF,CAAC;;;;;ACtMD;CACA,IAAI,OAAO,GAAGc,WAAkB,CAAC;AACjC;AACA,CAAA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,KAAK,EAAE;EACrC,UAAU,EAAE,IAAI;EAChB,GAAG,EAAE,YAAY;AAClB,GAAE,OAAO,OAAO,CAAC,aAAa,CAAC;GAC7B;AACF,EAAC,CAAC,CAAC;AACH,CAAA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,QAAQ,EAAE;EACxC,UAAU,EAAE,IAAI;EAChB,GAAG,EAAE,YAAY;AAClB,GAAE,OAAO,OAAO,CAAC,aAAa,CAAC;GAC7B;AACF,EAAC,CAAC,CAAC;AACH,CAAA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,MAAM,EAAE;EACtC,UAAU,EAAE,IAAI;EAChB,GAAG,EAAE,YAAY;AAClB,GAAE,OAAO,OAAO,CAAC,aAAa,CAAC;GAC7B;AACF,EAAC,CAAC,CAAC;AACH,CAAA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,UAAU,EAAE;EAC1C,UAAU,EAAE,IAAI;EAChB,GAAG,EAAE,YAAY;AAClB,GAAE,OAAO,OAAO,CAAC,QAAQ,CAAC;GACxB;AACF,EAAC,CAAC,CAAC;AACH,CAAA;;;AC5BA,IAAI,QAAQ,GAAG,OAAO,CAAC;AAEhB,MAAM,WAAW,GAAG,MAAM,QAAQ;;ACDzC,MAAM,aAAa,GAAG,CAAC,KAAK,MAAMC,cAAI,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,4BAA4B,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,KAAK,EAAE,QAAQ,EAAEA,cAAI,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,8GAA8G,EAAE,CAAC,EAAE,CAAC,CAAC;;ACInS,WAAe,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,KAAK,GAAG,EAAE,EAAE,KAAK;AACnE,IAAI,IAAI,GAAG,IAAI,IAAI,WAAW,EAAE,CAAC;AACjC,IAAI,MAAM,CAAC,YAAY,EAAE,QAAQ,CAAC,GAAGC,oBAAQ,CAAC,KAAK,CAAC,CAAC;AACrD,IAAIC,qBAAS,CAAC,MAAM;AACpB,QAAQ,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;AACxD,KAAK,EAAE,EAAE,CAAC,CAAC;AACX,IAAI,QAAQF,cAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC,SAAS,EAAE,IAAI,KAAK,QAAQ,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG,GAAG,SAAS,GAAG,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,YAAY,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC,EAAE;AAChM,CAAC;;ACCD,cAAA,CAAejhB,IAAA,IAA8C;EAAA,IAA7C;IAAElS,IAAI;IAAEyjB,KAAK;IAAEE,IAAI;IAAErgB,MAAM;AAAEogB,IAAAA,EAAAA;AAAU,GAAC,GAAAxR,IAAA,CAAA;AACvD,EAAA,MAAMohB,QAAQ,GAAGC,kBAAM,EAAe,CAAA;AACtC,EAAA,MAAMC,QAAQ,GAAGD,kBAAM,EAAkB,CAAA;AACzC,EAAA,MAAMpI,WAAW,GAAGnrB,IAAI,CAACmrB,WAAW,CAAA;AACpCsI,EAAAA,2BAAe,CAAC,MAAM;IACrB,IAAIH,QAAQ,CAAC3I,OAAO,EAAE3qB,IAAI,CAACsB,GAAG,GAAGgyB,QAAQ,CAAC3I,OAAO,CAAA;AACjD3qB,IAAAA,IAAI,CAACgD,UAAU,GAAGwwB,QAAQ,CAAC7I,OAAO,CAAA;GAClC,EAAE,EAAE,CAAC,CAAA;AACN,EAAA,MAAM+I,GAAG,GAAG,CAAIjQ,CAAAA,EAAAA,KAAK,CAAE,CAAA,CAAA;EAEvB,OACCkQ,eAAA,CAACD,GAAG,EAAA;AAAC7O,IAAAA,GAAG,EAAEyO,QAAS;AAAC5P,IAAAA,EAAE,EAAEA,EAAG;AAACrL,IAAAA,SAAS,EAAE,CAAW/U,QAAAA,EAAAA,MAAM,GAAG,QAAQ,GAAG,EAAE,CAAG,CAAA;AAAAtC,IAAAA,QAAA,GAC1E2yB,eAAA,CAAA,KAAA,EAAA;AAAKtb,MAAAA,SAAS,EAAC,eAAe;AAACxU,MAAAA,eAAe,EAAC,OAAO;MAAA7C,QAAA,EAAA,CACrDmyB,cAAA,CAAC3T,aAAU,IAAE,CAAC,EACd2T,cAAA,CAACS,IAAI,EAAA;AACJvb,QAAAA,SAAS,EAAC,eAAe;AACzB7P,QAAAA,IAAI,EAAEmb,IAAI,GAAG,iBAAiB,GAAG,aAAc;QAC/CkQ,OAAO,EAAEA,MAAM;AACd,UAAA,MAAM/sB,GAAG,GAAG9G,IAAI,CAACqE,MAAM,EAAE,CAAA;AAEzB,UAAA,IAAI9D,EAAE,GAAGP,IAAI,CAACA,IAAI,CAACF,KAAK,CAACS,EAAE,CAACiU,OAAO,CAAC,eAAe,EAAE;YACpDlR,MAAM,EAAE,CAACqgB,IAAI;AACb7c,YAAAA,GAAAA;AACD,WAAC,CAAC,CAAA;AAEF,UAAA,IAAI,OAAOA,GAAG,KAAK,WAAW,EAC7BvG,EAAE,GAAGA,EAAE,CAAC4T,aAAa,CAACrN,GAAG,EAAE,IAAI,EAAE;AAChC,YAAA,GAAG9G,IAAI,CAACV,IAAI,CAACN,KAAK;AAClB2kB,YAAAA,IAAI,EAAE,CAACA,IAAAA;AACR,WAAC,CAAC,CAAA;AACH3jB,UAAAA,IAAI,CAACA,IAAI,CAACD,QAAQ,CAACQ,EAAE,CAAC,CAAA;AACvB,SAAA;AAAE,OACF,CAAC,CAAA;KACE,CAAC,EACL4qB,WAAW,IAAIA,WAAW,CAACxB,SAAS,GACpCwJ,cAAA,CAAA,MAAA,EAAA;AACC9a,MAAAA,SAAS,EAAC,aAAa;MACvB,WAAW8S,EAAAA,WAAW,CAACxB,SAAU;AACjC,MAAA,YAAA,EAAYwB,WAAW,CAACT,SAAS,CAAC1qB,IAAI,CAAC0jB,EAAE,CAAE;AAC3C7f,MAAAA,eAAe,EAAC,OAAO;AAAA7C,MAAAA,QAAA,EAEtBmqB,WAAW,CAACH,oBAAoB,CAAChrB,IAAI,CAAC0jB,EAAE,CAAA;AAAC,KACrC,CAAC,GACJ,IAAI,EACRyP,cAAA,CAAA,KAAA,EAAA;AAAKtO,MAAAA,GAAG,EAAE2O,QAAS;AAACnb,MAAAA,SAAS,EAAC,iBAAA;AAAiB,KAAM,CAAC,CAAA;AAAA,GAClD,CAAC,CAAA;AAER,CAAC;;ACpDD,MAAMyb,cAAc,GAAG,IAAIlK,GAAG,EAAuB,CAAA;AAE9C,MAAMmK,WAAW,SAASzxB,YAAY,CAAC;AAK7CE,EAAAA,WAAWA,GAA2C;AAAA,IAAA,KAAA,IAAAvB,IAAA,GAAAL,SAAA,CAAAC,MAAA,EAAvCuD,IAAI,GAAAjD,IAAAA,KAAA,CAAAF,IAAA,GAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;AAAJgD,MAAAA,IAAI,CAAAhD,IAAA,CAAAR,GAAAA,SAAA,CAAAQ,IAAA,CAAA,CAAA;AAAA,KAAA;IAClB,MAAM,CAAC9B,IAAI,EAAEU,IAAI,EAAEqE,MAAM,CAAC,GAAGD,IAAI,CAAA;AACjC,IAAA,KAAK,CAAC9E,IAAI,EAAEU,IAAI,CAAC,CAAA;IACjB,IAAI,CAACV,IAAI,GAAGA,IAAI,CAAA;IAChB,IAAI,CAAC+E,MAAM,GAAGA,MAAM,CAAA;AACpBkkB,IAAAA,cAAc,CAAC,IAAI,CAACjpB,IAAI,CAAC,CAAA;IACzB,MAAM;AAAEokB,MAAAA,EAAAA;KAAI,GAAGpkB,IAAI,CAACN,KAAK,CAAA;IACzB,IAAI,CAAC0kB,EAAE,GAAGA,EAAE,CAAA;IACZ,IAAI,CAACnhB,SAAS,GAAGyxB,OAAO,CAAA;IACxB,MAAM7I,WAAW,GAAGF,cAAc,CAAC3Q,QAAQ,CAACta,IAAI,CAACF,KAAK,CAAC,CAAA;AACvD,IAAA,MAAMgH,GAAG,GAAGzC,MAAM,EAAE,CAAA;IACpByvB,cAAc,CAAC5uB,GAAG,CAAC5F,IAAI,CAACN,KAAK,CAAC0kB,EAAE,EAAE,IAAI,CAAC,CAAA;AACvC,IAAA,IAAIyH,WAAW,IAAI,OAAOrkB,GAAG,KAAK,WAAW,EAAE;AAC9CqkB,MAAAA,WAAW,CAACpB,cAAc,CAAC,IAAI,EAAE/pB,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAC,CAAA;MAC7D,IAAI,CAACqkB,WAAW,GAAGA,WAAW,CAAA;AAC9B,MAAA,KAAK,MAAM,CAAC3pB,GAAG,EAAEyyB,QAAQ,CAAC,IAAIH,cAAc,EAAEG,QAAQ,CAACxJ,YAAY,EAAE,CAAA;AACtE,KAAA;AACD,GAAA;AAEAA,EAAAA,YAAYA,GAAG;IACd,IAAI,CAAC9nB,MAAM,CAAC;AAAE3C,MAAAA,IAAI,EAAE,IAAI;MAAE,GAAG,IAAI,CAACV,IAAI,CAACN,KAAAA;AAAM,KAAC,CAAC,CAAA;AAChD,GAAA;EAEAkE,MAAMA,CAAC5D,IAAU,EAAE;AAClBgY,IAAAA,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CAAA;IAErB,IAAIjY,IAAI,CAAC+D,IAAI,KAAK,IAAI,CAAC/D,IAAI,CAAC+D,IAAI,EAAE,OAAO,KAAK,CAAA;IAC9C,IAAI,CAAC/D,IAAI,GAAGA,IAAI,CAAA;IAChB,IAAI,CAACqD,MAAM,CAAC;AAAE3C,MAAAA,IAAI,EAAE,IAAI;AAAE,MAAA,GAAGV,IAAI,CAACN,KAAAA;AAAM,KAAC,CAAC,CAAA;AAC1C,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;AACAmZ,EAAAA,OAAOA,GAAG;AACTb,IAAAA,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC,CAAA;AACvB,GAAA;AACD,CAAA;AAEO,MAAM2c,sBAA2C,GAAG,YAAA;AAAA,EAAA,KAAA,IAAAxvB,KAAA,GAAA9D,SAAA,CAAAC,MAAA,EAAIuD,IAAI,GAAAjD,IAAAA,KAAA,CAAAuD,KAAA,GAAAC,KAAA,GAAA,CAAA,EAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA,EAAA,EAAA;AAAJP,IAAAA,IAAI,CAAAO,KAAA,CAAA/D,GAAAA,SAAA,CAAA+D,KAAA,CAAA,CAAA;AAAA,GAAA;AAAA,EAAA,OAClE,IAAIovB,WAAW,CAAC,GAAG3vB,IAAI,CAAC,CAAA;AAAA,CAAA;;ACpDzB;AA0Ba+vB,MAAAA,WAAW,GAAIC,EAAsB,IAAK;EACtD,IAAI,CAACA,EAAE,EAAE,OAAA;AAET,EAAA,MAAMhC,OAAO,GAAGD,YAAY,EAAE,CAAA;;AAE9B;AACA,EAAA,MAAMkC,WAAW,GAAGC,WAAW,CAACh0B,MAAM,CAAC;IACtCJ,MAAM;AACNq0B,IAAAA,OAAO,EAAE,CACRjH,eAAe,EAAE,EACjBkH,MAAM,CAACjG,QAAQ,CAAC,EAChBkG,OAAO,EAAE,EACTrC,OAAO,CAACtY,MAAM,EACdmN,mBAAmB,EAAE,EACrBvN,cAAc,EAAE,EAChBqI,YAAY,CAAC,EAAE,CAAC,EAChBgB,UAAU,EAAE,EACZmI,iBAAiB,CAAA;AAEnB,GAAC,CAAC,CAAA;;AAEF;AACA,EAAA,MAAMwJ,UAAU,GAAG,IAAIC,UAAU,CAACP,EAAE,EAAE;AACrCt0B,IAAAA,KAAK,EAAEu0B,WAAW;IAClBO,mBAAmBA,CAACr0B,EAAE,EAAE;MACvB,MAAM+hB,QAAQ,GAAGoS,UAAU,CAAC50B,KAAK,CAACqa,KAAK,CAAC5Z,EAAE,CAAC,CAAA;AAC3Cm0B,MAAAA,UAAU,CAACG,WAAW,CAACvS,QAAQ,CAAC,CAAA;MAChC8P,OAAO,CAAClvB,MAAM,CAACwxB,UAAU,EAAEA,UAAU,CAAC50B,KAAK,CAAC,CAAA;KAC5C;AACDma,IAAAA,SAAS,EAAE;AACV1b,MAAAA,SAAS,EAAEknB,wBAAwB;AACnC/hB,MAAAA,QAAQ,EAAEe,uBAAuB;AACjC+e,MAAAA,OAAO,EAAE0Q,sBAAAA;KACT;AACDY,IAAAA,aAAaA,CAAC90B,IAAI,EAAE8G,GAAG,EAAExH,IAAI,EAAEy1B,OAAO,EAAEnd,KAAK,EAAEod,MAAM,EAAE;MACtD,MAAMpF,QAAQ,GAAG5vB,IAAI,CAACF,KAAK,CAACI,MAAM,CAACxB,KAAK,CAACimB,IAAI,CAAA;MAC7C,MAAM/X,IAAI,GAAG5M,IAAI,CAACF,KAAK,CAAC+N,GAAG,CAACR,OAAO,CAACvG,GAAG,CAAC,CAAA;AACxC,MAAA,MAAMpI,KAAK,GAAGkO,IAAI,CAAClO,KAAK,EAAE,CAAA;AAC1B,MAAA,IAAIA,KAAK,CAAC6O,IAAI,CAAEuX,IAAI,IAAKA,IAAI,CAACzhB,IAAI,KAAKusB,QAAQ,CAAC,EAAE;AACjD,QAAA,MAAMqF,QAAQ,GAAGv2B,KAAK,CAACqyB,IAAI,CAAEjM,IAAI,IAAKA,IAAI,CAACzhB,IAAI,KAAKusB,QAAQ,CAAC,CAAA;QAC7D,MAAM;UAAEhL,IAAI;AAAE3hB,UAAAA,MAAAA;AAAO,SAAC,GAAGgyB,QAAQ,EAAEj2B,KAAK,IAAI,EAAE,CAAA;AAC9C,QAAA,IAAI4lB,IAAI,EAAE;UACT,IAAIhY,IAAI,CAACM,GAAG,EAAE,KAAKpG,GAAG,EAAE,OAAO,KAAK,CAAA;AACpC+U,UAAAA,MAAM,CAACqZ,IAAI,CAACtQ,IAAI,EAAE3hB,MAAM,CAAC,CAAA;AAC1B,SAAA;AACA,QAAA,OAAO,IAAI,CAAA;AACZ,OAAA;AACA,MAAA,OAAO,KAAK,CAAA;AACb,KAAA;AACD,GAAC,CAAC,CAAA;AAEF,EAAA,OAAO,MAAM;IACZyxB,UAAU,CAACvc,OAAO,EAAE,CAAA;IACpBia,OAAO,CAACja,OAAO,EAAE,CAAA;GACjB,CAAA;AACF;;ACjFA,YAAA,CAAe,MAAM,UAAU;;;;"}